var uI=Object.defineProperty;var cI=(t,e,n)=>e in t?uI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ce=(t,e,n)=>cI(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var mn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function A1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var I1={exports:{}},Lh={},P1={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vl=Symbol.for("react.element"),hI=Symbol.for("react.portal"),fI=Symbol.for("react.fragment"),dI=Symbol.for("react.strict_mode"),pI=Symbol.for("react.profiler"),gI=Symbol.for("react.provider"),mI=Symbol.for("react.context"),yI=Symbol.for("react.forward_ref"),vI=Symbol.for("react.suspense"),_I=Symbol.for("react.memo"),bI=Symbol.for("react.lazy"),Jv=Symbol.iterator;function wI(t){return t===null||typeof t!="object"?null:(t=Jv&&t[Jv]||t["@@iterator"],typeof t=="function"?t:null)}var O1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C1=Object.assign,R1={};function Co(t,e,n){this.props=t,this.context=e,this.refs=R1,this.updater=n||O1}Co.prototype.isReactComponent={};Co.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Co.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function N1(){}N1.prototype=Co.prototype;function zg(t,e,n){this.props=t,this.context=e,this.refs=R1,this.updater=n||O1}var Ug=zg.prototype=new N1;Ug.constructor=zg;C1(Ug,Co.prototype);Ug.isPureReactComponent=!0;var Zv=Array.isArray,D1=Object.prototype.hasOwnProperty,$g={current:null},M1={key:!0,ref:!0,__self:!0,__source:!0};function L1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)D1.call(e,r)&&!M1.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Vl,type:t,key:s,ref:o,props:i,_owner:$g.current}}function xI(t,e){return{$$typeof:Vl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vl}function EI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var e0=/\/+/g;function Yf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?EI(""+t.key):e.toString(36)}function tc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Vl:case hI:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Yf(o,0):r,Zv(i)?(n="",t!=null&&(n=t.replace(e0,"$&/")+"/"),tc(i,e,n,"",function(u){return u})):i!=null&&(qg(i)&&(i=xI(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(e0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Zv(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Yf(s,a);o+=tc(s,e,n,l,i)}else if(l=wI(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Yf(s,a++),o+=tc(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function yu(t,e,n){if(t==null)return t;var r=[],i=0;return tc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function TI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tn={current:null},nc={transition:null},kI={ReactCurrentDispatcher:tn,ReactCurrentBatchConfig:nc,ReactCurrentOwner:$g};function j1(){throw Error("act(...) is not supported in production builds of React.")}Pe.Children={map:yu,forEach:function(t,e,n){yu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return yu(t,function(){e++}),e},toArray:function(t){return yu(t,function(e){return e})||[]},only:function(t){if(!qg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Pe.Component=Co;Pe.Fragment=fI;Pe.Profiler=pI;Pe.PureComponent=zg;Pe.StrictMode=dI;Pe.Suspense=vI;Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kI;Pe.act=j1;Pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=C1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=$g.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)D1.call(e,l)&&!M1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Vl,type:t.type,key:i,ref:s,props:r,_owner:o}};Pe.createContext=function(t){return t={$$typeof:mI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:gI,_context:t},t.Consumer=t};Pe.createElement=L1;Pe.createFactory=function(t){var e=L1.bind(null,t);return e.type=t,e};Pe.createRef=function(){return{current:null}};Pe.forwardRef=function(t){return{$$typeof:yI,render:t}};Pe.isValidElement=qg;Pe.lazy=function(t){return{$$typeof:bI,_payload:{_status:-1,_result:t},_init:TI}};Pe.memo=function(t,e){return{$$typeof:_I,type:t,compare:e===void 0?null:e}};Pe.startTransition=function(t){var e=nc.transition;nc.transition={};try{t()}finally{nc.transition=e}};Pe.unstable_act=j1;Pe.useCallback=function(t,e){return tn.current.useCallback(t,e)};Pe.useContext=function(t){return tn.current.useContext(t)};Pe.useDebugValue=function(){};Pe.useDeferredValue=function(t){return tn.current.useDeferredValue(t)};Pe.useEffect=function(t,e){return tn.current.useEffect(t,e)};Pe.useId=function(){return tn.current.useId()};Pe.useImperativeHandle=function(t,e,n){return tn.current.useImperativeHandle(t,e,n)};Pe.useInsertionEffect=function(t,e){return tn.current.useInsertionEffect(t,e)};Pe.useLayoutEffect=function(t,e){return tn.current.useLayoutEffect(t,e)};Pe.useMemo=function(t,e){return tn.current.useMemo(t,e)};Pe.useReducer=function(t,e,n){return tn.current.useReducer(t,e,n)};Pe.useRef=function(t){return tn.current.useRef(t)};Pe.useState=function(t){return tn.current.useState(t)};Pe.useSyncExternalStore=function(t,e,n){return tn.current.useSyncExternalStore(t,e,n)};Pe.useTransition=function(){return tn.current.useTransition()};Pe.version="18.3.1";P1.exports=Pe;var oe=P1.exports;const et=A1(oe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SI=oe,AI=Symbol.for("react.element"),II=Symbol.for("react.fragment"),PI=Object.prototype.hasOwnProperty,OI=SI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CI={key:!0,ref:!0,__self:!0,__source:!0};function V1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)PI.call(e,r)&&!CI.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:AI,type:t,key:s,ref:o,props:i,_owner:OI.current}}Lh.Fragment=II;Lh.jsx=V1;Lh.jsxs=V1;I1.exports=Lh;var D=I1.exports,np={},F1={exports:{}},wn={},B1={exports:{}},z1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,U){var B=W.length;W.push(U);e:for(;0<B;){var N=B-1>>>1,V=W[N];if(0<i(V,U))W[N]=U,W[B]=V,B=N;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var U=W[0],B=W.pop();if(B!==U){W[0]=B;e:for(var N=0,V=W.length,z=V>>>1;N<z;){var G=2*(N+1)-1,K=W[G],j=G+1,H=W[j];if(0>i(K,B))j<V&&0>i(H,K)?(W[N]=H,W[j]=B,N=j):(W[N]=K,W[G]=B,N=G);else if(j<V&&0>i(H,B))W[N]=H,W[j]=B,N=j;else break e}}return U}function i(W,U){var B=W.sortIndex-U.sortIndex;return B!==0?B:W.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,f=3,d=!1,y=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(W){for(var U=n(u);U!==null;){if(U.callback===null)r(u);else if(U.startTime<=W)r(u),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(u)}}function b(W){if(v=!1,w(W),!y)if(n(l)!==null)y=!0,$(T);else{var U=n(u);U!==null&&q(b,U.startTime-W)}}function T(W,U){y=!1,v&&(v=!1,g(x),x=-1),d=!0;var B=f;try{for(w(U),h=n(l);h!==null&&(!(h.expirationTime>U)||W&&!E());){var N=h.callback;if(typeof N=="function"){h.callback=null,f=h.priorityLevel;var V=N(h.expirationTime<=U);U=t.unstable_now(),typeof V=="function"?h.callback=V:h===n(l)&&r(l),w(U)}else r(l);h=n(l)}if(h!==null)var z=!0;else{var G=n(u);G!==null&&q(b,G.startTime-U),z=!1}return z}finally{h=null,f=B,d=!1}}var C=!1,k=null,x=-1,P=5,S=-1;function E(){return!(t.unstable_now()-S<P)}function A(){if(k!==null){var W=t.unstable_now();S=W;var U=!0;try{U=k(!0,W)}finally{U?O():(C=!1,k=null)}}else C=!1}var O;if(typeof m=="function")O=function(){m(A)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,F=M.port2;M.port1.onmessage=A,O=function(){F.postMessage(null)}}else O=function(){_(A,0)};function $(W){k=W,C||(C=!0,O())}function q(W,U){x=_(function(){W(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){y||d||(y=!0,$(T))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(W){switch(f){case 1:case 2:case 3:var U=3;break;default:U=f}var B=f;f=U;try{return W()}finally{f=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,U){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var B=f;f=W;try{return U()}finally{f=B}},t.unstable_scheduleCallback=function(W,U,B){var N=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?N+B:N):B=N,W){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=B+V,W={id:c++,callback:U,priorityLevel:W,startTime:B,expirationTime:V,sortIndex:-1},B>N?(W.sortIndex=B,e(u,W),n(l)===null&&W===n(u)&&(v?(g(x),x=-1):v=!0,q(b,B-N))):(W.sortIndex=V,e(l,W),y||d||(y=!0,$(T))),W},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(W){var U=f;return function(){var B=f;f=U;try{return W.apply(this,arguments)}finally{f=B}}}})(z1);B1.exports=z1;var RI=B1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NI=oe,bn=RI;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var U1=new Set,al={};function Ss(t,e){fo(t,e),fo(t+"Capture",e)}function fo(t,e){for(al[t]=e,t=0;t<e.length;t++)U1.add(e[t])}var jr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rp=Object.prototype.hasOwnProperty,DI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,t0={},n0={};function MI(t){return rp.call(n0,t)?!0:rp.call(t0,t)?!1:DI.test(t)?n0[t]=!0:(t0[t]=!0,!1)}function LI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function jI(t,e,n,r){if(e===null||typeof e>"u"||LI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Mt[t]=new nn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Mt[e]=new nn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Mt[t]=new nn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Mt[t]=new nn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Mt[t]=new nn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Mt[t]=new nn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Mt[t]=new nn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Mt[t]=new nn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Mt[t]=new nn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Hg=/[\-:]([a-z])/g;function Wg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Hg,Wg);Mt[e]=new nn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Hg,Wg);Mt[e]=new nn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Hg,Wg);Mt[e]=new nn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Mt[t]=new nn(t,1,!1,t.toLowerCase(),null,!1,!1)});Mt.xlinkHref=new nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Mt[t]=new nn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Kg(t,e,n,r){var i=Mt.hasOwnProperty(e)?Mt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(jI(e,n,i,r)&&(n=null),r||i===null?MI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Hr=NI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vu=Symbol.for("react.element"),Us=Symbol.for("react.portal"),$s=Symbol.for("react.fragment"),Gg=Symbol.for("react.strict_mode"),ip=Symbol.for("react.profiler"),$1=Symbol.for("react.provider"),q1=Symbol.for("react.context"),Yg=Symbol.for("react.forward_ref"),sp=Symbol.for("react.suspense"),op=Symbol.for("react.suspense_list"),Qg=Symbol.for("react.memo"),Zr=Symbol.for("react.lazy"),H1=Symbol.for("react.offscreen"),r0=Symbol.iterator;function ua(t){return t===null||typeof t!="object"?null:(t=r0&&t[r0]||t["@@iterator"],typeof t=="function"?t:null)}var lt=Object.assign,Qf;function ka(t){if(Qf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Qf=e&&e[1]||""}return`
`+Qf+t}var Xf=!1;function Jf(t,e){if(!t||Xf)return"";Xf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Xf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ka(t):""}function VI(t){switch(t.tag){case 5:return ka(t.type);case 16:return ka("Lazy");case 13:return ka("Suspense");case 19:return ka("SuspenseList");case 0:case 2:case 15:return t=Jf(t.type,!1),t;case 11:return t=Jf(t.type.render,!1),t;case 1:return t=Jf(t.type,!0),t;default:return""}}function ap(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $s:return"Fragment";case Us:return"Portal";case ip:return"Profiler";case Gg:return"StrictMode";case sp:return"Suspense";case op:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case q1:return(t.displayName||"Context")+".Consumer";case $1:return(t._context.displayName||"Context")+".Provider";case Yg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Qg:return e=t.displayName||null,e!==null?e:ap(t.type)||"Memo";case Zr:e=t._payload,t=t._init;try{return ap(t(e))}catch{}}return null}function FI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ap(e);case 8:return e===Gg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ti(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function W1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function BI(t){var e=W1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _u(t){t._valueTracker||(t._valueTracker=BI(t))}function K1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=W1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Nc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function lp(t,e){var n=e.checked;return lt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function i0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ti(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function G1(t,e){e=e.checked,e!=null&&Kg(t,"checked",e,!1)}function up(t,e){G1(t,e);var n=Ti(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?cp(t,e.type,n):e.hasOwnProperty("defaultValue")&&cp(t,e.type,Ti(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function s0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function cp(t,e,n){(e!=="number"||Nc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Sa=Array.isArray;function to(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ti(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function hp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return lt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function o0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ae(92));if(Sa(n)){if(1<n.length)throw Error(ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ti(n)}}function Y1(t,e){var n=Ti(e.value),r=Ti(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function a0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Q1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Q1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var bu,X1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(bu=bu||document.createElement("div"),bu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ll(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Fa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zI=["Webkit","ms","Moz","O"];Object.keys(Fa).forEach(function(t){zI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Fa[e]=Fa[t]})});function J1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Fa.hasOwnProperty(t)&&Fa[t]?(""+e).trim():e+"px"}function Z1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=J1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var UI=lt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dp(t,e){if(e){if(UI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function pp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gp=null;function Xg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var mp=null,no=null,ro=null;function l0(t){if(t=zl(t)){if(typeof mp!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=zh(e),mp(t.stateNode,t.type,e))}}function ex(t){no?ro?ro.push(t):ro=[t]:no=t}function tx(){if(no){var t=no,e=ro;if(ro=no=null,l0(t),e)for(t=0;t<e.length;t++)l0(e[t])}}function nx(t,e){return t(e)}function rx(){}var Zf=!1;function ix(t,e,n){if(Zf)return t(e,n);Zf=!0;try{return nx(t,e,n)}finally{Zf=!1,(no!==null||ro!==null)&&(rx(),tx())}}function ul(t,e){var n=t.stateNode;if(n===null)return null;var r=zh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ae(231,e,typeof n));return n}var yp=!1;if(jr)try{var ca={};Object.defineProperty(ca,"passive",{get:function(){yp=!0}}),window.addEventListener("test",ca,ca),window.removeEventListener("test",ca,ca)}catch{yp=!1}function $I(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Ba=!1,Dc=null,Mc=!1,vp=null,qI={onError:function(t){Ba=!0,Dc=t}};function HI(t,e,n,r,i,s,o,a,l){Ba=!1,Dc=null,$I.apply(qI,arguments)}function WI(t,e,n,r,i,s,o,a,l){if(HI.apply(this,arguments),Ba){if(Ba){var u=Dc;Ba=!1,Dc=null}else throw Error(ae(198));Mc||(Mc=!0,vp=u)}}function As(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function sx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function u0(t){if(As(t)!==t)throw Error(ae(188))}function KI(t){var e=t.alternate;if(!e){if(e=As(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return u0(i),t;if(s===r)return u0(i),e;s=s.sibling}throw Error(ae(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(ae(189))}}if(n.alternate!==r)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?t:e}function ox(t){return t=KI(t),t!==null?ax(t):null}function ax(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ax(t);if(e!==null)return e;t=t.sibling}return null}var lx=bn.unstable_scheduleCallback,c0=bn.unstable_cancelCallback,GI=bn.unstable_shouldYield,YI=bn.unstable_requestPaint,pt=bn.unstable_now,QI=bn.unstable_getCurrentPriorityLevel,Jg=bn.unstable_ImmediatePriority,ux=bn.unstable_UserBlockingPriority,Lc=bn.unstable_NormalPriority,XI=bn.unstable_LowPriority,cx=bn.unstable_IdlePriority,jh=null,sr=null;function JI(t){if(sr&&typeof sr.onCommitFiberRoot=="function")try{sr.onCommitFiberRoot(jh,t,void 0,(t.current.flags&128)===128)}catch{}}var $n=Math.clz32?Math.clz32:t2,ZI=Math.log,e2=Math.LN2;function t2(t){return t>>>=0,t===0?32:31-(ZI(t)/e2|0)|0}var wu=64,xu=4194304;function Aa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function jc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Aa(a):(s&=o,s!==0&&(r=Aa(s)))}else o=n&~i,o!==0?r=Aa(o):s!==0&&(r=Aa(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-$n(e),i=1<<n,r|=t[n],e&=~i;return r}function n2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function r2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-$n(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=n2(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function _p(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function hx(){var t=wu;return wu<<=1,!(wu&4194240)&&(wu=64),t}function ed(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Fl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-$n(e),t[e]=n}function i2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-$n(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Zg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-$n(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ue=0;function fx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var dx,em,px,gx,mx,bp=!1,Eu=[],di=null,pi=null,gi=null,cl=new Map,hl=new Map,ni=[],s2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function h0(t,e){switch(t){case"focusin":case"focusout":di=null;break;case"dragenter":case"dragleave":pi=null;break;case"mouseover":case"mouseout":gi=null;break;case"pointerover":case"pointerout":cl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":hl.delete(e.pointerId)}}function ha(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=zl(e),e!==null&&em(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function o2(t,e,n,r,i){switch(e){case"focusin":return di=ha(di,t,e,n,r,i),!0;case"dragenter":return pi=ha(pi,t,e,n,r,i),!0;case"mouseover":return gi=ha(gi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return cl.set(s,ha(cl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,hl.set(s,ha(hl.get(s)||null,t,e,n,r,i)),!0}return!1}function yx(t){var e=Xi(t.target);if(e!==null){var n=As(e);if(n!==null){if(e=n.tag,e===13){if(e=sx(n),e!==null){t.blockedOn=e,mx(t.priority,function(){px(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function rc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=wp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);gp=r,n.target.dispatchEvent(r),gp=null}else return e=zl(n),e!==null&&em(e),t.blockedOn=n,!1;e.shift()}return!0}function f0(t,e,n){rc(t)&&n.delete(e)}function a2(){bp=!1,di!==null&&rc(di)&&(di=null),pi!==null&&rc(pi)&&(pi=null),gi!==null&&rc(gi)&&(gi=null),cl.forEach(f0),hl.forEach(f0)}function fa(t,e){t.blockedOn===e&&(t.blockedOn=null,bp||(bp=!0,bn.unstable_scheduleCallback(bn.unstable_NormalPriority,a2)))}function fl(t){function e(i){return fa(i,t)}if(0<Eu.length){fa(Eu[0],t);for(var n=1;n<Eu.length;n++){var r=Eu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(di!==null&&fa(di,t),pi!==null&&fa(pi,t),gi!==null&&fa(gi,t),cl.forEach(e),hl.forEach(e),n=0;n<ni.length;n++)r=ni[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ni.length&&(n=ni[0],n.blockedOn===null);)yx(n),n.blockedOn===null&&ni.shift()}var io=Hr.ReactCurrentBatchConfig,Vc=!0;function l2(t,e,n,r){var i=Ue,s=io.transition;io.transition=null;try{Ue=1,tm(t,e,n,r)}finally{Ue=i,io.transition=s}}function u2(t,e,n,r){var i=Ue,s=io.transition;io.transition=null;try{Ue=4,tm(t,e,n,r)}finally{Ue=i,io.transition=s}}function tm(t,e,n,r){if(Vc){var i=wp(t,e,n,r);if(i===null)cd(t,e,r,Fc,n),h0(t,r);else if(o2(i,t,e,n,r))r.stopPropagation();else if(h0(t,r),e&4&&-1<s2.indexOf(t)){for(;i!==null;){var s=zl(i);if(s!==null&&dx(s),s=wp(t,e,n,r),s===null&&cd(t,e,r,Fc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else cd(t,e,r,null,n)}}var Fc=null;function wp(t,e,n,r){if(Fc=null,t=Xg(r),t=Xi(t),t!==null)if(e=As(t),e===null)t=null;else if(n=e.tag,n===13){if(t=sx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Fc=t,null}function vx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(QI()){case Jg:return 1;case ux:return 4;case Lc:case XI:return 16;case cx:return 536870912;default:return 16}default:return 16}}var ai=null,nm=null,ic=null;function _x(){if(ic)return ic;var t,e=nm,n=e.length,r,i="value"in ai?ai.value:ai.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return ic=i.slice(t,1<r?1-r:void 0)}function sc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Tu(){return!0}function d0(){return!1}function xn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Tu:d0,this.isPropagationStopped=d0,this}return lt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Tu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Tu)},persist:function(){},isPersistent:Tu}),e}var Ro={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rm=xn(Ro),Bl=lt({},Ro,{view:0,detail:0}),c2=xn(Bl),td,nd,da,Vh=lt({},Bl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:im,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==da&&(da&&t.type==="mousemove"?(td=t.screenX-da.screenX,nd=t.screenY-da.screenY):nd=td=0,da=t),td)},movementY:function(t){return"movementY"in t?t.movementY:nd}}),p0=xn(Vh),h2=lt({},Vh,{dataTransfer:0}),f2=xn(h2),d2=lt({},Bl,{relatedTarget:0}),rd=xn(d2),p2=lt({},Ro,{animationName:0,elapsedTime:0,pseudoElement:0}),g2=xn(p2),m2=lt({},Ro,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),y2=xn(m2),v2=lt({},Ro,{data:0}),g0=xn(v2),_2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},b2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},w2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function x2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=w2[t])?!!e[t]:!1}function im(){return x2}var E2=lt({},Bl,{key:function(t){if(t.key){var e=_2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=sc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?b2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:im,charCode:function(t){return t.type==="keypress"?sc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?sc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),T2=xn(E2),k2=lt({},Vh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),m0=xn(k2),S2=lt({},Bl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:im}),A2=xn(S2),I2=lt({},Ro,{propertyName:0,elapsedTime:0,pseudoElement:0}),P2=xn(I2),O2=lt({},Vh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),C2=xn(O2),R2=[9,13,27,32],sm=jr&&"CompositionEvent"in window,za=null;jr&&"documentMode"in document&&(za=document.documentMode);var N2=jr&&"TextEvent"in window&&!za,bx=jr&&(!sm||za&&8<za&&11>=za),y0=" ",v0=!1;function wx(t,e){switch(t){case"keyup":return R2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qs=!1;function D2(t,e){switch(t){case"compositionend":return xx(e);case"keypress":return e.which!==32?null:(v0=!0,y0);case"textInput":return t=e.data,t===y0&&v0?null:t;default:return null}}function M2(t,e){if(qs)return t==="compositionend"||!sm&&wx(t,e)?(t=_x(),ic=nm=ai=null,qs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return bx&&e.locale!=="ko"?null:e.data;default:return null}}var L2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!L2[t.type]:e==="textarea"}function Ex(t,e,n,r){ex(r),e=Bc(e,"onChange"),0<e.length&&(n=new rm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ua=null,dl=null;function j2(t){Dx(t,0)}function Fh(t){var e=Ks(t);if(K1(e))return t}function V2(t,e){if(t==="change")return e}var Tx=!1;if(jr){var id;if(jr){var sd="oninput"in document;if(!sd){var b0=document.createElement("div");b0.setAttribute("oninput","return;"),sd=typeof b0.oninput=="function"}id=sd}else id=!1;Tx=id&&(!document.documentMode||9<document.documentMode)}function w0(){Ua&&(Ua.detachEvent("onpropertychange",kx),dl=Ua=null)}function kx(t){if(t.propertyName==="value"&&Fh(dl)){var e=[];Ex(e,dl,t,Xg(t)),ix(j2,e)}}function F2(t,e,n){t==="focusin"?(w0(),Ua=e,dl=n,Ua.attachEvent("onpropertychange",kx)):t==="focusout"&&w0()}function B2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fh(dl)}function z2(t,e){if(t==="click")return Fh(e)}function U2(t,e){if(t==="input"||t==="change")return Fh(e)}function $2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wn=typeof Object.is=="function"?Object.is:$2;function pl(t,e){if(Wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!rp.call(e,i)||!Wn(t[i],e[i]))return!1}return!0}function x0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function E0(t,e){var n=x0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=x0(n)}}function Sx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Sx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ax(){for(var t=window,e=Nc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Nc(t.document)}return e}function om(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function q2(t){var e=Ax(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Sx(n.ownerDocument.documentElement,n)){if(r!==null&&om(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=E0(n,s);var o=E0(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var H2=jr&&"documentMode"in document&&11>=document.documentMode,Hs=null,xp=null,$a=null,Ep=!1;function T0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ep||Hs==null||Hs!==Nc(r)||(r=Hs,"selectionStart"in r&&om(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$a&&pl($a,r)||($a=r,r=Bc(xp,"onSelect"),0<r.length&&(e=new rm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Hs)))}function ku(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ws={animationend:ku("Animation","AnimationEnd"),animationiteration:ku("Animation","AnimationIteration"),animationstart:ku("Animation","AnimationStart"),transitionend:ku("Transition","TransitionEnd")},od={},Ix={};jr&&(Ix=document.createElement("div").style,"AnimationEvent"in window||(delete Ws.animationend.animation,delete Ws.animationiteration.animation,delete Ws.animationstart.animation),"TransitionEvent"in window||delete Ws.transitionend.transition);function Bh(t){if(od[t])return od[t];if(!Ws[t])return t;var e=Ws[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ix)return od[t]=e[n];return t}var Px=Bh("animationend"),Ox=Bh("animationiteration"),Cx=Bh("animationstart"),Rx=Bh("transitionend"),Nx=new Map,k0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ri(t,e){Nx.set(t,e),Ss(e,[t])}for(var ad=0;ad<k0.length;ad++){var ld=k0[ad],W2=ld.toLowerCase(),K2=ld[0].toUpperCase()+ld.slice(1);Ri(W2,"on"+K2)}Ri(Px,"onAnimationEnd");Ri(Ox,"onAnimationIteration");Ri(Cx,"onAnimationStart");Ri("dblclick","onDoubleClick");Ri("focusin","onFocus");Ri("focusout","onBlur");Ri(Rx,"onTransitionEnd");fo("onMouseEnter",["mouseout","mouseover"]);fo("onMouseLeave",["mouseout","mouseover"]);fo("onPointerEnter",["pointerout","pointerover"]);fo("onPointerLeave",["pointerout","pointerover"]);Ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ss("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),G2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ia));function S0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,WI(r,e,void 0,t),t.currentTarget=null}function Dx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;S0(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;S0(i,a,u),s=l}}}if(Mc)throw t=vp,Mc=!1,vp=null,t}function Qe(t,e){var n=e[Ip];n===void 0&&(n=e[Ip]=new Set);var r=t+"__bubble";n.has(r)||(Mx(e,t,2,!1),n.add(r))}function ud(t,e,n){var r=0;e&&(r|=4),Mx(n,t,r,e)}var Su="_reactListening"+Math.random().toString(36).slice(2);function gl(t){if(!t[Su]){t[Su]=!0,U1.forEach(function(n){n!=="selectionchange"&&(G2.has(n)||ud(n,!1,t),ud(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Su]||(e[Su]=!0,ud("selectionchange",!1,e))}}function Mx(t,e,n,r){switch(vx(e)){case 1:var i=l2;break;case 4:i=u2;break;default:i=tm}n=i.bind(null,e,n,t),i=void 0,!yp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function cd(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Xi(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}ix(function(){var u=s,c=Xg(n),h=[];e:{var f=Nx.get(t);if(f!==void 0){var d=rm,y=t;switch(t){case"keypress":if(sc(n)===0)break e;case"keydown":case"keyup":d=T2;break;case"focusin":y="focus",d=rd;break;case"focusout":y="blur",d=rd;break;case"beforeblur":case"afterblur":d=rd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=p0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=f2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=A2;break;case Px:case Ox:case Cx:d=g2;break;case Rx:d=P2;break;case"scroll":d=c2;break;case"wheel":d=C2;break;case"copy":case"cut":case"paste":d=y2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=m0}var v=(e&4)!==0,_=!v&&t==="scroll",g=v?f!==null?f+"Capture":null:f;v=[];for(var m=u,w;m!==null;){w=m;var b=w.stateNode;if(w.tag===5&&b!==null&&(w=b,g!==null&&(b=ul(m,g),b!=null&&v.push(ml(m,b,w)))),_)break;m=m.return}0<v.length&&(f=new d(f,y,null,n,c),h.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",f&&n!==gp&&(y=n.relatedTarget||n.fromElement)&&(Xi(y)||y[Vr]))break e;if((d||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,d?(y=n.relatedTarget||n.toElement,d=u,y=y?Xi(y):null,y!==null&&(_=As(y),y!==_||y.tag!==5&&y.tag!==6)&&(y=null)):(d=null,y=u),d!==y)){if(v=p0,b="onMouseLeave",g="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(v=m0,b="onPointerLeave",g="onPointerEnter",m="pointer"),_=d==null?f:Ks(d),w=y==null?f:Ks(y),f=new v(b,m+"leave",d,n,c),f.target=_,f.relatedTarget=w,b=null,Xi(c)===u&&(v=new v(g,m+"enter",y,n,c),v.target=w,v.relatedTarget=_,b=v),_=b,d&&y)t:{for(v=d,g=y,m=0,w=v;w;w=Ls(w))m++;for(w=0,b=g;b;b=Ls(b))w++;for(;0<m-w;)v=Ls(v),m--;for(;0<w-m;)g=Ls(g),w--;for(;m--;){if(v===g||g!==null&&v===g.alternate)break t;v=Ls(v),g=Ls(g)}v=null}else v=null;d!==null&&A0(h,f,d,v,!1),y!==null&&_!==null&&A0(h,_,y,v,!0)}}e:{if(f=u?Ks(u):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var T=V2;else if(_0(f))if(Tx)T=U2;else{T=B2;var C=F2}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=z2);if(T&&(T=T(t,u))){Ex(h,T,n,c);break e}C&&C(t,f,u),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&cp(f,"number",f.value)}switch(C=u?Ks(u):window,t){case"focusin":(_0(C)||C.contentEditable==="true")&&(Hs=C,xp=u,$a=null);break;case"focusout":$a=xp=Hs=null;break;case"mousedown":Ep=!0;break;case"contextmenu":case"mouseup":case"dragend":Ep=!1,T0(h,n,c);break;case"selectionchange":if(H2)break;case"keydown":case"keyup":T0(h,n,c)}var k;if(sm)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else qs?wx(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(bx&&n.locale!=="ko"&&(qs||x!=="onCompositionStart"?x==="onCompositionEnd"&&qs&&(k=_x()):(ai=c,nm="value"in ai?ai.value:ai.textContent,qs=!0)),C=Bc(u,x),0<C.length&&(x=new g0(x,t,null,n,c),h.push({event:x,listeners:C}),k?x.data=k:(k=xx(n),k!==null&&(x.data=k)))),(k=N2?D2(t,n):M2(t,n))&&(u=Bc(u,"onBeforeInput"),0<u.length&&(c=new g0("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=k))}Dx(h,e)})}function ml(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Bc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ul(t,n),s!=null&&r.unshift(ml(t,s,i)),s=ul(t,e),s!=null&&r.push(ml(t,s,i))),t=t.return}return r}function Ls(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function A0(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=ul(n,s),l!=null&&o.unshift(ml(n,l,a))):i||(l=ul(n,s),l!=null&&o.push(ml(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Y2=/\r\n?/g,Q2=/\u0000|\uFFFD/g;function I0(t){return(typeof t=="string"?t:""+t).replace(Y2,`
`).replace(Q2,"")}function Au(t,e,n){if(e=I0(e),I0(t)!==e&&n)throw Error(ae(425))}function zc(){}var Tp=null,kp=null;function Sp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ap=typeof setTimeout=="function"?setTimeout:void 0,X2=typeof clearTimeout=="function"?clearTimeout:void 0,P0=typeof Promise=="function"?Promise:void 0,J2=typeof queueMicrotask=="function"?queueMicrotask:typeof P0<"u"?function(t){return P0.resolve(null).then(t).catch(Z2)}:Ap;function Z2(t){setTimeout(function(){throw t})}function hd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),fl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);fl(e)}function mi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function O0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var No=Math.random().toString(36).slice(2),ir="__reactFiber$"+No,yl="__reactProps$"+No,Vr="__reactContainer$"+No,Ip="__reactEvents$"+No,eP="__reactListeners$"+No,tP="__reactHandles$"+No;function Xi(t){var e=t[ir];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Vr]||n[ir]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=O0(t);t!==null;){if(n=t[ir])return n;t=O0(t)}return e}t=n,n=t.parentNode}return null}function zl(t){return t=t[ir]||t[Vr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ks(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function zh(t){return t[yl]||null}var Pp=[],Gs=-1;function Ni(t){return{current:t}}function Je(t){0>Gs||(t.current=Pp[Gs],Pp[Gs]=null,Gs--)}function Ke(t,e){Gs++,Pp[Gs]=t.current,t.current=e}var ki={},Wt=Ni(ki),ln=Ni(!1),cs=ki;function po(t,e){var n=t.type.contextTypes;if(!n)return ki;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function un(t){return t=t.childContextTypes,t!=null}function Uc(){Je(ln),Je(Wt)}function C0(t,e,n){if(Wt.current!==ki)throw Error(ae(168));Ke(Wt,e),Ke(ln,n)}function Lx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ae(108,FI(t)||"Unknown",i));return lt({},n,r)}function $c(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ki,cs=Wt.current,Ke(Wt,t),Ke(ln,ln.current),!0}function R0(t,e,n){var r=t.stateNode;if(!r)throw Error(ae(169));n?(t=Lx(t,e,cs),r.__reactInternalMemoizedMergedChildContext=t,Je(ln),Je(Wt),Ke(Wt,t)):Je(ln),Ke(ln,n)}var Er=null,Uh=!1,fd=!1;function jx(t){Er===null?Er=[t]:Er.push(t)}function nP(t){Uh=!0,jx(t)}function Di(){if(!fd&&Er!==null){fd=!0;var t=0,e=Ue;try{var n=Er;for(Ue=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Er=null,Uh=!1}catch(i){throw Er!==null&&(Er=Er.slice(t+1)),lx(Jg,Di),i}finally{Ue=e,fd=!1}}return null}var Ys=[],Qs=0,qc=null,Hc=0,Tn=[],kn=0,hs=null,Sr=1,Ar="";function Hi(t,e){Ys[Qs++]=Hc,Ys[Qs++]=qc,qc=t,Hc=e}function Vx(t,e,n){Tn[kn++]=Sr,Tn[kn++]=Ar,Tn[kn++]=hs,hs=t;var r=Sr;t=Ar;var i=32-$n(r)-1;r&=~(1<<i),n+=1;var s=32-$n(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Sr=1<<32-$n(e)+i|n<<i|r,Ar=s+t}else Sr=1<<s|n<<i|r,Ar=t}function am(t){t.return!==null&&(Hi(t,1),Vx(t,1,0))}function lm(t){for(;t===qc;)qc=Ys[--Qs],Ys[Qs]=null,Hc=Ys[--Qs],Ys[Qs]=null;for(;t===hs;)hs=Tn[--kn],Tn[kn]=null,Ar=Tn[--kn],Tn[kn]=null,Sr=Tn[--kn],Tn[kn]=null}var vn=null,yn=null,tt=!1,Bn=null;function Fx(t,e){var n=An(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function N0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vn=t,yn=mi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vn=t,yn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=hs!==null?{id:Sr,overflow:Ar}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=An(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,vn=t,yn=null,!0):!1;default:return!1}}function Op(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Cp(t){if(tt){var e=yn;if(e){var n=e;if(!N0(t,e)){if(Op(t))throw Error(ae(418));e=mi(n.nextSibling);var r=vn;e&&N0(t,e)?Fx(r,n):(t.flags=t.flags&-4097|2,tt=!1,vn=t)}}else{if(Op(t))throw Error(ae(418));t.flags=t.flags&-4097|2,tt=!1,vn=t}}}function D0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vn=t}function Iu(t){if(t!==vn)return!1;if(!tt)return D0(t),tt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Sp(t.type,t.memoizedProps)),e&&(e=yn)){if(Op(t))throw Bx(),Error(ae(418));for(;e;)Fx(t,e),e=mi(e.nextSibling)}if(D0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){yn=mi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}yn=null}}else yn=vn?mi(t.stateNode.nextSibling):null;return!0}function Bx(){for(var t=yn;t;)t=mi(t.nextSibling)}function go(){yn=vn=null,tt=!1}function um(t){Bn===null?Bn=[t]:Bn.push(t)}var rP=Hr.ReactCurrentBatchConfig;function pa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var r=n.stateNode}if(!r)throw Error(ae(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,t))}return t}function Pu(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function M0(t){var e=t._init;return e(t._payload)}function zx(t){function e(g,m){if(t){var w=g.deletions;w===null?(g.deletions=[m],g.flags|=16):w.push(m)}}function n(g,m){if(!t)return null;for(;m!==null;)e(g,m),m=m.sibling;return null}function r(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function i(g,m){return g=bi(g,m),g.index=0,g.sibling=null,g}function s(g,m,w){return g.index=w,t?(w=g.alternate,w!==null?(w=w.index,w<m?(g.flags|=2,m):w):(g.flags|=2,m)):(g.flags|=1048576,m)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,m,w,b){return m===null||m.tag!==6?(m=_d(w,g.mode,b),m.return=g,m):(m=i(m,w),m.return=g,m)}function l(g,m,w,b){var T=w.type;return T===$s?c(g,m,w.props.children,b,w.key):m!==null&&(m.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Zr&&M0(T)===m.type)?(b=i(m,w.props),b.ref=pa(g,m,w),b.return=g,b):(b=fc(w.type,w.key,w.props,null,g.mode,b),b.ref=pa(g,m,w),b.return=g,b)}function u(g,m,w,b){return m===null||m.tag!==4||m.stateNode.containerInfo!==w.containerInfo||m.stateNode.implementation!==w.implementation?(m=bd(w,g.mode,b),m.return=g,m):(m=i(m,w.children||[]),m.return=g,m)}function c(g,m,w,b,T){return m===null||m.tag!==7?(m=ss(w,g.mode,b,T),m.return=g,m):(m=i(m,w),m.return=g,m)}function h(g,m,w){if(typeof m=="string"&&m!==""||typeof m=="number")return m=_d(""+m,g.mode,w),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case vu:return w=fc(m.type,m.key,m.props,null,g.mode,w),w.ref=pa(g,null,m),w.return=g,w;case Us:return m=bd(m,g.mode,w),m.return=g,m;case Zr:var b=m._init;return h(g,b(m._payload),w)}if(Sa(m)||ua(m))return m=ss(m,g.mode,w,null),m.return=g,m;Pu(g,m)}return null}function f(g,m,w,b){var T=m!==null?m.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return T!==null?null:a(g,m,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case vu:return w.key===T?l(g,m,w,b):null;case Us:return w.key===T?u(g,m,w,b):null;case Zr:return T=w._init,f(g,m,T(w._payload),b)}if(Sa(w)||ua(w))return T!==null?null:c(g,m,w,b,null);Pu(g,w)}return null}function d(g,m,w,b,T){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(w)||null,a(m,g,""+b,T);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case vu:return g=g.get(b.key===null?w:b.key)||null,l(m,g,b,T);case Us:return g=g.get(b.key===null?w:b.key)||null,u(m,g,b,T);case Zr:var C=b._init;return d(g,m,w,C(b._payload),T)}if(Sa(b)||ua(b))return g=g.get(w)||null,c(m,g,b,T,null);Pu(m,b)}return null}function y(g,m,w,b){for(var T=null,C=null,k=m,x=m=0,P=null;k!==null&&x<w.length;x++){k.index>x?(P=k,k=null):P=k.sibling;var S=f(g,k,w[x],b);if(S===null){k===null&&(k=P);break}t&&k&&S.alternate===null&&e(g,k),m=s(S,m,x),C===null?T=S:C.sibling=S,C=S,k=P}if(x===w.length)return n(g,k),tt&&Hi(g,x),T;if(k===null){for(;x<w.length;x++)k=h(g,w[x],b),k!==null&&(m=s(k,m,x),C===null?T=k:C.sibling=k,C=k);return tt&&Hi(g,x),T}for(k=r(g,k);x<w.length;x++)P=d(k,g,x,w[x],b),P!==null&&(t&&P.alternate!==null&&k.delete(P.key===null?x:P.key),m=s(P,m,x),C===null?T=P:C.sibling=P,C=P);return t&&k.forEach(function(E){return e(g,E)}),tt&&Hi(g,x),T}function v(g,m,w,b){var T=ua(w);if(typeof T!="function")throw Error(ae(150));if(w=T.call(w),w==null)throw Error(ae(151));for(var C=T=null,k=m,x=m=0,P=null,S=w.next();k!==null&&!S.done;x++,S=w.next()){k.index>x?(P=k,k=null):P=k.sibling;var E=f(g,k,S.value,b);if(E===null){k===null&&(k=P);break}t&&k&&E.alternate===null&&e(g,k),m=s(E,m,x),C===null?T=E:C.sibling=E,C=E,k=P}if(S.done)return n(g,k),tt&&Hi(g,x),T;if(k===null){for(;!S.done;x++,S=w.next())S=h(g,S.value,b),S!==null&&(m=s(S,m,x),C===null?T=S:C.sibling=S,C=S);return tt&&Hi(g,x),T}for(k=r(g,k);!S.done;x++,S=w.next())S=d(k,g,x,S.value,b),S!==null&&(t&&S.alternate!==null&&k.delete(S.key===null?x:S.key),m=s(S,m,x),C===null?T=S:C.sibling=S,C=S);return t&&k.forEach(function(A){return e(g,A)}),tt&&Hi(g,x),T}function _(g,m,w,b){if(typeof w=="object"&&w!==null&&w.type===$s&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case vu:e:{for(var T=w.key,C=m;C!==null;){if(C.key===T){if(T=w.type,T===$s){if(C.tag===7){n(g,C.sibling),m=i(C,w.props.children),m.return=g,g=m;break e}}else if(C.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Zr&&M0(T)===C.type){n(g,C.sibling),m=i(C,w.props),m.ref=pa(g,C,w),m.return=g,g=m;break e}n(g,C);break}else e(g,C);C=C.sibling}w.type===$s?(m=ss(w.props.children,g.mode,b,w.key),m.return=g,g=m):(b=fc(w.type,w.key,w.props,null,g.mode,b),b.ref=pa(g,m,w),b.return=g,g=b)}return o(g);case Us:e:{for(C=w.key;m!==null;){if(m.key===C)if(m.tag===4&&m.stateNode.containerInfo===w.containerInfo&&m.stateNode.implementation===w.implementation){n(g,m.sibling),m=i(m,w.children||[]),m.return=g,g=m;break e}else{n(g,m);break}else e(g,m);m=m.sibling}m=bd(w,g.mode,b),m.return=g,g=m}return o(g);case Zr:return C=w._init,_(g,m,C(w._payload),b)}if(Sa(w))return y(g,m,w,b);if(ua(w))return v(g,m,w,b);Pu(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,m!==null&&m.tag===6?(n(g,m.sibling),m=i(m,w),m.return=g,g=m):(n(g,m),m=_d(w,g.mode,b),m.return=g,g=m),o(g)):n(g,m)}return _}var mo=zx(!0),Ux=zx(!1),Wc=Ni(null),Kc=null,Xs=null,cm=null;function hm(){cm=Xs=Kc=null}function fm(t){var e=Wc.current;Je(Wc),t._currentValue=e}function Rp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function so(t,e){Kc=t,cm=Xs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(an=!0),t.firstContext=null)}function Rn(t){var e=t._currentValue;if(cm!==t)if(t={context:t,memoizedValue:e,next:null},Xs===null){if(Kc===null)throw Error(ae(308));Xs=t,Kc.dependencies={lanes:0,firstContext:t}}else Xs=Xs.next=t;return e}var Ji=null;function dm(t){Ji===null?Ji=[t]:Ji.push(t)}function $x(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,dm(e)):(n.next=i.next,i.next=n),e.interleaved=n,Fr(t,r)}function Fr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ei=!1;function pm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Dr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function yi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Le&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Fr(t,n)}return i=r.interleaved,i===null?(e.next=e,dm(r)):(e.next=i.next,i.next=e),r.interleaved=e,Fr(t,n)}function oc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Zg(t,n)}}function L0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Gc(t,e,n,r){var i=t.updateQueue;ei=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,c=u=l=null,a=s;do{var f=a.lane,d=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,v=a;switch(f=e,d=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){h=y.call(d,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,f=typeof y=="function"?y.call(d,h,f):y,f==null)break e;h=lt({},h,f);break e;case 2:ei=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else d={eventTime:d,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=d,l=h):c=c.next=d,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ds|=o,t.lanes=o,t.memoizedState=h}}function j0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ae(191,i));i.call(r)}}}var Ul={},or=Ni(Ul),vl=Ni(Ul),_l=Ni(Ul);function Zi(t){if(t===Ul)throw Error(ae(174));return t}function gm(t,e){switch(Ke(_l,e),Ke(vl,t),Ke(or,Ul),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=fp(e,t)}Je(or),Ke(or,e)}function yo(){Je(or),Je(vl),Je(_l)}function Hx(t){Zi(_l.current);var e=Zi(or.current),n=fp(e,t.type);e!==n&&(Ke(vl,t),Ke(or,n))}function mm(t){vl.current===t&&(Je(or),Je(vl))}var st=Ni(0);function Yc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var dd=[];function ym(){for(var t=0;t<dd.length;t++)dd[t]._workInProgressVersionPrimary=null;dd.length=0}var ac=Hr.ReactCurrentDispatcher,pd=Hr.ReactCurrentBatchConfig,fs=0,at=null,wt=null,St=null,Qc=!1,qa=!1,bl=0,iP=0;function Vt(){throw Error(ae(321))}function vm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wn(t[n],e[n]))return!1;return!0}function _m(t,e,n,r,i,s){if(fs=s,at=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ac.current=t===null||t.memoizedState===null?lP:uP,t=n(r,i),qa){s=0;do{if(qa=!1,bl=0,25<=s)throw Error(ae(301));s+=1,St=wt=null,e.updateQueue=null,ac.current=cP,t=n(r,i)}while(qa)}if(ac.current=Xc,e=wt!==null&&wt.next!==null,fs=0,St=wt=at=null,Qc=!1,e)throw Error(ae(300));return t}function bm(){var t=bl!==0;return bl=0,t}function nr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?at.memoizedState=St=t:St=St.next=t,St}function Nn(){if(wt===null){var t=at.alternate;t=t!==null?t.memoizedState:null}else t=wt.next;var e=St===null?at.memoizedState:St.next;if(e!==null)St=e,wt=t;else{if(t===null)throw Error(ae(310));wt=t,t={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},St===null?at.memoizedState=St=t:St=St.next=t}return St}function wl(t,e){return typeof e=="function"?e(t):e}function gd(t){var e=Nn(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=wt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((fs&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,at.lanes|=c,ds|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Wn(r,e.memoizedState)||(an=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,at.lanes|=s,ds|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function md(t){var e=Nn(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Wn(s,e.memoizedState)||(an=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Wx(){}function Kx(t,e){var n=at,r=Nn(),i=e(),s=!Wn(r.memoizedState,i);if(s&&(r.memoizedState=i,an=!0),r=r.queue,wm(Qx.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||St!==null&&St.memoizedState.tag&1){if(n.flags|=2048,xl(9,Yx.bind(null,n,r,i,e),void 0,null),It===null)throw Error(ae(349));fs&30||Gx(n,e,i)}return i}function Gx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Yx(t,e,n,r){e.value=n,e.getSnapshot=r,Xx(e)&&Jx(t)}function Qx(t,e,n){return n(function(){Xx(e)&&Jx(t)})}function Xx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wn(t,n)}catch{return!0}}function Jx(t){var e=Fr(t,1);e!==null&&qn(e,t,1,-1)}function V0(t){var e=nr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wl,lastRenderedState:t},e.queue=t,t=t.dispatch=aP.bind(null,at,t),[e.memoizedState,t]}function xl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Zx(){return Nn().memoizedState}function lc(t,e,n,r){var i=nr();at.flags|=t,i.memoizedState=xl(1|e,n,void 0,r===void 0?null:r)}function $h(t,e,n,r){var i=Nn();r=r===void 0?null:r;var s=void 0;if(wt!==null){var o=wt.memoizedState;if(s=o.destroy,r!==null&&vm(r,o.deps)){i.memoizedState=xl(e,n,s,r);return}}at.flags|=t,i.memoizedState=xl(1|e,n,s,r)}function F0(t,e){return lc(8390656,8,t,e)}function wm(t,e){return $h(2048,8,t,e)}function eE(t,e){return $h(4,2,t,e)}function tE(t,e){return $h(4,4,t,e)}function nE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rE(t,e,n){return n=n!=null?n.concat([t]):null,$h(4,4,nE.bind(null,e,t),n)}function xm(){}function iE(t,e){var n=Nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&vm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function sE(t,e){var n=Nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&vm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function oE(t,e,n){return fs&21?(Wn(n,e)||(n=hx(),at.lanes|=n,ds|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,an=!0),t.memoizedState=n)}function sP(t,e){var n=Ue;Ue=n!==0&&4>n?n:4,t(!0);var r=pd.transition;pd.transition={};try{t(!1),e()}finally{Ue=n,pd.transition=r}}function aE(){return Nn().memoizedState}function oP(t,e,n){var r=_i(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},lE(t))uE(e,n);else if(n=$x(t,e,n,r),n!==null){var i=Zt();qn(n,t,r,i),cE(n,e,r)}}function aP(t,e,n){var r=_i(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(lE(t))uE(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Wn(a,o)){var l=e.interleaved;l===null?(i.next=i,dm(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=$x(t,e,i,r),n!==null&&(i=Zt(),qn(n,t,r,i),cE(n,e,r))}}function lE(t){var e=t.alternate;return t===at||e!==null&&e===at}function uE(t,e){qa=Qc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function cE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Zg(t,n)}}var Xc={readContext:Rn,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},lP={readContext:Rn,useCallback:function(t,e){return nr().memoizedState=[t,e===void 0?null:e],t},useContext:Rn,useEffect:F0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,lc(4194308,4,nE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return lc(4194308,4,t,e)},useInsertionEffect:function(t,e){return lc(4,2,t,e)},useMemo:function(t,e){var n=nr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=nr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=oP.bind(null,at,t),[r.memoizedState,t]},useRef:function(t){var e=nr();return t={current:t},e.memoizedState=t},useState:V0,useDebugValue:xm,useDeferredValue:function(t){return nr().memoizedState=t},useTransition:function(){var t=V0(!1),e=t[0];return t=sP.bind(null,t[1]),nr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=at,i=nr();if(tt){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=e(),It===null)throw Error(ae(349));fs&30||Gx(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,F0(Qx.bind(null,r,s,t),[t]),r.flags|=2048,xl(9,Yx.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=nr(),e=It.identifierPrefix;if(tt){var n=Ar,r=Sr;n=(r&~(1<<32-$n(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=bl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=iP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},uP={readContext:Rn,useCallback:iE,useContext:Rn,useEffect:wm,useImperativeHandle:rE,useInsertionEffect:eE,useLayoutEffect:tE,useMemo:sE,useReducer:gd,useRef:Zx,useState:function(){return gd(wl)},useDebugValue:xm,useDeferredValue:function(t){var e=Nn();return oE(e,wt.memoizedState,t)},useTransition:function(){var t=gd(wl)[0],e=Nn().memoizedState;return[t,e]},useMutableSource:Wx,useSyncExternalStore:Kx,useId:aE,unstable_isNewReconciler:!1},cP={readContext:Rn,useCallback:iE,useContext:Rn,useEffect:wm,useImperativeHandle:rE,useInsertionEffect:eE,useLayoutEffect:tE,useMemo:sE,useReducer:md,useRef:Zx,useState:function(){return md(wl)},useDebugValue:xm,useDeferredValue:function(t){var e=Nn();return wt===null?e.memoizedState=t:oE(e,wt.memoizedState,t)},useTransition:function(){var t=md(wl)[0],e=Nn().memoizedState;return[t,e]},useMutableSource:Wx,useSyncExternalStore:Kx,useId:aE,unstable_isNewReconciler:!1};function jn(t,e){if(t&&t.defaultProps){e=lt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Np(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:lt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var qh={isMounted:function(t){return(t=t._reactInternals)?As(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Zt(),i=_i(t),s=Dr(r,i);s.payload=e,n!=null&&(s.callback=n),e=yi(t,s,i),e!==null&&(qn(e,t,i,r),oc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Zt(),i=_i(t),s=Dr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=yi(t,s,i),e!==null&&(qn(e,t,i,r),oc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Zt(),r=_i(t),i=Dr(n,r);i.tag=2,e!=null&&(i.callback=e),e=yi(t,i,r),e!==null&&(qn(e,t,r,n),oc(e,t,r))}};function B0(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!pl(n,r)||!pl(i,s):!0}function hE(t,e,n){var r=!1,i=ki,s=e.contextType;return typeof s=="object"&&s!==null?s=Rn(s):(i=un(e)?cs:Wt.current,r=e.contextTypes,s=(r=r!=null)?po(t,i):ki),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=qh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function z0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&qh.enqueueReplaceState(e,e.state,null)}function Dp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},pm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Rn(s):(s=un(e)?cs:Wt.current,i.context=po(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Np(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&qh.enqueueReplaceState(i,i.state,null),Gc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function vo(t,e){try{var n="",r=e;do n+=VI(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function yd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Mp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var hP=typeof WeakMap=="function"?WeakMap:Map;function fE(t,e,n){n=Dr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Zc||(Zc=!0,Hp=r),Mp(t,e)},n}function dE(t,e,n){n=Dr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Mp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Mp(t,e),typeof r!="function"&&(vi===null?vi=new Set([this]):vi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function U0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new hP;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=kP.bind(null,t,e,n),e.then(t,t))}function $0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function q0(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Dr(-1,1),e.tag=2,yi(n,e,1))),n.lanes|=1),t)}var fP=Hr.ReactCurrentOwner,an=!1;function Xt(t,e,n,r){e.child=t===null?Ux(e,null,n,r):mo(e,t.child,n,r)}function H0(t,e,n,r,i){n=n.render;var s=e.ref;return so(e,i),r=_m(t,e,n,r,s,i),n=bm(),t!==null&&!an?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Br(t,e,i)):(tt&&n&&am(e),e.flags|=1,Xt(t,e,r,i),e.child)}function W0(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Om(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,pE(t,e,s,r,i)):(t=fc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:pl,n(o,r)&&t.ref===e.ref)return Br(t,e,i)}return e.flags|=1,t=bi(s,r),t.ref=e.ref,t.return=e,e.child=t}function pE(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(pl(s,r)&&t.ref===e.ref)if(an=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(an=!0);else return e.lanes=t.lanes,Br(t,e,i)}return Lp(t,e,n,r,i)}function gE(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(Zs,gn),gn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ke(Zs,gn),gn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ke(Zs,gn),gn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ke(Zs,gn),gn|=r;return Xt(t,e,i,n),e.child}function mE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Lp(t,e,n,r,i){var s=un(n)?cs:Wt.current;return s=po(e,s),so(e,i),n=_m(t,e,n,r,s,i),r=bm(),t!==null&&!an?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Br(t,e,i)):(tt&&r&&am(e),e.flags|=1,Xt(t,e,n,i),e.child)}function K0(t,e,n,r,i){if(un(n)){var s=!0;$c(e)}else s=!1;if(so(e,i),e.stateNode===null)uc(t,e),hE(e,n,r),Dp(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Rn(u):(u=un(n)?cs:Wt.current,u=po(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&z0(e,o,r,u),ei=!1;var f=e.memoizedState;o.state=f,Gc(e,r,o,i),l=e.memoizedState,a!==r||f!==l||ln.current||ei?(typeof c=="function"&&(Np(e,n,c,r),l=e.memoizedState),(a=ei||B0(e,n,a,r,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,qx(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:jn(e.type,a),o.props=u,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Rn(l):(l=un(n)?cs:Wt.current,l=po(e,l));var d=n.getDerivedStateFromProps;(c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&z0(e,o,r,l),ei=!1,f=e.memoizedState,o.state=f,Gc(e,r,o,i);var y=e.memoizedState;a!==h||f!==y||ln.current||ei?(typeof d=="function"&&(Np(e,n,d,r),y=e.memoizedState),(u=ei||B0(e,n,u,r,f,y,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return jp(t,e,n,r,s,i)}function jp(t,e,n,r,i,s){mE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&R0(e,n,!1),Br(t,e,s);r=e.stateNode,fP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=mo(e,t.child,null,s),e.child=mo(e,null,a,s)):Xt(t,e,a,s),e.memoizedState=r.state,i&&R0(e,n,!0),e.child}function yE(t){var e=t.stateNode;e.pendingContext?C0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&C0(t,e.context,!1),gm(t,e.containerInfo)}function G0(t,e,n,r,i){return go(),um(i),e.flags|=256,Xt(t,e,n,r),e.child}var Vp={dehydrated:null,treeContext:null,retryLane:0};function Fp(t){return{baseLanes:t,cachePool:null,transitions:null}}function vE(t,e,n){var r=e.pendingProps,i=st.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ke(st,i&1),t===null)return Cp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Kh(o,r,0,null),t=ss(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Fp(n),e.memoizedState=Vp,t):Em(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return dP(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=bi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=bi(a,s):(s=ss(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Fp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Vp,r}return s=t.child,t=s.sibling,r=bi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Em(t,e){return e=Kh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ou(t,e,n,r){return r!==null&&um(r),mo(e,t.child,null,n),t=Em(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function dP(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=yd(Error(ae(422))),Ou(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Kh({mode:"visible",children:r.children},i,0,null),s=ss(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&mo(e,t.child,null,o),e.child.memoizedState=Fp(o),e.memoizedState=Vp,s);if(!(e.mode&1))return Ou(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ae(419)),r=yd(s,r,void 0),Ou(t,e,o,r)}if(a=(o&t.childLanes)!==0,an||a){if(r=It,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Fr(t,i),qn(r,t,i,-1))}return Pm(),r=yd(Error(ae(421))),Ou(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=SP.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,yn=mi(i.nextSibling),vn=e,tt=!0,Bn=null,t!==null&&(Tn[kn++]=Sr,Tn[kn++]=Ar,Tn[kn++]=hs,Sr=t.id,Ar=t.overflow,hs=e),e=Em(e,r.children),e.flags|=4096,e)}function Y0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Rp(t.return,e,n)}function vd(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function _E(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Xt(t,e,r.children,n),r=st.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Y0(t,n,e);else if(t.tag===19)Y0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ke(st,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Yc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),vd(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Yc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}vd(e,!0,n,null,s);break;case"together":vd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function uc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Br(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ds|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,n=bi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=bi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function pP(t,e,n){switch(e.tag){case 3:yE(e),go();break;case 5:Hx(e);break;case 1:un(e.type)&&$c(e);break;case 4:gm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ke(Wc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ke(st,st.current&1),e.flags|=128,null):n&e.child.childLanes?vE(t,e,n):(Ke(st,st.current&1),t=Br(t,e,n),t!==null?t.sibling:null);Ke(st,st.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return _E(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ke(st,st.current),r)break;return null;case 22:case 23:return e.lanes=0,gE(t,e,n)}return Br(t,e,n)}var bE,Bp,wE,xE;bE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bp=function(){};wE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Zi(or.current);var s=null;switch(n){case"input":i=lp(t,i),r=lp(t,r),s=[];break;case"select":i=lt({},i,{value:void 0}),r=lt({},r,{value:void 0}),s=[];break;case"textarea":i=hp(t,i),r=hp(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=zc)}dp(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(al.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(al.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Qe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};xE=function(t,e,n,r){n!==r&&(e.flags|=4)};function ga(t,e){if(!tt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function gP(t,e,n){var r=e.pendingProps;switch(lm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(e),null;case 1:return un(e.type)&&Uc(),Ft(e),null;case 3:return r=e.stateNode,yo(),Je(ln),Je(Wt),ym(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Iu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Bn!==null&&(Gp(Bn),Bn=null))),Bp(t,e),Ft(e),null;case 5:mm(e);var i=Zi(_l.current);if(n=e.type,t!==null&&e.stateNode!=null)wE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ae(166));return Ft(e),null}if(t=Zi(or.current),Iu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ir]=e,r[yl]=s,t=(e.mode&1)!==0,n){case"dialog":Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":case"embed":Qe("load",r);break;case"video":case"audio":for(i=0;i<Ia.length;i++)Qe(Ia[i],r);break;case"source":Qe("error",r);break;case"img":case"image":case"link":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"input":i0(r,s),Qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Qe("invalid",r);break;case"textarea":o0(r,s),Qe("invalid",r)}dp(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Au(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Au(r.textContent,a,t),i=["children",""+a]):al.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Qe("scroll",r)}switch(n){case"input":_u(r),s0(r,s,!0);break;case"textarea":_u(r),a0(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=zc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Q1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ir]=e,t[yl]=r,bE(t,e,!1,!1),e.stateNode=t;e:{switch(o=pp(n,r),n){case"dialog":Qe("cancel",t),Qe("close",t),i=r;break;case"iframe":case"object":case"embed":Qe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ia.length;i++)Qe(Ia[i],t);i=r;break;case"source":Qe("error",t),i=r;break;case"img":case"image":case"link":Qe("error",t),Qe("load",t),i=r;break;case"details":Qe("toggle",t),i=r;break;case"input":i0(t,r),i=lp(t,r),Qe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=lt({},r,{value:void 0}),Qe("invalid",t);break;case"textarea":o0(t,r),i=hp(t,r),Qe("invalid",t);break;default:i=r}dp(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Z1(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&X1(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ll(t,l):typeof l=="number"&&ll(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(al.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Qe("scroll",t):l!=null&&Kg(t,s,l,o))}switch(n){case"input":_u(t),s0(t,r,!1);break;case"textarea":_u(t),a0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ti(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?to(t,!!r.multiple,s,!1):r.defaultValue!=null&&to(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=zc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ft(e),null;case 6:if(t&&e.stateNode!=null)xE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ae(166));if(n=Zi(_l.current),Zi(or.current),Iu(e)){if(r=e.stateNode,n=e.memoizedProps,r[ir]=e,(s=r.nodeValue!==n)&&(t=vn,t!==null))switch(t.tag){case 3:Au(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Au(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ir]=e,e.stateNode=r}return Ft(e),null;case 13:if(Je(st),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(tt&&yn!==null&&e.mode&1&&!(e.flags&128))Bx(),go(),e.flags|=98560,s=!1;else if(s=Iu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ae(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ae(317));s[ir]=e}else go(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ft(e),s=!1}else Bn!==null&&(Gp(Bn),Bn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||st.current&1?Et===0&&(Et=3):Pm())),e.updateQueue!==null&&(e.flags|=4),Ft(e),null);case 4:return yo(),Bp(t,e),t===null&&gl(e.stateNode.containerInfo),Ft(e),null;case 10:return fm(e.type._context),Ft(e),null;case 17:return un(e.type)&&Uc(),Ft(e),null;case 19:if(Je(st),s=e.memoizedState,s===null)return Ft(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ga(s,!1);else{if(Et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Yc(t),o!==null){for(e.flags|=128,ga(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ke(st,st.current&1|2),e.child}t=t.sibling}s.tail!==null&&pt()>_o&&(e.flags|=128,r=!0,ga(s,!1),e.lanes=4194304)}else{if(!r)if(t=Yc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ga(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!tt)return Ft(e),null}else 2*pt()-s.renderingStartTime>_o&&n!==1073741824&&(e.flags|=128,r=!0,ga(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=pt(),e.sibling=null,n=st.current,Ke(st,r?n&1|2:n&1),e):(Ft(e),null);case 22:case 23:return Im(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?gn&1073741824&&(Ft(e),e.subtreeFlags&6&&(e.flags|=8192)):Ft(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function mP(t,e){switch(lm(e),e.tag){case 1:return un(e.type)&&Uc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return yo(),Je(ln),Je(Wt),ym(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return mm(e),null;case 13:if(Je(st),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));go()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Je(st),null;case 4:return yo(),null;case 10:return fm(e.type._context),null;case 22:case 23:return Im(),null;case 24:return null;default:return null}}var Cu=!1,$t=!1,yP=typeof WeakSet=="function"?WeakSet:Set,de=null;function Js(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ht(t,e,r)}else n.current=null}function zp(t,e,n){try{n()}catch(r){ht(t,e,r)}}var Q0=!1;function vP(t,e){if(Tp=Vc,t=Ax(),om(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=t,f=null;t:for(;;){for(var d;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(d=h.firstChild)!==null;)f=h,h=d;for(;;){if(h===t)break t;if(f===n&&++u===i&&(a=o),f===s&&++c===r&&(l=o),(d=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=d}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(kp={focusedElem:t,selectionRange:n},Vc=!1,de=e;de!==null;)if(e=de,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,de=t;else for(;de!==null;){e=de;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,_=y.memoizedState,g=e.stateNode,m=g.getSnapshotBeforeUpdate(e.elementType===e.type?v:jn(e.type,v),_);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(b){ht(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,de=t;break}de=e.return}return y=Q0,Q0=!1,y}function Ha(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&zp(e,n,s)}i=i.next}while(i!==r)}}function Hh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Up(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function EE(t){var e=t.alternate;e!==null&&(t.alternate=null,EE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ir],delete e[yl],delete e[Ip],delete e[eP],delete e[tP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function TE(t){return t.tag===5||t.tag===3||t.tag===4}function X0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||TE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $p(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=zc));else if(r!==4&&(t=t.child,t!==null))for($p(t,e,n),t=t.sibling;t!==null;)$p(t,e,n),t=t.sibling}function qp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(qp(t,e,n),t=t.sibling;t!==null;)qp(t,e,n),t=t.sibling}var Ct=null,Vn=!1;function Qr(t,e,n){for(n=n.child;n!==null;)kE(t,e,n),n=n.sibling}function kE(t,e,n){if(sr&&typeof sr.onCommitFiberUnmount=="function")try{sr.onCommitFiberUnmount(jh,n)}catch{}switch(n.tag){case 5:$t||Js(n,e);case 6:var r=Ct,i=Vn;Ct=null,Qr(t,e,n),Ct=r,Vn=i,Ct!==null&&(Vn?(t=Ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ct.removeChild(n.stateNode));break;case 18:Ct!==null&&(Vn?(t=Ct,n=n.stateNode,t.nodeType===8?hd(t.parentNode,n):t.nodeType===1&&hd(t,n),fl(t)):hd(Ct,n.stateNode));break;case 4:r=Ct,i=Vn,Ct=n.stateNode.containerInfo,Vn=!0,Qr(t,e,n),Ct=r,Vn=i;break;case 0:case 11:case 14:case 15:if(!$t&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&zp(n,e,o),i=i.next}while(i!==r)}Qr(t,e,n);break;case 1:if(!$t&&(Js(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ht(n,e,a)}Qr(t,e,n);break;case 21:Qr(t,e,n);break;case 22:n.mode&1?($t=(r=$t)||n.memoizedState!==null,Qr(t,e,n),$t=r):Qr(t,e,n);break;default:Qr(t,e,n)}}function J0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new yP),e.forEach(function(r){var i=AP.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Mn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ct=a.stateNode,Vn=!1;break e;case 3:Ct=a.stateNode.containerInfo,Vn=!0;break e;case 4:Ct=a.stateNode.containerInfo,Vn=!0;break e}a=a.return}if(Ct===null)throw Error(ae(160));kE(s,o,i),Ct=null,Vn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){ht(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)SE(e,t),e=e.sibling}function SE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mn(e,t),Xn(t),r&4){try{Ha(3,t,t.return),Hh(3,t)}catch(v){ht(t,t.return,v)}try{Ha(5,t,t.return)}catch(v){ht(t,t.return,v)}}break;case 1:Mn(e,t),Xn(t),r&512&&n!==null&&Js(n,n.return);break;case 5:if(Mn(e,t),Xn(t),r&512&&n!==null&&Js(n,n.return),t.flags&32){var i=t.stateNode;try{ll(i,"")}catch(v){ht(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&G1(i,s),pp(a,o);var u=pp(a,s);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?Z1(i,h):c==="dangerouslySetInnerHTML"?X1(i,h):c==="children"?ll(i,h):Kg(i,c,h,u)}switch(a){case"input":up(i,s);break;case"textarea":Y1(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?to(i,!!s.multiple,d,!1):f!==!!s.multiple&&(s.defaultValue!=null?to(i,!!s.multiple,s.defaultValue,!0):to(i,!!s.multiple,s.multiple?[]:"",!1))}i[yl]=s}catch(v){ht(t,t.return,v)}}break;case 6:if(Mn(e,t),Xn(t),r&4){if(t.stateNode===null)throw Error(ae(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){ht(t,t.return,v)}}break;case 3:if(Mn(e,t),Xn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{fl(e.containerInfo)}catch(v){ht(t,t.return,v)}break;case 4:Mn(e,t),Xn(t);break;case 13:Mn(e,t),Xn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Sm=pt())),r&4&&J0(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?($t=(u=$t)||c,Mn(e,t),$t=u):Mn(e,t),Xn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(de=t,c=t.child;c!==null;){for(h=de=c;de!==null;){switch(f=de,d=f.child,f.tag){case 0:case 11:case 14:case 15:Ha(4,f,f.return);break;case 1:Js(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){ht(r,n,v)}}break;case 5:Js(f,f.return);break;case 22:if(f.memoizedState!==null){e_(h);continue}}d!==null?(d.return=f,de=d):e_(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=J1("display",o))}catch(v){ht(t,t.return,v)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){ht(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Mn(e,t),Xn(t),r&4&&J0(t);break;case 21:break;default:Mn(e,t),Xn(t)}}function Xn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(TE(n)){var r=n;break e}n=n.return}throw Error(ae(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ll(i,""),r.flags&=-33);var s=X0(t);qp(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=X0(t);$p(t,a,o);break;default:throw Error(ae(161))}}catch(l){ht(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _P(t,e,n){de=t,AE(t)}function AE(t,e,n){for(var r=(t.mode&1)!==0;de!==null;){var i=de,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Cu;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||$t;a=Cu;var u=$t;if(Cu=o,($t=l)&&!u)for(de=i;de!==null;)o=de,l=o.child,o.tag===22&&o.memoizedState!==null?t_(i):l!==null?(l.return=o,de=l):t_(i);for(;s!==null;)de=s,AE(s),s=s.sibling;de=i,Cu=a,$t=u}Z0(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,de=s):Z0(t)}}function Z0(t){for(;de!==null;){var e=de;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:$t||Hh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!$t)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:jn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&j0(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}j0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&fl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}$t||e.flags&512&&Up(e)}catch(f){ht(e,e.return,f)}}if(e===t){de=null;break}if(n=e.sibling,n!==null){n.return=e.return,de=n;break}de=e.return}}function e_(t){for(;de!==null;){var e=de;if(e===t){de=null;break}var n=e.sibling;if(n!==null){n.return=e.return,de=n;break}de=e.return}}function t_(t){for(;de!==null;){var e=de;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Hh(4,e)}catch(l){ht(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){ht(e,i,l)}}var s=e.return;try{Up(e)}catch(l){ht(e,s,l)}break;case 5:var o=e.return;try{Up(e)}catch(l){ht(e,o,l)}}}catch(l){ht(e,e.return,l)}if(e===t){de=null;break}var a=e.sibling;if(a!==null){a.return=e.return,de=a;break}de=e.return}}var bP=Math.ceil,Jc=Hr.ReactCurrentDispatcher,Tm=Hr.ReactCurrentOwner,Pn=Hr.ReactCurrentBatchConfig,Le=0,It=null,vt=null,Nt=0,gn=0,Zs=Ni(0),Et=0,El=null,ds=0,Wh=0,km=0,Wa=null,sn=null,Sm=0,_o=1/0,xr=null,Zc=!1,Hp=null,vi=null,Ru=!1,li=null,eh=0,Ka=0,Wp=null,cc=-1,hc=0;function Zt(){return Le&6?pt():cc!==-1?cc:cc=pt()}function _i(t){return t.mode&1?Le&2&&Nt!==0?Nt&-Nt:rP.transition!==null?(hc===0&&(hc=hx()),hc):(t=Ue,t!==0||(t=window.event,t=t===void 0?16:vx(t.type)),t):1}function qn(t,e,n,r){if(50<Ka)throw Ka=0,Wp=null,Error(ae(185));Fl(t,n,r),(!(Le&2)||t!==It)&&(t===It&&(!(Le&2)&&(Wh|=n),Et===4&&ri(t,Nt)),cn(t,r),n===1&&Le===0&&!(e.mode&1)&&(_o=pt()+500,Uh&&Di()))}function cn(t,e){var n=t.callbackNode;r2(t,e);var r=jc(t,t===It?Nt:0);if(r===0)n!==null&&c0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&c0(n),e===1)t.tag===0?nP(n_.bind(null,t)):jx(n_.bind(null,t)),J2(function(){!(Le&6)&&Di()}),n=null;else{switch(fx(r)){case 1:n=Jg;break;case 4:n=ux;break;case 16:n=Lc;break;case 536870912:n=cx;break;default:n=Lc}n=ME(n,IE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function IE(t,e){if(cc=-1,hc=0,Le&6)throw Error(ae(327));var n=t.callbackNode;if(oo()&&t.callbackNode!==n)return null;var r=jc(t,t===It?Nt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=th(t,r);else{e=r;var i=Le;Le|=2;var s=OE();(It!==t||Nt!==e)&&(xr=null,_o=pt()+500,is(t,e));do try{EP();break}catch(a){PE(t,a)}while(!0);hm(),Jc.current=s,Le=i,vt!==null?e=0:(It=null,Nt=0,e=Et)}if(e!==0){if(e===2&&(i=_p(t),i!==0&&(r=i,e=Kp(t,i))),e===1)throw n=El,is(t,0),ri(t,r),cn(t,pt()),n;if(e===6)ri(t,r);else{if(i=t.current.alternate,!(r&30)&&!wP(i)&&(e=th(t,r),e===2&&(s=_p(t),s!==0&&(r=s,e=Kp(t,s))),e===1))throw n=El,is(t,0),ri(t,r),cn(t,pt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ae(345));case 2:Wi(t,sn,xr);break;case 3:if(ri(t,r),(r&130023424)===r&&(e=Sm+500-pt(),10<e)){if(jc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Zt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ap(Wi.bind(null,t,sn,xr),e);break}Wi(t,sn,xr);break;case 4:if(ri(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-$n(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=pt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*bP(r/1960))-r,10<r){t.timeoutHandle=Ap(Wi.bind(null,t,sn,xr),r);break}Wi(t,sn,xr);break;case 5:Wi(t,sn,xr);break;default:throw Error(ae(329))}}}return cn(t,pt()),t.callbackNode===n?IE.bind(null,t):null}function Kp(t,e){var n=Wa;return t.current.memoizedState.isDehydrated&&(is(t,e).flags|=256),t=th(t,e),t!==2&&(e=sn,sn=n,e!==null&&Gp(e)),t}function Gp(t){sn===null?sn=t:sn.push.apply(sn,t)}function wP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Wn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ri(t,e){for(e&=~km,e&=~Wh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-$n(e),r=1<<n;t[n]=-1,e&=~r}}function n_(t){if(Le&6)throw Error(ae(327));oo();var e=jc(t,0);if(!(e&1))return cn(t,pt()),null;var n=th(t,e);if(t.tag!==0&&n===2){var r=_p(t);r!==0&&(e=r,n=Kp(t,r))}if(n===1)throw n=El,is(t,0),ri(t,e),cn(t,pt()),n;if(n===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Wi(t,sn,xr),cn(t,pt()),null}function Am(t,e){var n=Le;Le|=1;try{return t(e)}finally{Le=n,Le===0&&(_o=pt()+500,Uh&&Di())}}function ps(t){li!==null&&li.tag===0&&!(Le&6)&&oo();var e=Le;Le|=1;var n=Pn.transition,r=Ue;try{if(Pn.transition=null,Ue=1,t)return t()}finally{Ue=r,Pn.transition=n,Le=e,!(Le&6)&&Di()}}function Im(){gn=Zs.current,Je(Zs)}function is(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,X2(n)),vt!==null)for(n=vt.return;n!==null;){var r=n;switch(lm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Uc();break;case 3:yo(),Je(ln),Je(Wt),ym();break;case 5:mm(r);break;case 4:yo();break;case 13:Je(st);break;case 19:Je(st);break;case 10:fm(r.type._context);break;case 22:case 23:Im()}n=n.return}if(It=t,vt=t=bi(t.current,null),Nt=gn=e,Et=0,El=null,km=Wh=ds=0,sn=Wa=null,Ji!==null){for(e=0;e<Ji.length;e++)if(n=Ji[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ji=null}return t}function PE(t,e){do{var n=vt;try{if(hm(),ac.current=Xc,Qc){for(var r=at.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Qc=!1}if(fs=0,St=wt=at=null,qa=!1,bl=0,Tm.current=null,n===null||n.return===null){Et=1,El=e,vt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Nt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=$0(o);if(d!==null){d.flags&=-257,q0(d,o,a,s,e),d.mode&1&&U0(s,u,e),e=d,l=u;var y=e.updateQueue;if(y===null){var v=new Set;v.add(l),e.updateQueue=v}else y.add(l);break e}else{if(!(e&1)){U0(s,u,e),Pm();break e}l=Error(ae(426))}}else if(tt&&a.mode&1){var _=$0(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),q0(_,o,a,s,e),um(vo(l,a));break e}}s=l=vo(l,a),Et!==4&&(Et=2),Wa===null?Wa=[s]:Wa.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=fE(s,l,e);L0(s,g);break e;case 1:a=l;var m=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(vi===null||!vi.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=dE(s,a,e);L0(s,b);break e}}s=s.return}while(s!==null)}RE(n)}catch(T){e=T,vt===n&&n!==null&&(vt=n=n.return);continue}break}while(!0)}function OE(){var t=Jc.current;return Jc.current=Xc,t===null?Xc:t}function Pm(){(Et===0||Et===3||Et===2)&&(Et=4),It===null||!(ds&268435455)&&!(Wh&268435455)||ri(It,Nt)}function th(t,e){var n=Le;Le|=2;var r=OE();(It!==t||Nt!==e)&&(xr=null,is(t,e));do try{xP();break}catch(i){PE(t,i)}while(!0);if(hm(),Le=n,Jc.current=r,vt!==null)throw Error(ae(261));return It=null,Nt=0,Et}function xP(){for(;vt!==null;)CE(vt)}function EP(){for(;vt!==null&&!GI();)CE(vt)}function CE(t){var e=DE(t.alternate,t,gn);t.memoizedProps=t.pendingProps,e===null?RE(t):vt=e,Tm.current=null}function RE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=mP(n,e),n!==null){n.flags&=32767,vt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Et=6,vt=null;return}}else if(n=gP(n,e,gn),n!==null){vt=n;return}if(e=e.sibling,e!==null){vt=e;return}vt=e=t}while(e!==null);Et===0&&(Et=5)}function Wi(t,e,n){var r=Ue,i=Pn.transition;try{Pn.transition=null,Ue=1,TP(t,e,n,r)}finally{Pn.transition=i,Ue=r}return null}function TP(t,e,n,r){do oo();while(li!==null);if(Le&6)throw Error(ae(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(i2(t,s),t===It&&(vt=It=null,Nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ru||(Ru=!0,ME(Lc,function(){return oo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Pn.transition,Pn.transition=null;var o=Ue;Ue=1;var a=Le;Le|=4,Tm.current=null,vP(t,n),SE(n,t),q2(kp),Vc=!!Tp,kp=Tp=null,t.current=n,_P(n),YI(),Le=a,Ue=o,Pn.transition=s}else t.current=n;if(Ru&&(Ru=!1,li=t,eh=i),s=t.pendingLanes,s===0&&(vi=null),JI(n.stateNode),cn(t,pt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Zc)throw Zc=!1,t=Hp,Hp=null,t;return eh&1&&t.tag!==0&&oo(),s=t.pendingLanes,s&1?t===Wp?Ka++:(Ka=0,Wp=t):Ka=0,Di(),null}function oo(){if(li!==null){var t=fx(eh),e=Pn.transition,n=Ue;try{if(Pn.transition=null,Ue=16>t?16:t,li===null)var r=!1;else{if(t=li,li=null,eh=0,Le&6)throw Error(ae(331));var i=Le;for(Le|=4,de=t.current;de!==null;){var s=de,o=s.child;if(de.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(de=u;de!==null;){var c=de;switch(c.tag){case 0:case 11:case 15:Ha(8,c,s)}var h=c.child;if(h!==null)h.return=c,de=h;else for(;de!==null;){c=de;var f=c.sibling,d=c.return;if(EE(c),c===u){de=null;break}if(f!==null){f.return=d,de=f;break}de=d}}}var y=s.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}de=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,de=o;else e:for(;de!==null;){if(s=de,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ha(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,de=g;break e}de=s.return}}var m=t.current;for(de=m;de!==null;){o=de;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,de=w;else e:for(o=m;de!==null;){if(a=de,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Hh(9,a)}}catch(T){ht(a,a.return,T)}if(a===o){de=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,de=b;break e}de=a.return}}if(Le=i,Di(),sr&&typeof sr.onPostCommitFiberRoot=="function")try{sr.onPostCommitFiberRoot(jh,t)}catch{}r=!0}return r}finally{Ue=n,Pn.transition=e}}return!1}function r_(t,e,n){e=vo(n,e),e=fE(t,e,1),t=yi(t,e,1),e=Zt(),t!==null&&(Fl(t,1,e),cn(t,e))}function ht(t,e,n){if(t.tag===3)r_(t,t,n);else for(;e!==null;){if(e.tag===3){r_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vi===null||!vi.has(r))){t=vo(n,t),t=dE(e,t,1),e=yi(e,t,1),t=Zt(),e!==null&&(Fl(e,1,t),cn(e,t));break}}e=e.return}}function kP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Zt(),t.pingedLanes|=t.suspendedLanes&n,It===t&&(Nt&n)===n&&(Et===4||Et===3&&(Nt&130023424)===Nt&&500>pt()-Sm?is(t,0):km|=n),cn(t,e)}function NE(t,e){e===0&&(t.mode&1?(e=xu,xu<<=1,!(xu&130023424)&&(xu=4194304)):e=1);var n=Zt();t=Fr(t,e),t!==null&&(Fl(t,e,n),cn(t,n))}function SP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),NE(t,n)}function AP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ae(314))}r!==null&&r.delete(e),NE(t,n)}var DE;DE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ln.current)an=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return an=!1,pP(t,e,n);an=!!(t.flags&131072)}else an=!1,tt&&e.flags&1048576&&Vx(e,Hc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;uc(t,e),t=e.pendingProps;var i=po(e,Wt.current);so(e,n),i=_m(null,e,r,t,i,n);var s=bm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,un(r)?(s=!0,$c(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,pm(e),i.updater=qh,e.stateNode=i,i._reactInternals=e,Dp(e,r,t,n),e=jp(null,e,r,!0,s,n)):(e.tag=0,tt&&s&&am(e),Xt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(uc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=PP(r),t=jn(r,t),i){case 0:e=Lp(null,e,r,t,n);break e;case 1:e=K0(null,e,r,t,n);break e;case 11:e=H0(null,e,r,t,n);break e;case 14:e=W0(null,e,r,jn(r.type,t),n);break e}throw Error(ae(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jn(r,i),Lp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jn(r,i),K0(t,e,r,i,n);case 3:e:{if(yE(e),t===null)throw Error(ae(387));r=e.pendingProps,s=e.memoizedState,i=s.element,qx(t,e),Gc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=vo(Error(ae(423)),e),e=G0(t,e,r,n,i);break e}else if(r!==i){i=vo(Error(ae(424)),e),e=G0(t,e,r,n,i);break e}else for(yn=mi(e.stateNode.containerInfo.firstChild),vn=e,tt=!0,Bn=null,n=Ux(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(go(),r===i){e=Br(t,e,n);break e}Xt(t,e,r,n)}e=e.child}return e;case 5:return Hx(e),t===null&&Cp(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Sp(r,i)?o=null:s!==null&&Sp(r,s)&&(e.flags|=32),mE(t,e),Xt(t,e,o,n),e.child;case 6:return t===null&&Cp(e),null;case 13:return vE(t,e,n);case 4:return gm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=mo(e,null,r,n):Xt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jn(r,i),H0(t,e,r,i,n);case 7:return Xt(t,e,e.pendingProps,n),e.child;case 8:return Xt(t,e,e.pendingProps.children,n),e.child;case 12:return Xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ke(Wc,r._currentValue),r._currentValue=o,s!==null)if(Wn(s.value,o)){if(s.children===i.children&&!ln.current){e=Br(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Dr(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Rp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ae(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Rp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Xt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,so(e,n),i=Rn(i),r=r(i),e.flags|=1,Xt(t,e,r,n),e.child;case 14:return r=e.type,i=jn(r,e.pendingProps),i=jn(r.type,i),W0(t,e,r,i,n);case 15:return pE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jn(r,i),uc(t,e),e.tag=1,un(r)?(t=!0,$c(e)):t=!1,so(e,n),hE(e,r,i),Dp(e,r,i,n),jp(null,e,r,!0,t,n);case 19:return _E(t,e,n);case 22:return gE(t,e,n)}throw Error(ae(156,e.tag))};function ME(t,e){return lx(t,e)}function IP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(t,e,n,r){return new IP(t,e,n,r)}function Om(t){return t=t.prototype,!(!t||!t.isReactComponent)}function PP(t){if(typeof t=="function")return Om(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Yg)return 11;if(t===Qg)return 14}return 2}function bi(t,e){var n=t.alternate;return n===null?(n=An(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function fc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Om(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case $s:return ss(n.children,i,s,e);case Gg:o=8,i|=8;break;case ip:return t=An(12,n,e,i|2),t.elementType=ip,t.lanes=s,t;case sp:return t=An(13,n,e,i),t.elementType=sp,t.lanes=s,t;case op:return t=An(19,n,e,i),t.elementType=op,t.lanes=s,t;case H1:return Kh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $1:o=10;break e;case q1:o=9;break e;case Yg:o=11;break e;case Qg:o=14;break e;case Zr:o=16,r=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=An(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ss(t,e,n,r){return t=An(7,t,r,e),t.lanes=n,t}function Kh(t,e,n,r){return t=An(22,t,r,e),t.elementType=H1,t.lanes=n,t.stateNode={isHidden:!1},t}function _d(t,e,n){return t=An(6,t,null,e),t.lanes=n,t}function bd(t,e,n){return e=An(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function OP(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ed(0),this.expirationTimes=ed(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ed(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Cm(t,e,n,r,i,s,o,a,l){return t=new OP(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=An(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},pm(s),t}function CP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Us,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function LE(t){if(!t)return ki;t=t._reactInternals;e:{if(As(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(un(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var n=t.type;if(un(n))return Lx(t,n,e)}return e}function jE(t,e,n,r,i,s,o,a,l){return t=Cm(n,r,!0,t,i,s,o,a,l),t.context=LE(null),n=t.current,r=Zt(),i=_i(n),s=Dr(r,i),s.callback=e??null,yi(n,s,i),t.current.lanes=i,Fl(t,i,r),cn(t,r),t}function Gh(t,e,n,r){var i=e.current,s=Zt(),o=_i(i);return n=LE(n),e.context===null?e.context=n:e.pendingContext=n,e=Dr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=yi(i,e,o),t!==null&&(qn(t,i,o,s),oc(t,i,o)),o}function nh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function i_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Rm(t,e){i_(t,e),(t=t.alternate)&&i_(t,e)}function RP(){return null}var VE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Nm(t){this._internalRoot=t}Yh.prototype.render=Nm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));Gh(t,e,null,null)};Yh.prototype.unmount=Nm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ps(function(){Gh(null,t,null,null)}),e[Vr]=null}};function Yh(t){this._internalRoot=t}Yh.prototype.unstable_scheduleHydration=function(t){if(t){var e=gx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ni.length&&e!==0&&e<ni[n].priority;n++);ni.splice(n,0,t),n===0&&yx(t)}};function Dm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Qh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function s_(){}function NP(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=nh(o);s.call(u)}}var o=jE(e,r,t,0,null,!1,!1,"",s_);return t._reactRootContainer=o,t[Vr]=o.current,gl(t.nodeType===8?t.parentNode:t),ps(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=nh(l);a.call(u)}}var l=Cm(t,0,!1,null,null,!1,!1,"",s_);return t._reactRootContainer=l,t[Vr]=l.current,gl(t.nodeType===8?t.parentNode:t),ps(function(){Gh(e,l,n,r)}),l}function Xh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=nh(o);a.call(l)}}Gh(e,o,t,i)}else o=NP(n,e,t,i,r);return nh(o)}dx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Aa(e.pendingLanes);n!==0&&(Zg(e,n|1),cn(e,pt()),!(Le&6)&&(_o=pt()+500,Di()))}break;case 13:ps(function(){var r=Fr(t,1);if(r!==null){var i=Zt();qn(r,t,1,i)}}),Rm(t,1)}};em=function(t){if(t.tag===13){var e=Fr(t,134217728);if(e!==null){var n=Zt();qn(e,t,134217728,n)}Rm(t,134217728)}};px=function(t){if(t.tag===13){var e=_i(t),n=Fr(t,e);if(n!==null){var r=Zt();qn(n,t,e,r)}Rm(t,e)}};gx=function(){return Ue};mx=function(t,e){var n=Ue;try{return Ue=t,e()}finally{Ue=n}};mp=function(t,e,n){switch(e){case"input":if(up(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=zh(r);if(!i)throw Error(ae(90));K1(r),up(r,i)}}}break;case"textarea":Y1(t,n);break;case"select":e=n.value,e!=null&&to(t,!!n.multiple,e,!1)}};nx=Am;rx=ps;var DP={usingClientEntryPoint:!1,Events:[zl,Ks,zh,ex,tx,Am]},ma={findFiberByHostInstance:Xi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},MP={bundleType:ma.bundleType,version:ma.version,rendererPackageName:ma.rendererPackageName,rendererConfig:ma.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ox(t),t===null?null:t.stateNode},findFiberByHostInstance:ma.findFiberByHostInstance||RP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nu.isDisabled&&Nu.supportsFiber)try{jh=Nu.inject(MP),sr=Nu}catch{}}wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DP;wn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dm(e))throw Error(ae(200));return CP(t,e,null,n)};wn.createRoot=function(t,e){if(!Dm(t))throw Error(ae(299));var n=!1,r="",i=VE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Cm(t,1,!1,null,null,n,!1,r,i),t[Vr]=e.current,gl(t.nodeType===8?t.parentNode:t),new Nm(e)};wn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=ox(e),t=t===null?null:t.stateNode,t};wn.flushSync=function(t){return ps(t)};wn.hydrate=function(t,e,n){if(!Qh(e))throw Error(ae(200));return Xh(null,t,e,!0,n)};wn.hydrateRoot=function(t,e,n){if(!Dm(t))throw Error(ae(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=VE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=jE(e,null,t,1,n??null,i,!1,s,o),t[Vr]=e.current,gl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Yh(e)};wn.render=function(t,e,n){if(!Qh(e))throw Error(ae(200));return Xh(null,t,e,!1,n)};wn.unmountComponentAtNode=function(t){if(!Qh(t))throw Error(ae(40));return t._reactRootContainer?(ps(function(){Xh(null,null,t,!1,function(){t._reactRootContainer=null,t[Vr]=null})}),!0):!1};wn.unstable_batchedUpdates=Am;wn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Qh(n))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return Xh(t,e,n,!1,r)};wn.version="18.3.1-next-f1338f8080-20240426";function FE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(FE)}catch(t){console.error(t)}}FE(),F1.exports=wn;var BE=F1.exports,o_=BE;np.createRoot=o_.createRoot,np.hydrateRoot=o_.hydrateRoot;var a_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},LP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},UE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,d=u&63;l||(d=64,o||(f=64)),r.push(n[c],n[h],n[f],n[d])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(zE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):LP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw new jP;const f=s<<2|a>>4;if(r.push(f),u!==64){const d=a<<4&240|u>>2;if(r.push(d),h!==64){const y=u<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class jP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VP=function(t){const e=zE(t);return UE.encodeByteArray(e,!0)},rh=function(t){return VP(t).replace(/\./g,"")},$E=function(t){try{return UE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=()=>FP().__FIREBASE_DEFAULTS__,zP=()=>{if(typeof process>"u"||typeof a_>"u")return;const t=a_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},UP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&$E(t[1]);return e&&JSON.parse(e)},Jh=()=>{try{return BP()||zP()||UP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},qE=t=>{var e,n;return(n=(e=Jh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},$P=t=>{const e=qE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},HE=()=>{var t;return(t=Jh())===null||t===void 0?void 0:t.config},WE=t=>{var e;return(e=Jh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[rh(JSON.stringify(n)),rh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function WP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kt())}function KP(){var t;const e=(t=Jh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function KE(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function YP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QP(){const t=Kt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function XP(){return!KP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function GE(){try{return typeof indexedDB=="object"}catch{return!1}}function YE(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function JP(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP="FirebaseError";class Yn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ZP,Object.setPrototypeOf(this,Yn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Is.prototype.create)}}class Is{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?eO(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Yn(i,a,r)}}function eO(t,e){return t.replace(tO,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const tO=/\{\$([^}]+)}/g;function nO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Tl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(l_(s)&&l_(o)){if(!Tl(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function l_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function rO(t,e){const n=new iO(t,e);return n.subscribe.bind(n)}class iO{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");sO(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=wd),i.error===void 0&&(i.error=wd),i.complete===void 0&&(i.complete=wd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sO(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function wd(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO=1e3,aO=2,lO=4*60*60*1e3,uO=.5;function u_(t,e=oO,n=aO){const r=e*Math.pow(n,t),i=Math.round(uO*r*(Math.random()-.5)*2);return Math.min(lO,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(t){return t&&t._delegate?t._delegate:t}class Kn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new qP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fO(e))try{this.getOrInitializeService({instanceIdentifier:Ki})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ki){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ki){return this.instances.has(e)}getOptions(e=Ki){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hO(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ki){return this.component?this.component.multipleInstances?e:Ki:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hO(t){return t===Ki?void 0:t}function fO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new cO(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Re||(Re={}));const pO={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},gO=Re.INFO,mO={[Re.DEBUG]:"log",[Re.VERBOSE]:"log",[Re.INFO]:"info",[Re.WARN]:"warn",[Re.ERROR]:"error"},yO=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=mO[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zh{constructor(e){this.name=e,this._logLevel=gO,this._logHandler=yO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Re.DEBUG,...e),this._logHandler(this,Re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Re.VERBOSE,...e),this._logHandler(this,Re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Re.INFO,...e),this._logHandler(this,Re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Re.WARN,...e),this._logHandler(this,Re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Re.ERROR,...e),this._logHandler(this,Re.ERROR,...e)}}const vO=(t,e)=>e.some(n=>t instanceof n);let c_,h_;function _O(){return c_||(c_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bO(){return h_||(h_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const QE=new WeakMap,Yp=new WeakMap,XE=new WeakMap,xd=new WeakMap,Mm=new WeakMap;function wO(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(wi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&QE.set(n,t)}).catch(()=>{}),Mm.set(e,t),e}function xO(t){if(Yp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Yp.set(t,e)}let Qp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Yp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||XE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function EO(t){Qp=t(Qp)}function TO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ed(this),e,...n);return XE.set(r,e.sort?e.sort():[e]),wi(r)}:bO().includes(t)?function(...e){return t.apply(Ed(this),e),wi(QE.get(this))}:function(...e){return wi(t.apply(Ed(this),e))}}function kO(t){return typeof t=="function"?TO(t):(t instanceof IDBTransaction&&xO(t),vO(t,_O())?new Proxy(t,Qp):t)}function wi(t){if(t instanceof IDBRequest)return wO(t);if(xd.has(t))return xd.get(t);const e=kO(t);return e!==t&&(xd.set(t,e),Mm.set(e,t)),e}const Ed=t=>Mm.get(t);function JE(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=wi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(wi(o.result),l.oldVersion,l.newVersion,wi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const SO=["get","getKey","getAll","getAllKeys","count"],AO=["put","add","delete","clear"],Td=new Map;function f_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Td.get(e))return Td.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=AO.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||SO.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Td.set(e,s),s}EO(t=>({...t,get:(e,n,r)=>f_(e,n)||t.get(e,n,r),has:(e,n)=>!!f_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(PO(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function PO(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xp="@firebase/app",d_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr=new Zh("@firebase/app"),OO="@firebase/app-compat",CO="@firebase/analytics-compat",RO="@firebase/analytics",NO="@firebase/app-check-compat",DO="@firebase/app-check",MO="@firebase/auth",LO="@firebase/auth-compat",jO="@firebase/database",VO="@firebase/data-connect",FO="@firebase/database-compat",BO="@firebase/functions",zO="@firebase/functions-compat",UO="@firebase/installations",$O="@firebase/installations-compat",qO="@firebase/messaging",HO="@firebase/messaging-compat",WO="@firebase/performance",KO="@firebase/performance-compat",GO="@firebase/remote-config",YO="@firebase/remote-config-compat",QO="@firebase/storage",XO="@firebase/storage-compat",JO="@firebase/firestore",ZO="@firebase/vertexai-preview",eC="@firebase/firestore-compat",tC="firebase",nC="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp="[DEFAULT]",rC={[Xp]:"fire-core",[OO]:"fire-core-compat",[RO]:"fire-analytics",[CO]:"fire-analytics-compat",[DO]:"fire-app-check",[NO]:"fire-app-check-compat",[MO]:"fire-auth",[LO]:"fire-auth-compat",[jO]:"fire-rtdb",[VO]:"fire-data-connect",[FO]:"fire-rtdb-compat",[BO]:"fire-fn",[zO]:"fire-fn-compat",[UO]:"fire-iid",[$O]:"fire-iid-compat",[qO]:"fire-fcm",[HO]:"fire-fcm-compat",[WO]:"fire-perf",[KO]:"fire-perf-compat",[GO]:"fire-rc",[YO]:"fire-rc-compat",[QO]:"fire-gcs",[XO]:"fire-gcs-compat",[JO]:"fire-fst",[eC]:"fire-fst-compat",[ZO]:"fire-vertex","fire-js":"fire-js",[tC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih=new Map,iC=new Map,Zp=new Map;function p_(t,e){try{t.container.addComponent(e)}catch(n){zr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function dr(t){const e=t.name;if(Zp.has(e))return zr.debug(`There were multiple attempts to register component ${e}.`),!1;Zp.set(e,t);for(const n of ih.values())p_(n,t);for(const n of iC.values())p_(n,t);return!0}function Ps(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ir(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xi=new Is("app","Firebase",sC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Kn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do=nC;function ZE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Jp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw xi.create("bad-app-name",{appName:String(i)});if(n||(n=HE()),!n)throw xi.create("no-options");const s=ih.get(i);if(s){if(Tl(n,s.options)&&Tl(r,s.config))return s;throw xi.create("duplicate-app",{appName:i})}const o=new dO(i);for(const l of Zp.values())o.addComponent(l);const a=new oC(n,r,o);return ih.set(i,a),a}function Lm(t=Jp){const e=ih.get(t);if(!e&&t===Jp&&HE())return ZE();if(!e)throw xi.create("no-app",{appName:t});return e}function On(t,e,n){var r;let i=(r=rC[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zr.warn(a.join(" "));return}dr(new Kn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC="firebase-heartbeat-database",lC=1,kl="firebase-heartbeat-store";let kd=null;function eT(){return kd||(kd=JE(aC,lC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(kl)}catch(n){console.warn(n)}}}}).catch(t=>{throw xi.create("idb-open",{originalErrorMessage:t.message})})),kd}async function uC(t){try{const n=(await eT()).transaction(kl),r=await n.objectStore(kl).get(tT(t));return await n.done,r}catch(e){if(e instanceof Yn)zr.warn(e.message);else{const n=xi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});zr.warn(n.message)}}}async function g_(t,e){try{const r=(await eT()).transaction(kl,"readwrite");await r.objectStore(kl).put(e,tT(t)),await r.done}catch(n){if(n instanceof Yn)zr.warn(n.message);else{const r=xi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});zr.warn(r.message)}}}function tT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=1024,hC=30*24*60*60*1e3;class fC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new pC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=m_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=hC}),this._storage.overwrite(this._heartbeatsCache))}catch(r){zr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=m_(),{heartbeatsToSend:r,unsentEntries:i}=dC(this._heartbeatsCache.heartbeats),s=rh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return zr.warn(n),""}}}function m_(){return new Date().toISOString().substring(0,10)}function dC(t,e=cC){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),y_(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),y_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class pC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return GE()?YE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await uC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return g_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return g_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function y_(t){return rh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(t){dr(new Kn("platform-logger",e=>new IO(e),"PRIVATE")),dr(new Kn("heartbeat",e=>new fC(e),"PRIVATE")),On(Xp,d_,t),On(Xp,d_,"esm2017"),On("fire-js","")}gC("");var mC="firebase",yC="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */On(mC,yC,"app");function jm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function nT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vC=nT,rT=new Is("auth","Firebase",nT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh=new Zh("@firebase/auth");function _C(t,...e){sh.logLevel<=Re.WARN&&sh.warn(`Auth (${Do}): ${t}`,...e)}function dc(t,...e){sh.logLevel<=Re.ERROR&&sh.error(`Auth (${Do}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(t,...e){throw Fm(t,...e)}function Hn(t,...e){return Fm(t,...e)}function Vm(t,e,n){const r=Object.assign(Object.assign({},vC()),{[e]:n});return new Is("auth","Firebase",r).create(e,{appName:t.name})}function os(t){return Vm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bC(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&pr(t,"argument-error"),Vm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Fm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return rT.create(t,...e)}function be(t,e,...n){if(!t)throw Fm(e,...n)}function Pr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw dc(e),new Error(e)}function Ur(t,e){t||Pr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function wC(){return v_()==="http:"||v_()==="https:"}function v_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wC()||KE()||"connection"in navigator)?navigator.onLine:!0}function EC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ur(n>e,"Short delay should be less than long delay!"),this.isMobile=WP()||YP()}get(){return xC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(t,e){Ur(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=new ql(3e4,6e4);function zm(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Mo(t,e,n,r,i={}){return sT(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=$l(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return GP()||(u.referrerPolicy="no-referrer"),iT.fetch()(oT(t,t.config.apiHost,n,a),u)})}async function sT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},TC),e);try{const i=new AC(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Du(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Du(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Du(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Du(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Vm(t,c,u);pr(t,c)}}catch(i){if(i instanceof Yn)throw i;pr(t,"network-request-failed",{message:String(i)})}}async function SC(t,e,n,r,i={}){const s=await Mo(t,e,n,r,i);return"mfaPendingCredential"in s&&pr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function oT(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Bm(t.config,i):`${t.config.apiScheme}://${i}`}class AC{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Hn(this.auth,"network-request-failed")),kC.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Du(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Hn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IC(t,e){return Mo(t,"POST","/v1/accounts:delete",e)}async function aT(t,e){return Mo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PC(t,e=!1){const n=Gt(t),r=await n.getIdToken(e),i=Um(r);be(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ga(Sd(i.auth_time)),issuedAtTime:Ga(Sd(i.iat)),expirationTime:Ga(Sd(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Sd(t){return Number(t)*1e3}function Um(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return dc("JWT malformed, contained fewer than 3 sections"),null;try{const i=$E(n);return i?JSON.parse(i):(dc("Failed to decode base64 JWT payload"),null)}catch(i){return dc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function __(t){const e=Um(t);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Yn&&OC(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function OC({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ga(this.lastLoginAt),this.creationTime=Ga(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Sl(t,aT(n,{idToken:r}));be(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?lT(s.providerUserInfo):[],a=NC(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new tg(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function RC(t){const e=Gt(t);await oh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function NC(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function lT(t){return t.map(e=>{var{providerId:n}=e,r=jm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DC(t,e){const n=await sT(t,{},async()=>{const r=$l({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=oT(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",iT.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function MC(t,e){return Mo(t,"POST","/v2/accounts:revokeToken",zm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):__(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){be(e.length!==0,"internal-error");const n=__(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await DC(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new ao;return r&&(be(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(be(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(be(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ao,this.toJSON())}_performRefresh(){return Pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(t,e){be(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Or{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=jm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new CC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new tg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Sl(this,this.stsTokenManager.getToken(this.auth,e));return be(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return PC(this,e)}reload(){return RC(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Or(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await oh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ir(this.auth.app))return Promise.reject(os(this.auth));const e=await this.getIdToken();return await Sl(this,IC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,c;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,d=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,g=(u=n.createdAt)!==null&&u!==void 0?u:void 0,m=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:w,emailVerified:b,isAnonymous:T,providerData:C,stsTokenManager:k}=n;be(w&&k,e,"internal-error");const x=ao.fromJSON(this.name,k);be(typeof w=="string",e,"internal-error"),Xr(h,e.name),Xr(f,e.name),be(typeof b=="boolean",e,"internal-error"),be(typeof T=="boolean",e,"internal-error"),Xr(d,e.name),Xr(y,e.name),Xr(v,e.name),Xr(_,e.name),Xr(g,e.name),Xr(m,e.name);const P=new Or({uid:w,auth:e,email:f,emailVerified:b,displayName:h,isAnonymous:T,photoURL:y,phoneNumber:d,tenantId:v,stsTokenManager:x,createdAt:g,lastLoginAt:m});return C&&Array.isArray(C)&&(P.providerData=C.map(S=>Object.assign({},S))),_&&(P._redirectEventId=_),P}static async _fromIdTokenResponse(e,n,r=!1){const i=new ao;i.updateFromServerResponse(n);const s=new Or({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await oh(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];be(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?lT(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new ao;a.updateFromIdToken(r);const l=new Or({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new tg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_=new Map;function Cr(t){Ur(t instanceof Function,"Expected a class definition");let e=b_.get(t);return e?(Ur(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,b_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}uT.type="NONE";const w_=uT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(t,e,n){return`firebase:${t}:${e}:${n}`}class lo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=pc(this.userKey,i.apiKey,s),this.fullPersistenceKey=pc("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Or._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new lo(Cr(w_),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Cr(w_);const o=pc(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const h=Or._fromJSON(e,c);u!==s&&(a=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new lo(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new lo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gT(e))return"Blackberry";if(mT(e))return"Webos";if(hT(e))return"Safari";if((e.includes("chrome/")||fT(e))&&!e.includes("edge/"))return"Chrome";if(pT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function cT(t=Kt()){return/firefox\//i.test(t)}function hT(t=Kt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fT(t=Kt()){return/crios\//i.test(t)}function dT(t=Kt()){return/iemobile/i.test(t)}function pT(t=Kt()){return/android/i.test(t)}function gT(t=Kt()){return/blackberry/i.test(t)}function mT(t=Kt()){return/webos/i.test(t)}function $m(t=Kt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function LC(t=Kt()){var e;return $m(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function jC(){return QP()&&document.documentMode===10}function yT(t=Kt()){return $m(t)||pT(t)||mT(t)||gT(t)||/windows phone/i.test(t)||dT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(t,e=[]){let n;switch(t){case"Browser":n=x_(Kt());break;case"Worker":n=`${x_(Kt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Do}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FC(t,e={}){return Mo(t,"GET","/v2/passwordPolicy",zm(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=6;class zC{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:BC,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new E_(this),this.idTokenSubscription=new E_(this),this.beforeStateQueue=new VC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Cr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await lo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await aT(this,{idToken:e}),r=await Or._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ir(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await oh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=EC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ir(this.app))return Promise.reject(os(this));const n=e?Gt(e):null;return n&&be(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ir(this.app)?Promise.reject(os(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ir(this.app)?Promise.reject(os(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FC(this),n=new zC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Is("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await MC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Cr(e)||this._popupRedirectResolver;be(n,this,"argument-error"),this.redirectPersistenceManager=await lo.create(this,[Cr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&_C(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ef(t){return Gt(t)}class E_{constructor(e){this.auth=e,this.observer=null,this.addObserver=rO(n=>this.observer=n)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $C(t){qm=t}function qC(t){return qm.loadJS(t)}function HC(){return qm.gapiScript}function WC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(t,e){const n=Ps(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Tl(s,e??{}))return i;pr(i,"already-initialized")}return n.initialize({options:e})}function GC(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Cr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function YC(t,e,n){const r=ef(t);be(r._canInitEmulator,r,"emulator-config-failed"),be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=_T(e),{host:o,port:a}=QC(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),XC()}function _T(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function QC(t){const e=_T(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:T_(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:T_(o)}}}function T_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function XC(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Pr("not implemented")}_getIdTokenResponse(e){return Pr("not implemented")}_linkToIdToken(e,n){return Pr("not implemented")}_getReauthenticationResolver(e){return Pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(t,e){return SC(t,"POST","/v1/accounts:signInWithIdp",zm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC="http://localhost";class gs extends bT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new gs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):pr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=jm(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new gs(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return uo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,uo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,uo(e,n)}buildRequest(){const e={requestUri:JC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=$l(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl extends Hm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii extends Hl{constructor(){super("facebook.com")}static credential(e){return gs._fromParams({providerId:ii.PROVIDER_ID,signInMethod:ii.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ii.credentialFromTaggedObject(e)}static credentialFromError(e){return ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ii.credential(e.oauthAccessToken)}catch{return null}}}ii.FACEBOOK_SIGN_IN_METHOD="facebook.com";ii.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends Hl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return gs._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return kr.credential(n,r)}catch{return null}}}kr.GOOGLE_SIGN_IN_METHOD="google.com";kr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si extends Hl{constructor(){super("github.com")}static credential(e){return gs._fromParams({providerId:si.PROVIDER_ID,signInMethod:si.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return si.credentialFromTaggedObject(e)}static credentialFromError(e){return si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return si.credential(e.oauthAccessToken)}catch{return null}}}si.GITHUB_SIGN_IN_METHOD="github.com";si.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends Hl{constructor(){super("twitter.com")}static credential(e,n){return gs._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return oi.credential(n,r)}catch{return null}}}oi.TWITTER_SIGN_IN_METHOD="twitter.com";oi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Or._fromIdTokenResponse(e,r,i),o=k_(r);return new bo({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=k_(r);return new bo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function k_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah extends Yn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ah.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new ah(e,n,r,i)}}function wT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ah._fromErrorAndOperation(t,s,e,r):s})}async function ZC(t,e,n=!1){const r=await Sl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return bo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eR(t,e,n=!1){const{auth:r}=t;if(Ir(r.app))return Promise.reject(os(r));const i="reauthenticate";try{const s=await Sl(t,wT(r,i,e,t),n);be(s.idToken,r,"internal-error");const o=Um(s.idToken);be(o,r,"internal-error");const{sub:a}=o;return be(t.uid===a,r,"user-mismatch"),bo._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&pr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tR(t,e,n=!1){if(Ir(t.app))return Promise.reject(os(t));const r="signIn",i=await wT(t,r,e),s=await bo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function nR(t,e,n,r){return Gt(t).onIdTokenChanged(e,n,r)}function rR(t,e,n){return Gt(t).beforeAuthStateChanged(e,n)}function iR(t,e,n,r){return Gt(t).onAuthStateChanged(e,n,r)}function sR(t){return Gt(t).signOut()}const lh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(lh,"1"),this.storage.removeItem(lh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=1e3,aR=10;class ET extends xT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);jC()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,aR):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},oR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ET.type="LOCAL";const lR=ET;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT extends xT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}TT.type="SESSION";const kT=TT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new tf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await uR(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}tf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Wm("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(){return window}function hR(t){ar().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(){return typeof ar().WorkerGlobalScope<"u"&&typeof ar().importScripts=="function"}async function fR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function pR(){return ST()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="firebaseLocalStorageDb",gR=1,uh="firebaseLocalStorage",IT="fbase_key";class Wl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function nf(t,e){return t.transaction([uh],e?"readwrite":"readonly").objectStore(uh)}function mR(){const t=indexedDB.deleteDatabase(AT);return new Wl(t).toPromise()}function ng(){const t=indexedDB.open(AT,gR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(uh,{keyPath:IT})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(uh)?e(r):(r.close(),await mR(),e(await ng()))})})}async function S_(t,e,n){const r=nf(t,!0).put({[IT]:e,value:n});return new Wl(r).toPromise()}async function yR(t,e){const n=nf(t,!1).get(e),r=await new Wl(n).toPromise();return r===void 0?null:r.value}function A_(t,e){const n=nf(t,!0).delete(e);return new Wl(n).toPromise()}const vR=800,_R=3;class PT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ng(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>_R)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ST()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tf._getInstance(pR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await fR(),!this.activeServiceWorker)return;this.sender=new cR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ng();return await S_(e,lh,"1"),await A_(e,lh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>S_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>yR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>A_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=nf(i,!1).getAll();return new Wl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}PT.type="LOCAL";const bR=PT;new ql(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(t,e){return e?Cr(e):(be(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km extends bT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return uo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return uo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return uo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function wR(t){return tR(t.auth,new Km(t),t.bypassAuthState)}function xR(t){const{auth:e,user:n}=t;return be(n,e,"internal-error"),eR(n,new Km(t),t.bypassAuthState)}async function ER(t){const{auth:e,user:n}=t;return be(n,e,"internal-error"),ZC(n,new Km(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wR;case"linkViaPopup":case"linkViaRedirect":return ER;case"reauthViaPopup":case"reauthViaRedirect":return xR;default:pr(this.auth,"internal-error")}}resolve(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=new ql(2e3,1e4);async function kR(t,e,n){if(Ir(t.app))return Promise.reject(Hn(t,"operation-not-supported-in-this-environment"));const r=ef(t);bC(t,e,Hm);const i=OT(r,n);return new es(r,"signInViaPopup",e,i).executeNotNull()}class es extends CT{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,es.currentPopupAction&&es.currentPopupAction.cancel(),es.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){Ur(this.filter.length===1,"Popup operations only handle one event");const e=Wm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,es.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,TR.get())};e()}}es.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR="pendingRedirect",gc=new Map;class AR extends CT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=gc.get(this.auth._key());if(!e){try{const r=await IR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}gc.set(this.auth._key(),e)}return this.bypassAuthState||gc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IR(t,e){const n=CR(e),r=OR(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function PR(t,e){gc.set(t._key(),e)}function OR(t){return Cr(t._redirectPersistence)}function CR(t){return pc(SR,t.config.apiKey,t.name)}async function RR(t,e,n=!1){if(Ir(t.app))return Promise.reject(os(t));const r=ef(t),i=OT(r,e),o=await new AR(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=10*60*1e3;class DR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!MR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!RT(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Hn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=NR&&this.cachedEventUids.clear(),this.cachedEventUids.has(I_(e))}saveEventToCache(e){this.cachedEventUids.add(I_(e)),this.lastProcessedEventTime=Date.now()}}function I_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function RT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function MR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return RT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LR(t,e={}){return Mo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VR=/^https?/;async function FR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await LR(t);for(const n of e)try{if(BR(n))return}catch{}pr(t,"unauthorized-domain")}function BR(t){const e=eg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!VR.test(n))return!1;if(jR.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=new ql(3e4,6e4);function P_(){const t=ar().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function UR(t){return new Promise((e,n)=>{var r,i,s;function o(){P_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{P_(),n(Hn(t,"network-request-failed"))},timeout:zR.get()})}if(!((i=(r=ar().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ar().gapi)===null||s===void 0)&&s.load)o();else{const a=WC("iframefcb");return ar()[a]=()=>{gapi.load?o():n(Hn(t,"network-request-failed"))},qC(`${HC()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw mc=null,e})}let mc=null;function $R(t){return mc=mc||UR(t),mc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=new ql(5e3,15e3),HR="__/auth/iframe",WR="emulator/auth/iframe",KR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YR(t){const e=t.config;be(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Bm(e,WR):`https://${t.config.authDomain}/${HR}`,r={apiKey:e.apiKey,appName:t.name,v:Do},i=GR.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${$l(r).slice(1)}`}async function QR(t){const e=await $R(t),n=ar().gapi;return be(n,t,"internal-error"),e.open({where:document.body,url:YR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KR,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Hn(t,"network-request-failed"),a=ar().setTimeout(()=>{s(o)},qR.get());function l(){ar().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},JR=500,ZR=600,eN="_blank",tN="http://localhost";class O_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nN(t,e,n,r=JR,i=ZR){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},XR),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Kt().toLowerCase();n&&(a=fT(u)?eN:n),cT(u)&&(e=e||tN,l.scrollbars="yes");const c=Object.entries(l).reduce((f,[d,y])=>`${f}${d}=${y},`,"");if(LC(u)&&a!=="_self")return rN(e||"",a),new O_(null);const h=window.open(e||"",a,c);be(h,t,"popup-blocked");try{h.focus()}catch{}return new O_(h)}function rN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN="__/auth/handler",sN="emulator/auth/handler",oN=encodeURIComponent("fac");async function C_(t,e,n,r,i,s){be(t.config.authDomain,t,"auth-domain-config-required"),be(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Do,eventId:i};if(e instanceof Hm){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",nO(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,h]of Object.entries({}))o[c]=h}if(e instanceof Hl){const c=e.getScopes().filter(h=>h!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${oN}=${encodeURIComponent(l)}`:"";return`${aN(t)}?${$l(a).slice(1)}${u}`}function aN({config:t}){return t.emulator?Bm(t,sN):`https://${t.authDomain}/${iN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad="webStorageSupport";class lN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kT,this._completeRedirectFn=RR,this._overrideRedirectResult=PR}async _openPopup(e,n,r,i){var s;Ur((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await C_(e,n,r,eg(),i);return nN(e,o,Wm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await C_(e,n,r,eg(),i);return hR(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ur(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await QR(e),r=new DR(e);return n.register("authEvent",i=>(be(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ad,{type:Ad},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Ad];o!==void 0&&n(!!o),pr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=FR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return yT()||hT()||$m()}}const uN=lN;var R_="@firebase/auth",N_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fN(t){dr(new Kn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;be(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vT(t)},u=new UC(r,i,s,l);return GC(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),dr(new Kn("auth-internal",e=>{const n=ef(e.getProvider("auth").getImmediate());return(r=>new cN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),On(R_,N_,hN(t)),On(R_,N_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN=5*60,pN=WE("authIdTokenMaxAge")||dN;let D_=null;const gN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>pN)return;const i=n==null?void 0:n.token;D_!==i&&(D_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function mN(t=Lm()){const e=Ps(t,"auth");if(e.isInitialized())return e.getImmediate();const n=KC(t,{popupRedirectResolver:uN,persistence:[bR,lR,kT]}),r=WE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=gN(s.toString());rR(n,o,()=>o(n.currentUser)),nR(n,a=>o(a))}}const i=qE("auth");return i&&YC(n,`http://${i}`),n}function yN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}$C({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Hn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",yN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fN("Browser");var M_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var as,NT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,x){function P(){}P.prototype=x.prototype,k.D=x.prototype,k.prototype=new P,k.prototype.constructor=k,k.C=function(S,E,A){for(var O=Array(arguments.length-2),M=2;M<arguments.length;M++)O[M-2]=arguments[M];return x.prototype[E].apply(S,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,x,P){P||(P=0);var S=Array(16);if(typeof x=="string")for(var E=0;16>E;++E)S[E]=x.charCodeAt(P++)|x.charCodeAt(P++)<<8|x.charCodeAt(P++)<<16|x.charCodeAt(P++)<<24;else for(E=0;16>E;++E)S[E]=x[P++]|x[P++]<<8|x[P++]<<16|x[P++]<<24;x=k.g[0],P=k.g[1],E=k.g[2];var A=k.g[3],O=x+(A^P&(E^A))+S[0]+3614090360&4294967295;x=P+(O<<7&4294967295|O>>>25),O=A+(E^x&(P^E))+S[1]+3905402710&4294967295,A=x+(O<<12&4294967295|O>>>20),O=E+(P^A&(x^P))+S[2]+606105819&4294967295,E=A+(O<<17&4294967295|O>>>15),O=P+(x^E&(A^x))+S[3]+3250441966&4294967295,P=E+(O<<22&4294967295|O>>>10),O=x+(A^P&(E^A))+S[4]+4118548399&4294967295,x=P+(O<<7&4294967295|O>>>25),O=A+(E^x&(P^E))+S[5]+1200080426&4294967295,A=x+(O<<12&4294967295|O>>>20),O=E+(P^A&(x^P))+S[6]+2821735955&4294967295,E=A+(O<<17&4294967295|O>>>15),O=P+(x^E&(A^x))+S[7]+4249261313&4294967295,P=E+(O<<22&4294967295|O>>>10),O=x+(A^P&(E^A))+S[8]+1770035416&4294967295,x=P+(O<<7&4294967295|O>>>25),O=A+(E^x&(P^E))+S[9]+2336552879&4294967295,A=x+(O<<12&4294967295|O>>>20),O=E+(P^A&(x^P))+S[10]+4294925233&4294967295,E=A+(O<<17&4294967295|O>>>15),O=P+(x^E&(A^x))+S[11]+2304563134&4294967295,P=E+(O<<22&4294967295|O>>>10),O=x+(A^P&(E^A))+S[12]+1804603682&4294967295,x=P+(O<<7&4294967295|O>>>25),O=A+(E^x&(P^E))+S[13]+4254626195&4294967295,A=x+(O<<12&4294967295|O>>>20),O=E+(P^A&(x^P))+S[14]+2792965006&4294967295,E=A+(O<<17&4294967295|O>>>15),O=P+(x^E&(A^x))+S[15]+1236535329&4294967295,P=E+(O<<22&4294967295|O>>>10),O=x+(E^A&(P^E))+S[1]+4129170786&4294967295,x=P+(O<<5&4294967295|O>>>27),O=A+(P^E&(x^P))+S[6]+3225465664&4294967295,A=x+(O<<9&4294967295|O>>>23),O=E+(x^P&(A^x))+S[11]+643717713&4294967295,E=A+(O<<14&4294967295|O>>>18),O=P+(A^x&(E^A))+S[0]+3921069994&4294967295,P=E+(O<<20&4294967295|O>>>12),O=x+(E^A&(P^E))+S[5]+3593408605&4294967295,x=P+(O<<5&4294967295|O>>>27),O=A+(P^E&(x^P))+S[10]+38016083&4294967295,A=x+(O<<9&4294967295|O>>>23),O=E+(x^P&(A^x))+S[15]+3634488961&4294967295,E=A+(O<<14&4294967295|O>>>18),O=P+(A^x&(E^A))+S[4]+3889429448&4294967295,P=E+(O<<20&4294967295|O>>>12),O=x+(E^A&(P^E))+S[9]+568446438&4294967295,x=P+(O<<5&4294967295|O>>>27),O=A+(P^E&(x^P))+S[14]+3275163606&4294967295,A=x+(O<<9&4294967295|O>>>23),O=E+(x^P&(A^x))+S[3]+4107603335&4294967295,E=A+(O<<14&4294967295|O>>>18),O=P+(A^x&(E^A))+S[8]+1163531501&4294967295,P=E+(O<<20&4294967295|O>>>12),O=x+(E^A&(P^E))+S[13]+2850285829&4294967295,x=P+(O<<5&4294967295|O>>>27),O=A+(P^E&(x^P))+S[2]+4243563512&4294967295,A=x+(O<<9&4294967295|O>>>23),O=E+(x^P&(A^x))+S[7]+1735328473&4294967295,E=A+(O<<14&4294967295|O>>>18),O=P+(A^x&(E^A))+S[12]+2368359562&4294967295,P=E+(O<<20&4294967295|O>>>12),O=x+(P^E^A)+S[5]+4294588738&4294967295,x=P+(O<<4&4294967295|O>>>28),O=A+(x^P^E)+S[8]+2272392833&4294967295,A=x+(O<<11&4294967295|O>>>21),O=E+(A^x^P)+S[11]+1839030562&4294967295,E=A+(O<<16&4294967295|O>>>16),O=P+(E^A^x)+S[14]+4259657740&4294967295,P=E+(O<<23&4294967295|O>>>9),O=x+(P^E^A)+S[1]+2763975236&4294967295,x=P+(O<<4&4294967295|O>>>28),O=A+(x^P^E)+S[4]+1272893353&4294967295,A=x+(O<<11&4294967295|O>>>21),O=E+(A^x^P)+S[7]+4139469664&4294967295,E=A+(O<<16&4294967295|O>>>16),O=P+(E^A^x)+S[10]+3200236656&4294967295,P=E+(O<<23&4294967295|O>>>9),O=x+(P^E^A)+S[13]+681279174&4294967295,x=P+(O<<4&4294967295|O>>>28),O=A+(x^P^E)+S[0]+3936430074&4294967295,A=x+(O<<11&4294967295|O>>>21),O=E+(A^x^P)+S[3]+3572445317&4294967295,E=A+(O<<16&4294967295|O>>>16),O=P+(E^A^x)+S[6]+76029189&4294967295,P=E+(O<<23&4294967295|O>>>9),O=x+(P^E^A)+S[9]+3654602809&4294967295,x=P+(O<<4&4294967295|O>>>28),O=A+(x^P^E)+S[12]+3873151461&4294967295,A=x+(O<<11&4294967295|O>>>21),O=E+(A^x^P)+S[15]+530742520&4294967295,E=A+(O<<16&4294967295|O>>>16),O=P+(E^A^x)+S[2]+3299628645&4294967295,P=E+(O<<23&4294967295|O>>>9),O=x+(E^(P|~A))+S[0]+4096336452&4294967295,x=P+(O<<6&4294967295|O>>>26),O=A+(P^(x|~E))+S[7]+1126891415&4294967295,A=x+(O<<10&4294967295|O>>>22),O=E+(x^(A|~P))+S[14]+2878612391&4294967295,E=A+(O<<15&4294967295|O>>>17),O=P+(A^(E|~x))+S[5]+4237533241&4294967295,P=E+(O<<21&4294967295|O>>>11),O=x+(E^(P|~A))+S[12]+1700485571&4294967295,x=P+(O<<6&4294967295|O>>>26),O=A+(P^(x|~E))+S[3]+2399980690&4294967295,A=x+(O<<10&4294967295|O>>>22),O=E+(x^(A|~P))+S[10]+4293915773&4294967295,E=A+(O<<15&4294967295|O>>>17),O=P+(A^(E|~x))+S[1]+2240044497&4294967295,P=E+(O<<21&4294967295|O>>>11),O=x+(E^(P|~A))+S[8]+1873313359&4294967295,x=P+(O<<6&4294967295|O>>>26),O=A+(P^(x|~E))+S[15]+4264355552&4294967295,A=x+(O<<10&4294967295|O>>>22),O=E+(x^(A|~P))+S[6]+2734768916&4294967295,E=A+(O<<15&4294967295|O>>>17),O=P+(A^(E|~x))+S[13]+1309151649&4294967295,P=E+(O<<21&4294967295|O>>>11),O=x+(E^(P|~A))+S[4]+4149444226&4294967295,x=P+(O<<6&4294967295|O>>>26),O=A+(P^(x|~E))+S[11]+3174756917&4294967295,A=x+(O<<10&4294967295|O>>>22),O=E+(x^(A|~P))+S[2]+718787259&4294967295,E=A+(O<<15&4294967295|O>>>17),O=P+(A^(E|~x))+S[9]+3951481745&4294967295,k.g[0]=k.g[0]+x&4294967295,k.g[1]=k.g[1]+(E+(O<<21&4294967295|O>>>11))&4294967295,k.g[2]=k.g[2]+E&4294967295,k.g[3]=k.g[3]+A&4294967295}r.prototype.u=function(k,x){x===void 0&&(x=k.length);for(var P=x-this.blockSize,S=this.B,E=this.h,A=0;A<x;){if(E==0)for(;A<=P;)i(this,k,A),A+=this.blockSize;if(typeof k=="string"){for(;A<x;)if(S[E++]=k.charCodeAt(A++),E==this.blockSize){i(this,S),E=0;break}}else for(;A<x;)if(S[E++]=k[A++],E==this.blockSize){i(this,S),E=0;break}}this.h=E,this.o+=x},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var x=1;x<k.length-8;++x)k[x]=0;var P=8*this.o;for(x=k.length-8;x<k.length;++x)k[x]=P&255,P/=256;for(this.u(k),k=Array(16),x=P=0;4>x;++x)for(var S=0;32>S;S+=8)k[P++]=this.g[x]>>>S&255;return k};function s(k,x){var P=a;return Object.prototype.hasOwnProperty.call(P,k)?P[k]:P[k]=x(k)}function o(k,x){this.h=x;for(var P=[],S=!0,E=k.length-1;0<=E;E--){var A=k[E]|0;S&&A==x||(P[E]=A,S=!1)}this.g=P}var a={};function l(k){return-128<=k&&128>k?s(k,function(x){return new o([x|0],0>x?-1:0)}):new o([k|0],0>k?-1:0)}function u(k){if(isNaN(k)||!isFinite(k))return h;if(0>k)return _(u(-k));for(var x=[],P=1,S=0;k>=P;S++)x[S]=k/P|0,P*=4294967296;return new o(x,0)}function c(k,x){if(k.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(k.charAt(0)=="-")return _(c(k.substring(1),x));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=u(Math.pow(x,8)),S=h,E=0;E<k.length;E+=8){var A=Math.min(8,k.length-E),O=parseInt(k.substring(E,E+A),x);8>A?(A=u(Math.pow(x,A)),S=S.j(A).add(u(O))):(S=S.j(P),S=S.add(u(O)))}return S}var h=l(0),f=l(1),d=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-_(this).m();for(var k=0,x=1,P=0;P<this.g.length;P++){var S=this.i(P);k+=(0<=S?S:4294967296+S)*x,x*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(y(this))return"0";if(v(this))return"-"+_(this).toString(k);for(var x=u(Math.pow(k,6)),P=this,S="";;){var E=b(P,x).g;P=g(P,E.j(x));var A=((0<P.g.length?P.g[0]:P.h)>>>0).toString(k);if(P=E,y(P))return A+S;for(;6>A.length;)A="0"+A;S=A+S}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function y(k){if(k.h!=0)return!1;for(var x=0;x<k.g.length;x++)if(k.g[x]!=0)return!1;return!0}function v(k){return k.h==-1}t.l=function(k){return k=g(this,k),v(k)?-1:y(k)?0:1};function _(k){for(var x=k.g.length,P=[],S=0;S<x;S++)P[S]=~k.g[S];return new o(P,~k.h).add(f)}t.abs=function(){return v(this)?_(this):this},t.add=function(k){for(var x=Math.max(this.g.length,k.g.length),P=[],S=0,E=0;E<=x;E++){var A=S+(this.i(E)&65535)+(k.i(E)&65535),O=(A>>>16)+(this.i(E)>>>16)+(k.i(E)>>>16);S=O>>>16,A&=65535,O&=65535,P[E]=O<<16|A}return new o(P,P[P.length-1]&-2147483648?-1:0)};function g(k,x){return k.add(_(x))}t.j=function(k){if(y(this)||y(k))return h;if(v(this))return v(k)?_(this).j(_(k)):_(_(this).j(k));if(v(k))return _(this.j(_(k)));if(0>this.l(d)&&0>k.l(d))return u(this.m()*k.m());for(var x=this.g.length+k.g.length,P=[],S=0;S<2*x;S++)P[S]=0;for(S=0;S<this.g.length;S++)for(var E=0;E<k.g.length;E++){var A=this.i(S)>>>16,O=this.i(S)&65535,M=k.i(E)>>>16,F=k.i(E)&65535;P[2*S+2*E]+=O*F,m(P,2*S+2*E),P[2*S+2*E+1]+=A*F,m(P,2*S+2*E+1),P[2*S+2*E+1]+=O*M,m(P,2*S+2*E+1),P[2*S+2*E+2]+=A*M,m(P,2*S+2*E+2)}for(S=0;S<x;S++)P[S]=P[2*S+1]<<16|P[2*S];for(S=x;S<2*x;S++)P[S]=0;return new o(P,0)};function m(k,x){for(;(k[x]&65535)!=k[x];)k[x+1]+=k[x]>>>16,k[x]&=65535,x++}function w(k,x){this.g=k,this.h=x}function b(k,x){if(y(x))throw Error("division by zero");if(y(k))return new w(h,h);if(v(k))return x=b(_(k),x),new w(_(x.g),_(x.h));if(v(x))return x=b(k,_(x)),new w(_(x.g),x.h);if(30<k.g.length){if(v(k)||v(x))throw Error("slowDivide_ only works with positive integers.");for(var P=f,S=x;0>=S.l(k);)P=T(P),S=T(S);var E=C(P,1),A=C(S,1);for(S=C(S,2),P=C(P,2);!y(S);){var O=A.add(S);0>=O.l(k)&&(E=E.add(P),A=O),S=C(S,1),P=C(P,1)}return x=g(k,E.j(x)),new w(E,x)}for(E=h;0<=k.l(x);){for(P=Math.max(1,Math.floor(k.m()/x.m())),S=Math.ceil(Math.log(P)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),A=u(P),O=A.j(x);v(O)||0<O.l(k);)P-=S,A=u(P),O=A.j(x);y(A)&&(A=f),E=E.add(A),k=g(k,O)}return new w(E,k)}t.A=function(k){return b(this,k).h},t.and=function(k){for(var x=Math.max(this.g.length,k.g.length),P=[],S=0;S<x;S++)P[S]=this.i(S)&k.i(S);return new o(P,this.h&k.h)},t.or=function(k){for(var x=Math.max(this.g.length,k.g.length),P=[],S=0;S<x;S++)P[S]=this.i(S)|k.i(S);return new o(P,this.h|k.h)},t.xor=function(k){for(var x=Math.max(this.g.length,k.g.length),P=[],S=0;S<x;S++)P[S]=this.i(S)^k.i(S);return new o(P,this.h^k.h)};function T(k){for(var x=k.g.length+1,P=[],S=0;S<x;S++)P[S]=k.i(S)<<1|k.i(S-1)>>>31;return new o(P,k.h)}function C(k,x){var P=x>>5;x%=32;for(var S=k.g.length-P,E=[],A=0;A<S;A++)E[A]=0<x?k.i(A+P)>>>x|k.i(A+P+1)<<32-x:k.i(A+P);return new o(E,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,NT=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=c,as=o}).apply(typeof M_<"u"?M_:typeof self<"u"?self:typeof window<"u"?window:{});var Mu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var DT,Pa,MT,yc,rg,LT,jT,VT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,I,R){return p==Array.prototype||p==Object.prototype||(p[I]=R.value),p};function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mu=="object"&&Mu];for(var I=0;I<p.length;++I){var R=p[I];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var r=n(this);function i(p,I){if(I)e:{var R=r;p=p.split(".");for(var L=0;L<p.length-1;L++){var Y=p[L];if(!(Y in R))break e;R=R[Y]}p=p[p.length-1],L=R[p],I=I(L),I!=L&&I!=null&&e(R,p,{configurable:!0,writable:!0,value:I})}}function s(p,I){p instanceof String&&(p+="");var R=0,L=!1,Y={next:function(){if(!L&&R<p.length){var Z=R++;return{value:I(Z,p[Z]),done:!1}}return L=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}i("Array.prototype.values",function(p){return p||function(){return s(this,function(I,R){return R})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(p){var I=typeof p;return I=I!="object"?I:p?Array.isArray(p)?"array":I:"null",I=="array"||I=="object"&&typeof p.length=="number"}function u(p){var I=typeof p;return I=="object"&&p!=null||I=="function"}function c(p,I,R){return p.call.apply(p.bind,arguments)}function h(p,I,R){if(!p)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,L),p.apply(I,Y)}}return function(){return p.apply(I,arguments)}}function f(p,I,R){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:h,f.apply(null,arguments)}function d(p,I){var R=Array.prototype.slice.call(arguments,1);return function(){var L=R.slice();return L.push.apply(L,arguments),p.apply(this,L)}}function y(p,I){function R(){}R.prototype=I.prototype,p.aa=I.prototype,p.prototype=new R,p.prototype.constructor=p,p.Qb=function(L,Y,Z){for(var ue=Array(arguments.length-2),He=2;He<arguments.length;He++)ue[He-2]=arguments[He];return I.prototype[Y].apply(L,ue)}}function v(p){const I=p.length;if(0<I){const R=Array(I);for(let L=0;L<I;L++)R[L]=p[L];return R}return[]}function _(p,I){for(let R=1;R<arguments.length;R++){const L=arguments[R];if(l(L)){const Y=p.length||0,Z=L.length||0;p.length=Y+Z;for(let ue=0;ue<Z;ue++)p[Y+ue]=L[ue]}else p.push(L)}}class g{constructor(I,R){this.i=I,this.j=R,this.h=0,this.g=null}get(){let I;return 0<this.h?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function m(p){return/^[\s\xa0]*$/.test(p)}function w(){var p=a.navigator;return p&&(p=p.userAgent)?p:""}function b(p){return b[" "](p),p}b[" "]=function(){};var T=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function C(p,I,R){for(const L in p)I.call(R,p[L],L,p)}function k(p,I){for(const R in p)I.call(void 0,p[R],R,p)}function x(p){const I={};for(const R in p)I[R]=p[R];return I}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(p,I){let R,L;for(let Y=1;Y<arguments.length;Y++){L=arguments[Y];for(R in L)p[R]=L[R];for(let Z=0;Z<P.length;Z++)R=P[Z],Object.prototype.hasOwnProperty.call(L,R)&&(p[R]=L[R])}}function E(p){var I=1;p=p.split(":");const R=[];for(;0<I&&p.length;)R.push(p.shift()),I--;return p.length&&R.push(p.join(":")),R}function A(p){a.setTimeout(()=>{throw p},0)}function O(){var p=U;let I=null;return p.g&&(I=p.g,p.g=p.g.next,p.g||(p.h=null),I.next=null),I}class M{constructor(){this.h=this.g=null}add(I,R){const L=F.get();L.set(I,R),this.h?this.h.next=L:this.g=L,this.h=L}}var F=new g(()=>new $,p=>p.reset());class ${constructor(){this.next=this.g=this.h=null}set(I,R){this.h=I,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let q,W=!1,U=new M,B=()=>{const p=a.Promise.resolve(void 0);q=()=>{p.then(N)}};var N=()=>{for(var p;p=O();){try{p.h.call(p.g)}catch(R){A(R)}var I=F;I.j(p),100>I.h&&(I.h++,p.next=I.g,I.g=p)}W=!1};function V(){this.s=this.s,this.C=this.C}V.prototype.s=!1,V.prototype.ma=function(){this.s||(this.s=!0,this.N())},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(p,I){this.type=p,this.g=this.target=I,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var G=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var p=!1,I=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const R=()=>{};a.addEventListener("test",R,I),a.removeEventListener("test",R,I)}catch{}return p}();function K(p,I){if(z.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var R=this.type=p.type,L=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=I,I=p.relatedTarget){if(T){e:{try{b(I.nodeName);var Y=!0;break e}catch{}Y=!1}Y||(I=null)}}else R=="mouseover"?I=p.fromElement:R=="mouseout"&&(I=p.toElement);this.relatedTarget=I,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:j[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&K.aa.h.call(this)}}y(K,z);var j={2:"touch",3:"pen",4:"mouse"};K.prototype.h=function(){K.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var H="closure_listenable_"+(1e6*Math.random()|0),X=0;function J(p,I,R,L,Y){this.listener=p,this.proxy=null,this.src=I,this.type=R,this.capture=!!L,this.ha=Y,this.key=++X,this.da=this.fa=!1}function te(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function fe(p){this.src=p,this.g={},this.h=0}fe.prototype.add=function(p,I,R,L,Y){var Z=p.toString();p=this.g[Z],p||(p=this.g[Z]=[],this.h++);var ue=_e(p,I,L,Y);return-1<ue?(I=p[ue],R||(I.fa=!1)):(I=new J(I,this.src,Z,!!L,Y),I.fa=R,p.push(I)),I};function ve(p,I){var R=I.type;if(R in p.g){var L=p.g[R],Y=Array.prototype.indexOf.call(L,I,void 0),Z;(Z=0<=Y)&&Array.prototype.splice.call(L,Y,1),Z&&(te(I),p.g[R].length==0&&(delete p.g[R],p.h--))}}function _e(p,I,R,L){for(var Y=0;Y<p.length;++Y){var Z=p[Y];if(!Z.da&&Z.listener==I&&Z.capture==!!R&&Z.ha==L)return Y}return-1}var Se="closure_lm_"+(1e6*Math.random()|0),Ce={};function se(p,I,R,L,Y){if(Array.isArray(I)){for(var Z=0;Z<I.length;Z++)se(p,I[Z],R,L,Y);return null}return R=Ae(R),p&&p[H]?p.K(I,R,u(L)?!!L.capture:!1,Y):ge(p,I,R,!1,L,Y)}function ge(p,I,R,L,Y,Z){if(!I)throw Error("Invalid event type");var ue=u(Y)?!!Y.capture:!!Y,He=Te(p);if(He||(p[Se]=He=new fe(p)),R=He.add(I,R,L,ue,Z),R.proxy)return R;if(L=Q(),R.proxy=L,L.src=p,L.listener=R,p.addEventListener)G||(Y=ue),Y===void 0&&(Y=!1),p.addEventListener(I.toString(),L,Y);else if(p.attachEvent)p.attachEvent(he(I.toString()),L);else if(p.addListener&&p.removeListener)p.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return R}function Q(){function p(R){return I.call(p.src,p.listener,R)}const I=ne;return p}function ee(p,I,R,L,Y){if(Array.isArray(I))for(var Z=0;Z<I.length;Z++)ee(p,I[Z],R,L,Y);else L=u(L)?!!L.capture:!!L,R=Ae(R),p&&p[H]?(p=p.i,I=String(I).toString(),I in p.g&&(Z=p.g[I],R=_e(Z,R,L,Y),-1<R&&(te(Z[R]),Array.prototype.splice.call(Z,R,1),Z.length==0&&(delete p.g[I],p.h--)))):p&&(p=Te(p))&&(I=p.g[I.toString()],p=-1,I&&(p=_e(I,R,L,Y)),(R=-1<p?I[p]:null)&&le(R))}function le(p){if(typeof p!="number"&&p&&!p.da){var I=p.src;if(I&&I[H])ve(I.i,p);else{var R=p.type,L=p.proxy;I.removeEventListener?I.removeEventListener(R,L,p.capture):I.detachEvent?I.detachEvent(he(R),L):I.addListener&&I.removeListener&&I.removeListener(L),(R=Te(I))?(ve(R,p),R.h==0&&(R.src=null,I[Se]=null)):te(p)}}}function he(p){return p in Ce?Ce[p]:Ce[p]="on"+p}function ne(p,I){if(p.da)p=!0;else{I=new K(I,this);var R=p.listener,L=p.ha||p.src;p.fa&&le(p),p=R.call(L,I)}return p}function Te(p){return p=p[Se],p instanceof fe?p:null}var ke="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ae(p){return typeof p=="function"?p:(p[ke]||(p[ke]=function(I){return p.handleEvent(I)}),p[ke])}function Be(){V.call(this),this.i=new fe(this),this.M=this,this.F=null}y(Be,V),Be.prototype[H]=!0,Be.prototype.removeEventListener=function(p,I,R,L){ee(this,p,I,R,L)};function Ge(p,I){var R,L=p.F;if(L)for(R=[];L;L=L.F)R.push(L);if(p=p.M,L=I.type||I,typeof I=="string")I=new z(I,p);else if(I instanceof z)I.target=I.target||p;else{var Y=I;I=new z(L,p),S(I,Y)}if(Y=!0,R)for(var Z=R.length-1;0<=Z;Z--){var ue=I.g=R[Z];Y=qe(ue,L,!0,I)&&Y}if(ue=I.g=p,Y=qe(ue,L,!0,I)&&Y,Y=qe(ue,L,!1,I)&&Y,R)for(Z=0;Z<R.length;Z++)ue=I.g=R[Z],Y=qe(ue,L,!1,I)&&Y}Be.prototype.N=function(){if(Be.aa.N.call(this),this.i){var p=this.i,I;for(I in p.g){for(var R=p.g[I],L=0;L<R.length;L++)te(R[L]);delete p.g[I],p.h--}}this.F=null},Be.prototype.K=function(p,I,R,L){return this.i.add(String(p),I,!1,R,L)},Be.prototype.L=function(p,I,R,L){return this.i.add(String(p),I,!0,R,L)};function qe(p,I,R,L){if(I=p.i.g[String(I)],!I)return!0;I=I.concat();for(var Y=!0,Z=0;Z<I.length;++Z){var ue=I[Z];if(ue&&!ue.da&&ue.capture==R){var He=ue.listener,Ot=ue.ha||ue.src;ue.fa&&ve(p.i,ue),Y=He.call(Ot,L)!==!1&&Y}}return Y&&!L.defaultPrevented}function tu(p,I,R){if(typeof p=="function")R&&(p=f(p,R));else if(p&&typeof p.handleEvent=="function")p=f(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(I)?-1:a.setTimeout(p,I||0)}function it(p){p.g=tu(()=>{p.g=null,p.i&&(p.i=!1,it(p))},p.l);const I=p.h;p.h=null,p.m.apply(null,I)}class Qn extends V{constructor(I,R){super(),this.m=I,this.l=R,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:it(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qo(p){V.call(this),this.h=p,this.g={}}y(Qo,V);var sv=[];function ov(p){C(p.g,function(I,R){this.g.hasOwnProperty(R)&&le(I)},p),p.g={}}Qo.prototype.N=function(){Qo.aa.N.call(this),ov(this)},Qo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nf=a.JSON.stringify,VA=a.JSON.parse,FA=class{stringify(p){return a.JSON.stringify(p,void 0)}parse(p){return a.JSON.parse(p,void 0)}};function Df(){}Df.prototype.h=null;function av(p){return p.h||(p.h=p.i())}function lv(){}var Xo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mf(){z.call(this,"d")}y(Mf,z);function Lf(){z.call(this,"c")}y(Lf,z);var Li={},uv=null;function nu(){return uv=uv||new Be}Li.La="serverreachability";function cv(p){z.call(this,Li.La,p)}y(cv,z);function Jo(p){const I=nu();Ge(I,new cv(I))}Li.STAT_EVENT="statevent";function hv(p,I){z.call(this,Li.STAT_EVENT,p),this.stat=I}y(hv,z);function Qt(p){const I=nu();Ge(I,new hv(I,p))}Li.Ma="timingevent";function fv(p,I){z.call(this,Li.Ma,p),this.size=I}y(fv,z);function Zo(p,I){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){p()},I)}function ea(){this.g=!0}ea.prototype.xa=function(){this.g=!1};function BA(p,I,R,L,Y,Z){p.info(function(){if(p.g)if(Z)for(var ue="",He=Z.split("&"),Ot=0;Ot<He.length;Ot++){var Ve=He[Ot].split("=");if(1<Ve.length){var Lt=Ve[0];Ve=Ve[1];var jt=Lt.split("_");ue=2<=jt.length&&jt[1]=="type"?ue+(Lt+"="+Ve+"&"):ue+(Lt+"=redacted&")}}else ue=null;else ue=Z;return"XMLHTTP REQ ("+L+") [attempt "+Y+"]: "+I+`
`+R+`
`+ue})}function zA(p,I,R,L,Y,Z,ue){p.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+Y+"]: "+I+`
`+R+`
`+Z+" "+ue})}function Rs(p,I,R,L){p.info(function(){return"XMLHTTP TEXT ("+I+"): "+$A(p,R)+(L?" "+L:"")})}function UA(p,I){p.info(function(){return"TIMEOUT: "+I})}ea.prototype.info=function(){};function $A(p,I){if(!p.g)return I;if(!I)return null;try{var R=JSON.parse(I);if(R){for(p=0;p<R.length;p++)if(Array.isArray(R[p])){var L=R[p];if(!(2>L.length)){var Y=L[1];if(Array.isArray(Y)&&!(1>Y.length)){var Z=Y[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var ue=1;ue<Y.length;ue++)Y[ue]=""}}}}return Nf(R)}catch{return I}}var ru={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},jf;function iu(){}y(iu,Df),iu.prototype.g=function(){return new XMLHttpRequest},iu.prototype.i=function(){return{}},jf=new iu;function Kr(p,I,R,L){this.j=p,this.i=I,this.l=R,this.R=L||1,this.U=new Qo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pv}function pv(){this.i=null,this.g="",this.h=!1}var gv={},Vf={};function Ff(p,I,R){p.L=1,p.v=lu(yr(I)),p.m=R,p.P=!0,mv(p,null)}function mv(p,I){p.F=Date.now(),su(p),p.A=yr(p.v);var R=p.A,L=p.R;Array.isArray(L)||(L=[String(L)]),Ov(R.i,"t",L),p.C=0,R=p.j.J,p.h=new pv,p.g=Gv(p.j,R?I:null,!p.m),0<p.O&&(p.M=new Qn(f(p.Y,p,p.g),p.O)),I=p.U,R=p.g,L=p.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(sv[0]=Y.toString()),Y=sv);for(var Z=0;Z<Y.length;Z++){var ue=se(R,Y[Z],L||I.handleEvent,!1,I.h||I);if(!ue)break;I.g[ue.key]=ue}I=p.H?x(p.H):{},p.m?(p.u||(p.u="POST"),I["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,I)):(p.u="GET",p.g.ea(p.A,p.u,null,I)),Jo(),BA(p.i,p.u,p.A,p.l,p.R,p.m)}Kr.prototype.ca=function(p){p=p.target;const I=this.M;I&&vr(p)==3?I.j():this.Y(p)},Kr.prototype.Y=function(p){try{if(p==this.g)e:{const jt=vr(this.g);var I=this.g.Ba();const Ms=this.g.Z();if(!(3>jt)&&(jt!=3||this.g&&(this.h.h||this.g.oa()||jv(this.g)))){this.J||jt!=4||I==7||(I==8||0>=Ms?Jo(3):Jo(2)),Bf(this);var R=this.g.Z();this.X=R;t:if(yv(this)){var L=jv(this.g);p="";var Y=L.length,Z=vr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ji(this),ta(this);var ue="";break t}this.h.i=new a.TextDecoder}for(I=0;I<Y;I++)this.h.h=!0,p+=this.h.i.decode(L[I],{stream:!(Z&&I==Y-1)});L.length=0,this.h.g+=p,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=R==200,zA(this.i,this.u,this.A,this.l,this.R,jt,R),this.o){if(this.T&&!this.K){t:{if(this.g){var He,Ot=this.g;if((He=Ot.g?Ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(He)){var Ve=He;break t}}Ve=null}if(R=Ve)Rs(this.i,this.l,R,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zf(this,R);else{this.o=!1,this.s=3,Qt(12),ji(this),ta(this);break e}}if(this.P){R=!0;let Dn;for(;!this.J&&this.C<ue.length;)if(Dn=qA(this,ue),Dn==Vf){jt==4&&(this.s=4,Qt(14),R=!1),Rs(this.i,this.l,null,"[Incomplete Response]");break}else if(Dn==gv){this.s=4,Qt(15),Rs(this.i,this.l,ue,"[Invalid Chunk]"),R=!1;break}else Rs(this.i,this.l,Dn,null),zf(this,Dn);if(yv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jt!=4||ue.length!=0||this.h.h||(this.s=1,Qt(16),R=!1),this.o=this.o&&R,!R)Rs(this.i,this.l,ue,"[Invalid Chunked Response]"),ji(this),ta(this);else if(0<ue.length&&!this.W){this.W=!0;var Lt=this.j;Lt.g==this&&Lt.ba&&!Lt.M&&(Lt.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),Kf(Lt),Lt.M=!0,Qt(11))}}else Rs(this.i,this.l,ue,null),zf(this,ue);jt==4&&ji(this),this.o&&!this.J&&(jt==4?qv(this.j,this):(this.o=!1,su(this)))}else aI(this.g),R==400&&0<ue.indexOf("Unknown SID")?(this.s=3,Qt(12)):(this.s=0,Qt(13)),ji(this),ta(this)}}}catch{}finally{}};function yv(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function qA(p,I){var R=p.C,L=I.indexOf(`
`,R);return L==-1?Vf:(R=Number(I.substring(R,L)),isNaN(R)?gv:(L+=1,L+R>I.length?Vf:(I=I.slice(L,L+R),p.C=L+R,I)))}Kr.prototype.cancel=function(){this.J=!0,ji(this)};function su(p){p.S=Date.now()+p.I,vv(p,p.I)}function vv(p,I){if(p.B!=null)throw Error("WatchDog timer not null");p.B=Zo(f(p.ba,p),I)}function Bf(p){p.B&&(a.clearTimeout(p.B),p.B=null)}Kr.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(UA(this.i,this.A),this.L!=2&&(Jo(),Qt(17)),ji(this),this.s=2,ta(this)):vv(this,this.S-p)};function ta(p){p.j.G==0||p.J||qv(p.j,p)}function ji(p){Bf(p);var I=p.M;I&&typeof I.ma=="function"&&I.ma(),p.M=null,ov(p.U),p.g&&(I=p.g,p.g=null,I.abort(),I.ma())}function zf(p,I){try{var R=p.j;if(R.G!=0&&(R.g==p||Uf(R.h,p))){if(!p.K&&Uf(R.h,p)&&R.G==3){try{var L=R.Da.g.parse(I)}catch{L=null}if(Array.isArray(L)&&L.length==3){var Y=L;if(Y[0]==0){e:if(!R.u){if(R.g)if(R.g.F+3e3<p.F)pu(R),fu(R);else break e;Wf(R),Qt(18)}}else R.za=Y[1],0<R.za-R.T&&37500>Y[2]&&R.F&&R.v==0&&!R.C&&(R.C=Zo(f(R.Za,R),6e3));if(1>=wv(R.h)&&R.ca){try{R.ca()}catch{}R.ca=void 0}}else Fi(R,11)}else if((p.K||R.g==p)&&pu(R),!m(I))for(Y=R.Da.g.parse(I),I=0;I<Y.length;I++){let Ve=Y[I];if(R.T=Ve[0],Ve=Ve[1],R.G==2)if(Ve[0]=="c"){R.K=Ve[1],R.ia=Ve[2];const Lt=Ve[3];Lt!=null&&(R.la=Lt,R.j.info("VER="+R.la));const jt=Ve[4];jt!=null&&(R.Aa=jt,R.j.info("SVER="+R.Aa));const Ms=Ve[5];Ms!=null&&typeof Ms=="number"&&0<Ms&&(L=1.5*Ms,R.L=L,R.j.info("backChannelRequestTimeoutMs_="+L)),L=R;const Dn=p.g;if(Dn){const mu=Dn.g?Dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mu){var Z=L.h;Z.g||mu.indexOf("spdy")==-1&&mu.indexOf("quic")==-1&&mu.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&($f(Z,Z.h),Z.h=null))}if(L.D){const Gf=Dn.g?Dn.g.getResponseHeader("X-HTTP-Session-Id"):null;Gf&&(L.ya=Gf,Ye(L.I,L.D,Gf))}}R.G=3,R.l&&R.l.ua(),R.ba&&(R.R=Date.now()-p.F,R.j.info("Handshake RTT: "+R.R+"ms")),L=R;var ue=p;if(L.qa=Kv(L,L.J?L.ia:null,L.W),ue.K){xv(L.h,ue);var He=ue,Ot=L.L;Ot&&(He.I=Ot),He.B&&(Bf(He),su(He)),L.g=ue}else Uv(L);0<R.i.length&&du(R)}else Ve[0]!="stop"&&Ve[0]!="close"||Fi(R,7);else R.G==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?Fi(R,7):Hf(R):Ve[0]!="noop"&&R.l&&R.l.ta(Ve),R.v=0)}}Jo(4)}catch{}}var HA=class{constructor(p,I){this.g=p,this.map=I}};function _v(p){this.l=p||10,a.PerformanceNavigationTiming?(p=a.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function bv(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function wv(p){return p.h?1:p.g?p.g.size:0}function Uf(p,I){return p.h?p.h==I:p.g?p.g.has(I):!1}function $f(p,I){p.g?p.g.add(I):p.h=I}function xv(p,I){p.h&&p.h==I?p.h=null:p.g&&p.g.has(I)&&p.g.delete(I)}_v.prototype.cancel=function(){if(this.i=Ev(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Ev(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let I=p.i;for(const R of p.g.values())I=I.concat(R.D);return I}return v(p.i)}function WA(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(l(p)){for(var I=[],R=p.length,L=0;L<R;L++)I.push(p[L]);return I}I=[],R=0;for(L in p)I[R++]=p[L];return I}function KA(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(l(p)||typeof p=="string"){var I=[];p=p.length;for(var R=0;R<p;R++)I.push(R);return I}I=[],R=0;for(const L in p)I[R++]=L;return I}}}function Tv(p,I){if(p.forEach&&typeof p.forEach=="function")p.forEach(I,void 0);else if(l(p)||typeof p=="string")Array.prototype.forEach.call(p,I,void 0);else for(var R=KA(p),L=WA(p),Y=L.length,Z=0;Z<Y;Z++)I.call(void 0,L[Z],R&&R[Z],p)}var kv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function GA(p,I){if(p){p=p.split("&");for(var R=0;R<p.length;R++){var L=p[R].indexOf("="),Y=null;if(0<=L){var Z=p[R].substring(0,L);Y=p[R].substring(L+1)}else Z=p[R];I(Z,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Vi(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof Vi){this.h=p.h,ou(this,p.j),this.o=p.o,this.g=p.g,au(this,p.s),this.l=p.l;var I=p.i,R=new ia;R.i=I.i,I.g&&(R.g=new Map(I.g),R.h=I.h),Sv(this,R),this.m=p.m}else p&&(I=String(p).match(kv))?(this.h=!1,ou(this,I[1]||"",!0),this.o=na(I[2]||""),this.g=na(I[3]||"",!0),au(this,I[4]),this.l=na(I[5]||"",!0),Sv(this,I[6]||"",!0),this.m=na(I[7]||"")):(this.h=!1,this.i=new ia(null,this.h))}Vi.prototype.toString=function(){var p=[],I=this.j;I&&p.push(ra(I,Av,!0),":");var R=this.g;return(R||I=="file")&&(p.push("//"),(I=this.o)&&p.push(ra(I,Av,!0),"@"),p.push(encodeURIComponent(String(R)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.s,R!=null&&p.push(":",String(R))),(R=this.l)&&(this.g&&R.charAt(0)!="/"&&p.push("/"),p.push(ra(R,R.charAt(0)=="/"?XA:QA,!0))),(R=this.i.toString())&&p.push("?",R),(R=this.m)&&p.push("#",ra(R,ZA)),p.join("")};function yr(p){return new Vi(p)}function ou(p,I,R){p.j=R?na(I,!0):I,p.j&&(p.j=p.j.replace(/:$/,""))}function au(p,I){if(I){if(I=Number(I),isNaN(I)||0>I)throw Error("Bad port number "+I);p.s=I}else p.s=null}function Sv(p,I,R){I instanceof ia?(p.i=I,eI(p.i,p.h)):(R||(I=ra(I,JA)),p.i=new ia(I,p.h))}function Ye(p,I,R){p.i.set(I,R)}function lu(p){return Ye(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function na(p,I){return p?I?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function ra(p,I,R){return typeof p=="string"?(p=encodeURI(p).replace(I,YA),R&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function YA(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Av=/[#\/\?@]/g,QA=/[#\?:]/g,XA=/[#\?]/g,JA=/[#\?@]/g,ZA=/#/g;function ia(p,I){this.h=this.g=null,this.i=p||null,this.j=!!I}function Gr(p){p.g||(p.g=new Map,p.h=0,p.i&&GA(p.i,function(I,R){p.add(decodeURIComponent(I.replace(/\+/g," ")),R)}))}t=ia.prototype,t.add=function(p,I){Gr(this),this.i=null,p=Ns(this,p);var R=this.g.get(p);return R||this.g.set(p,R=[]),R.push(I),this.h+=1,this};function Iv(p,I){Gr(p),I=Ns(p,I),p.g.has(I)&&(p.i=null,p.h-=p.g.get(I).length,p.g.delete(I))}function Pv(p,I){return Gr(p),I=Ns(p,I),p.g.has(I)}t.forEach=function(p,I){Gr(this),this.g.forEach(function(R,L){R.forEach(function(Y){p.call(I,Y,L,this)},this)},this)},t.na=function(){Gr(this);const p=Array.from(this.g.values()),I=Array.from(this.g.keys()),R=[];for(let L=0;L<I.length;L++){const Y=p[L];for(let Z=0;Z<Y.length;Z++)R.push(I[L])}return R},t.V=function(p){Gr(this);let I=[];if(typeof p=="string")Pv(this,p)&&(I=I.concat(this.g.get(Ns(this,p))));else{p=Array.from(this.g.values());for(let R=0;R<p.length;R++)I=I.concat(p[R])}return I},t.set=function(p,I){return Gr(this),this.i=null,p=Ns(this,p),Pv(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[I]),this.h+=1,this},t.get=function(p,I){return p?(p=this.V(p),0<p.length?String(p[0]):I):I};function Ov(p,I,R){Iv(p,I),0<R.length&&(p.i=null,p.g.set(Ns(p,I),v(R)),p.h+=R.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],I=Array.from(this.g.keys());for(var R=0;R<I.length;R++){var L=I[R];const Z=encodeURIComponent(String(L)),ue=this.V(L);for(L=0;L<ue.length;L++){var Y=Z;ue[L]!==""&&(Y+="="+encodeURIComponent(String(ue[L]))),p.push(Y)}}return this.i=p.join("&")};function Ns(p,I){return I=String(I),p.j&&(I=I.toLowerCase()),I}function eI(p,I){I&&!p.j&&(Gr(p),p.i=null,p.g.forEach(function(R,L){var Y=L.toLowerCase();L!=Y&&(Iv(this,L),Ov(this,Y,R))},p)),p.j=I}function tI(p,I){const R=new ea;if(a.Image){const L=new Image;L.onload=d(Yr,R,"TestLoadImage: loaded",!0,I,L),L.onerror=d(Yr,R,"TestLoadImage: error",!1,I,L),L.onabort=d(Yr,R,"TestLoadImage: abort",!1,I,L),L.ontimeout=d(Yr,R,"TestLoadImage: timeout",!1,I,L),a.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=p}else I(!1)}function nI(p,I){const R=new ea,L=new AbortController,Y=setTimeout(()=>{L.abort(),Yr(R,"TestPingServer: timeout",!1,I)},1e4);fetch(p,{signal:L.signal}).then(Z=>{clearTimeout(Y),Z.ok?Yr(R,"TestPingServer: ok",!0,I):Yr(R,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(Y),Yr(R,"TestPingServer: error",!1,I)})}function Yr(p,I,R,L,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),L(R)}catch{}}function rI(){this.g=new FA}function iI(p,I,R){const L=R||"";try{Tv(p,function(Y,Z){let ue=Y;u(Y)&&(ue=Nf(Y)),I.push(L+Z+"="+encodeURIComponent(ue))})}catch(Y){throw I.push(L+"type="+encodeURIComponent("_badmap")),Y}}function uu(p){this.l=p.Ub||null,this.j=p.eb||!1}y(uu,Df),uu.prototype.g=function(){return new cu(this.l,this.j)},uu.prototype.i=function(p){return function(){return p}}({});function cu(p,I){Be.call(this),this.D=p,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(cu,Be),t=cu.prototype,t.open=function(p,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=I,this.readyState=1,oa(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const I={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(I.body=p),(this.D||a).fetch(new Request(this.A,I)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,sa(this)),this.readyState=0},t.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,oa(this)),this.g&&(this.readyState=3,oa(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cv(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cv(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}t.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var I=p.value?p.value:new Uint8Array(0);(I=this.v.decode(I,{stream:!p.done}))&&(this.response=this.responseText+=I)}p.done?sa(this):oa(this),this.readyState==3&&Cv(this)}},t.Ra=function(p){this.g&&(this.response=this.responseText=p,sa(this))},t.Qa=function(p){this.g&&(this.response=p,sa(this))},t.ga=function(){this.g&&sa(this)};function sa(p){p.readyState=4,p.l=null,p.j=null,p.v=null,oa(p)}t.setRequestHeader=function(p,I){this.u.append(p,I)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],I=this.h.entries();for(var R=I.next();!R.done;)R=R.value,p.push(R[0]+": "+R[1]),R=I.next();return p.join(`\r
`)};function oa(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(cu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Rv(p){let I="";return C(p,function(R,L){I+=L,I+=":",I+=R,I+=`\r
`}),I}function qf(p,I,R){e:{for(L in R){var L=!1;break e}L=!0}L||(R=Rv(R),typeof p=="string"?R!=null&&encodeURIComponent(String(R)):Ye(p,I,R))}function ct(p){Be.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(ct,Be);var sI=/^https?$/i,oI=["POST","PUT"];t=ct.prototype,t.Ha=function(p){this.J=p},t.ea=function(p,I,R,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);I=I?I.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():jf.g(),this.v=this.o?av(this.o):av(jf),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(I,String(p),!0),this.B=!1}catch(Z){Nv(this,Z);return}if(p=R||"",R=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var Y in L)R.set(Y,L[Y]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const Z of L.keys())R.set(Z,L.get(Z));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(R.keys()).find(Z=>Z.toLowerCase()=="content-type"),Y=a.FormData&&p instanceof a.FormData,!(0<=Array.prototype.indexOf.call(oI,I,void 0))||L||Y||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,ue]of R)this.g.setRequestHeader(Z,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Lv(this),this.u=!0,this.g.send(p),this.u=!1}catch(Z){Nv(this,Z)}};function Nv(p,I){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=I,p.m=5,Dv(p),hu(p)}function Dv(p){p.A||(p.A=!0,Ge(p,"complete"),Ge(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,Ge(this,"complete"),Ge(this,"abort"),hu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hu(this,!0)),ct.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Mv(this):this.bb())},t.bb=function(){Mv(this)};function Mv(p){if(p.h&&typeof o<"u"&&(!p.v[1]||vr(p)!=4||p.Z()!=2)){if(p.u&&vr(p)==4)tu(p.Ea,0,p);else if(Ge(p,"readystatechange"),vr(p)==4){p.h=!1;try{const ue=p.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break e;default:I=!1}var R;if(!(R=I)){var L;if(L=ue===0){var Y=String(p.D).match(kv)[1]||null;!Y&&a.self&&a.self.location&&(Y=a.self.location.protocol.slice(0,-1)),L=!sI.test(Y?Y.toLowerCase():"")}R=L}if(R)Ge(p,"complete"),Ge(p,"success");else{p.m=6;try{var Z=2<vr(p)?p.g.statusText:""}catch{Z=""}p.l=Z+" ["+p.Z()+"]",Dv(p)}}finally{hu(p)}}}}function hu(p,I){if(p.g){Lv(p);const R=p.g,L=p.v[0]?()=>{}:null;p.g=null,p.v=null,I||Ge(p,"ready");try{R.onreadystatechange=L}catch{}}}function Lv(p){p.I&&(a.clearTimeout(p.I),p.I=null)}t.isActive=function(){return!!this.g};function vr(p){return p.g?p.g.readyState:0}t.Z=function(){try{return 2<vr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(p){if(this.g){var I=this.g.responseText;return p&&I.indexOf(p)==0&&(I=I.substring(p.length)),VA(I)}};function jv(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function aI(p){const I={};p=(p.g&&2<=vr(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<p.length;L++){if(m(p[L]))continue;var R=E(p[L]);const Y=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const Z=I[Y]||[];I[Y]=Z,Z.push(R)}k(I,function(L){return L.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function aa(p,I,R){return R&&R.internalChannelParams&&R.internalChannelParams[p]||I}function Vv(p){this.Aa=0,this.i=[],this.j=new ea,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=aa("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=aa("baseRetryDelayMs",5e3,p),this.cb=aa("retryDelaySeedMs",1e4,p),this.Wa=aa("forwardChannelMaxRetries",2,p),this.wa=aa("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new _v(p&&p.concurrentRequestLimit),this.Da=new rI,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Vv.prototype,t.la=8,t.G=1,t.connect=function(p,I,R,L){Qt(0),this.W=p,this.H=I||{},R&&L!==void 0&&(this.H.OSID=R,this.H.OAID=L),this.F=this.X,this.I=Kv(this,null,this.W),du(this)};function Hf(p){if(Fv(p),p.G==3){var I=p.U++,R=yr(p.I);if(Ye(R,"SID",p.K),Ye(R,"RID",I),Ye(R,"TYPE","terminate"),la(p,R),I=new Kr(p,p.j,I),I.L=2,I.v=lu(yr(R)),R=!1,a.navigator&&a.navigator.sendBeacon)try{R=a.navigator.sendBeacon(I.v.toString(),"")}catch{}!R&&a.Image&&(new Image().src=I.v,R=!0),R||(I.g=Gv(I.j,null),I.g.ea(I.v)),I.F=Date.now(),su(I)}Wv(p)}function fu(p){p.g&&(Kf(p),p.g.cancel(),p.g=null)}function Fv(p){fu(p),p.u&&(a.clearTimeout(p.u),p.u=null),pu(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&a.clearTimeout(p.s),p.s=null)}function du(p){if(!bv(p.h)&&!p.s){p.s=!0;var I=p.Ga;q||B(),W||(q(),W=!0),U.add(I,p),p.B=0}}function lI(p,I){return wv(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=I.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=Zo(f(p.Ga,p,I),Hv(p,p.B)),p.B++,!0)}t.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const Y=new Kr(this,this.j,p);let Z=this.o;if(this.S&&(Z?(Z=x(Z),S(Z,this.S)):Z=this.S),this.m!==null||this.O||(Y.H=Z,Z=null),this.P)e:{for(var I=0,R=0;R<this.i.length;R++){t:{var L=this.i[R];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(I+=L,4096<I){I=R;break e}if(I===4096||R===this.i.length-1){I=R+1;break e}}I=1e3}else I=1e3;I=zv(this,Y,I),R=yr(this.I),Ye(R,"RID",p),Ye(R,"CVER",22),this.D&&Ye(R,"X-HTTP-Session-Id",this.D),la(this,R),Z&&(this.O?I="headers="+encodeURIComponent(String(Rv(Z)))+"&"+I:this.m&&qf(R,this.m,Z)),$f(this.h,Y),this.Ua&&Ye(R,"TYPE","init"),this.P?(Ye(R,"$req",I),Ye(R,"SID","null"),Y.T=!0,Ff(Y,R,null)):Ff(Y,R,I),this.G=2}}else this.G==3&&(p?Bv(this,p):this.i.length==0||bv(this.h)||Bv(this))};function Bv(p,I){var R;I?R=I.l:R=p.U++;const L=yr(p.I);Ye(L,"SID",p.K),Ye(L,"RID",R),Ye(L,"AID",p.T),la(p,L),p.m&&p.o&&qf(L,p.m,p.o),R=new Kr(p,p.j,R,p.B+1),p.m===null&&(R.H=p.o),I&&(p.i=I.D.concat(p.i)),I=zv(p,R,1e3),R.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),$f(p.h,R),Ff(R,L,I)}function la(p,I){p.H&&C(p.H,function(R,L){Ye(I,L,R)}),p.l&&Tv({},function(R,L){Ye(I,L,R)})}function zv(p,I,R){R=Math.min(p.i.length,R);var L=p.l?f(p.l.Na,p.l,p):null;e:{var Y=p.i;let Z=-1;for(;;){const ue=["count="+R];Z==-1?0<R?(Z=Y[0].g,ue.push("ofs="+Z)):Z=0:ue.push("ofs="+Z);let He=!0;for(let Ot=0;Ot<R;Ot++){let Ve=Y[Ot].g;const Lt=Y[Ot].map;if(Ve-=Z,0>Ve)Z=Math.max(0,Y[Ot].g-100),He=!1;else try{iI(Lt,ue,"req"+Ve+"_")}catch{L&&L(Lt)}}if(He){L=ue.join("&");break e}}}return p=p.i.splice(0,R),I.D=p,L}function Uv(p){if(!p.g&&!p.u){p.Y=1;var I=p.Fa;q||B(),W||(q(),W=!0),U.add(I,p),p.v=0}}function Wf(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=Zo(f(p.Fa,p),Hv(p,p.v)),p.v++,!0)}t.Fa=function(){if(this.u=null,$v(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=Zo(f(this.ab,this),p)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Qt(10),fu(this),$v(this))};function Kf(p){p.A!=null&&(a.clearTimeout(p.A),p.A=null)}function $v(p){p.g=new Kr(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var I=yr(p.qa);Ye(I,"RID","rpc"),Ye(I,"SID",p.K),Ye(I,"AID",p.T),Ye(I,"CI",p.F?"0":"1"),!p.F&&p.ja&&Ye(I,"TO",p.ja),Ye(I,"TYPE","xmlhttp"),la(p,I),p.m&&p.o&&qf(I,p.m,p.o),p.L&&(p.g.I=p.L);var R=p.g;p=p.ia,R.L=1,R.v=lu(yr(I)),R.m=null,R.P=!0,mv(R,p)}t.Za=function(){this.C!=null&&(this.C=null,fu(this),Wf(this),Qt(19))};function pu(p){p.C!=null&&(a.clearTimeout(p.C),p.C=null)}function qv(p,I){var R=null;if(p.g==I){pu(p),Kf(p),p.g=null;var L=2}else if(Uf(p.h,I))R=I.D,xv(p.h,I),L=1;else return;if(p.G!=0){if(I.o)if(L==1){R=I.m?I.m.length:0,I=Date.now()-I.F;var Y=p.B;L=nu(),Ge(L,new fv(L,R)),du(p)}else Uv(p);else if(Y=I.s,Y==3||Y==0&&0<I.X||!(L==1&&lI(p,I)||L==2&&Wf(p)))switch(R&&0<R.length&&(I=p.h,I.i=I.i.concat(R)),Y){case 1:Fi(p,5);break;case 4:Fi(p,10);break;case 3:Fi(p,6);break;default:Fi(p,2)}}}function Hv(p,I){let R=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(R*=2),R*I}function Fi(p,I){if(p.j.info("Error code "+I),I==2){var R=f(p.fb,p),L=p.Xa;const Y=!L;L=new Vi(L||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ou(L,"https"),lu(L),Y?tI(L.toString(),R):nI(L.toString(),R)}else Qt(2);p.G=0,p.l&&p.l.sa(I),Wv(p),Fv(p)}t.fb=function(p){p?(this.j.info("Successfully pinged google.com"),Qt(2)):(this.j.info("Failed to ping google.com"),Qt(1))};function Wv(p){if(p.G=0,p.ka=[],p.l){const I=Ev(p.h);(I.length!=0||p.i.length!=0)&&(_(p.ka,I),_(p.ka,p.i),p.h.i.length=0,v(p.i),p.i.length=0),p.l.ra()}}function Kv(p,I,R){var L=R instanceof Vi?yr(R):new Vi(R);if(L.g!="")I&&(L.g=I+"."+L.g),au(L,L.s);else{var Y=a.location;L=Y.protocol,I=I?I+"."+Y.hostname:Y.hostname,Y=+Y.port;var Z=new Vi(null);L&&ou(Z,L),I&&(Z.g=I),Y&&au(Z,Y),R&&(Z.l=R),L=Z}return R=p.D,I=p.ya,R&&I&&Ye(L,R,I),Ye(L,"VER",p.la),la(p,L),L}function Gv(p,I,R){if(I&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return I=p.Ca&&!p.pa?new ct(new uu({eb:R})):new ct(p.pa),I.Ha(p.J),I}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yv(){}t=Yv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function gu(){}gu.prototype.g=function(p,I){return new dn(p,I)};function dn(p,I){Be.call(this),this.g=new Vv(I),this.l=p,this.h=I&&I.messageUrlParams||null,p=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(p?p["X-WebChannel-Content-Type"]=I.messageContentType:p={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.va&&(p?p["X-WebChannel-Client-Profile"]=I.va:p={"X-WebChannel-Client-Profile":I.va}),this.g.S=p,(p=I&&I.Sb)&&!m(p)&&(this.g.m=p),this.v=I&&I.supportsCrossDomainXhr||!1,this.u=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!m(I)&&(this.g.D=I,p=this.h,p!==null&&I in p&&(p=this.h,I in p&&delete p[I])),this.j=new Ds(this)}y(dn,Be),dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){Hf(this.g)},dn.prototype.o=function(p){var I=this.g;if(typeof p=="string"){var R={};R.__data__=p,p=R}else this.u&&(R={},R.__data__=Nf(p),p=R);I.i.push(new HA(I.Ya++,p)),I.G==3&&du(I)},dn.prototype.N=function(){this.g.l=null,delete this.j,Hf(this.g),delete this.g,dn.aa.N.call(this)};function Qv(p){Mf.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var I=p.__sm__;if(I){e:{for(const R in I){p=R;break e}p=void 0}(this.i=p)&&(p=this.i,I=I!==null&&p in I?I[p]:void 0),this.data=I}else this.data=p}y(Qv,Mf);function Xv(){Lf.call(this),this.status=1}y(Xv,Lf);function Ds(p){this.g=p}y(Ds,Yv),Ds.prototype.ua=function(){Ge(this.g,"a")},Ds.prototype.ta=function(p){Ge(this.g,new Qv(p))},Ds.prototype.sa=function(p){Ge(this.g,new Xv)},Ds.prototype.ra=function(){Ge(this.g,"b")},gu.prototype.createWebChannel=gu.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,VT=function(){return new gu},jT=function(){return nu()},LT=Li,rg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ru.NO_ERROR=0,ru.TIMEOUT=8,ru.HTTP_ERROR=6,yc=ru,dv.COMPLETE="complete",MT=dv,lv.EventType=Xo,Xo.OPEN="a",Xo.CLOSE="b",Xo.ERROR="c",Xo.MESSAGE="d",Be.prototype.listen=Be.prototype.K,Pa=lv,ct.prototype.listenOnce=ct.prototype.L,ct.prototype.getLastError=ct.prototype.Ka,ct.prototype.getLastErrorCode=ct.prototype.Ba,ct.prototype.getStatus=ct.prototype.Z,ct.prototype.getResponseJson=ct.prototype.Oa,ct.prototype.getResponseText=ct.prototype.oa,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Ha,DT=ct}).apply(typeof Mu<"u"?Mu:typeof self<"u"?self:typeof window<"u"?window:{});const L_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=new Zh("@firebase/firestore");function ya(){return ms.logLevel}function pe(t,...e){if(ms.logLevel<=Re.DEBUG){const n=e.map(Gm);ms.debug(`Firestore (${Lo}): ${t}`,...n)}}function $r(t,...e){if(ms.logLevel<=Re.ERROR){const n=e.map(Gm);ms.error(`Firestore (${Lo}): ${t}`,...n)}}function ys(t,...e){if(ms.logLevel<=Re.WARN){const n=e.map(Gm);ms.warn(`Firestore (${Lo}): ${t}`,...n)}}function Gm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t="Unexpected state"){const e=`FIRESTORE (${Lo}) INTERNAL ASSERTION FAILED: `+t;throw $r(e),new Error(e)}function $e(t,e){t||we()}function Ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends Yn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ut.UNAUTHENTICATED))}shutdown(){}}class vN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class _N{constructor(e){this.t=e,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){$e(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Mr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Mr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($e(typeof r.accessToken=="string"),new FT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string"),new Ut(e)}}class bN{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class wN{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new bN(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){$e(this.o===void 0);const r=s=>{s.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,pe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?($e(typeof n.token=="string"),this.R=n.token,new xN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=TN(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Fe(t,e){return t<e?-1:t>e?1:0}function wo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new me(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new me(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new me(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new _t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new xe(e)}static min(){return new xe(new _t(0,0))}static max(){return new xe(new _t(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,n,r){n===void 0?n=0:n>e.length&&we(),r===void 0?r=e.length-n:r>e.length-n&&we(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Al.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Al?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class nt extends Al{construct(e,n,r){return new nt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new me(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new nt(n)}static emptyPath(){return new nt([])}}const kN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends Al{construct(e,n,r){return new At(e,n,r)}static isValidIdentifier(e){return kN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new At(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new me(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new me(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new me(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new me(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(n)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(nt.fromString(e))}static fromName(e){return new ye(nt.fromString(e).popFirst(5))}static empty(){return new ye(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return nt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new nt(e.slice()))}}function SN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=xe.fromTimestamp(r===1e9?new _t(n+1,0):new _t(n,r));return new Si(i,ye.empty(),e)}function AN(t){return new Si(t.readTime,t.key,-1)}class Si{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Si(xe.min(),ye.empty(),-1)}static max(){return new Si(xe.max(),ye.empty(),-1)}}function IN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(t.documentKey,e.documentKey),n!==0?n:Fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ON{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kl(t){if(t.code!==re.FAILED_PRECONDITION||t.message!==PN)throw t;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ie((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ie?n:ie.resolve(n)}catch(n){return ie.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ie.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ie.reject(n)}static resolve(e){return new ie((n,r)=>{n(e)})}static reject(e){return new ie((n,r)=>{r(e)})}static waitFor(e){return new ie((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=ie.resolve(!1);for(const r of e)n=n.next(i=>i?ie.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new ie((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new ie((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function CN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Gl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Qm.oe=-1;function rf(t){return t==null}function ch(t){return t===0&&1/t==-1/0}function RN(t){return typeof t=="number"&&Number.isInteger(t)&&!ch(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function jo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function zT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n){this.comparator=e,this.root=n||Rt.EMPTY}insert(e,n){return new ut(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rt.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lu(this.root,e,this.comparator,!0)}}class Lu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Rt.RED,this.left=i??Rt.EMPTY,this.right=s??Rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Rt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Rt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw we();const e=this.left.check();if(e!==this.right.check())throw we();return e+(this.isRed()?0:1)}}Rt.EMPTY=null,Rt.RED=!0,Rt.BLACK=!1;Rt.EMPTY=new class{constructor(){this.size=0}get key(){throw we()}get value(){throw we()}get color(){throw we()}get left(){throw we()}get right(){throw we()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new V_(this.data.getIterator())}getIteratorFrom(e){return new V_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Dt(this.comparator);return n.data=e,n}}class V_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new zn([])}unionWith(e){let n=new Dt(At.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new zn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return wo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new UT("Invalid base64 string: "+s):s}}(e);return new Pt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const NN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ai(t){if($e(!!t),typeof t=="string"){let e=0;const n=NN.exec(t);if($e(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dt(t.seconds),nanos:dt(t.nanos)}}function dt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function vs(t){return typeof t=="string"?Pt.fromBase64String(t):Pt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Jm(t){const e=t.mapValue.fields.__previous_value__;return Xm(e)?Jm(e):e}function Il(t){const e=Ai(t.mapValue.fields.__local_write_time__.timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class xo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new xo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof xo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju={mapValue:{}};function _s(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Xm(t)?4:LN(t)?9007199254740991:MN(t)?10:11:we()}function gr(t,e){if(t===e)return!0;const n=_s(t);if(n!==_s(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Il(t).isEqual(Il(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ai(i.timestampValue),a=Ai(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return vs(i.bytesValue).isEqual(vs(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return dt(i.geoPointValue.latitude)===dt(s.geoPointValue.latitude)&&dt(i.geoPointValue.longitude)===dt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return dt(i.integerValue)===dt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=dt(i.doubleValue),a=dt(s.doubleValue);return o===a?ch(o)===ch(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return wo(t.arrayValue.values||[],e.arrayValue.values||[],gr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(j_(o)!==j_(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!gr(o[l],a[l])))return!1;return!0}(t,e);default:return we()}}function Pl(t,e){return(t.values||[]).find(n=>gr(n,e))!==void 0}function Eo(t,e){if(t===e)return 0;const n=_s(t),r=_s(e);if(n!==r)return Fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=dt(s.integerValue||s.doubleValue),l=dt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return F_(t.timestampValue,e.timestampValue);case 4:return F_(Il(t),Il(e));case 5:return Fe(t.stringValue,e.stringValue);case 6:return function(s,o){const a=vs(s),l=vs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=Fe(a[u],l[u]);if(c!==0)return c}return Fe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Fe(dt(s.latitude),dt(o.latitude));return a!==0?a:Fe(dt(s.longitude),dt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return B_(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,c;const h=s.fields||{},f=o.fields||{},d=(a=h.value)===null||a===void 0?void 0:a.arrayValue,y=(l=f.value)===null||l===void 0?void 0:l.arrayValue,v=Fe(((u=d==null?void 0:d.values)===null||u===void 0?void 0:u.length)||0,((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0);return v!==0?v:B_(d,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===ju.mapValue&&o===ju.mapValue)return 0;if(s===ju.mapValue)return 1;if(o===ju.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let h=0;h<l.length&&h<c.length;++h){const f=Fe(l[h],c[h]);if(f!==0)return f;const d=Eo(a[l[h]],u[c[h]]);if(d!==0)return d}return Fe(l.length,c.length)}(t.mapValue,e.mapValue);default:throw we()}}function F_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Fe(t,e);const n=Ai(t),r=Ai(e),i=Fe(n.seconds,r.seconds);return i!==0?i:Fe(n.nanos,r.nanos)}function B_(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Eo(n[i],r[i]);if(s)return s}return Fe(n.length,r.length)}function To(t){return ig(t)}function ig(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ai(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return vs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ye.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=ig(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${ig(n.fields[o])}`;return i+"}"}(t.mapValue):we()}function sg(t){return!!t&&"integerValue"in t}function Zm(t){return!!t&&"arrayValue"in t}function z_(t){return!!t&&"nullValue"in t}function U_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vc(t){return!!t&&"mapValue"in t}function MN(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ya(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return jo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ya(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ya(t.arrayValue.values[n]);return e}return Object.assign({},t)}function LN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!vc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ya(n)}setAll(e){let n=At.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ya(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());vc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];vc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){jo(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Sn(Ya(this.value))}}function $T(t){const e=[];return jo(t.fields,(n,r)=>{const i=new At([n]);if(vc(r)){const s=$T(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new qt(e,0,xe.min(),xe.min(),xe.min(),Sn.empty(),0)}static newFoundDocument(e,n,r,i){return new qt(e,1,n,xe.min(),r,i,0)}static newNoDocument(e,n){return new qt(e,2,n,xe.min(),xe.min(),Sn.empty(),0)}static newUnknownDocument(e,n){return new qt(e,3,n,xe.min(),xe.min(),Sn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,n){this.position=e,this.inclusive=n}}function $_(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ye.comparator(ye.fromName(o.referenceValue),n.key):r=Eo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function q_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,n="asc"){this.field=e,this.dir=n}}function jN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{}class xt extends qT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new FN(e,n,r):n==="array-contains"?new UN(e,r):n==="in"?new $N(e,r):n==="not-in"?new qN(e,r):n==="array-contains-any"?new HN(e,r):new xt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new BN(e,r):new zN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Eo(n,this.value)):n!==null&&_s(this.value)===_s(n)&&this.matchesComparison(Eo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mr extends qT{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new mr(e,n)}matches(e){return HT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function HT(t){return t.op==="and"}function WT(t){return VN(t)&&HT(t)}function VN(t){for(const e of t.filters)if(e instanceof mr)return!1;return!0}function og(t){if(t instanceof xt)return t.field.canonicalString()+t.op.toString()+To(t.value);if(WT(t))return t.filters.map(e=>og(e)).join(",");{const e=t.filters.map(n=>og(n)).join(",");return`${t.op}(${e})`}}function KT(t,e){return t instanceof xt?function(r,i){return i instanceof xt&&r.op===i.op&&r.field.isEqual(i.field)&&gr(r.value,i.value)}(t,e):t instanceof mr?function(r,i){return i instanceof mr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&KT(o,i.filters[a]),!0):!1}(t,e):void we()}function GT(t){return t instanceof xt?function(n){return`${n.field.canonicalString()} ${n.op} ${To(n.value)}`}(t):t instanceof mr?function(n){return n.op.toString()+" {"+n.getFilters().map(GT).join(" ,")+"}"}(t):"Filter"}class FN extends xt{constructor(e,n,r){super(e,n,r),this.key=ye.fromName(r.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class BN extends xt{constructor(e,n){super(e,"in",n),this.keys=YT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class zN extends xt{constructor(e,n){super(e,"not-in",n),this.keys=YT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function YT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ye.fromName(r.referenceValue))}class UN extends xt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Zm(n)&&Pl(n.arrayValue,this.value)}}class $N extends xt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Pl(this.value.arrayValue,n)}}class qN extends xt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Pl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Pl(this.value.arrayValue,n)}}class HN extends xt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Zm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Pl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function H_(t,e=null,n=[],r=[],i=null,s=null,o=null){return new WN(t,e,n,r,i,s,o)}function ey(t){const e=Ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>og(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),rf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>To(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>To(r)).join(",")),e.ue=n}return e.ue}function ty(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!KT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!q_(t.startAt,e.startAt)&&q_(t.endAt,e.endAt)}function ag(t){return ye.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function KN(t,e,n,r,i,s,o,a){return new sf(t,e,n,r,i,s,o,a)}function of(t){return new sf(t)}function W_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function GN(t){return t.collectionGroup!==null}function Qa(t){const e=Ee(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Dt(At.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new fh(s,r))}),n.has(At.keyField().canonicalString())||e.ce.push(new fh(At.keyField(),r))}return e.ce}function lr(t){const e=Ee(t);return e.le||(e.le=YN(e,Qa(t))),e.le}function YN(t,e){if(t.limitType==="F")return H_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new fh(i.field,s)});const n=t.endAt?new hh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new hh(t.startAt.position,t.startAt.inclusive):null;return H_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function lg(t,e,n){return new sf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function af(t,e){return ty(lr(t),lr(e))&&t.limitType===e.limitType}function QT(t){return`${ey(lr(t))}|lt:${t.limitType}`}function Fs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>GT(i)).join(", ")}]`),rf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>To(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>To(i)).join(",")),`Target(${r})`}(lr(t))}; limitType=${t.limitType})`}function lf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ye.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Qa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=$_(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Qa(r),i)||r.endAt&&!function(o,a,l){const u=$_(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Qa(r),i))}(t,e)}function QN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function XT(t){return(e,n)=>{let r=!1;for(const i of Qa(t)){const s=XN(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function XN(t,e,n){const r=t.field.isKeyField()?ye.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Eo(l,u):we()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return we()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){jo(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return zT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN=new ut(ye.comparator);function qr(){return JN}const JT=new ut(ye.comparator);function Oa(...t){let e=JT;for(const n of t)e=e.insert(n.key,n);return e}function ZT(t){let e=JT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ts(){return Xa()}function ek(){return Xa()}function Xa(){return new Vo(t=>t.toString(),(t,e)=>t.isEqual(e))}const ZN=new ut(ye.comparator),eD=new Dt(ye.comparator);function Oe(...t){let e=eD;for(const n of t)e=e.add(n);return e}const tD=new Dt(Fe);function nD(){return tD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ch(e)?"-0":e}}function tk(t){return{integerValue:""+t}}function rD(t,e){return RN(e)?tk(e):ny(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(){this._=void 0}}function iD(t,e,n){return t instanceof dh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Xm(s)&&(s=Jm(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Ol?rk(t,e):t instanceof Cl?ik(t,e):function(i,s){const o=nk(i,s),a=K_(o)+K_(i.Pe);return sg(o)&&sg(i.Pe)?tk(a):ny(i.serializer,a)}(t,e)}function sD(t,e,n){return t instanceof Ol?rk(t,e):t instanceof Cl?ik(t,e):n}function nk(t,e){return t instanceof ph?function(r){return sg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class dh extends uf{}class Ol extends uf{constructor(e){super(),this.elements=e}}function rk(t,e){const n=sk(e);for(const r of t.elements)n.some(i=>gr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Cl extends uf{constructor(e){super(),this.elements=e}}function ik(t,e){let n=sk(e);for(const r of t.elements)n=n.filter(i=>!gr(i,r));return{arrayValue:{values:n}}}class ph extends uf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function K_(t){return dt(t.integerValue||t.doubleValue)}function sk(t){return Zm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function oD(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ol&&i instanceof Ol||r instanceof Cl&&i instanceof Cl?wo(r.elements,i.elements,gr):r instanceof ph&&i instanceof ph?gr(r.Pe,i.Pe):r instanceof dh&&i instanceof dh}(t.transform,e.transform)}class aD{constructor(e,n){this.version=e,this.transformResults=n}}class ur{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ur}static exists(e){return new ur(void 0,e)}static updateTime(e){return new ur(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _c(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class cf{}function ok(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ry(t.key,ur.none()):new Yl(t.key,t.data,ur.none());{const n=t.data,r=Sn.empty();let i=new Dt(At.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Os(t.key,r,new zn(i.toArray()),ur.none())}}function lD(t,e,n){t instanceof Yl?function(i,s,o){const a=i.value.clone(),l=Y_(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Os?function(i,s,o){if(!_c(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Y_(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(ak(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ja(t,e,n,r){return t instanceof Yl?function(s,o,a,l){if(!_c(s.precondition,o))return a;const u=s.value.clone(),c=Q_(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Os?function(s,o,a,l){if(!_c(s.precondition,o))return a;const u=Q_(s.fieldTransforms,l,o),c=o.data;return c.setAll(ak(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return _c(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function uD(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=nk(r.transform,i||null);s!=null&&(n===null&&(n=Sn.empty()),n.set(r.field,s))}return n||null}function G_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&wo(r,i,(s,o)=>oD(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Yl extends cf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Os extends cf{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ak(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Y_(t,e,n){const r=new Map;$e(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,sD(o,a,n[i]))}return r}function Q_(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,iD(s,o,e))}return r}class ry extends cf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cD extends cf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&lD(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ja(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ja(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ek();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=ok(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(xe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Oe())}isEqual(e){return this.batchId===e.batchId&&wo(this.mutations,e.mutations,(n,r)=>G_(n,r))&&wo(this.baseMutations,e.baseMutations,(n,r)=>G_(n,r))}}class iy{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){$e(e.mutations.length===r.length);let i=function(){return ZN}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new iy(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,Ne;function pD(t){switch(t){default:return we();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0}}function lk(t){if(t===void 0)return $r("GRPC error has no .code"),re.UNKNOWN;switch(t){case mt.OK:return re.OK;case mt.CANCELLED:return re.CANCELLED;case mt.UNKNOWN:return re.UNKNOWN;case mt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case mt.INTERNAL:return re.INTERNAL;case mt.UNAVAILABLE:return re.UNAVAILABLE;case mt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case mt.NOT_FOUND:return re.NOT_FOUND;case mt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case mt.ABORTED:return re.ABORTED;case mt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case mt.DATA_LOSS:return re.DATA_LOSS;default:return we()}}(Ne=mt||(mt={}))[Ne.OK=0]="OK",Ne[Ne.CANCELLED=1]="CANCELLED",Ne[Ne.UNKNOWN=2]="UNKNOWN",Ne[Ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ne[Ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ne[Ne.NOT_FOUND=5]="NOT_FOUND",Ne[Ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ne[Ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ne[Ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ne[Ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ne[Ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ne[Ne.ABORTED=10]="ABORTED",Ne[Ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ne[Ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ne[Ne.INTERNAL=13]="INTERNAL",Ne[Ne.UNAVAILABLE=14]="UNAVAILABLE",Ne[Ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD=new as([4294967295,4294967295],0);function X_(t){const e=gD().encode(t),n=new NT;return n.update(e),new Uint8Array(n.digest())}function J_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new as([n,r],0),new as([i,s],0)]}class sy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ca(`Invalid padding: ${n}`);if(r<0)throw new Ca(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ca(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ca(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=as.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(as.fromNumber(r)));return i.compare(mD)===1&&(i=new as([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=X_(e),[r,i]=J_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new sy(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=X_(e),[r,i]=J_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ca extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ql.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new hf(xe.min(),i,new ut(Fe),qr(),Oe())}}class Ql{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ql(r,n,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class uk{constructor(e,n){this.targetId=e,this.me=n}}class ck{constructor(e,n,r=Pt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Z_{constructor(){this.fe=0,this.ge=tb(),this.pe=Pt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Oe(),n=Oe(),r=Oe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:we()}}),new Ql(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=tb()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,$e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class yD{constructor(e){this.Le=e,this.Be=new Map,this.ke=qr(),this.qe=eb(),this.Qe=new ut(Fe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:we()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(ag(s))if(r===0){const o=new ye(s.path);this.Ue(n,o,qt.newNoDocument(o,xe.min()))}else $e(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=vs(r).toUint8Array()}catch(l){if(l instanceof UT)return ys("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new sy(o,i,s)}catch(l){return ys(l instanceof Ca?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&ag(a.target)){const l=new ye(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,qt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Oe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new hf(e,n,this.Qe,this.ke,r);return this.ke=qr(),this.qe=eb(),this.Qe=new ut(Fe),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Z_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Dt(Fe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||pe("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Z_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function eb(){return new ut(ye.comparator)}function tb(){return new ut(ye.comparator)}const vD={asc:"ASCENDING",desc:"DESCENDING"},_D={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bD={and:"AND",or:"OR"};class wD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ug(t,e){return t.useProto3Json||rf(e)?e:{value:e}}function gh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function xD(t,e){return gh(t,e.toTimestamp())}function cr(t){return $e(!!t),xe.fromTimestamp(function(n){const r=Ai(n);return new _t(r.seconds,r.nanos)}(t))}function oy(t,e){return cg(t,e).canonicalString()}function cg(t,e){const n=function(i){return new nt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function fk(t){const e=nt.fromString(t);return $e(yk(e)),e}function hg(t,e){return oy(t.databaseId,e.path)}function Id(t,e){const n=fk(e);if(n.get(1)!==t.databaseId.projectId)throw new me(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new me(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ye(pk(n))}function dk(t,e){return oy(t.databaseId,e)}function ED(t){const e=fk(t);return e.length===4?nt.emptyPath():pk(e)}function fg(t){return new nt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pk(t){return $e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function nb(t,e,n){return{name:hg(t,e),fields:n.value.mapValue.fields}}function TD(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:we()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?($e(c===void 0||typeof c=="string"),Pt.fromBase64String(c||"")):($e(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Pt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?re.UNKNOWN:lk(u.code);return new me(c,u.message||"")}(o);n=new ck(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Id(t,r.document.name),s=cr(r.document.updateTime),o=r.document.createTime?cr(r.document.createTime):xe.min(),a=new Sn({mapValue:{fields:r.document.fields}}),l=qt.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new bc(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Id(t,r.document),s=r.readTime?cr(r.readTime):xe.min(),o=qt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new bc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Id(t,r.document),s=r.removedTargetIds||[];n=new bc([],s,i,null)}else{if(!("filter"in e))return we();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new dD(i,s),a=r.targetId;n=new uk(a,o)}}return n}function kD(t,e){let n;if(e instanceof Yl)n={update:nb(t,e.key,e.value)};else if(e instanceof ry)n={delete:hg(t,e.key)};else if(e instanceof Os)n={update:nb(t,e.key,e.data),updateMask:DD(e.fieldMask)};else{if(!(e instanceof cD))return we();n={verify:hg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof dh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ol)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Cl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ph)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw we()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:xD(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:we()}(t,e.precondition)),n}function SD(t,e){return t&&t.length>0?($e(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?cr(i.updateTime):cr(s);return o.isEqual(xe.min())&&(o=cr(s)),new aD(o,i.transformResults||[])}(n,e))):[]}function AD(t,e){return{documents:[dk(t,e.path)]}}function ID(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=dk(t,i);const s=function(u){if(u.length!==0)return mk(mr.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(c=>function(f){return{field:Bs(f.field),direction:CD(f.dir)}}(c))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=ug(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function PD(t){let e=ED(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){$e(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(h){const f=gk(h);return f instanceof mr&&WT(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(y){return new fh(zs(y.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,rf(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,d=h.values||[];return new hh(d,f)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const f=!h.before,d=h.values||[];return new hh(d,f)}(n.endAt)),KN(e,i,o,s,a,"F",l,u)}function OD(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function gk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=zs(n.unaryFilter.field);return xt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=zs(n.unaryFilter.field);return xt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=zs(n.unaryFilter.field);return xt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=zs(n.unaryFilter.field);return xt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return we()}}(t):t.fieldFilter!==void 0?function(n){return xt.create(zs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return we()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return mr.create(n.compositeFilter.filters.map(r=>gk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return we()}}(n.compositeFilter.op))}(t):we()}function CD(t){return vD[t]}function RD(t){return _D[t]}function ND(t){return bD[t]}function Bs(t){return{fieldPath:t.canonicalString()}}function zs(t){return At.fromServerFormat(t.fieldPath)}function mk(t){return t instanceof xt?function(n){if(n.op==="=="){if(U_(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NAN"}};if(z_(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(U_(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NOT_NAN"}};if(z_(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bs(n.field),op:RD(n.op),value:n.value}}}(t):t instanceof mr?function(n){const r=n.getFilters().map(i=>mk(i));return r.length===1?r[0]:{compositeFilter:{op:ND(n.op),filters:r}}}(t):we()}function DD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function yk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,n,r,i,s=xe.min(),o=xe.min(),a=Pt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ui(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ui(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e){this.ct=e}}function LD(t){const e=PD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?lg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(){this.un=new VD}addToCollectionParentIndex(e,n){return this.un.add(n),ie.resolve()}getCollectionParents(e,n){return ie.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ie.resolve()}deleteFieldIndex(e,n){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,n){return ie.resolve()}getDocumentsMatchingTarget(e,n){return ie.resolve(null)}getIndexType(e,n){return ie.resolve(0)}getFieldIndexes(e,n){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,n){return ie.resolve(Si.min())}getMinOffsetFromCollectionGroup(e,n){return ie.resolve(Si.min())}updateCollectionGroup(e,n,r){return ie.resolve()}updateIndexEntries(e,n){return ie.resolve()}}class VD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Dt(nt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Dt(nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ko(0)}static kn(){return new ko(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(){this.changes=new Vo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,qt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ie.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ja(r.mutation,i,zn.empty(),_t.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Oe()){const i=ts();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Oa();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ts();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Oe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=qr();const o=Xa(),a=function(){return Xa()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof Os)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),Ja(c.mutation,u,c.mutation.getFieldMask(),_t.now())):o.set(u.key,zn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var h;return a.set(u,new BD(c,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Xa();let i=new ut((o,a)=>o-a),s=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||zn.empty();c=a.applyToLocalView(u,c),r.set(l,c);const h=(i.get(a.batchId)||Oe()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,h=ek();c.forEach(f=>{if(!s.has(f)){const d=ok(n.get(f),r.get(f));d!==null&&h.set(f,d),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return ie.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ye.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):GN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):ie.resolve(ts());let a=-1,l=s;return o.next(u=>ie.forEach(u,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(c)?ie.resolve():this.remoteDocumentCache.getEntry(e,c).next(f=>{l=l.insert(c,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Oe())).next(c=>({batchId:a,changes:ZT(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next(r=>{let i=Oa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Oa();return this.indexManager.getCollectionParents(e,s).next(a=>ie.forEach(a,l=>{const u=function(h,f){return new sf(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(c=>{c.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,qt.newInvalidDocument(c)))});let a=Oa();return o.forEach((l,u)=>{const c=s.get(l);c!==void 0&&Ja(c.mutation,u,zn.empty(),_t.now()),lf(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ie.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:cr(i.createTime)}}(n)),ie.resolve()}getNamedQuery(e,n){return ie.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:LD(i.bundledQuery),readTime:cr(i.readTime)}}(n)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(){this.overlays=new ut(ye.comparator),this.Ir=new Map}getOverlay(e,n){return ie.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ts();return ie.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),ie.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),ie.resolve()}getOverlaysForCollection(e,n,r){const i=ts(),s=n.length+1,o=new ye(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return ie.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ut((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=ts(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=ts(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return ie.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new fD(n,r));let s=this.Ir.get(n);s===void 0&&(s=Oe(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(){this.Tr=new Dt(kt.Er),this.dr=new Dt(kt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new kt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new kt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ye(new nt([])),r=new kt(n,e),i=new kt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ye(new nt([])),r=new kt(n,e),i=new kt(n,e+1);let s=Oe();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new kt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class kt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ye.comparator(e.key,n.key)||Fe(e.wr,n.wr)}static Ar(e,n){return Fe(e.wr,n.wr)||ye.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Dt(kt.Er)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new hD(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new kt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ie.resolve(o)}lookupMutationBatch(e,n){return ie.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return ie.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new kt(n,0),i=new kt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),ie.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Dt(Fe);return n.forEach(i=>{const s=new kt(i,0),o=new kt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),ie.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ye.isDocumentKey(s)||(s=s.child(""));const o=new kt(new ye(s),0);let a=new Dt(Fe);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},o),ie.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){$e(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return ie.forEach(n.mutations,i=>{const s=new kt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new kt(n,0),i=this.br.firstAfterOrEqual(r);return ie.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e){this.Mr=e,this.docs=function(){return new ut(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ie.resolve(r?r.document.mutableCopy():qt.newInvalidDocument(n))}getEntries(e,n){let r=qr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():qt.newInvalidDocument(i))}),ie.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=qr();const o=n.path,a=new ye(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||IN(AN(c),r)<=0||(i.has(c.key)||lf(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return ie.resolve(s)}getAllFromCollectionGroup(e,n,r,i){we()}Or(e,n){return ie.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new KD(this)}getSize(e){return ie.resolve(this.size)}}class KD extends FD{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),ie.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e){this.persistence=e,this.Nr=new Vo(n=>ey(n),ty),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ay,this.targetCount=0,this.kr=ko.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),ie.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ko(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ie.resolve()}updateTargetData(e,n){return this.Kn(n),ie.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),ie.waitFor(s).next(()=>i)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return ie.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),ie.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),ie.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ie.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return ie.resolve(r)}containsKey(e,n){return ie.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Qm(0),this.Kr=!1,this.Kr=!0,this.$r=new qD,this.referenceDelegate=e(this),this.Ur=new GD(this),this.indexManager=new jD,this.remoteDocumentCache=function(i){return new WD(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new MD(n),this.Gr=new UD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $D,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new HD(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){pe("MemoryPersistence","Starting transaction:",e);const i=new QD(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return ie.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class QD extends ON{constructor(e){super(),this.currentSequenceNumber=e}}class ly{constructor(e){this.persistence=e,this.Jr=new ay,this.Yr=null}static Zr(e){return new ly(e)}get Xr(){if(this.Yr)return this.Yr;throw we()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),ie.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ie.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.Xr,r=>{const i=ye.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,xe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return ie.or([()=>ie.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Oe(),i=Oe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new uy(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return XP()?8:CN(Kt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new XD;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(ya()<=Re.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",Fs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ie.resolve()):(ya()<=Re.DEBUG&&pe("QueryEngine","Query:",Fs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ya()<=Re.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",Fs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,lr(n))):ie.resolve())}Yi(e,n){if(W_(n))return ie.resolve(null);let r=lr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=lg(n,null,"F"),r=lr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Oe(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,lg(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return W_(n)||i.isEqual(xe.min())?ie.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?ie.resolve(null):(ya()<=Re.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Fs(n)),this.rs(e,o,n,SN(i,-1)).next(a=>a))})}ts(e,n){let r=new Dt(XT(e));return n.forEach((i,s)=>{lf(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return ya()<=Re.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Fs(n)),this.Ji.getDocumentsMatchingQuery(e,n,Si.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new ut(Fe),this._s=new Vo(s=>ey(s),ty),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zD(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function eM(t,e,n,r){return new ZD(t,e,n,r)}async function vk(t,e){const n=Ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Oe();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function tM(t,e){const n=Ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const h=u.batch,f=h.keys();let d=ie.resolve();return f.forEach(y=>{d=d.next(()=>c.getEntry(l,y)).next(v=>{const _=u.docVersions.get(y);$e(_!==null),v.version.compareTo(_)<0&&(h.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),c.addEntry(v)))})}),d.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Oe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function _k(t){const e=Ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function nM(t,e){const n=Ee(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((c,h)=>{const f=i.get(h);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,c.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(s,c.addedDocuments,h)));let d=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?d=d.withResumeToken(Pt.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):c.resumeToken.approximateByteSize()>0&&(d=d.withResumeToken(c.resumeToken,r)),i=i.insert(h,d),function(v,_,g){return v.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size>0}(f,d,c)&&a.push(n.Ur.updateTargetData(s,d))});let l=qr(),u=Oe();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(rM(s,o,e.documentUpdates).next(c=>{l=c.Ps,u=c.Is})),!r.isEqual(xe.min())){const c=n.Ur.getLastRemoteSnapshotVersion(s).next(h=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return ie.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=i,s))}function rM(t,e,n){let r=Oe(),i=Oe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=qr();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(xe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):pe("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function iM(t,e){const n=Ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function sM(t,e){const n=Ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,ie.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new ui(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function dg(t,e,n){const r=Ee(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Gl(o))throw o;pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function rb(t,e,n){const r=Ee(t);let i=xe.min(),s=Oe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const h=Ee(l),f=h._s.get(c);return f!==void 0?ie.resolve(h.os.get(f)):h.Ur.getTargetData(u,c)}(r,o,lr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:xe.min(),n?s:Oe())).next(a=>(oM(r,QN(e),a),{documents:a,Ts:s})))}function oM(t,e,n){let r=t.us.get(e)||xe.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class ib{constructor(){this.activeTargetIds=nD()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aM{constructor(){this.so=new ib,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ib,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vu=null;function Pd(){return Vu===null?Vu=function(){return 268435456+Math.round(2147483648*Math.random())}():Vu++,"0x"+Vu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class hM extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Pd(),l=this.xo(n,r.toUriEncodedString());pe("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,i).then(c=>(pe("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw ys("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",l,"request:",i),c})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Lo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=uM[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Pd();return new Promise((o,a)=>{const l=new DT;l.setWithCredentials(!0),l.listenOnce(MT.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case yc.NO_ERROR:const c=l.getResponseJson();pe(Bt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(c)),o(c);break;case yc.TIMEOUT:pe(Bt,`RPC '${e}' ${s} timed out`),a(new me(re.DEADLINE_EXCEEDED,"Request time out"));break;case yc.HTTP_ERROR:const h=l.getStatus();if(pe(Bt,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const d=f==null?void 0:f.error;if(d&&d.status&&d.message){const y=function(_){const g=_.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(g)>=0?g:re.UNKNOWN}(d.status);a(new me(y,d.message))}else a(new me(re.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new me(re.UNAVAILABLE,"Connection failed."));break;default:we()}}finally{pe(Bt,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);pe(Bt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=Pd(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=VT(),a=jT(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");pe(Bt,`Creating RPC '${e}' stream ${i}: ${c}`,l);const h=o.createWebChannel(c,l);let f=!1,d=!1;const y=new cM({Io:_=>{d?pe(Bt,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(f||(pe(Bt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),pe(Bt,`RPC '${e}' stream ${i} sending:`,_),h.send(_))},To:()=>h.close()}),v=(_,g,m)=>{_.listen(g,w=>{try{m(w)}catch(b){setTimeout(()=>{throw b},0)}})};return v(h,Pa.EventType.OPEN,()=>{d||(pe(Bt,`RPC '${e}' stream ${i} transport opened.`),y.yo())}),v(h,Pa.EventType.CLOSE,()=>{d||(d=!0,pe(Bt,`RPC '${e}' stream ${i} transport closed`),y.So())}),v(h,Pa.EventType.ERROR,_=>{d||(d=!0,ys(Bt,`RPC '${e}' stream ${i} transport errored:`,_),y.So(new me(re.UNAVAILABLE,"The operation could not be completed")))}),v(h,Pa.EventType.MESSAGE,_=>{var g;if(!d){const m=_.data[0];$e(!!m);const w=m,b=w.error||((g=w[0])===null||g===void 0?void 0:g.error);if(b){pe(Bt,`RPC '${e}' stream ${i} received error:`,b);const T=b.status;let C=function(P){const S=mt[P];if(S!==void 0)return lk(S)}(T),k=b.message;C===void 0&&(C=re.INTERNAL,k="Unknown error status: "+T+" with message "+b.message),d=!0,y.So(new me(C,k)),h.close()}else pe(Bt,`RPC '${e}' stream ${i} received:`,m),y.bo(m)}}),v(a,LT.STAT_EVENT,_=>{_.stat===rg.PROXY?pe(Bt,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===rg.NOPROXY&&pe(Bt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}function Od(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(t){return new wD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&pe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new bk(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===re.RESOURCE_EXHAUSTED?($r(n.toString()),$r("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new me(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fM extends wk{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=TD(this.serializer,e),r=function(s){if(!("targetChange"in s))return xe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?xe.min():o.readTime?cr(o.readTime):xe.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=fg(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=ag(l)?{documents:AD(s,l)}:{query:ID(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=hk(s,o.resumeToken);const u=ug(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(xe.min())>0){a.readTime=gh(s,o.snapshotVersion.toTimestamp());const u=ug(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=OD(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=fg(this.serializer),n.removeTarget=e,this.a_(n)}}class dM extends wk{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return $e(!!e.streamToken),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){$e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=SD(e.writeResults,e.commitTime),r=cr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=fg(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>kD(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new me(re.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,cg(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new me(re.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,cg(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new me(re.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class gM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?($r(n),this.D_=!1):pe("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Cs(this)&&(pe("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=Ee(l);u.L_.add(4),await Xl(u),u.q_.set("Unknown"),u.L_.delete(4),await df(u)}(this))})}),this.q_=new gM(r,i)}}async function df(t){if(Cs(t))for(const e of t.B_)await e(!0)}async function Xl(t){for(const e of t.B_)await e(!1)}function xk(t,e){const n=Ee(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),dy(n)?fy(n):Fo(n).r_()&&hy(n,e))}function cy(t,e){const n=Ee(t),r=Fo(n);n.N_.delete(e),r.r_()&&Ek(n,e),n.N_.size===0&&(r.r_()?r.o_():Cs(n)&&n.q_.set("Unknown"))}function hy(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fo(t).A_(e)}function Ek(t,e){t.Q_.xe(e),Fo(t).R_(e)}function fy(t){t.Q_=new yD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Fo(t).start(),t.q_.v_()}function dy(t){return Cs(t)&&!Fo(t).n_()&&t.N_.size>0}function Cs(t){return Ee(t).L_.size===0}function Tk(t){t.Q_=void 0}async function yM(t){t.q_.set("Online")}async function vM(t){t.N_.forEach((e,n)=>{hy(t,e)})}async function _M(t,e){Tk(t),dy(t)?(t.q_.M_(e),fy(t)):t.q_.set("Unknown")}async function bM(t,e,n){if(t.q_.set("Online"),e instanceof ck&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await mh(t,r)}else if(e instanceof bc?t.Q_.Ke(e):e instanceof uk?t.Q_.He(e):t.Q_.We(e),!n.isEqual(xe.min()))try{const r=await _k(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.N_.get(u);c&&s.N_.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=s.N_.get(l);if(!c)return;s.N_.set(l,c.withResumeToken(Pt.EMPTY_BYTE_STRING,c.snapshotVersion)),Ek(s,l);const h=new ui(c.target,l,u,c.sequenceNumber);hy(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){pe("RemoteStore","Failed to raise snapshot:",r),await mh(t,r)}}async function mh(t,e,n){if(!Gl(e))throw e;t.L_.add(1),await Xl(t),t.q_.set("Offline"),n||(n=()=>_k(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{pe("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await df(t)})}function kk(t,e){return e().catch(n=>mh(t,n,e))}async function pf(t){const e=Ee(t),n=Ii(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;wM(e);)try{const i=await iM(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,xM(e,i)}catch(i){await mh(e,i)}Sk(e)&&Ak(e)}function wM(t){return Cs(t)&&t.O_.length<10}function xM(t,e){t.O_.push(e);const n=Ii(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Sk(t){return Cs(t)&&!Ii(t).n_()&&t.O_.length>0}function Ak(t){Ii(t).start()}async function EM(t){Ii(t).p_()}async function TM(t){const e=Ii(t);for(const n of t.O_)e.m_(n.mutations)}async function kM(t,e,n){const r=t.O_.shift(),i=iy.from(r,e,n);await kk(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await pf(t)}async function SM(t,e){e&&Ii(t).V_&&await async function(r,i){if(function(o){return pD(o)&&o!==re.ABORTED}(i.code)){const s=r.O_.shift();Ii(r).s_(),await kk(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await pf(r)}}(t,e),Sk(t)&&Ak(t)}async function ob(t,e){const n=Ee(t);n.asyncQueue.verifyOperationInProgress(),pe("RemoteStore","RemoteStore received new credentials");const r=Cs(n);n.L_.add(3),await Xl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await df(n)}async function AM(t,e){const n=Ee(t);e?(n.L_.delete(2),await df(n)):e||(n.L_.add(2),await Xl(n),n.q_.set("Unknown"))}function Fo(t){return t.K_||(t.K_=function(n,r,i){const s=Ee(n);return s.w_(),new fM(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:yM.bind(null,t),Ro:vM.bind(null,t),mo:_M.bind(null,t),d_:bM.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),dy(t)?fy(t):t.q_.set("Unknown")):(await t.K_.stop(),Tk(t))})),t.K_}function Ii(t){return t.U_||(t.U_=function(n,r,i){const s=Ee(n);return s.w_(),new dM(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:EM.bind(null,t),mo:SM.bind(null,t),f_:TM.bind(null,t),g_:kM.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await pf(t)):(await t.U_.stop(),t.O_.length>0&&(pe("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new py(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gy(t,e){if($r("AsyncQueue",`${e}: ${t}`),Gl(t))return new me(re.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ye.comparator(n.key,r.key):(n,r)=>ye.comparator(n.key,r.key),this.keyedMap=Oa(),this.sortedSet=new ut(this.comparator)}static emptySet(e){return new co(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof co)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new co;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(){this.W_=new ut(ye.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):we():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class So{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new So(e,n,co.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&af(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class PM{constructor(){this.queries=lb(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Ee(n),s=i.queries;i.queries=lb(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new me(re.ABORTED,"Firestore shutting down"))}}function lb(){return new Vo(t=>QT(t),af)}async function my(t,e){const n=Ee(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new IM,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=gy(o,`Initialization of query '${Fs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&vy(n)}async function yy(t,e){const n=Ee(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function OM(t,e){const n=Ee(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&vy(n)}function CM(t,e,n){const r=Ee(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function vy(t){t.Y_.forEach(e=>{e.next()})}var pg,ub;(ub=pg||(pg={})).ea="default",ub.Cache="cache";class _y{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new So(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=So.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==pg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e){this.key=e}}class Pk{constructor(e){this.key=e}}class RM{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Oe(),this.mutatedKeys=Oe(),this.Aa=XT(e),this.Ra=new co(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new ab,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,h)=>{const f=i.get(c),d=lf(this.query,h)?h:null,y=!!f&&this.mutatedKeys.has(f.key),v=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations);let _=!1;f&&d?f.data.isEqual(d.data)?y!==v&&(r.track({type:3,doc:d}),_=!0):this.ga(f,d)||(r.track({type:2,doc:d}),_=!0,(l&&this.Aa(d,l)>0||u&&this.Aa(d,u)<0)&&(a=!0)):!f&&d?(r.track({type:0,doc:d}),_=!0):f&&!d&&(r.track({type:1,doc:f}),_=!0,(l||u)&&(a=!0)),_&&(d?(o=o.add(d),s=v?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((c,h)=>function(d,y){const v=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we()}};return v(d)-v(y)}(c.type,h.type)||this.Aa(c.doc,h.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new So(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ab,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Oe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Pk(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Ik(r))}),n}ba(e){this.Ta=e.Ts,this.da=Oe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return So.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class NM{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class DM{constructor(e){this.key=e,this.va=!1}}class MM{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Vo(a=>QT(a),af),this.Ma=new Map,this.xa=new Set,this.Oa=new ut(ye.comparator),this.Na=new Map,this.La=new ay,this.Ba={},this.ka=new Map,this.qa=ko.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function LM(t,e,n=!0){const r=Mk(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Ok(r,e,n,!0),i}async function jM(t,e){const n=Mk(t);await Ok(n,e,!0,!1)}async function Ok(t,e,n,r){const i=await sM(t.localStore,lr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await VM(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&xk(t.remoteStore,i),a}async function VM(t,e,n,r,i){t.Ka=(h,f,d)=>async function(v,_,g,m){let w=_.view.ma(g);w.ns&&(w=await rb(v.localStore,_.query,!1).then(({documents:k})=>_.view.ma(k,w)));const b=m&&m.targetChanges.get(_.targetId),T=m&&m.targetMismatches.get(_.targetId)!=null,C=_.view.applyChanges(w,v.isPrimaryClient,b,T);return hb(v,_.targetId,C.wa),C.snapshot}(t,h,f,d);const s=await rb(t.localStore,e,!0),o=new RM(e,s.Ts),a=o.ma(s.documents),l=Ql.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);hb(t,n,u.wa);const c=new NM(e,n,o);return t.Fa.set(e,c),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function FM(t,e,n){const r=Ee(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!af(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await dg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&cy(r.remoteStore,i.targetId),gg(r,i.targetId)}).catch(Kl)):(gg(r,i.targetId),await dg(r.localStore,i.targetId,!0))}async function BM(t,e){const n=Ee(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),cy(n.remoteStore,r.targetId))}async function zM(t,e,n){const r=GM(t);try{const i=await function(o,a){const l=Ee(o),u=_t.now(),c=a.reduce((d,y)=>d.add(y.key),Oe());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",d=>{let y=qr(),v=Oe();return l.cs.getEntries(d,c).next(_=>{y=_,y.forEach((g,m)=>{m.isValidDocument()||(v=v.add(g))})}).next(()=>l.localDocuments.getOverlayedDocuments(d,y)).next(_=>{h=_;const g=[];for(const m of a){const w=uD(m,h.get(m.key).overlayedDocument);w!=null&&g.push(new Os(m.key,w,$T(w.value.mapValue),ur.exists(!0)))}return l.mutationQueue.addMutationBatch(d,u,g,a)}).next(_=>{f=_;const g=_.applyToLocalDocumentSet(h,v);return l.documentOverlayCache.saveOverlays(d,_.batchId,g)})}).then(()=>({batchId:f.batchId,changes:ZT(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new ut(Fe)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,n),await Jl(r,i.changes),await pf(r.remoteStore)}catch(i){const s=gy(i,"Failed to persist write");n.reject(s)}}async function Ck(t,e){const n=Ee(t);try{const r=await nM(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&($e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?$e(o.va):i.removedDocuments.size>0&&($e(o.va),o.va=!1))}),await Jl(n,r,e)}catch(r){await Kl(r)}}function cb(t,e,n){const r=Ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Ee(o);l.onlineState=a;let u=!1;l.queries.forEach((c,h)=>{for(const f of h.j_)f.Z_(a)&&(u=!0)}),u&&vy(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function UM(t,e,n){const r=Ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new ut(ye.comparator);o=o.insert(s,qt.newNoDocument(s,xe.min()));const a=Oe().add(s),l=new hf(xe.min(),new Map,new ut(Fe),o,a);await Ck(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),by(r)}else await dg(r.localStore,e,!1).then(()=>gg(r,e,n)).catch(Kl)}async function $M(t,e){const n=Ee(t),r=e.batch.batchId;try{const i=await tM(n.localStore,e);Nk(n,r,null),Rk(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Jl(n,i)}catch(i){await Kl(i)}}async function qM(t,e,n){const r=Ee(t);try{const i=await function(o,a){const l=Ee(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(h=>($e(h!==null),c=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,e);Nk(r,e,n),Rk(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Jl(r,i)}catch(i){await Kl(i)}}function Rk(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Nk(t,e,n){const r=Ee(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function gg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Dk(t,r)})}function Dk(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(cy(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),by(t))}function hb(t,e,n){for(const r of n)r instanceof Ik?(t.La.addReference(r.key,e),HM(t,r)):r instanceof Pk?(pe("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Dk(t,r.key)):we()}function HM(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(pe("SyncEngine","New document in limbo: "+n),t.xa.add(r),by(t))}function by(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ye(nt.fromString(e)),r=t.qa.next();t.Na.set(r,new DM(n)),t.Oa=t.Oa.insert(n,r),xk(t.remoteStore,new ui(lr(of(n.path)),r,"TargetPurposeLimboResolution",Qm.oe))}}async function Jl(t,e,n){const r=Ee(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(u=>{var c;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(c=n==null?void 0:n.targetChanges.get(l.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);const h=uy.Wi(l.targetId,u);s.push(h)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,u){const c=Ee(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>ie.forEach(u,f=>ie.forEach(f.$i,d=>c.persistence.referenceDelegate.addReference(h,f.targetId,d)).next(()=>ie.forEach(f.Ui,d=>c.persistence.referenceDelegate.removeReference(h,f.targetId,d)))))}catch(h){if(!Gl(h))throw h;pe("LocalStore","Failed to update sequence numbers: "+h)}for(const h of u){const f=h.targetId;if(!h.fromCache){const d=c.os.get(f),y=d.snapshotVersion,v=d.withLastLimboFreeSnapshotVersion(y);c.os=c.os.insert(f,v)}}}(r.localStore,s))}async function WM(t,e){const n=Ee(t);if(!n.currentUser.isEqual(e)){pe("SyncEngine","User change. New user:",e.toKey());const r=await vk(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new me(re.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Jl(n,r.hs)}}function KM(t,e){const n=Ee(t),r=n.Na.get(e);if(r&&r.va)return Oe().add(r.key);{let i=Oe();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function Mk(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ck.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UM.bind(null,e),e.Ca.d_=OM.bind(null,e.eventManager),e.Ca.$a=CM.bind(null,e.eventManager),e}function GM(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$M.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qM.bind(null,e),e}class yh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ff(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return eM(this.persistence,new JD,e.initialUser,this.serializer)}Ga(e){return new YD(ly.Zr,this.serializer)}Wa(e){return new aM}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yh.provider={build:()=>new yh};class mg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>cb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=WM.bind(null,this.syncEngine),await AM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new PM}()}createDatastore(e){const n=ff(e.databaseInfo.databaseId),r=function(s){return new hM(s)}(e.databaseInfo);return function(s,o,a,l){return new pM(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new mM(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>cb(this.syncEngine,n,0),function(){return sb.D()?new sb:new lM}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,c){const h=new MM(i,s,o,a,l,u);return c&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Ee(i);pe("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Xl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}mg.provider={build:()=>new mg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):$r("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ut.UNAUTHENTICATED,this.clientId=Ym.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{pe("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(pe("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=gy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Cd(t,e){t.asyncQueue.verifyOperationInProgress(),pe("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await vk(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function fb(t,e){t.asyncQueue.verifyOperationInProgress();const n=await QM(t);pe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ob(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>ob(e.remoteStore,i)),t._onlineComponents=e}async function QM(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){pe("FirestoreClient","Using user provided OfflineComponentProvider");try{await Cd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===re.FAILED_PRECONDITION||i.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ys("Error using user provided cache. Falling back to memory cache: "+n),await Cd(t,new yh)}}else pe("FirestoreClient","Using default OfflineComponentProvider"),await Cd(t,new yh);return t._offlineComponents}async function Lk(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(pe("FirestoreClient","Using user provided OnlineComponentProvider"),await fb(t,t._uninitializedComponentsProvider._online)):(pe("FirestoreClient","Using default OnlineComponentProvider"),await fb(t,new mg))),t._onlineComponents}function XM(t){return Lk(t).then(e=>e.syncEngine)}async function vh(t){const e=await Lk(t),n=e.eventManager;return n.onListen=LM.bind(null,e.syncEngine),n.onUnlisten=FM.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=jM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=BM.bind(null,e.syncEngine),n}function JM(t,e,n={}){const r=new Mr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new wy({next:f=>{c.Za(),o.enqueueAndForget(()=>yy(s,h));const d=f.docs.has(a);!d&&f.fromCache?u.reject(new me(re.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&f.fromCache&&l&&l.source==="server"?u.reject(new me(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new _y(of(a.path),c,{includeMetadataChanges:!0,_a:!0});return my(s,h)}(await vh(t),t.asyncQueue,e,n,r)),r.promise}function ZM(t,e,n={}){const r=new Mr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new wy({next:f=>{c.Za(),o.enqueueAndForget(()=>yy(s,h)),f.fromCache&&l.source==="server"?u.reject(new me(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new _y(a,c,{includeMetadataChanges:!0,_a:!0});return my(s,h)}(await vh(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vk(t,e,n){if(!n)throw new me(re.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Fk(t,e,n,r){if(e===!0&&r===!0)throw new me(re.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function pb(t){if(!ye.isDocumentKey(t))throw new me(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function gb(t){if(ye.isDocumentKey(t))throw new me(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function xy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we()}function Cn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new me(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xy(t);throw new me(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new me(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new me(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Fk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jk((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new me(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new me(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new me(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mb({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mb(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new BT;switch(r.type){case"firstParty":return new wN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new me(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=db.get(n);r&&(pe("ComponentProvider","Removing Datastore"),db.delete(n),r.terminate())}(this),Promise.resolve()}}function Bk(t,e,n,r={}){var i;const s=(t=Cn(t,gf))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ys("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Ut.MOCK_USER;else{a=HP(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new me(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ut(u)}t._authCredentials=new vN(new FT(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bo(this.firestore,e,this._query)}}class en{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new en(this.firestore,e,this._key)}}class Lr extends Bo{constructor(e,n,r){super(e,n,of(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new en(this.firestore,null,new ye(e))}withConverter(e){return new Lr(this.firestore,e,this._path)}}function Ao(t,e,...n){if(t=Gt(t),Vk("collection","path",e),t instanceof gf){const r=nt.fromString(e,...n);return gb(r),new Lr(t,null,r)}{if(!(t instanceof en||t instanceof Lr))throw new me(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(nt.fromString(e,...n));return gb(r),new Lr(t.firestore,null,r)}}function Jt(t,e,...n){if(t=Gt(t),arguments.length===1&&(e=Ym.newId()),Vk("doc","path",e),t instanceof gf){const r=nt.fromString(e,...n);return pb(r),new en(t,null,new ye(r))}{if(!(t instanceof en||t instanceof Lr))throw new me(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(nt.fromString(e,...n));return pb(r),new en(t.firestore,t instanceof Lr?t.converter:null,new ye(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new bk(this,"async_queue_retry"),this.Vu=()=>{const r=Od();r&&pe("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Od();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Od();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Mr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Gl(e))throw e;pe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw $r("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=py.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&we()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function vb(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Pi extends gf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new yb,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new yb(e),this._firestoreClient=void 0,await e}}}function zk(t,e){const n=typeof t=="object"?t:Lm(),r=typeof t=="string"?t:"(default)",i=Ps(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=$P("firestore");s&&Bk(i,...s)}return i}function Zl(t){if(t._terminated)throw new me(re.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||eL(t),t._firestoreClient}function eL(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,c){return new DN(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,jk(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new YM(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bs(Pt.fromBase64String(e))}catch(n){throw new me(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new bs(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new me(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new me(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new me(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL=/^__.*__$/;class nL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Os(e,this.data,this.fieldMask,n,this.fieldTransforms):new Yl(e,this.data,n,this.fieldTransforms)}}function Uk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we()}}class Ty{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ty(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return _h(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Uk(this.Cu)&&tL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class rL{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ff(e)}Qu(e,n,r,i=!1){return new Ty({Cu:e,methodName:n,qu:r,path:At.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function iL(t){const e=t._freezeSettings(),n=ff(t._databaseId);return new rL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function sL(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Wk("Data must be an object, but it was:",o,r);const a=qk(r,o);let l,u;if(s.merge)l=new zn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const h of s.mergeFields){const f=oL(e,h,n);if(!o.contains(f))throw new me(re.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);lL(c,f)||c.push(f)}l=new zn(c),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new nL(new Sn(a),l,u)}function $k(t,e){if(Hk(t=Gt(t)))return Wk("Unsupported field value:",e,t),qk(t,e);if(t instanceof Ey)return function(r,i){if(!Uk(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=$k(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Gt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rD(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=_t.fromDate(r);return{timestampValue:gh(i.serializer,s)}}if(r instanceof _t){const s=new _t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:gh(i.serializer,s)}}if(r instanceof yf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof bs)return{bytesValue:hk(i.serializer,r._byteString)};if(r instanceof en){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:oy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof vf)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return ny(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${xy(r)}`)}(t,e)}function qk(t,e){const n={};return zT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jo(t,(r,i)=>{const s=$k(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Hk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _t||t instanceof yf||t instanceof bs||t instanceof en||t instanceof Ey||t instanceof vf)}function Wk(t,e,n){if(!Hk(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=xy(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function oL(t,e,n){if((e=Gt(e))instanceof mf)return e._internalPath;if(typeof e=="string")return Kk(t,e);throw _h("Field path arguments must be of type string or ",t,!1,void 0,n)}const aL=new RegExp("[~\\*/\\[\\]]");function Kk(t,e,n){if(e.search(aL)>=0)throw _h(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new mf(...e.split("."))._internalPath}catch{throw _h(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function _h(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new me(re.INVALID_ARGUMENT,a+t+l)}function lL(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new en(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Yk("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class uL extends Gk{data(){return super.data()}}function Yk(t,e){return typeof e=="string"?Kk(t,e):e instanceof mf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new me(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xk{convertValue(e,n="none"){switch(_s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(vs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return jo(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>dt(o.doubleValue));return new vf(s)}convertGeoPoint(e){return new yf(dt(e.latitude),dt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Jm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Il(e));default:return null}}convertTimestamp(e){const n=Ai(e);return new _t(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=nt.fromString(e);$e(yk(r));const i=new xo(r.get(1),r.get(3)),s=new ye(r.popFirst(5));return i.isEqual(n)||$r(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cL(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ky extends Gk{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Za(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Yk("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Za extends ky{data(e={}){return super.data(e)}}class Sy{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new eo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Za(this._firestore,this._userDataWriter,r.key,r,new eo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new me(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Za(i._firestore,i._userDataWriter,a.doc.key,a.doc,new eo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Za(i._firestore,i._userDataWriter,a.doc.key,a.doc,new eo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:hL(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function hL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jk(t){t=Cn(t,en);const e=Cn(t.firestore,Pi);return JM(Zl(e),t._key).then(n=>Zk(e,t,n))}class Ay extends Xk{constructor(e){super(),this.firestore=e}convertBytes(e){return new bs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new en(this.firestore,null,n)}}function fL(t){t=Cn(t,Bo);const e=Cn(t.firestore,Pi),n=Zl(e),r=new Ay(e);return Qk(t._query),ZM(n,t._query).then(i=>new Sy(e,r,t,i))}function Rr(t,e,n){t=Cn(t,en);const r=Cn(t.firestore,Pi),i=cL(t.converter,e);return Iy(r,[sL(iL(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ur.none())])}function el(t){return Iy(Cn(t.firestore,Pi),[new ry(t._key,ur.none())])}function ws(t,...e){var n,r,i;t=Gt(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||vb(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(vb(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,u,c;if(t instanceof en)u=Cn(t.firestore,Pi),c=of(t._key.path),l={next:h=>{e[o]&&e[o](Zk(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=Cn(t,Bo);u=Cn(h.firestore,Pi),c=h._query;const f=new Ay(u);l={next:d=>{e[o]&&e[o](new Sy(u,f,h,d))},error:e[o+1],complete:e[o+2]},Qk(t._query)}return function(f,d,y,v){const _=new wy(v),g=new _y(d,_,y);return f.asyncQueue.enqueueAndForget(async()=>my(await vh(f),g)),()=>{_.Za(),f.asyncQueue.enqueueAndForget(async()=>yy(await vh(f),g))}}(Zl(u),c,a,l)}function Iy(t,e){return function(r,i){const s=new Mr;return r.asyncQueue.enqueueAndForget(async()=>zM(await XM(r),i,s)),s.promise}(Zl(t),e)}function Zk(t,e,n){const r=n.docs.get(e._key),i=new Ay(t);return new ky(t,i,e._key,r,new eo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Lo=i})(Do),dr(new Kn("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Pi(new _N(r.getProvider("auth-internal")),new EN(r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new me(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xo(u.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),On(L_,"4.7.3",e),On(L_,"4.7.3","esm2017")})();const dL=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Xk,Bytes:bs,CollectionReference:Lr,DocumentReference:en,DocumentSnapshot:ky,FieldPath:mf,FieldValue:Ey,Firestore:Pi,FirestoreError:me,GeoPoint:yf,Query:Bo,QueryDocumentSnapshot:Za,QuerySnapshot:Sy,SnapshotMetadata:eo,Timestamp:_t,VectorValue:vf,_AutoId:Ym,_ByteString:Pt,_DatabaseId:xo,_DocumentKey:ye,_EmptyAuthCredentialsProvider:BT,_FieldPath:At,_cast:Cn,_logWarn:ys,_validateIsNotUsedTogether:Fk,collection:Ao,connectFirestoreEmulator:Bk,deleteDoc:el,doc:Jt,ensureFirestoreConfigured:Zl,executeWrite:Iy,getDoc:Jk,getDocs:fL,getFirestore:zk,onSnapshot:ws,setDoc:Rr},Symbol.toStringTag,{value:"Module"})),eS="@firebase/installations",Py="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS=1e4,nS=`w:${Py}`,rS="FIS_v2",pL="https://firebaseinstallations.googleapis.com/v1",gL=60*60*1e3,mL="installations",yL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},xs=new Is(mL,yL,vL);function iS(t){return t instanceof Yn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS({projectId:t}){return`${pL}/projects/${t}/installations`}function oS(t){return{token:t.token,requestStatus:2,expiresIn:bL(t.expiresIn),creationTime:Date.now()}}async function aS(t,e){const r=(await e.json()).error;return xs.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function lS({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function _L(t,{refreshToken:e}){const n=lS(t);return n.append("Authorization",wL(e)),n}async function uS(t){const e=await t();return e.status>=500&&e.status<600?t():e}function bL(t){return Number(t.replace("s","000"))}function wL(t){return`${rS} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xL({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=sS(t),i=lS(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:rS,appId:t.appId,sdkVersion:nS},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await uS(()=>fetch(r,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:oS(u.authToken)}}else throw await aS("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=/^[cdef][\w-]{21}$/,yg="";function kL(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=SL(t);return TL.test(n)?n:yg}catch{return yg}}function SL(t){return EL(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS=new Map;function fS(t,e){const n=_f(t);dS(n,e),AL(n,e)}function dS(t,e){const n=hS.get(t);if(n)for(const r of n)r(e)}function AL(t,e){const n=IL();n&&n.postMessage({key:t,fid:e}),PL()}let ns=null;function IL(){return!ns&&"BroadcastChannel"in self&&(ns=new BroadcastChannel("[Firebase] FID Change"),ns.onmessage=t=>{dS(t.data.key,t.data.fid)}),ns}function PL(){hS.size===0&&ns&&(ns.close(),ns=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL="firebase-installations-database",CL=1,Es="firebase-installations-store";let Rd=null;function Oy(){return Rd||(Rd=JE(OL,CL,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Es)}}})),Rd}async function bh(t,e){const n=_f(t),i=(await Oy()).transaction(Es,"readwrite"),s=i.objectStore(Es),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&fS(t,e.fid),e}async function pS(t){const e=_f(t),r=(await Oy()).transaction(Es,"readwrite");await r.objectStore(Es).delete(e),await r.done}async function bf(t,e){const n=_f(t),i=(await Oy()).transaction(Es,"readwrite"),s=i.objectStore(Es),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&fS(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cy(t){let e;const n=await bf(t.appConfig,r=>{const i=RL(r),s=NL(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===yg?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function RL(t){const e=t||{fid:kL(),registrationStatus:0};return gS(e)}function NL(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(xs.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=DL(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:ML(t)}:{installationEntry:e}}async function DL(t,e){try{const n=await xL(t,e);return bh(t.appConfig,n)}catch(n){throw iS(n)&&n.customData.serverCode===409?await pS(t.appConfig):await bh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function ML(t){let e=await _b(t.appConfig);for(;e.registrationStatus===1;)await cS(100),e=await _b(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Cy(t);return r||n}return e}function _b(t){return bf(t,e=>{if(!e)throw xs.create("installation-not-found");return gS(e)})}function gS(t){return LL(t)?{fid:t.fid,registrationStatus:0}:t}function LL(t){return t.registrationStatus===1&&t.registrationTime+tS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jL({appConfig:t,heartbeatServiceProvider:e},n){const r=VL(t,n),i=_L(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:nS,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await uS(()=>fetch(r,a));if(l.ok){const u=await l.json();return oS(u)}else throw await aS("Generate Auth Token",l)}function VL(t,{fid:e}){return`${sS(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ry(t,e=!1){let n;const r=await bf(t.appConfig,s=>{if(!mS(s))throw xs.create("not-registered");const o=s.authToken;if(!e&&zL(o))return s;if(o.requestStatus===1)return n=FL(t,e),s;{if(!navigator.onLine)throw xs.create("app-offline");const a=$L(s);return n=BL(t,a),a}});return n?await n:r.authToken}async function FL(t,e){let n=await bb(t.appConfig);for(;n.authToken.requestStatus===1;)await cS(100),n=await bb(t.appConfig);const r=n.authToken;return r.requestStatus===0?Ry(t,e):r}function bb(t){return bf(t,e=>{if(!mS(e))throw xs.create("not-registered");const n=e.authToken;return qL(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function BL(t,e){try{const n=await jL(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await bh(t.appConfig,r),n}catch(n){if(iS(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await pS(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await bh(t.appConfig,r)}throw n}}function mS(t){return t!==void 0&&t.registrationStatus===2}function zL(t){return t.requestStatus===2&&!UL(t)}function UL(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+gL}function $L(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function qL(t){return t.requestStatus===1&&t.requestTime+tS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HL(t){const e=t,{installationEntry:n,registrationPromise:r}=await Cy(e);return r?r.catch(console.error):Ry(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WL(t,e=!1){const n=t;return await KL(n),(await Ry(n,e)).token}async function KL(t){const{registrationPromise:e}=await Cy(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GL(t){if(!t||!t.options)throw Nd("App Configuration");if(!t.name)throw Nd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Nd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Nd(t){return xs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS="installations",YL="installations-internal",QL=t=>{const e=t.getProvider("app").getImmediate(),n=GL(e),r=Ps(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},XL=t=>{const e=t.getProvider("app").getImmediate(),n=Ps(e,yS).getImmediate();return{getId:()=>HL(n),getToken:i=>WL(n,i)}};function JL(){dr(new Kn(yS,QL,"PUBLIC")),dr(new Kn(YL,XL,"PRIVATE"))}JL();On(eS,Py);On(eS,Py,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh="analytics",ZL="firebase_id",e4="origin",t4=60*1e3,n4="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ny="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn=new Zh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},_n=new Is("analytics","Analytics",r4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(t){if(!t.startsWith(Ny)){const e=_n.create("invalid-gtag-resource",{gtagURL:t});return hn.warn(e.message),""}return t}function vS(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function s4(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function o4(t,e){const n=s4("firebase-js-sdk-policy",{createScriptURL:i4}),r=document.createElement("script"),i=`${Ny}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function a4(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function l4(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await vS(n)).find(u=>u.measurementId===i);l&&await e[l.appId]}}catch(a){hn.error(a)}t("config",i,s)}async function u4(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await vS(n);for(const l of o){const u=a.find(h=>h.measurementId===l),c=u&&e[u.appId];if(c)s.push(c);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){hn.error(s)}}function c4(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await u4(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await l4(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,u]=o;t("get",a,l,u)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){hn.error(a)}}return i}function h4(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=c4(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function f4(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Ny)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4=30,p4=1e3;class g4{constructor(e={},n=p4){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const _S=new g4;function m4(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function y4(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:m4(r)},s=n4.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw _n.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function v4(t,e=_S,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw _n.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw _n.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new w4;return setTimeout(async()=>{a.abort()},t4),bS({appId:r,apiKey:i,measurementId:s},o,a,e)}async function bS(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=_S){var s;const{appId:o,measurementId:a}=t;try{await _4(r,e)}catch(l){if(a)return hn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await y4(t);return i.deleteThrottleMetadata(o),l}catch(l){const u=l;if(!b4(u)){if(i.deleteThrottleMetadata(o),a)return hn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw l}const c=Number((s=u==null?void 0:u.customData)===null||s===void 0?void 0:s.httpStatus)===503?u_(n,i.intervalMillis,d4):u_(n,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+c,backoffCount:n+1};return i.setThrottleMetadata(o,h),hn.debug(`Calling attemptFetch again in ${c} millis`),bS(t,h,r,i)}}function _4(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(_n.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function b4(t){if(!(t instanceof Yn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class w4{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function x4(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E4(){if(GE())try{await YE()}catch(t){return hn.warn(_n.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return hn.warn(_n.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function T4(t,e,n,r,i,s,o){var a;const l=v4(t);l.then(d=>{n[d.measurementId]=d.appId,t.options.measurementId&&d.measurementId!==t.options.measurementId&&hn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${d.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(d=>hn.error(d)),e.push(l);const u=E4().then(d=>{if(d)return r.getId()}),[c,h]=await Promise.all([l,u]);f4(s)||o4(s,c.measurementId),i("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[e4]="firebase",f.update=!0,h!=null&&(f[ZL]=h),i("config",c.measurementId,f),c.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e){this.app=e}_delete(){return delete tl[this.app.options.appId],Promise.resolve()}}let tl={},wb=[];const xb={};let Dd="dataLayer",S4="gtag",Eb,wS,Tb=!1;function A4(){const t=[];if(KE()&&t.push("This is a browser extension environment."),JP()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=_n.create("invalid-analytics-context",{errorInfo:e});hn.warn(n.message)}}function I4(t,e,n){A4();const r=t.options.appId;if(!r)throw _n.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)hn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw _n.create("no-api-key");if(tl[r]!=null)throw _n.create("already-exists",{id:r});if(!Tb){a4(Dd);const{wrappedGtag:s,gtagCore:o}=h4(tl,wb,xb,Dd,S4);wS=s,Eb=o,Tb=!0}return tl[r]=T4(t,wb,xb,e,Eb,Dd,n),new k4(t)}function P4(t=Lm()){t=Gt(t);const e=Ps(t,wh);return e.isInitialized()?e.getImmediate():O4(t)}function O4(t,e={}){const n=Ps(t,wh);if(n.isInitialized()){const i=n.getImmediate();if(Tl(e,n.getOptions()))return i;throw _n.create("already-initialized")}return n.initialize({options:e})}function C4(t,e,n,r){t=Gt(t),x4(wS,tl[t.app.options.appId],e,n,r).catch(i=>hn.error(i))}const kb="@firebase/analytics",Sb="0.10.8";function R4(){dr(new Kn(wh,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return I4(r,i,n)},"PUBLIC")),dr(new Kn("analytics-internal",t,"PRIVATE")),On(kb,Sb),On(kb,Sb,"esm2017");function t(e){try{const n=e.getProvider(wh).getImmediate();return{logEvent:(r,i,s)=>C4(n,r,i,s)}}catch(n){throw _n.create("interop-component-reg-failed",{reason:n})}}}R4();const N4={apiKey:"AIzaSyCbV3H_HhwK39sgj4A8UghvgK1W1TY1bpw",authDomain:"sadhana-prasad.firebaseapp.com",projectId:"sadhana-prasad",storageBucket:"sadhana-prasad.appspot.com",messagingSenderId:"654502924214",appId:"1:654502924214:web:ba5a346ce6b75ab07abb17",measurementId:"G-HR010HP0RC"},Dy=ZE(N4);P4(Dy);const Md=mN(Dy),D4=new kr,yt=zk(Dy),xS=oe.createContext(void 0),M4=({children:t})=>{const[e,n]=oe.useState(null),[r,i]=oe.useState(!0);oe.useEffect(()=>{const a=iR(Md,l=>{n(l),i(!1)});return()=>a()},[]);const s=async()=>{await kR(Md,D4)},o=async()=>{await sR(Md)};return D.jsx(xS.Provider,{value:{user:e,loading:r,signInWithGoogle:s,signOutUser:o},children:t})},zo=()=>{const t=oe.useContext(xS);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},L4=()=>{const[t,e]=oe.useState(()=>window.matchMedia("(prefers-color-scheme: dark)").matches);return oe.useEffect(()=>{t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]),D.jsx("button",{"aria-label":"Toggle dark mode",className:"rounded-full p-2 bg-sky-300 dark:bg-gray-700 hover:bg-sky-400 dark:hover:bg-gray-600 transition",onClick:()=>e(n=>!n),children:t?"🌙":"☀️"})},j4=()=>{const{user:t,signInWithGoogle:e,signOutUser:n}=zo();return D.jsxs("nav",{className:"w-full flex items-center justify-between px-4 py-2 bg-sky-200 dark:bg-gray-800 shadow",children:[D.jsx("div",{className:"flex items-center gap-2",children:D.jsx("span",{className:"text-2xl font-bold text-sky-700 dark:text-sky-200",children:"🌟 SADHANA"})}),D.jsxs("div",{className:"flex items-center gap-4",children:[D.jsx(L4,{}),t?D.jsxs(D.Fragment,{children:[D.jsx("span",{className:"text-sky-900 dark:text-sky-100 font-medium",children:t.displayName}),D.jsx("button",{className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded transition",onClick:n,children:"Sign Out"})]}):D.jsx("button",{className:"bg-sky-500 hover:bg-sky-600 text-white px-3 py-1 rounded transition",onClick:e,children:"Sign In with Google"})]})]})},V4=({children:t})=>D.jsxs("div",{className:"min-h-screen flex flex-col bg-sky-50 dark:bg-gray-900 transition-colors",children:[D.jsx(j4,{}),D.jsx("main",{className:"flex-1 flex flex-col items-center justify-center p-4",children:t})]}),ES="http://www.w3.org/2000/svg";class F4{constructor(e){this.seed=e}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}function Ln(t,e,n,r,i){return{type:"path",ops:xh(t,e,n,r,i)}}function TS(t,e,n){const r=(t||[]).length;if(r>2){const i=[];for(let s=0;s<r-1;s++)i.push(...xh(t[s][0],t[s][1],t[s+1][0],t[s+1][1],n));return e&&i.push(...xh(t[r-1][0],t[r-1][1],t[0][0],t[0][1],n)),{type:"path",ops:i}}return r===2?Ln(t[0][0],t[0][1],t[1][0],t[1][1],n):{type:"path",ops:[]}}function B4(t,e,n,r,i){return function(s,o){return TS(s,!0,o)}([[t,e],[t+n,e],[t+n,e+r],[t,e+r]],i)}function Ab(t,e,n,r,i){return function(s,o,a,l){const[u,c]=Ob(l.increment,s,o,l.rx,l.ry,1,l.increment*vg(.1,vg(.4,1,a),a),a);let h=Pb(u,null,a);if(!a.disableMultiStroke){const[f]=Ob(l.increment,s,o,l.rx,l.ry,1.5,0,a),d=Pb(f,null,a);h=h.concat(d)}return{estimatedPoints:c,opset:{type:"path",ops:h}}}(t,e,i,function(s,o,a){const l=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(s/2,2)+Math.pow(o/2,2))/2)),u=Math.max(a.curveStepCount,a.curveStepCount/Math.sqrt(200)*l),c=2*Math.PI/u;let h=Math.abs(s/2),f=Math.abs(o/2);const d=1-a.curveFitting;return h+=bt(h*d,a),f+=bt(f*d,a),{increment:c,rx:h,ry:f}}(n,r,i)).opset}function kS(t){return t.randomizer||(t.randomizer=new F4(t.seed||0)),t.randomizer.next()}function vg(t,e,n,r=1){return n.roughness*r*(kS(n)*(e-t)+t)}function bt(t,e,n=1){return vg(-t,t,e,n)}function xh(t,e,n,r,i,s=!1){const o=s?i.disableMultiStrokeFill:i.disableMultiStroke,a=Ib(t,e,n,r,i,!0,!1);if(o)return a;const l=Ib(t,e,n,r,i,!0,!0);return a.concat(l)}function Ib(t,e,n,r,i,s,o){const a=Math.pow(t-n,2)+Math.pow(e-r,2),l=Math.sqrt(a);let u=1;u=l<200?1:l>500?.4:-.0016668*l+1.233334;let c=i.maxRandomnessOffset||0;c*c*100>a&&(c=l/10);const h=c/2,f=.2+.2*kS(i);let d=i.bowing*i.maxRandomnessOffset*(r-e)/200,y=i.bowing*i.maxRandomnessOffset*(t-n)/200;d=bt(d,i,u),y=bt(y,i,u);const v=[],_=()=>bt(h,i,u),g=()=>bt(c,i,u);return o?v.push({op:"move",data:[t+_(),e+_()]}):v.push({op:"move",data:[t+bt(c,i,u),e+bt(c,i,u)]}),o?v.push({op:"bcurveTo",data:[d+t+(n-t)*f+_(),y+e+(r-e)*f+_(),d+t+2*(n-t)*f+_(),y+e+2*(r-e)*f+_(),n+_(),r+_()]}):v.push({op:"bcurveTo",data:[d+t+(n-t)*f+g(),y+e+(r-e)*f+g(),d+t+2*(n-t)*f+g(),y+e+2*(r-e)*f+g(),n+g(),r+g()]}),v}function Pb(t,e,n){const r=t.length,i=[];if(r>3){const s=[],o=1-n.curveTightness;i.push({op:"move",data:[t[1][0],t[1][1]]});for(let a=1;a+2<r;a++){const l=t[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*t[a+1][0]-o*t[a-1][0])/6,l[1]+(o*t[a+1][1]-o*t[a-1][1])/6],s[2]=[t[a+1][0]+(o*t[a][0]-o*t[a+2][0])/6,t[a+1][1]+(o*t[a][1]-o*t[a+2][1])/6],s[3]=[t[a+1][0],t[a+1][1]],i.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}}else r===3?(i.push({op:"move",data:[t[1][0],t[1][1]]}),i.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):r===2&&i.push(...xh(t[0][0],t[0][1],t[1][0],t[1][1],n));return i}function Ob(t,e,n,r,i,s,o,a){const l=[],u=[],c=bt(.5,a)-Math.PI/2;u.push([bt(s,a)+e+.9*r*Math.cos(c-t),bt(s,a)+n+.9*i*Math.sin(c-t)]);for(let h=c;h<2*Math.PI+c-.01;h+=t){const f=[bt(s,a)+e+r*Math.cos(h),bt(s,a)+n+i*Math.sin(h)];l.push(f),u.push(f)}return u.push([bt(s,a)+e+r*Math.cos(c+2*Math.PI+.5*o),bt(s,a)+n+i*Math.sin(c+2*Math.PI+.5*o)]),u.push([bt(s,a)+e+.98*r*Math.cos(c+o),bt(s,a)+n+.98*i*Math.sin(c+o)]),u.push([bt(s,a)+e+.9*r*Math.cos(c+.5*o),bt(s,a)+n+.9*i*Math.sin(c+.5*o)]),[u,l]}function Ld(t,e){return{maxRandomnessOffset:2,roughness:t==="highlight"?3:1.5,bowing:1,stroke:"#000",strokeWidth:1.5,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,combineNestedSvgPaths:!1,disableMultiStroke:t!=="double",disableMultiStrokeFill:!1,seed:e}}function z4(t,e,n,r,i,s){const o=[];let a=n.strokeWidth||2;const l=function(d){const y=d.padding;if(y||y===0){if(typeof y=="number")return[y,y,y,y];if(Array.isArray(y)){const v=y;if(v.length)switch(v.length){case 4:return[...v];case 1:return[v[0],v[0],v[0],v[0]];case 2:return[...v,...v];case 3:return[...v,v[1]];default:return[v[0],v[1],v[2],v[3]]}}}return[5,5,5,5]}(n),u=n.animate===void 0||!!n.animate,c=n.iterations||2,h=n.rtl?1:0,f=Ld("single",s);switch(n.type){case"underline":{const d=e.y+e.h+l[2];for(let y=h;y<c+h;y++)y%2?o.push(Ln(e.x+e.w,d,e.x,d,f)):o.push(Ln(e.x,d,e.x+e.w,d,f));break}case"strike-through":{const d=e.y+e.h/2;for(let y=h;y<c+h;y++)y%2?o.push(Ln(e.x+e.w,d,e.x,d,f)):o.push(Ln(e.x,d,e.x+e.w,d,f));break}case"box":{const d=e.x-l[3],y=e.y-l[0],v=e.w+(l[1]+l[3]),_=e.h+(l[0]+l[2]);for(let g=0;g<c;g++)o.push(B4(d,y,v,_,f));break}case"bracket":{const d=Array.isArray(n.brackets)?n.brackets:n.brackets?[n.brackets]:["right"],y=e.x-2*l[3],v=e.x+e.w+2*l[1],_=e.y-2*l[0],g=e.y+e.h+2*l[2];for(const m of d){let w;switch(m){case"bottom":w=[[y,e.y+e.h],[y,g],[v,g],[v,e.y+e.h]];break;case"top":w=[[y,e.y],[y,_],[v,_],[v,e.y]];break;case"left":w=[[e.x,_],[y,_],[y,g],[e.x,g]];break;case"right":w=[[e.x+e.w,_],[v,_],[v,g],[e.x+e.w,g]]}w&&o.push(TS(w,!1,f))}break}case"crossed-off":{const d=e.x,y=e.y,v=d+e.w,_=y+e.h;for(let g=h;g<c+h;g++)g%2?o.push(Ln(v,_,d,y,f)):o.push(Ln(d,y,v,_,f));for(let g=h;g<c+h;g++)g%2?o.push(Ln(d,_,v,y,f)):o.push(Ln(v,y,d,_,f));break}case"circle":{const d=Ld("double",s),y=e.w+(l[1]+l[3]),v=e.h+(l[0]+l[2]),_=e.x-l[3]+y/2,g=e.y-l[0]+v/2,m=Math.floor(c/2),w=c-2*m;for(let b=0;b<m;b++)o.push(Ab(_,g,y,v,d));for(let b=0;b<w;b++)o.push(Ab(_,g,y,v,f));break}case"highlight":{const d=Ld("highlight",s);a=.95*e.h;const y=e.y+e.h/2;for(let v=h;v<c+h;v++)v%2?o.push(Ln(e.x+e.w,y,e.x,y,d)):o.push(Ln(e.x,y,e.x+e.w,y,d));break}}if(o.length){const d=function(m){const w=[];for(const b of m){let T="";for(const C of b.ops){const k=C.data;switch(C.op){case"move":T.trim()&&w.push(T.trim()),T=`M${k[0]} ${k[1]} `;break;case"bcurveTo":T+=`C${k[0]} ${k[1]}, ${k[2]} ${k[3]}, ${k[4]} ${k[5]} `;break;case"lineTo":T+=`L${k[0]} ${k[1]} `}}T.trim()&&w.push(T.trim())}return w}(o),y=[],v=[];let _=0;const g=(m,w,b)=>m.setAttribute(w,b);for(const m of d){const w=document.createElementNS(ES,"path");if(g(w,"d",m),g(w,"fill","none"),g(w,"stroke",n.color||"currentColor"),g(w,"stroke-width",""+a),u){const b=w.getTotalLength();y.push(b),_+=b}t.appendChild(w),v.push(w)}if(u){let m=0;for(let w=0;w<v.length;w++){const b=v[w],T=y[w],C=_?i*(T/_):0,k=r+m,x=b.style;x.strokeDashoffset=""+T,x.strokeDasharray=""+T,x.animation=`rough-notation-dash ${C}ms ease-out ${k}ms forwards`,m+=C}}}}class U4{constructor(e,n){this._state="unattached",this._resizing=!1,this._seed=Math.floor(Math.random()*2**31),this._lastSizes=[],this._animationDelay=0,this._resizeListener=()=>{this._resizing||(this._resizing=!0,setTimeout(()=>{this._resizing=!1,this._state==="showing"&&this.haveRectsChanged()&&this.show()},400))},this._e=e,this._config=JSON.parse(JSON.stringify(n)),this.attach()}get animate(){return this._config.animate}set animate(e){this._config.animate=e}get animationDuration(){return this._config.animationDuration}set animationDuration(e){this._config.animationDuration=e}get iterations(){return this._config.iterations}set iterations(e){this._config.iterations=e}get color(){return this._config.color}set color(e){this._config.color!==e&&(this._config.color=e,this.refresh())}get strokeWidth(){return this._config.strokeWidth}set strokeWidth(e){this._config.strokeWidth!==e&&(this._config.strokeWidth=e,this.refresh())}get padding(){return this._config.padding}set padding(e){this._config.padding!==e&&(this._config.padding=e,this.refresh())}attach(){if(this._state==="unattached"&&this._e.parentElement){(function(){if(!window.__rno_kf_s){const i=window.__rno_kf_s=document.createElement("style");i.textContent="@keyframes rough-notation-dash { to { stroke-dashoffset: 0; } }",document.head.appendChild(i)}})();const e=this._svg=document.createElementNS(ES,"svg");e.setAttribute("class","rough-annotation");const n=e.style;n.position="absolute",n.top="0",n.left="0",n.overflow="visible",n.pointerEvents="none",n.width="100px",n.height="100px";const r=this._config.type==="highlight";if(this._e.insertAdjacentElement(r?"beforebegin":"afterend",e),this._state="not-showing",r){const i=window.getComputedStyle(this._e).position;(!i||i==="static")&&(this._e.style.position="relative")}this.attachListeners()}}detachListeners(){window.removeEventListener("resize",this._resizeListener),this._ro&&this._ro.unobserve(this._e)}attachListeners(){this.detachListeners(),window.addEventListener("resize",this._resizeListener,{passive:!0}),!this._ro&&"ResizeObserver"in window&&(this._ro=new window.ResizeObserver(e=>{for(const n of e)n.contentRect&&this._resizeListener()})),this._ro&&this._ro.observe(this._e)}haveRectsChanged(){if(this._lastSizes.length){const e=this.rects();if(e.length!==this._lastSizes.length)return!0;for(let n=0;n<e.length;n++)if(!this.isSameRect(e[n],this._lastSizes[n]))return!0}return!1}isSameRect(e,n){const r=(i,s)=>Math.round(i)===Math.round(s);return r(e.x,n.x)&&r(e.y,n.y)&&r(e.w,n.w)&&r(e.h,n.h)}isShowing(){return this._state!=="not-showing"}refresh(){this.isShowing()&&!this.pendingRefresh&&(this.pendingRefresh=Promise.resolve().then(()=>{this.isShowing()&&this.show(),delete this.pendingRefresh}))}show(){switch(this._state){case"unattached":break;case"showing":this.hide(),this._svg&&this.render(this._svg,!0);break;case"not-showing":this.attach(),this._svg&&this.render(this._svg,!1)}}hide(){if(this._svg)for(;this._svg.lastChild;)this._svg.removeChild(this._svg.lastChild);this._state="not-showing"}remove(){this._svg&&this._svg.parentElement&&this._svg.parentElement.removeChild(this._svg),this._svg=void 0,this._state="unattached",this.detachListeners()}render(e,n){let r=this._config;n&&(r=JSON.parse(JSON.stringify(this._config)),r.animate=!1);const i=this.rects();let s=0;i.forEach(l=>s+=l.w);const o=r.animationDuration||800;let a=0;for(let l=0;l<i.length;l++){const u=o*(i[l].w/s);z4(e,i[l],r,a+this._animationDelay,u,this._seed),a+=u}this._lastSizes=i,this._state="showing"}rects(){const e=[];if(this._svg)if(this._config.multiline){const n=this._e.getClientRects();for(let r=0;r<n.length;r++)e.push(this.svgRect(this._svg,n[r]))}else e.push(this.svgRect(this._svg,this._e.getBoundingClientRect()));return e}svgRect(e,n){const r=e.getBoundingClientRect(),i=n;return{x:(i.x||i.left)-(r.x||r.left),y:(i.y||i.top)-(r.y||r.top),w:i.width,h:i.height}}}function $4(t,e){return new U4(t,e)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _g=function(){return _g=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_g.apply(this,arguments)};function q4(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}var H4=oe.createContext(null),W4=oe.createContext(null),K4=function(t,e){var n=oe.useContext(H4),r=oe.useContext(W4),i=oe.useRef({annotation:t,context:n,dispatch:r,order:e});oe.useEffect(function(){var s=i.current,o=s.annotation,a=s.context,l=s.dispatch,u=s.order;if(a&&l)return l({type:"ADD",payload:{annotation:o,order:u}})},[])},Eh=function(t){var e=t.animate,n=e===void 0?!0:e,r=t.animationDelay,i=r===void 0?0:r,s=t.animationDuration,o=s===void 0?800:s,a=t.brackets,l=t.children,u=t.color,c=t.customElement,h=c===void 0?"span":c,f=t.getAnnotationObject,d=t.iterations,y=d===void 0?2:d,v=t.multiline,_=v===void 0?!1:v,g=t.order,m=t.padding,w=m===void 0?5:m,b=t.show,T=b===void 0?!1:b,C=t.strokeWidth,k=C===void 0?1:C,x=t.type,P=x===void 0?"underline":x,S=q4(t,["animate","animationDelay","animationDuration","brackets","children","color","customElement","getAnnotationObject","iterations","multiline","order","padding","show","strokeWidth","type"]),E=oe.useRef(null),A=oe.useRef(),O=oe.useRef({playing:!1,timeout:null}),M=oe.useRef({animate:n,animationDuration:o,brackets:a,color:u,getAnnotationObject:f,iterations:y,multiline:_,padding:w,strokeWidth:k,type:P}),F=oe.useCallback(function(){O.current.timeout||(O.current.timeout=window.setTimeout(function(){var W,U;O.current.playing=!0,(U=(W=A.current)===null||W===void 0?void 0:W.show)===null||U===void 0||U.call(W),window.setTimeout(function(){O.current.playing=!1,O.current.timeout=null},o)},i))},[i,o]),$=oe.useCallback(function(){var W,U;(U=(W=A.current)===null||W===void 0?void 0:W.hide)===null||U===void 0||U.call(W),O.current.playing=!1,O.current.timeout&&(clearTimeout(O.current.timeout),O.current.timeout=null)},[]),q=oe.useCallback(function(){return A.current},[A]);return K4({getAnnotation:q,show:F,hide:$},typeof g=="string"?parseInt(g):g),oe.useEffect(function(){var W=M.current,U=W.getAnnotationObject;return A.current=$4(E.current,W),U&&U(A.current),function(){var B,N;(N=(B=A.current)===null||B===void 0?void 0:B.remove)===null||N===void 0||N.call(B)}},[]),oe.useEffect(function(){T?F():$()},[A,T,i,O,o,F,$]),oe.useEffect(function(){A.current&&(A.current.animate=n,A.current.animationDuration=o,A.current.color=u,A.current.strokeWidth=k,A.current.padding=w)},[A,n,o,u,k,w]),et.createElement(h,_g({ref:E},S),l)},wc={linear:function(t,e,n,r){var i=n-e;return i*t/r+e},easeInQuad:function(t,e,n,r){var i=n-e;return i*(t/=r)*t+e},easeOutQuad:function(t,e,n,r){var i=n-e;return-i*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t+e},easeOutCubic:function(t,e,n,r){var i=n-e;return i*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,n,r){var i=n-e;return-i*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,n,r){var i=n-e;return i*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,r){var i=n-e;return-i*Math.cos(t/r*(Math.PI/2))+i+e},easeOutSine:function(t,e,n,r){var i=n-e;return i*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,n,r){var i=n-e;return-i/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,n,r){var i=n-e;return t==0?e:i*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,n,r){var i=n-e;return t==r?e+i:i*(-Math.pow(2,-10*t/r)+1)+e},easeInOutExpo:function(t,e,n,r){var i=n-e;return t===0?e:t===r?e+i:(t/=r/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,n,r){var i=n-e;return-i*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,n,r){var i=n-e;return i*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,r){var i=n-e,s,o,a;return a=1.70158,o=0,s=i,t===0?e:(t/=r)===1?e+i:(o||(o=r*.3),s<Math.abs(i)?(s=i,a=o/4):a=o/(2*Math.PI)*Math.asin(i/s),-(s*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o))+e)},easeOutElastic:function(t,e,n,r){var i=n-e,s,o,a;return a=1.70158,o=0,s=i,t===0?e:(t/=r)===1?e+i:(o||(o=r*.3),s<Math.abs(i)?(s=i,a=o/4):a=o/(2*Math.PI)*Math.asin(i/s),s*Math.pow(2,-10*t)*Math.sin((t*r-a)*(2*Math.PI)/o)+i+e)},easeInOutElastic:function(t,e,n,r){var i=n-e,s,o,a;return a=1.70158,o=0,s=i,t===0?e:(t/=r/2)===2?e+i:(o||(o=r*(.3*1.5)),s<Math.abs(i)?(s=i,a=o/4):a=o/(2*Math.PI)*Math.asin(i/s),t<1?-.5*(s*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o))+e:s*Math.pow(2,-10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o)*.5+i+e)},easeInBack:function(t,e,n,r,i){var s=n-e;return i===void 0&&(i=1.70158),s*(t/=r)*t*((i+1)*t-i)+e},easeOutBack:function(t,e,n,r,i){var s=n-e;return i===void 0&&(i=1.70158),s*((t=t/r-1)*t*((i+1)*t+i)+1)+e},easeInOutBack:function(t,e,n,r,i){var s=n-e;return i===void 0&&(i=1.70158),(t/=r/2)<1?s/2*(t*t*(((i*=1.525)+1)*t-i))+e:s/2*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)+e},easeInBounce:function(t,e,n,r){var i=n-e,s;return s=wc.easeOutBounce(r-t,0,i,r),i-s+e},easeOutBounce:function(t,e,n,r){var i=n-e;return(t/=r)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,n,r){var i=n-e,s;return t<r/2?(s=wc.easeInBounce(t*2,0,i,r),s*.5+e):(s=wc.easeOutBounce(t*2-r,0,i,r),s*.5+i*.5+e)}},G4=wc;function Y4(t){return t*Math.PI/180}function pn(t,e){return t+Math.random()*(e-t)}function Q4(t,e){return Math.floor(t+Math.random()*(e-t+1))}var nl;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(nl||(nl={}));var ti;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(ti||(ti={}));const X4=1e3/60;class J4{constructor(e,n,r,i){this.getOptions=n;const{colors:s,initialVelocityX:o,initialVelocityY:a}=this.getOptions();this.context=e,this.x=r,this.y=i,this.w=pn(5,20),this.h=pn(5,20),this.radius=pn(5,10),this.vx=typeof o=="number"?pn(-o,o):pn(o.min,o.max),this.vy=typeof a=="number"?pn(-a,0):pn(a.min,a.max),this.shape=Q4(0,2),this.angle=Y4(pn(0,360)),this.angularSpin=pn(-.2,.2),this.color=s[Math.floor(Math.random()*s.length)],this.rotateY=pn(0,1),this.rotationDirection=pn(0,1)?ti.Positive:ti.Negative}update(e){const{gravity:n,wind:r,friction:i,opacity:s,drawShape:o}=this.getOptions(),a=e/X4;this.x+=this.vx*a,this.y+=this.vy*a,this.vy+=n*a,this.vx+=r*a,this.vx*=i**a,this.vy*=i**a,this.rotateY>=1&&this.rotationDirection===ti.Positive?this.rotationDirection=ti.Negative:this.rotateY<=-1&&this.rotationDirection===ti.Negative&&(this.rotationDirection=ti.Positive);const l=.1*this.rotationDirection*a;if(this.rotateY+=l,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=s,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case nl.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case nl.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case nl.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class Z4{constructor(e,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=i=>{this.particles.splice(i,1)},this.getParticle=()=>{const i=pn(this.x,this.w+this.x),s=pn(this.y,this.h+this.y);return new J4(this.context,this.getOptions,i,s)},this.animate=i=>{const{canvas:s,context:o,particlesGenerated:a,lastNumberOfPieces:l}=this,{run:u,recycle:c,numberOfPieces:h,debug:f,tweenFunction:d,tweenDuration:y}=this.getOptions();if(!u)return!1;const v=this.particles.length,_=c?v:a;if(_<h){l!==h&&(this.tweenProgress=0,this.tweenFrom=_,this.lastNumberOfPieces=h),this.tweenProgress=Math.min(y,Math.max(0,this.tweenProgress+i));const g=d(this.tweenProgress,this.tweenFrom,h,y),m=Math.round(g-_);for(let w=0;w<m;w++)this.particles.push(this.getParticle());this.particlesGenerated+=m}f&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${v}`,s.width-10,s.height-20));for(let g=this.particles.length-1;g>=0;g--){const m=this.particles[g];m.update(i),(m.y>s.height||m.y<-100||m.x>s.width+100||m.x<-100)&&(c&&_<=h?this.particles[g]=this.getParticle():this.removeParticleAt(g))}return v>0||_<h},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=n}}const My={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:G4.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class ej{constructor(e,n){this.lastFrameTime=0,this.setOptionsWithDefaults=i=>{const s={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...s,...My,...i},Object.assign(this,i.confettiSource)},this.update=(i=0)=>{const{options:{run:s,onConfettiComplete:o,frameRate:a},canvas:l,context:u}=this,c=Math.min(i-this.lastFrameTime,50);if(a&&c<1e3/a){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=i-(a?c%a:0),s&&(u.fillStyle="white",u.clearRect(0,0,l.width,l.height)),this.generator.animate(c)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new Z4(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(e){var i,s;const n=(i=this._options)==null?void 0:i.run,r=(s=this._options)==null?void 0:s.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&n===!1&&this.update()}}const tj=et.createRef();class Ly extends et.Component{constructor(e){super(e),this.canvas=et.createRef(),this.canvas=e.canvasRef||tj}componentDidMount(){if(this.canvas.current){const e=jd(this.props)[0];this.confetti=new ej(this.canvas.current,e)}}componentDidUpdate(){const e=jd(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,n]=jd(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return D.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...n,style:r})}}Ly.defaultProps={...My};Ly.displayName="ReactConfetti";function jd(t){const e={},n={},r={},i=[...Object.keys(My),"confettiSource","drawShape","onConfettiComplete","frameRate"],s=["canvasRef"];for(const o in t){const a=t[o];i.includes(o)?e[o]=a:s.includes(o)?s[o]=a:r[o]=a}return[e,r,n]}const nj=et.forwardRef((t,e)=>D.jsx(Ly,{canvasRef:e,...t}));async function rj(){if(!("Notification"in window))return"denied";let t=Notification.permission;return t==="default"&&(t=await Notification.requestPermission()),t}function SS(t,e){if(!("Notification"in window)||Notification.permission!=="granted")return;const n=[`Time for "${t}"!`,`Don't forget: ${t}!`,`✨ ${t} Reminder! ✨`,`Let's do: ${t}`,`Sadhana time: ${t}`],r=["Keep your streak alive! 💪","You got this! 🌟","Notebook says: It’s habit time!","A little progress every day!","Your future self thanks you!"],i=n[Math.floor(Math.random()*n.length)],s=r[Math.floor(Math.random()*r.length)],o="/icon-192.png";if(new Notification(i,{body:s,icon:o,badge:o,tag:`habit-${t}`}),e!=null&&e.sound)try{new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg").play()}catch{}e!=null&&e.vibrate&&navigator.vibrate&&navigator.vibrate([100,30,100])}function ij(){SS("Test Habit",{sound:!0,vibrate:!0})}function Cb(t){localStorage.setItem("habitReminders",JSON.stringify(t))}function xc(){try{const t=localStorage.getItem("habitReminders");return t?JSON.parse(t):[]}catch{return[]}}function sj(){if(!("Notification"in window)||Notification.permission!=="granted")return;const t=xc(),e=new Date;t.forEach(n=>{const[r,i]=n.time.split(":").map(Number),s=new Date;if(s.setHours(r,i,0,0),s<e)return;const o=s.getTime()-e.getTime();setTimeout(()=>SS(n.habitName,{sound:!0,vibrate:!0}),o)})}function oj(t){let e=null;return window.addEventListener("beforeinstallprompt",n=>{n.preventDefault(),e=n,t(!0)}),async()=>{if(e&&"prompt"in e){e.prompt();const{outcome:n}=await e.userChoice;return t(!1),e=null,n}return null}}const aj=({appDate:t})=>{const e=n$(),{user:n}=zo(),[r,i]=oe.useState(""),[s,o]=oe.useState(null),[a,l]=oe.useState(!0),[u,c]=oe.useState(null),[h,f]=oe.useState("07:00"),[d,y]=oe.useState(!0),[v,_]=oe.useState(!0),[g,m]=oe.useState(!1),[w,b]=oe.useState(null),[T,C]=oe.useState([]),[k,x]=oe.useState(!1),[P,S]=oe.useState(null),E=e.habits,A=e.reminders,O=async()=>{if(r.trim()&&n){const se={id:Date.now(),name:r.trim(),doneToday:!1,streak:0,lastCompleted:null,history:[]};await Rr(Jt(yt,"users",n.uid,"habits",se.id.toString()),se),i("")}},M=async(se,ge)=>{const Q=E.find(ee=>ee.id===se);Q&&await j({...Q,name:ge})},F=async se=>{const ge=E.find(Q=>Q.id===se);ge&&window.confirm(`Are you sure you want to delete the habit "${ge.name}"?`)&&await H(se)},$=async se=>{const ge=X(),Q=E.find(ee=>ee.id===se);if(Q&&!Q.doneToday){let ee=Q.streak;Q.lastCompleted===J()?ee+=1:ee=1,await j({...Q,doneToday:!0,streak:ee,lastCompleted:ge,history:[...Q.history,ge]})}},q=E.filter(se=>se.doneToday).length,W=E.length>0?Math.round(q/E.length*100):0,[U,B]=oe.useState("all"),N=E.filter(se=>U==="completed"?se.doneToday:U==="incomplete"?!se.doneToday:!0);oe.useEffect(()=>{if(typeof window>"u"||Notification.permission==="denied")return;Notification.permission==="default"&&Notification.requestPermission();const se=new Date,ge=[];return A.forEach(Q=>{const ee=new Date;ee.setHours(Q.hour,Q.minute,0,0);let le=ee.getTime()-se.getTime();le<0&&(le+=24*60*60*1e3),ge.push(setTimeout(()=>{if(E.some(he=>!he.doneToday)){const he=new Notification("SADHANA Reminder",{body:Q.message||"You have unfinished habits today! Keep your streak going! 🌟"});Q.sound&&new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg").play(),Q.vibrate&&navigator.vibrate&&navigator.vibrate([200,100,200]),he.onclick=()=>{window.confirm("Snooze this reminder for 10 minutes?")&&setTimeout(()=>{new Notification("SADHANA Snoozed Reminder",{body:Q.message||"You have unfinished habits today! (Snoozed)"}),Q.sound&&new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg").play(),Q.vibrate&&navigator.vibrate&&navigator.vibrate([200,100,200])},10*60*1e3)}}},le))}),()=>ge.forEach(Q=>clearTimeout(Q))},[E,A]);const V=["Small steps every day lead to big results.","Discipline is the bridge between goals and accomplishment.","Consistency is more important than perfection.","You don’t have to be extreme, just consistent.","Success is the sum of small efforts repeated day in and day out.","The secret of your future is hidden in your daily routine.","Motivation gets you going, but discipline keeps you growing."],z=new Date().getDate()%V.length,G=V[z],K=E.length>0&&E.every(se=>se.doneToday);oe.useEffect(()=>{if(!n)return;const se=Ao(yt,"users",n.uid,"habits"),ge=ws(se,()=>{}),Q=Ao(yt,"users",n.uid,"reminders"),ee=ws(Q,()=>{});return()=>{ge(),ee()}},[n]);const j=async se=>{if(!n)return;const ge=Jt(yt,"users",n.uid,"habits",se.id.toString());await Rr(ge,se)},H=async se=>{if(!n)return;const ge=Jt(yt,"users",n.uid,"habits",se.toString());await el(ge)};oe.useEffect(()=>{if(!n||E.length===0)return;const se=X();E.forEach(ge=>{ge.doneToday&&ge.lastCompleted!==se&&j({...ge,doneToday:!1})})},[E,n,t]);const X=et.useCallback(()=>t||new Date().toISOString().slice(0,10),[t]),J=et.useCallback(()=>{const se=t?new Date(t):new Date;return se.setDate(se.getDate()-1),se.toISOString().slice(0,10)},[t]),te={backgroundImage:"repeating-linear-gradient(0deg, var(--journal-bg, #fdf6e3) 0px, var(--journal-bg, #fdf6e3) 31px, var(--journal-line, #e0d7c3) 32px, var(--journal-bg, #fdf6e3) 33px)",backgroundColor:"var(--journal-bg, #fdf6e3)"},fe=["/SparkleImg/sparkle1.png","/SparkleImg/sparkle2.png","/SparkleImg/sparkle3.png","/SparkleImg/sparkle4.png","/SparkleImg/sparkle5.png"];function ve(se){return fe[se%fe.length]}oe.useEffect(()=>{localStorage.getItem("sadhana_onboarded")&&l(!1)},[]);const _e=()=>{l(!1),localStorage.setItem("sadhana_onboarded","1")};oe.useEffect(()=>{if(u){const ge=xc().find(Q=>Q.habitId===u.id);ge?(f(ge.time),y(!0),_(!0)):(f("07:00"),y(!0),_(!0))}},[u]);const Se=async()=>{if(!u)return;if(await rj()!=="granted"){b("Notifications are blocked. Please enable them in your browser settings.");return}b(null);const ge=xc().filter(Q=>Q.habitId!==u.id);ge.push({habitId:u.id,habitName:u.name,time:h}),Cb(ge),C(ge),m(!0),setTimeout(()=>m(!1),1200),c(null)},Ce=se=>{const ge=xc().filter(Q=>Q.habitId!==se);Cb(ge),C(ge)};return oe.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches)return;const se=oj(x);S(()=>se)},[]),D.jsxs("div",{className:"relative max-w-3xl mx-auto mt-8 p-4 md:p-10 overflow-hidden doodle-border",style:{...te,fontFamily:"Patrick Hand, Caveat, Gloria Hallelujah, cursive",position:"relative"},children:[D.jsx("style",{children:`
        :root {
          --journal-bg: #fdf6e3;
          --journal-line: #e0d7c3;
          --journal-hole-bg: #e0d7c3;
          --journal-hole-border: #b7a77a;
        }
        .dark :root, .dark body {
          --journal-bg: #23272e;
          --journal-line: #3b4252;
          --journal-hole-bg: #3b4252;
          --journal-hole-border: #6b7280;
        }
        @keyframes fade-in {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes fade-in-down {
          from { opacity: 0; transform: translateY(-24px); }
          to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fade-in-slow {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes pop-in {
          0% { transform: scale(0.7); opacity: 0; }
          80% { transform: scale(1.1); opacity: 1; }
          100% { transform: scale(1); }
        }
        @keyframes wiggle {
          0%, 100% { transform: rotate(-2deg); }
          50% { transform: rotate(2deg); }
        }
        @keyframes progress {
          from { width: 0; }
          to { width: var(--tw-progress, 100%); }
        }
        .animate-fade-in { animation: fade-in 0.7s ease; }
        .animate-fade-in-down { animation: fade-in-down 0.7s cubic-bezier(.4,2,.6,1); }
        .animate-fade-in-slow { animation: fade-in-slow 1.2s ease; }
        .animate-pop-in { animation: pop-in 0.5s cubic-bezier(.4,2,.6,1); }
        .animate-wiggle { animation: wiggle 1.2s infinite alternate; }
        .animate-progress { animation: progress 1.2s cubic-bezier(.4,2,.6,1); }
      `}),D.jsx("div",{className:"absolute left-0 top-8 flex flex-col gap-8 h-[90%] z-10",children:[...Array(6)].map((se,ge)=>D.jsx("span",{className:"w-4 h-4 rounded-full shadow-inner block ml-[-28px]",style:{background:"var(--journal-hole-bg, #e0d7c3)",border:"2px solid var(--journal-hole-border, #b7a77a)"}},ge))}),D.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4 animate-fade-in-down",children:[D.jsx("span",{className:"text-3xl md:text-4xl font-extrabold text-sky-700 dark:text-sky-300 tracking-tight drop-shadow-xl uppercase select-none flex items-center gap-2 font-hand animate-wiggle",children:D.jsx(Eh,{type:"underline",show:!0,color:"#f59e42",animationDuration:1200,padding:6,strokeWidth:3,children:D.jsx("span",{children:"📝 Your Habits"})})}),D.jsx("span",{className:"text-2xl md:text-3xl select-none animate-bounce",children:"🌱"})]}),D.jsx("div",{className:"mb-2 text-center text-xs text-gray-500 dark:text-gray-300 font-hand animate-fade-in",children:D.jsxs("span",{children:["Tip: Click a habit name to edit. Mark as done to keep your streak!"," ",D.jsx("span",{className:"ml-1",children:"✨"})]})}),D.jsx("div",{className:"mb-4 text-center italic text-sky-600 dark:text-sky-300 text-base font-hand animate-fade-in-slow",children:D.jsx(Eh,{type:"highlight",show:!0,color:"#fffbe6",animationDuration:900,padding:4,strokeWidth:2,children:G})}),K&&D.jsxs(D.Fragment,{children:[D.jsx(nj,{width:window.innerWidth,height:window.innerHeight,numberOfPieces:200,recycle:!1}),D.jsx("div",{className:"mb-4 flex justify-center animate-pop-in",children:D.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-green-400 text-white text-xs font-bold shadow font-hand animate-wiggle",children:"🌟 Perfect Day! All habits completed! 🌟"})})]}),D.jsxs("div",{className:"mb-6 animate-fade-in",children:[D.jsxs("div",{className:"flex justify-between items-center mb-1 font-hand",children:[D.jsx("span",{className:"text-base text-gray-700 dark:text-gray-200",children:"Progress"}),D.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-300",children:[W,"%"]})]}),D.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3 border-2 border-dashed border-sky-300 shadow-inner",style:{boxShadow:"2px 2px 0 #e0d7c3",position:"relative"},children:D.jsx("div",{className:"bg-sky-400 h-3 rounded-full transition-all font-hand animate-progress",style:{width:`${W}%`,position:"relative"},children:D.jsx("span",{className:"absolute right-0 -top-6 text-sky-500 text-lg animate-bounce",style:{display:W===100?"inline":"none"},children:"🎉"})})})]}),D.jsxs("div",{className:"flex flex-wrap justify-center gap-2 mb-6 font-hand animate-fade-in",children:[D.jsx("button",{className:`px-3 py-1 rounded-full border-2 border-dashed text-xs font-bold shadow transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-sky-400 font-hand ${U==="all"?"bg-sky-200 text-sky-900 border-sky-700 scale-110 ring-2 ring-sky-400":"bg-[#fffbe6] text-gray-900 border-sky-300 hover:bg-sky-100"}`,onClick:()=>B("all"),children:"All"}),D.jsx("button",{className:`px-3 py-1 rounded-full border-2 border-dashed text-xs font-bold shadow transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-green-400 font-hand ${U==="completed"?"bg-green-200 text-green-900 border-green-700 scale-110 ring-2 ring-green-400":"bg-[#fffbe6] text-gray-900 border-green-300 hover:bg-green-100"}`,onClick:()=>B("completed"),children:"Completed"}),D.jsx("button",{className:`px-3 py-1 rounded-full border-2 border-dashed text-xs font-bold shadow transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-red-400 font-hand ${U==="incomplete"?"bg-red-200 text-red-900 border-red-700 scale-110 ring-2 ring-red-400":"bg-[#fffbe6] text-gray-900 border-red-300 hover:bg-red-100"}`,onClick:()=>B("incomplete"),children:"Incomplete"})]}),D.jsxs("div",{className:"flex flex-col sm:flex-row mb-6 gap-2 font-hand animate-fade-in",children:[D.jsx("input",{className:"flex-1 rounded-l-xl px-3 py-2 border-2 border-dashed border-sky-400 bg-[#fffbe6] text-gray-900 font-hand focus:outline-none focus:ring-2 focus:ring-sky-400 transition min-w-0 shadow-md font-semibold",type:"text",placeholder:"Add a new habit...",value:r,onChange:se=>i(se.target.value),onKeyDown:se=>se.key==="Enter"&&O(),style:{boxShadow:"2px 2px 0 #e0d7c3"}}),D.jsx("button",{className:"rounded-r-xl bg-sky-400 hover:bg-sky-500 text-white px-4 py-2 font-bold w-full sm:w-auto shadow font-hand border-2 border-dashed border-sky-400",onClick:O,children:"➕ Add"})]}),D.jsxs("div",{className:"mb-6 animate-fade-in",children:[D.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[D.jsx("span",{className:"text-lg font-hand",children:"⏰ Reminders"}),D.jsx("span",{className:"text-xs text-gray-400 font-hand",children:"(tap ⏰ on a habit to add)"})]}),T.length===0?D.jsx("div",{className:"italic text-gray-400 font-hand text-sm",children:"No reminders set. Add one for a habit!"}):D.jsx("ul",{className:"space-y-2",children:T.map(se=>D.jsxs("li",{className:"flex items-center gap-2 bg-[#fffbe6] border-2 border-dashed border-yellow-300 rounded-xl px-3 py-2 font-hand shadow animate-pop-in",children:[D.jsx("span",{className:"text-lg",children:"⏰"}),D.jsxs("span",{className:"flex-1",children:[se.habitName," ",D.jsx("span",{className:"ml-2 text-xs text-gray-500",children:se.time})]}),D.jsx("button",{className:"text-red-400 hover:text-red-600 text-xl font-bold ml-2",title:"Delete reminder",onClick:()=>Ce(se.habitId),children:"×"})]},se.habitId))})]}),D.jsxs("ul",{className:"mb-8 animate-fade-in-slow",children:[N.length===0&&D.jsx("li",{className:"text-center text-gray-500 dark:text-gray-300 font-hand",children:D.jsxs("div",{className:"flex flex-col items-center",children:[D.jsx("img",{src:"https://raw.githubusercontent.com/stevenlei/handdrawn-icons/main/empty-box.svg",alt:"No habits",width:"80",height:"80",style:{opacity:.7}}),D.jsx("div",{className:"mt-2",children:"No habits to show. Add your first habit!"})]})}),N.map(se=>D.jsxs("li",{className:"flex flex-col md:flex-row items-stretch md:items-center justify-between py-3 border-b-2 border-dashed border-sky-100 last:border-b-0 gap-2 md:gap-0 font-hand bg-[#fffbe6] rounded-xl mb-2 shadow-md",style:{boxShadow:"2px 2px 0 #e0d7c3"},children:[D.jsxs("span",{className:se.doneToday?"line-through text-gray-400 dark:text-gray-400 font-hand":"text-gray-900 dark:text-gray-100 font-hand",children:[D.jsx("input",{type:"checkbox",className:"doodle-checkbox mr-2",checked:se.doneToday,onChange:()=>$(se.id),disabled:se.doneToday,"aria-label":"Mark as done"}),D.jsx("input",{className:"bg-transparent border-none outline-none font-semibold text-base w-auto max-w-xs dark:bg-transparent font-hand",value:se.name,onChange:ge=>M(se.id,ge.target.value),disabled:se.doneToday,"aria-label":"Edit habit name"}),D.jsxs("span",{className:"ml-2 text-xs text-sky-500 dark:text-sky-300 font-semibold font-hand doodle-wiggle",children:["🔥 Streak: ",se.streak]}),se.doneToday&&D.jsx("span",{className:"ml-2 animate-bounce",title:"Completed",children:D.jsx("img",{src:ve(se.id),alt:"Sparkle",width:"22",height:"22",style:{display:"inline"}})})]}),D.jsxs("div",{className:"flex flex-wrap gap-2 md:gap-2 items-center justify-end",children:[D.jsx("button",{className:`px-3 py-1 rounded-xl border-2 border-dashed font-bold transition-colors w-full md:w-auto font-hand shadow doodle-bounce ${se.doneToday?"bg-green-400 text-white cursor-not-allowed opacity-60 border-green-700":"bg-[#fffbe6] text-gray-900 border-sky-300 hover:bg-sky-100 border-sky-400"}`,onClick:()=>$(se.id),disabled:se.doneToday,children:se.doneToday?"✅ Done!":"Mark as Done"}),D.jsx("button",{className:"px-2 py-1 rounded-xl bg-red-400 hover:bg-red-500 text-white text-xs font-bold w-full md:w-auto font-hand border-2 border-dashed border-red-400 shadow doodle-bounce",onClick:()=>F(se.id),title:"Delete habit",children:"🗑️"}),D.jsx("button",{className:"px-2 py-1 rounded-xl bg-indigo-400 hover:bg-indigo-500 text-white text-xs font-bold w-full md:w-auto font-hand border-2 border-dashed border-indigo-400 shadow doodle-bounce",onClick:()=>o(se.id),title:"View history",children:"📅"}),D.jsx("button",{className:"px-2 py-1 rounded-xl bg-yellow-300 hover:bg-yellow-400 text-yellow-900 text-xs font-bold w-full md:w-auto font-hand border-2 border-dashed border-yellow-400 shadow doodle-bounce",onClick:()=>c(se),title:"Set reminder",children:"⏰"})]})]},se.id))]}),D.jsx("div",{className:"pointer-events-none absolute inset-0 z-0 animate-fade-in","aria-hidden":"true",children:[...Array(18)].map((se,ge)=>D.jsx("div",{className:"w-full h-[1px]",style:{background:"var(--journal-line, #e0d7c3)",opacity:.6,position:"absolute",top:`${(ge+1)*32}px`}},ge))}),s!==null&&D.jsx(lj,{habit:E.find(se=>se.id===s),onClose:()=>o(null),appDate:t,getToday:X}),a&&D.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30",children:D.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 max-w-xs mx-auto border-4 border-dashed border-sky-300 animate-pop-in",children:[D.jsx("h2",{className:"text-xl font-bold mb-2 text-sky-700 font-hand",children:"Welcome to Sadhana!"}),D.jsxs("p",{className:"mb-4 text-gray-700 font-hand",children:["Track your habits, mark them as done, and build your streak! 🎉",D.jsx("br",{}),"Click a habit name to edit. Mark as done to see a sparkle!"]}),D.jsx("button",{className:"mt-2 px-4 py-2 bg-sky-400 text-white rounded-xl font-bold font-hand border-2 border-dashed border-sky-400 shadow hover:bg-sky-500",onClick:_e,children:"Got it!"})]})}),u&&D.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30",children:D.jsxs("div",{className:"relative bg-[#fffbe6] dark:bg-[#23272e] rounded-3xl p-8 border-4 border-dashed border-sky-400 shadow-2xl font-hand animate-pop-in max-w-xs w-full",children:[D.jsx("button",{className:"absolute top-2 right-2 text-2xl hover:scale-125 transition",onClick:()=>c(null),"aria-label":"Close",children:"✖️"}),D.jsxs("div",{className:"flex flex-col items-center gap-4",children:[D.jsx("span",{className:"text-3xl",children:"⏰"}),D.jsxs("h2",{className:"text-xl font-bold mb-2",children:['Set Reminder for "',u.name,'"']}),D.jsx("input",{type:"time",className:"rounded-xl border-2 border-dashed border-sky-400 px-4 py-2 font-hand text-lg",value:h,onChange:se=>f(se.target.value)}),D.jsxs("div",{className:"flex gap-4 mt-2",children:[D.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[D.jsx("input",{type:"checkbox",checked:d,onChange:se=>y(se.target.checked)}),D.jsx("span",{children:"🔔 Sound"})]}),D.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[D.jsx("input",{type:"checkbox",checked:v,onChange:se=>_(se.target.checked)}),D.jsx("span",{children:"📳 Vibrate"})]})]}),D.jsx("button",{className:"mt-4 px-6 py-2 rounded-xl bg-sky-400 hover:bg-sky-500 text-white font-bold border-2 border-dashed border-sky-400 shadow animate-bounce",onClick:Se,children:"Save Reminder"}),D.jsx("button",{className:"mt-2 text-xs underline text-sky-700",onClick:ij,children:"Test Notification"}),w&&D.jsx("div",{className:"mt-2 text-xs text-red-500 text-center",children:w}),D.jsx("div",{className:"mt-2 text-xs text-gray-500 text-center",children:D.jsx("span",{children:"💡 Set a daily reminder to keep your streak!"})})]}),g&&D.jsx("div",{className:"absolute inset-0 pointer-events-none",children:D.jsx("span",{className:"absolute left-1/2 top-1/2 text-4xl animate-bounce",style:{transform:"translate(-50%,-50%)"},children:"🎉"})})]})}),k&&D.jsxs("div",{className:"fixed bottom-4 left-1/2 z-50 -translate-x-1/2 bg-[#fffbe6] border-4 border-dashed border-sky-400 rounded-2xl shadow-xl px-6 py-4 flex items-center gap-3 animate-pop-in font-hand",children:[D.jsx("span",{className:"text-2xl",children:"📲"}),D.jsx("span",{className:"flex-1 text-base",children:"Add Sadhana to your Home Screen for the best mobile experience!"}),D.jsx("button",{className:"px-4 py-2 bg-sky-400 hover:bg-sky-500 text-white rounded-xl font-bold border-2 border-dashed border-sky-400 shadow animate-bounce",onClick:async()=>{P&&await P()},children:"Add"}),D.jsx("button",{className:"ml-2 text-gray-400 hover:text-gray-700 text-xl font-bold",onClick:()=>x(!1),"aria-label":"Dismiss",children:"×"})]})]})},lj=({habit:t,onClose:e,appDate:n,getToday:r})=>{const i=new Set(t.history),s=Array.from({length:30},(o,a)=>{const l=n?new Date(n):new Date;return l.setDate(l.getDate()-(29-a)),l});return D.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 p-2 sm:p-0 overflow-y-auto",children:D.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-6 w-full max-w-sm relative max-h-[90vh] overflow-y-auto",children:[D.jsx("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-gray-900 dark:hover:text-white",onClick:e,"aria-label":"Close",children:"×"}),D.jsxs("h3",{className:"text-lg font-bold mb-4 text-center",children:[t.name," - Last 30 Days"]}),D.jsx("div",{className:"grid grid-cols-7 gap-2",children:s.map(o=>{const a=o.toISOString().slice(0,10),l=r?a===r():!1;return D.jsx("div",{className:`w-8 h-8 flex items-center justify-center rounded-full text-xs font-semibold border transition-colors
                  ${i.has(a)?"bg-green-400 text-white border-green-500":"bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400 border-gray-300 dark:border-gray-600"}
                  ${l?"ring-2 ring-sky-400":""}
                `,title:a,children:o.getDate()},a)})}),D.jsx("div",{className:"mt-4 text-center text-xs text-gray-500 dark:text-gray-400",children:"Green = completed, Gray = not completed, Blue ring = today"})]})})},uj=({block:t,onEdit:e,onDelete:n,onToggleComplete:r})=>D.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg shadow mb-2 font-hand animate-fade-in"+(t.completed?" opacity-60":""),style:{backgroundColor:t.color,border:"2px dashed #222",boxShadow:"2px 2px 0 #e0d7c3",fontFamily:"Patrick Hand, Caveat, Gloria Hallelujah, cursive"},children:[D.jsx("span",{className:"text-2xl mr-2 animate-wiggle",title:t.type,children:t.icon}),D.jsxs("div",{className:"flex-1",children:[D.jsx("div",{className:"font-bold text-base animate-fade-in-down",children:t.title}),D.jsxs("div",{className:"text-xs text-gray-700 animate-fade-in",children:[t.startTime," - ",t.endTime]}),t.notes&&D.jsx("div",{className:"text-xs text-gray-600 italic animate-fade-in-slow",children:t.notes})]}),D.jsx("button",{className:`px-2 py-1 rounded text-xs font-semibold font-hand border-2 border-dashed shadow animate-pop-in ${t.completed?"bg-green-600 text-white border-green-800":"bg-gray-200 text-gray-800 border-gray-400 hover:bg-green-100"}`,onClick:()=>r(t.id),title:"Mark as done",children:t.completed?"✓":"Mark"}),D.jsx("button",{className:"px-2 py-1 rounded bg-yellow-300 text-xs font-semibold font-hand border-2 border-dashed border-yellow-400 shadow animate-fade-in",onClick:()=>e(t),title:"Edit",children:"✎"}),D.jsx("button",{className:"px-2 py-1 rounded bg-red-400 text-white text-xs font-semibold font-hand border-2 border-dashed border-red-400 shadow animate-fade-in",onClick:()=>n(t.id),title:"Delete",children:"×"})]}),Rb=["#FFD700","#87CEEB","#90EE90","#FFB6C1","#FFA07A"],Nb=["🌅","📘","💪","🧘","📝","🍎","🌙"],cj=({open:t,initial:e={},onSave:n,onClose:r})=>{const[i,s]=oe.useState(e.title||""),[o,a]=oe.useState(e.startTime||"06:00"),[l,u]=oe.useState(e.endTime||"07:00"),[c,h]=oe.useState(e.color||Rb[0]),[f,d]=oe.useState(e.icon||Nb[0]),[y,v]=oe.useState(e.notes||""),[_,g]=oe.useState(e.type||"routine"),[m,w]=oe.useState(e.repeat||"none");if(!t)return null;const b=()=>{i.trim()&&(n({id:e.id||Date.now().toString(),title:i,startTime:o,endTime:l,color:c,icon:f,notes:y,type:_,completed:e.completed||!1,repeat:m}),r())};return D.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:D.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 w-full max-w-sm relative",children:[D.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-red-500 dark:hover:text-red-400 text-2xl font-bold transition-colors","aria-label":"Close",onClick:r,children:"×"}),D.jsx("h3",{className:"text-2xl font-extrabold mb-6 text-center text-sky-500 dark:text-sky-300 tracking-tight drop-shadow",children:"Add Time Block"}),D.jsxs("div",{className:"mb-4",children:[D.jsx("label",{className:"block text-xs font-semibold mb-1 text-gray-700 dark:text-gray-200",children:"Title"}),D.jsx("input",{className:"w-full rounded-lg px-3 py-2 border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-sky-400 text-base shadow-sm transition",placeholder:"e.g. Morning Ritual",value:i,onChange:T=>s(T.target.value),autoFocus:!0})]}),D.jsxs("div",{className:"flex gap-3 mb-4",children:[D.jsxs("div",{className:"flex-1",children:[D.jsx("label",{className:"block text-xs font-semibold mb-1 text-gray-700 dark:text-gray-200",children:"Start"}),D.jsx("input",{type:"time",className:"w-full rounded-lg px-3 py-2 border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-sky-400 shadow-sm transition",value:o,onChange:T=>a(T.target.value)})]}),D.jsxs("div",{className:"flex-1",children:[D.jsx("label",{className:"block text-xs font-semibold mb-1 text-gray-700 dark:text-gray-200",children:"End"}),D.jsx("input",{type:"time",className:"w-full rounded-lg px-3 py-2 border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-sky-400 shadow-sm transition",value:l,onChange:T=>u(T.target.value)})]})]}),D.jsxs("div",{className:"mb-4 flex gap-3 items-center",children:[D.jsx("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-200",children:"Color"}),D.jsx("select",{value:c,onChange:T=>h(T.target.value),className:"rounded-lg px-2 py-2 border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-sky-400 shadow-sm transition",children:Rb.map(T=>D.jsx("option",{value:T,style:{backgroundColor:T},children:T},T))}),D.jsx("label",{className:"block text-xs font-semibold ml-2 text-gray-700 dark:text-gray-200",children:"Icon"}),D.jsx("select",{value:f,onChange:T=>d(T.target.value),className:"rounded-lg px-2 py-2 border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-sky-400 shadow-sm transition",children:Nb.map(T=>D.jsx("option",{value:T,children:T},T))})]}),D.jsxs("div",{className:"mb-4",children:[D.jsx("label",{className:"block text-xs font-semibold mb-1 text-gray-700 dark:text-gray-200",children:"Notes"}),D.jsx("input",{className:"w-full rounded-lg px-3 py-2 border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-sky-400 text-base shadow-sm transition",placeholder:"e.g. Gratitude, water, light",value:y,onChange:T=>v(T.target.value)})]}),D.jsxs("div",{className:"mb-4 flex gap-3 items-center",children:[D.jsx("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-200",children:"Type"}),D.jsxs("select",{value:_,onChange:T=>g(T.target.value),className:"rounded-lg px-2 py-2 border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-sky-400 shadow-sm transition",children:[D.jsx("option",{value:"routine",children:"Routine"}),D.jsx("option",{value:"study",children:"Study"}),D.jsx("option",{value:"work",children:"Work"}),D.jsx("option",{value:"health",children:"Health"}),D.jsx("option",{value:"reflection",children:"Reflection"}),D.jsx("option",{value:"other",children:"Other"})]}),D.jsx("label",{className:"block text-xs font-semibold ml-2 text-gray-700 dark:text-gray-200",children:"Repeat"}),D.jsxs("select",{value:m,onChange:T=>w(T.target.value),className:"rounded-lg px-2 py-2 border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-sky-400 shadow-sm transition",children:[D.jsx("option",{value:"none",children:"None"}),D.jsx("option",{value:"daily",children:"Daily"}),D.jsx("option",{value:"weekly",children:"Weekly"})]})]}),D.jsx("button",{className:"w-full mt-4 px-3 py-3 rounded-lg bg-gradient-to-r from-sky-400 to-blue-500 hover:from-sky-500 hover:to-blue-600 text-white text-base font-bold shadow-lg transition-all duration-200",onClick:b,children:"Save"})]})})},hj=()=>{const{user:t}=zo(),[e,n]=oe.useState([]),[r,i]=oe.useState(()=>new Date().toISOString().slice(0,10)),[s,o]=oe.useState(!1),[a,l]=oe.useState(null),[u,c]=oe.useState(!1),[h,f]=oe.useState(null),[d,y]=oe.useState(null);oe.useEffect(()=>{if(!t)return;c(!0),f(null);const S=Jt(yt,"users",t.uid,"schedule",r),E=ws(S,A=>{const O=A.data();n((O==null?void 0:O.blocks)||[]),c(!1)},()=>{f("Failed to load schedule."),c(!1)});return()=>E()},[t,r]);const v=async S=>{if(t)try{f(null);const E=Jt(yt,"users",t.uid,"schedule",r);await Rr(E,{userId:t.uid,date:r,blocks:S})}catch{f("Failed to save schedule.")}};function _(S,E){const A=F=>{const[$,q]=F.split(":").map(Number);return $*60+q},O=A(S.startTime),M=A(S.endTime);return e.some(F=>{if(E&&F.id===E)return!1;const $=A(F.startTime),q=A(F.endTime);return O<q&&M>$})}const g=async S=>{if(y(null),_(S)){y("Block overlaps with another.");return}const E=[...e,S];n(E),await v(E)},m=async S=>{if(y(null),_(S,S.id)){y("Block overlaps with another.");return}const E=e.map(A=>A.id===S.id?S:A);n(E),await v(E)},w=async S=>{y(null);const E=e.filter(A=>A.id!==S);n(E),await v(E)},b=async S=>{y(null);const E=e.map(A=>A.id===S?{...A,completed:!A.completed}:A);n(E),await v(E)},T=S=>{l(S),o(!0)},C=e.filter(S=>S.completed).length,k=e.length>0?Math.round(C/e.length*100):0,x=new Date,P=x.getHours()*60+x.getMinutes();return D.jsxs("div",{className:"w-full max-w-2xl mx-auto p-4 relative animate-fade-in-down",style:{fontFamily:"Patrick Hand, Caveat, Gloria Hallelujah, cursive",background:"repeating-linear-gradient(0deg, var(--journal-bg, #fdf6e3) 0px, var(--journal-bg, #fdf6e3) 31px, var(--journal-line, #e0d7c3) 32px, var(--journal-bg, #fdf6e3) 33px)",border:"3px solid #222",borderRadius:"32px",boxShadow:"0 6px 32px 0 rgba(60,40,10,0.10), 0 0 0 6px #f5e9c6",position:"relative"},children:[D.jsx("style",{children:`
        :root {
          --journal-bg: #fdf6e3;
          --journal-line: #e0d7c3;
        }
        .dark :root, .dark body {
          --journal-bg: #23272e;
          --journal-line: #3b4252;
        }
        @keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
        @keyframes fade-in-down { from { opacity: 0; transform: translateY(-24px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fade-in-slow { from { opacity: 0; } to { opacity: 1; } }
        @keyframes pop-in { 0% { transform: scale(0.7); opacity: 0; } 80% { transform: scale(1.1); opacity: 1; } 100% { transform: scale(1); } }
        @keyframes wiggle { 0%, 100% { transform: rotate(-2deg); } 50% { transform: rotate(2deg); } }
        @keyframes progress { from { width: 0; } to { width: var(--tw-progress, 100%); } }
        .animate-fade-in { animation: fade-in 0.7s ease; }
        .animate-fade-in-down { animation: fade-in-down 0.7s cubic-bezier(.4,2,.6,1); }
        .animate-fade-in-slow { animation: fade-in-slow 1.2s ease; }
        .animate-pop-in { animation: pop-in 0.5s cubic-bezier(.4,2,.6,1); }
        .animate-wiggle { animation: wiggle 1.2s infinite alternate; }
        .animate-progress { animation: progress 1.2s cubic-bezier(.4,2,.6,1); }
      `}),D.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4 animate-fade-in-down",children:[D.jsx("span",{className:"text-3xl md:text-4xl font-extrabold text-sky-700 dark:text-sky-300 tracking-tight drop-shadow-xl uppercase select-none flex items-center gap-2 font-hand animate-wiggle",children:D.jsx("span",{children:"⏰ Time Blocks"})}),D.jsx("span",{className:"text-2xl md:text-3xl select-none animate-bounce",children:"📅"})]}),D.jsx("div",{className:"mb-2 text-center text-xs text-gray-500 dark:text-gray-300 font-hand animate-fade-in",children:D.jsxs("span",{children:["Tip: Add, drag, or edit blocks to plan your day. Mark as done when finished! ",D.jsx("span",{className:"ml-1",children:"🕒"})]})}),D.jsxs("div",{className:"flex items-center justify-between mb-4",children:[D.jsxs("div",{className:"flex items-center gap-2",children:[D.jsx("span",{className:"text-lg font-bold",children:"🗓️"}),D.jsx("input",{type:"date",value:r,onChange:S=>i(S.target.value),className:"rounded px-2 py-1 border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none"})]}),D.jsx("button",{className:"px-3 py-2 rounded bg-sky-400 hover:bg-sky-500 text-white text-xs font-semibold",onClick:()=>{l(null),o(!0)},children:"➕ Add Block"})]}),D.jsxs("div",{className:"mb-4 animate-fade-in",children:[D.jsxs("div",{className:"flex justify-between items-center mb-1 font-hand",children:[D.jsx("span",{className:"text-base text-gray-700 dark:text-gray-200",children:"Progress"}),D.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-300",children:[k,"%"]})]}),D.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3 border-2 border-dashed border-sky-300 shadow-inner",style:{boxShadow:"2px 2px 0 #e0d7c3"},children:D.jsx("div",{className:"bg-sky-400 h-3 rounded-full transition-all font-hand animate-progress",style:{width:`${k}%`}})})]}),u&&D.jsx("div",{className:"mb-4 text-center text-sky-500 dark:text-sky-300 font-semibold",children:"Loading..."}),h&&D.jsx("div",{className:"mb-4 text-center text-red-500 dark:text-red-400 font-semibold",children:h}),d&&D.jsx("div",{className:"mb-4 text-center text-red-500 dark:text-red-400 font-semibold",children:d}),D.jsxs("div",{className:"relative min-h-[600px] bg-transparent rounded-lg p-4 overflow-y-auto animate-fade-in-slow",children:[D.jsx("div",{className:"absolute left-0 right-0 h-0.5 bg-sky-500 animate-pulse",style:{top:`${(P-300)/840*100}%`}}),e.sort((S,E)=>S.startTime.localeCompare(E.startTime)).map(S=>D.jsx(uj,{block:S,onEdit:T,onDelete:w,onToggleComplete:b},S.id)),e.length===0&&!u&&D.jsx("div",{className:"text-center text-gray-400 mt-8 font-hand animate-fade-in",children:"No blocks for this day."})]}),D.jsx(cj,{open:s,initial:a||{},onSave:a?m:g,onClose:()=>{o(!1),l(null)}})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function eu(t){return t+.5|0}const ci=(t,e,n)=>Math.max(Math.min(t,n),e);function Ra(t){return ci(eu(t*2.55),0,255)}function Ei(t){return ci(eu(t*255),0,255)}function Tr(t){return ci(eu(t/2.55)/100,0,1)}function Db(t){return ci(eu(t*100),0,100)}const En={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},bg=[..."0123456789ABCDEF"],fj=t=>bg[t&15],dj=t=>bg[(t&240)>>4]+bg[t&15],Fu=t=>(t&240)>>4===(t&15),pj=t=>Fu(t.r)&&Fu(t.g)&&Fu(t.b)&&Fu(t.a);function gj(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&En[t[1]]*17,g:255&En[t[2]]*17,b:255&En[t[3]]*17,a:e===5?En[t[4]]*17:255}:(e===7||e===9)&&(n={r:En[t[1]]<<4|En[t[2]],g:En[t[3]]<<4|En[t[4]],b:En[t[5]]<<4|En[t[6]],a:e===9?En[t[7]]<<4|En[t[8]]:255})),n}const mj=(t,e)=>t<255?e(t):"";function yj(t){var e=pj(t)?fj:dj;return t?"#"+e(t.r)+e(t.g)+e(t.b)+mj(t.a,e):void 0}const vj=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function AS(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function _j(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function bj(t,e,n){const r=AS(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function wj(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function jy(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,u,c;return s!==o&&(c=s-o,u=a>.5?c/(2-s-o):c/(s+o),l=wj(n,r,i,c,s),l=l*60+.5),[l|0,u||0,a]}function Vy(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Ei)}function Fy(t,e,n){return Vy(AS,t,e,n)}function xj(t,e,n){return Vy(bj,t,e,n)}function Ej(t,e,n){return Vy(_j,t,e,n)}function IS(t){return(t%360+360)%360}function Tj(t){const e=vj.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Ra(+e[5]):Ei(+e[5]));const i=IS(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=xj(i,s,o):e[1]==="hsv"?r=Ej(i,s,o):r=Fy(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function kj(t,e){var n=jy(t);n[0]=IS(n[0]+e),n=Fy(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Sj(t){if(!t)return;const e=jy(t),n=e[0],r=Db(e[1]),i=Db(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Tr(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const Mb={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Lb={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Aj(){const t={},e=Object.keys(Lb),n=Object.keys(Mb);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,Mb[s]);s=parseInt(Lb[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let Bu;function Ij(t){Bu||(Bu=Aj(),Bu.transparent=[0,0,0,0]);const e=Bu[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Pj=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Oj(t){const e=Pj.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Ra(o):ci(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Ra(r):ci(r,0,255)),i=255&(e[4]?Ra(i):ci(i,0,255)),s=255&(e[6]?Ra(s):ci(s,0,255)),{r,g:i,b:s,a:n}}}function Cj(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Tr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Vd=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,js=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Rj(t,e,n){const r=js(Tr(t.r)),i=js(Tr(t.g)),s=js(Tr(t.b));return{r:Ei(Vd(r+n*(js(Tr(e.r))-r))),g:Ei(Vd(i+n*(js(Tr(e.g))-i))),b:Ei(Vd(s+n*(js(Tr(e.b))-s))),a:t.a+n*(e.a-t.a)}}function zu(t,e,n){if(t){let r=jy(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=Fy(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function PS(t,e){return t&&Object.assign(e||{},t)}function jb(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ei(t[3]))):(e=PS(t,{r:0,g:0,b:0,a:1}),e.a=Ei(e.a)),e}function Nj(t){return t.charAt(0)==="r"?Oj(t):Tj(t)}class Rl{constructor(e){if(e instanceof Rl)return e;const n=typeof e;let r;n==="object"?r=jb(e):n==="string"&&(r=gj(e)||Ij(e)||Nj(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=PS(this._rgb);return e&&(e.a=Tr(e.a)),e}set rgb(e){this._rgb=jb(e)}rgbString(){return this._valid?Cj(this._rgb):void 0}hexString(){return this._valid?yj(this._rgb):void 0}hslString(){return this._valid?Sj(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-u,r.r=255&u*r.r+s*i.r+.5,r.g=255&u*r.g+s*i.g+.5,r.b=255&u*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=Rj(this._rgb,e._rgb,n)),this}clone(){return new Rl(this.rgb)}alpha(e){return this._rgb.a=Ei(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=eu(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return zu(this._rgb,2,e),this}darken(e){return zu(this._rgb,2,-e),this}saturate(e){return zu(this._rgb,1,e),this}desaturate(e){return zu(this._rgb,1,-e),this}rotate(e){return kj(this._rgb,e),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function _r(){}const Dj=(()=>{let t=0;return()=>t++})();function De(t){return t==null}function ot(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function je(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function fn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Jn(t,e){return fn(t)?t:e}function Ie(t,e){return typeof t>"u"?e:t}const Mj=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,OS=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function We(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ze(t,e,n,r){let i,s,o;if(ot(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(je(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function Th(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function kh(t){if(ot(t))return t.map(kh);if(je(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=kh(t[n[i]]);return e}return t}function CS(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Lj(t,e,n,r){if(!CS(t))return;const i=e[t],s=n[t];je(i)&&je(s)?Nl(i,s,r):e[t]=kh(s)}function Nl(t,e,n){const r=ot(e)?e:[e],i=r.length;if(!je(t))return t;n=n||{};const s=n.merger||Lj;let o;for(let a=0;a<i;++a){if(o=r[a],!je(o))continue;const l=Object.keys(o);for(let u=0,c=l.length;u<c;++u)s(l[u],t,o,n)}return t}function rl(t,e){return Nl(t,e,{merger:jj})}function jj(t,e,n){if(!CS(t))return;const r=e[t],i=n[t];je(r)&&je(i)?rl(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=kh(i))}const Vb={"":t=>t,x:t=>t.x,y:t=>t.y};function Vj(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function Fj(t){const e=Vj(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Oi(t,e){return(Vb[e]||(Vb[e]=Fj(e)))(t)}function By(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Dl=t=>typeof t<"u",Ci=t=>typeof t=="function",Fb=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function Bj(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Ze=Math.PI,rt=2*Ze,zj=rt+Ze,Sh=Number.POSITIVE_INFINITY,Uj=Ze/180,gt=Ze/2,Bi=Ze/4,Bb=Ze*2/3,RS=Math.log10,hr=Math.sign;function il(t,e,n){return Math.abs(t-e)<n}function zb(t){const e=Math.round(t);t=il(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(RS(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function $j(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function qj(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Io(t){return!qj(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function Hj(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function Wj(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Un(t){return t*(Ze/180)}function zy(t){return t*(180/Ze)}function Ub(t){if(!fn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function NS(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*Ze&&(s+=rt),{angle:s,distance:i}}function wg(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Kj(t,e){return(t-e+zj)%rt-Ze}function Fn(t){return(t%rt+rt)%rt}function Ml(t,e,n,r){const i=Fn(t),s=Fn(e),o=Fn(n),a=Fn(s-i),l=Fn(o-i),u=Fn(i-s),c=Fn(i-o);return i===s||i===o||r&&s===o||a>l&&u<c}function Ht(t,e,n){return Math.max(e,Math.min(n,t))}function Gj(t){return Ht(t,-32768,32767)}function hi(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Uy(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const rs=(t,e,n,r)=>Uy(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),Yj=(t,e,n)=>Uy(t,n,r=>t[r][e]>=n);function Qj(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const DS=["push","pop","shift","splice","unshift"];function Xj(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),DS.forEach(n=>{const r="_onData"+By(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function $b(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(DS.forEach(s=>{delete t[s]}),delete t._chartjs)}function MS(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const LS=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function jS(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,LS.call(window,()=>{r=!1,t.apply(e,n)}))}}function Jj(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const $y=t=>t==="start"?"left":t==="end"?"right":"center",zt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,Zj=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function VS(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,c=o.axis,{min:h,max:f,minDefined:d,maxDefined:y}=o.getUserBounds();if(d){if(i=Math.min(rs(l,c,h).lo,n?r:rs(e,c,o.getPixelForValue(h)).lo),u){const v=l.slice(0,i+1).reverse().findIndex(_=>!De(_[a.axis]));i-=Math.max(0,v)}i=Ht(i,0,r-1)}if(y){let v=Math.max(rs(l,o.axis,f,!0).hi+1,n?0:rs(e,c,o.getPixelForValue(f),!0).hi+1);if(u){const _=l.slice(v-1).findIndex(g=>!De(g[a.axis]));v+=Math.max(0,_)}s=Ht(v,i,r)-i}else s=r-i}return{start:i,count:s}}function FS(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const Uu=t=>t===0||t===1,qb=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*rt/n)),Hb=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*rt/n)+1,sl={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*gt)+1,easeOutSine:t=>Math.sin(t*gt),easeInOutSine:t=>-.5*(Math.cos(Ze*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Uu(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Uu(t)?t:qb(t,.075,.3),easeOutElastic:t=>Uu(t)?t:Hb(t,.075,.3),easeInOutElastic(t){return Uu(t)?t:t<.5?.5*qb(t*2,.1125,.45):.5+.5*Hb(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-sl.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?sl.easeInBounce(t*2)*.5:sl.easeOutBounce(t*2-1)*.5+.5};function qy(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Wb(t){return qy(t)?t:new Rl(t)}function Fd(t){return qy(t)?t:new Rl(t).saturate(.5).darken(.1).hexString()}const e3=["x","y","borderWidth","radius","tension"],t3=["color","borderColor","backgroundColor"];function n3(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:t3},numbers:{type:"number",properties:e3}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function r3(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Kb=new Map;function i3(t,e){e=e||{};const n=t+JSON.stringify(e);let r=Kb.get(n);return r||(r=new Intl.NumberFormat(t,e),Kb.set(n,r)),r}function wf(t,e,n){return i3(e,n).format(t)}const s3={values(t){return ot(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(i="scientific"),s=o3(t,n)}const o=RS(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),wf(t,r,l)}};function o3(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Hy={formatters:s3};function a3(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Hy.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ts=Object.create(null),xg=Object.create(null);function ol(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function Bd(t,e,n){return typeof e=="string"?Nl(ol(t,e),n):Nl(ol(t,""),e)}class l3{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>Fd(i.backgroundColor),this.hoverBorderColor=(r,i)=>Fd(i.borderColor),this.hoverColor=(r,i)=>Fd(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Bd(this,e,n)}get(e){return ol(this,e)}describe(e,n){return Bd(xg,e,n)}override(e,n){return Bd(Ts,e,n)}route(e,n,r,i){const s=ol(this,e),o=ol(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],u=o[i];return je(l)?Object.assign({},u,l):Ie(l,u)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var ft=new l3({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[n3,r3,a3]);function u3(t){return!t||De(t.size)||De(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Ah(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function c3(t,e,n,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,u,c,h,f;for(l=0;l<a;l++)if(h=n[l],h!=null&&!ot(h))o=Ah(t,i,s,o,h);else if(ot(h))for(u=0,c=h.length;u<c;u++)f=h[u],f!=null&&!ot(f)&&(o=Ah(t,i,s,o,f));t.restore();const d=s.length/2;if(d>n.length){for(l=0;l<d;l++)delete i[s[l]];s.splice(0,d)}return o}function zi(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function Gb(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Eg(t,e,n,r){BS(t,e,n,r,null)}function BS(t,e,n,r,i){let s,o,a,l,u,c,h,f;const d=e.pointStyle,y=e.rotation,v=e.radius;let _=(y||0)*Uj;if(d&&typeof d=="object"&&(s=d.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(_),t.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),d){default:i?t.ellipse(n,r,i/2,v,0,0,rt):t.arc(n,r,v,0,rt),t.closePath();break;case"triangle":c=i?i/2:v,t.moveTo(n+Math.sin(_)*c,r-Math.cos(_)*v),_+=Bb,t.lineTo(n+Math.sin(_)*c,r-Math.cos(_)*v),_+=Bb,t.lineTo(n+Math.sin(_)*c,r-Math.cos(_)*v),t.closePath();break;case"rectRounded":u=v*.516,l=v-u,o=Math.cos(_+Bi)*l,h=Math.cos(_+Bi)*(i?i/2-u:l),a=Math.sin(_+Bi)*l,f=Math.sin(_+Bi)*(i?i/2-u:l),t.arc(n-h,r-a,u,_-Ze,_-gt),t.arc(n+f,r-o,u,_-gt,_),t.arc(n+h,r+a,u,_,_+gt),t.arc(n-f,r+o,u,_+gt,_+Ze),t.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*v,c=i?i/2:l,t.rect(n-c,r-l,2*c,2*l);break}_+=Bi;case"rectRot":h=Math.cos(_)*(i?i/2:v),o=Math.cos(_)*v,a=Math.sin(_)*v,f=Math.sin(_)*(i?i/2:v),t.moveTo(n-h,r-a),t.lineTo(n+f,r-o),t.lineTo(n+h,r+a),t.lineTo(n-f,r+o),t.closePath();break;case"crossRot":_+=Bi;case"cross":h=Math.cos(_)*(i?i/2:v),o=Math.cos(_)*v,a=Math.sin(_)*v,f=Math.sin(_)*(i?i/2:v),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"star":h=Math.cos(_)*(i?i/2:v),o=Math.cos(_)*v,a=Math.sin(_)*v,f=Math.sin(_)*(i?i/2:v),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o),_+=Bi,h=Math.cos(_)*(i?i/2:v),o=Math.cos(_)*v,a=Math.sin(_)*v,f=Math.sin(_)*(i?i/2:v),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"line":o=i?i/2:Math.cos(_)*v,a=Math.sin(_)*v,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(_)*(i?i/2:v),r+Math.sin(_)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Nr(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Wy(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Ky(t){t.restore()}function h3(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function f3(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function d3(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),De(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function p3(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,u=n+s.actualBoundingBoxDescent,c=i.strikethrough?(l+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,c),t.lineTo(a,c),t.stroke()}}function g3(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function ks(t,e,n,r,i,s={}){const o=ot(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,u;for(t.save(),t.font=i.string,d3(t,s),l=0;l<o.length;++l)u=o[l],s.backdrop&&g3(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),De(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(u,n,r,s.maxWidth)),t.fillText(u,n,r,s.maxWidth),p3(t,n,r,u,s),r+=Number(i.lineHeight);t.restore()}function Ll(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Ze,Ze,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Ze,gt,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,gt,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-gt,!0),t.lineTo(n+o.topLeft,r)}const m3=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,y3=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function v3(t,e){const n=(""+t).match(m3);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const _3=t=>+t||0;function Gy(t,e){const n={},r=je(e),i=r?Object.keys(e):e,s=je(t)?r?o=>Ie(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=_3(s(o));return n}function zS(t){return Gy(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ls(t){return Gy(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Yt(t){const e=zS(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Tt(t,e){t=t||{},e=e||ft.font;let n=Ie(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=Ie(t.style,e.style);r&&!(""+r).match(y3)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:Ie(t.family,e.family),lineHeight:v3(Ie(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:Ie(t.weight,e.weight),string:""};return i.string=u3(i),i}function $u(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function b3(t,e,n){const{min:r,max:i}=t,s=OS(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function Mi(t,e){return Object.assign(Object.create(t),e)}function Yy(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=HS("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>Yy([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return $S(a,l,()=>I3(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return Qb(a).includes(l)},ownKeys(a){return Qb(a)},set(a,l,u){const c=a._storage||(a._storage=i());return a[l]=c[l]=u,delete a._keys,!0}})}function Po(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:US(t,r),setContext:s=>Po(t,s,n,r),override:s=>Po(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return $S(s,o,()=>x3(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function US(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:Ci(n)?n:()=>n,isIndexable:Ci(r)?r:()=>r}}const w3=(t,e)=>t?t+By(e):e,Qy=(t,e)=>je(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function $S(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function x3(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return Ci(a)&&o.isScriptable(e)&&(a=E3(e,a,t,n)),ot(a)&&a.length&&(a=T3(e,a,t,o.isIndexable)),Qy(e,a)&&(a=Po(a,i,s&&s[e],o)),a}function E3(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),Qy(t,l)&&(l=Xy(i._scopes,i,t,l)),l}function T3(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(je(e[0])){const l=e,u=i._scopes.filter(c=>c!==l);e=[];for(const c of l){const h=Xy(u,i,t,c);e.push(Po(h,s,o&&o[t],a))}}return e}function qS(t,e,n){return Ci(t)?t(e,n):t}const k3=(t,e)=>t===!0?e:typeof t=="string"?Oi(e,t):void 0;function S3(t,e,n,r,i){for(const s of e){const o=k3(n,s);if(o){t.add(o);const a=qS(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function Xy(t,e,n,r){const i=e._rootScopes,s=qS(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=Yb(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=Yb(a,o,s,l,r),l===null)?!1:Yy(Array.from(a),[""],i,s,()=>A3(e,n,r))}function Yb(t,e,n,r,i){for(;n;)n=S3(t,e,n,r,i);return n}function A3(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return ot(i)&&je(n)?n:i||{}}function I3(t,e,n,r){let i;for(const s of e)if(i=HS(w3(s,t),n),typeof i<"u")return Qy(t,i)?Xy(n,r,t,i):i}function HS(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function Qb(t){let e=t._keys;return e||(e=t._keys=P3(t._scopes)),e}function P3(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function WS(t,e,n,r){const{iScale:i}=t,{key:s="r"}=this._parsing,o=new Array(r);let a,l,u,c;for(a=0,l=r;a<l;++a)u=a+n,c=e[u],o[a]={r:i.parse(Oi(c,s),u)};return o}const O3=Number.EPSILON||1e-14,Oo=(t,e)=>e<t.length&&!t[e].skip&&t[e],KS=t=>t==="x"?"y":"x";function C3(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=wg(s,i),l=wg(o,s);let u=a/(a+l),c=l/(a+l);u=isNaN(u)?0:u,c=isNaN(c)?0:c;const h=r*u,f=r*c;return{previous:{x:s.x-h*(o.x-i.x),y:s.y-h*(o.y-i.y)},next:{x:s.x+f*(o.x-i.x),y:s.y+f*(o.y-i.y)}}}function R3(t,e,n){const r=t.length;let i,s,o,a,l,u=Oo(t,0);for(let c=0;c<r-1;++c)if(l=u,u=Oo(t,c+1),!(!l||!u)){if(il(e[c],0,O3)){n[c]=n[c+1]=0;continue}i=n[c]/e[c],s=n[c+1]/e[c],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[c]=i*o*e[c],n[c+1]=s*o*e[c])}}function N3(t,e,n="x"){const r=KS(n),i=t.length;let s,o,a,l=Oo(t,0);for(let u=0;u<i;++u){if(o=a,a=l,l=Oo(t,u+1),!a)continue;const c=a[n],h=a[r];o&&(s=(c-o[n])/3,a[`cp1${n}`]=c-s,a[`cp1${r}`]=h-s*e[u]),l&&(s=(l[n]-c)/3,a[`cp2${n}`]=c+s,a[`cp2${r}`]=h+s*e[u])}}function D3(t,e="x"){const n=KS(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,u=Oo(t,0);for(o=0;o<r;++o)if(a=l,l=u,u=Oo(t,o+1),!!l){if(u){const c=u[e]-l[e];i[o]=c!==0?(u[n]-l[n])/c:0}s[o]=a?u?hr(i[o-1])!==hr(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}R3(t,i,s),N3(t,s,e)}function qu(t,e,n){return Math.max(Math.min(t,n),e)}function M3(t,e){let n,r,i,s,o,a=Nr(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&Nr(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=qu(i.cp1x,e.left,e.right),i.cp1y=qu(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=qu(i.cp2x,e.left,e.right),i.cp2y=qu(i.cp2y,e.top,e.bottom)))}function L3(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")D3(t,i);else{let u=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=C3(u,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,u=a}e.capBezierPoints&&M3(t,n)}function Jy(){return typeof window<"u"&&typeof document<"u"}function Zy(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Ih(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const xf=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function j3(t,e){return xf(t).getPropertyValue(e)}const V3=["top","right","bottom","left"];function us(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=V3[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const F3=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function B3(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(F3(i,s,t.target))a=i,l=s;else{const u=e.getBoundingClientRect();a=r.clientX-u.left,l=r.clientY-u.top,o=!0}return{x:a,y:l,box:o}}function Gi(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=xf(n),s=i.boxSizing==="border-box",o=us(i,"padding"),a=us(i,"border","width"),{x:l,y:u,box:c}=B3(t,n),h=o.left+(c&&a.left),f=o.top+(c&&a.top);let{width:d,height:y}=e;return s&&(d-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-h)/d*n.width/r),y:Math.round((u-f)/y*n.height/r)}}function z3(t,e,n){let r,i;if(e===void 0||n===void 0){const s=t&&Zy(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=xf(s),l=us(a,"border","width"),u=us(a,"padding");e=o.width-u.width-l.width,n=o.height-u.height-l.height,r=Ih(a.maxWidth,s,"clientWidth"),i=Ih(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||Sh,maxHeight:i||Sh}}const Hu=t=>Math.round(t*10)/10;function U3(t,e,n,r){const i=xf(t),s=us(i,"margin"),o=Ih(i.maxWidth,t,"clientWidth")||Sh,a=Ih(i.maxHeight,t,"clientHeight")||Sh,l=z3(t,e,n);let{width:u,height:c}=l;if(i.boxSizing==="content-box"){const f=us(i,"border","width"),d=us(i,"padding");u-=d.width+f.width,c-=d.height+f.height}return u=Math.max(0,u-s.width),c=Math.max(0,r?u/r:c-s.height),u=Hu(Math.min(u,o,l.maxWidth)),c=Hu(Math.min(c,a,l.maxHeight)),u&&!c&&(c=Hu(u/2)),(e!==void 0||n!==void 0)&&r&&l.height&&c>l.height&&(c=l.height,u=Hu(Math.floor(c*r))),{width:u,height:c}}function Xb(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const $3=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Jy()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Jb(t,e){const n=j3(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Yi(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function q3(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function H3(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Yi(t,i,n),a=Yi(i,s,n),l=Yi(s,e,n),u=Yi(o,a,n),c=Yi(a,l,n);return Yi(u,c,n)}const W3=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},K3=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function ho(t,e,n){return t?W3(e,n):K3()}function GS(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function YS(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function QS(t){return t==="angle"?{between:Ml,compare:Kj,normalize:Fn}:{between:hi,compare:(e,n)=>e-n,normalize:e=>e}}function Zb({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function G3(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=QS(r),l=e.length;let{start:u,end:c,loop:h}=t,f,d;if(h){for(u+=l,c+=l,f=0,d=l;f<d&&o(a(e[u%l][r]),i,s);++f)u--,c--;u%=l,c%=l}return c<u&&(c+=l),{start:u,end:c,loop:h,style:t.style}}function Y3(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:u}=QS(r),{start:c,end:h,loop:f,style:d}=G3(t,e,n),y=[];let v=!1,_=null,g,m,w;const b=()=>l(i,w,g)&&a(i,w)!==0,T=()=>a(s,g)===0||l(s,w,g),C=()=>v||b(),k=()=>!v||T();for(let x=c,P=c;x<=h;++x)m=e[x%o],!m.skip&&(g=u(m[r]),g!==w&&(v=l(g,i,s),_===null&&C()&&(_=a(g,i)===0?x:P),_!==null&&k()&&(y.push(Zb({start:_,end:x,loop:f,count:o,style:d})),_=null),P=x,w=g));return _!==null&&y.push(Zb({start:_,end:h,loop:f,count:o,style:d})),y}function Q3(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=Y3(r[i],t.points,e);s.length&&n.push(...s)}return n}function X3(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function J3(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const u=t[l%i];u.skip||u.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=u.stop?l:null):(o=l,a.skip&&(e=l)),a=u}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function Z3(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=X3(n,i,s,r);if(r===!0)return ew(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,u=!!t._fullLoop&&o===0&&a===i-1;return ew(t,J3(n,o,l,u),n,e)}function ew(t,e,n,r){return!r||!r.setContext||!n?e:e5(t,e,n,r)}function e5(t,e,n,r){const i=t._chart.getContext(),s=tw(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,u=[];let c=s,h=e[0].start,f=h;function d(y,v,_,g){const m=a?-1:1;if(y!==v){for(y+=l;n[y%l].skip;)y-=m;for(;n[v%l].skip;)v+=m;y%l!==v%l&&(u.push({start:y%l,end:v%l,loop:_,style:g}),c=g,h=v%l)}}for(const y of e){h=a?h:y.start;let v=n[h%l],_;for(f=h+1;f<=y.end;f++){const g=n[f%l];_=tw(r.setContext(Mi(i,{type:"segment",p0:v,p1:g,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),t5(_,c)&&d(h,f-1,y.loop,c),v=g,c=_}h<f-1&&d(h,f-1,y.loop,c)}return u}function tw(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function t5(t,e){if(!e)return!1;const n=[],r=function(i,s){return qy(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Wu(t,e,n){return t.options.clip?t[n]:e[n]}function n5(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Wu(n,e,"left"),right:Wu(n,e,"right"),top:Wu(r,e,"top"),bottom:Wu(r,e,"bottom")}:e}function r5(t,e){const n=e._clip;if(n.disabled)return!1;const r=n5(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class i5{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=LS.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var br=new i5;const nw="transparent",s5={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=Wb(t||nw),i=r.valid&&Wb(e||nw);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class o5{constructor(e,n,r,i){const s=n[r];i=$u([e.to,i,s,e.from]);const o=$u([e.from,s,i]);this._active=!0,this._fn=e.fn||s5[e.type||typeof o],this._easing=sl[e.easing]||sl.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=$u([e.to,n,i,e.from]),this._from=$u([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class XS{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!je(e))return;const n=Object.keys(ft.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!je(s))return;const o={};for(const a of n)o[a]=s[a];(ot(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=l5(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&a5(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const u=o[l];if(u.charAt(0)==="$")continue;if(u==="options"){i.push(...this._animateOptions(e,n));continue}const c=n[u];let h=s[u];const f=r.get(u);if(h)if(f&&h.active()){h.update(f,c,a);continue}else h.cancel();if(!f||!f.duration){e[u]=c;continue}s[u]=h=new o5(f,e,u,c),i.push(h)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return br.add(this._chart,r),!0}}function a5(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function l5(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function rw(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function u5(t,e,n){if(n===!1)return!1;const r=rw(t,n),i=rw(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function c5(t){let e,n,r,i;return je(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function JS(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function iw(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,u;if(e===null)return;let c=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(c=!0,r.all)continue;break}u=t.values[l],fn(u)&&(s||e===0||hr(e)===hr(u))&&(e+=u)}return!c&&!r.all?0:e}function h5(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,u,c;for(l=0,u=o.length;l<u;++l)c=o[l],a[l]={[i]:c,[s]:t[c]};return a}function zd(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function f5(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function d5(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function p5(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function sw(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function ow(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,u=o.axis,c=f5(s,o,r),h=e.length;let f;for(let d=0;d<h;++d){const y=e[d],{[l]:v,[u]:_}=y,g=y._stacks||(y._stacks={});f=g[u]=p5(i,c,v),f[a]=_,f._top=sw(f,o,!0,r.type),f._bottom=sw(f,o,!1,r.type);const m=f._visualValues||(f._visualValues={});m[a]=_}}function Ud(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function g5(t,e){return Mi(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function m5(t,e,n){return Mi(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function va(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const $d=t=>t==="reset"||t==="none",aw=(t,e)=>e?t:Object.assign({},t),y5=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:JS(n,!0),values:null};class fr{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=zd(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&va(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(h,f,d,y)=>h==="x"?f:h==="r"?y:d,s=n.xAxisID=Ie(r.xAxisID,Ud(e,"x")),o=n.yAxisID=Ie(r.yAxisID,Ud(e,"y")),a=n.rAxisID=Ie(r.rAxisID,Ud(e,"r")),l=n.indexAxis,u=n.iAxisID=i(l,s,o,a),c=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&$b(this._data,this),e._stacked&&va(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(je(n)){const i=this._cachedMeta;this._data=h5(n,i)}else if(r!==n){if(r){$b(r,this);const i=this._cachedMeta;va(i),i._parsed=[]}n&&Object.isExtensible(n)&&Xj(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=zd(n.vScale,n),n.stack!==r.stack&&(i=!0,va(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&(ow(this,n._parsed),n._stacked=zd(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,u=e>0&&r._parsed[e-1],c,h,f;if(this._parsing===!1)r._parsed=i,r._sorted=!0,f=i;else{ot(i[e])?f=this.parseArrayData(r,i,e,n):je(i[e])?f=this.parseObjectData(r,i,e,n):f=this.parsePrimitiveData(r,i,e,n);const d=()=>h[a]===null||u&&h[a]<u[a];for(c=0;c<n;++c)r._parsed[c+e]=h=f[c],l&&(d()&&(l=!1),u=h);r._sorted=l}o&&ow(this,f)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,u=s.getLabels(),c=s===o,h=new Array(i);let f,d,y;for(f=0,d=i;f<d;++f)y=f+r,h[f]={[a]:c||s.parse(u[y],y),[l]:o.parse(n[y],y)};return h}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,u,c,h;for(l=0,u=i;l<u;++l)c=l+r,h=n[c],a[l]={x:s.parse(h[0],c),y:o.parse(h[1],c)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(i);let c,h,f,d;for(c=0,h=i;c<h;++c)f=c+r,d=n[f],u[c]={x:s.parse(Oi(d,a),f),y:o.parse(Oi(d,l),f)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:JS(i,!0),values:n._stacks[e.axis]._visualValues};return iw(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=iw(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=y5(n,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:h}=d5(a);let f,d;function y(){d=i[f];const v=d[a.axis];return!fn(d[e.axis])||c>v||h<v}for(f=0;f<o&&!(!y()&&(this.updateRangeFromParsed(u,e,d,l),s));++f);if(s){for(f=o-1;f>=0;--f)if(!y()){this.updateRangeFromParsed(u,e,d,l);break}}return u}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],fn(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=c5(Ie(this.options.clip,u5(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,u=this.options.drawActiveElementsOnTop;let c;for(r.dataset&&r.dataset.draw(e,s,a,l),c=a;c<a+l;++c){const h=i[c];h.hidden||(h.active&&u?o.push(h):h.draw(e,s))}for(c=0;c<o.length;++c)o[c].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=m5(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=g5(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&Dl(r);if(a)return aw(a,l);const u=this.chart.config,c=u.datasetElementScopeKeys(this._type,e),h=i?[`${e}Hover`,"hover",e,""]:[e,""],f=u.getOptionScopes(this.getDataset(),c),d=Object.keys(ft.elements[e]),y=()=>this.getContext(r,i,n),v=u.resolveNamedOptions(f,d,y,h);return v.$shared&&(v.$shared=l,s[o]=Object.freeze(aw(v,l))),v}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const c=this.chart.config,h=c.datasetAnimationScopeKeys(this._type,n),f=c.getOptionScopes(this.getDataset(),h);l=c.createResolver(f,this.getContext(e,r,n))}const u=new XS(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||$d(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){$d(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!$d(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=u=>{for(u.length+=n,a=u.length-1;a>=o;a--)u[a]=u[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&va(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ce(fr,"defaults",{}),ce(fr,"datasetElementType",null),ce(fr,"dataElementType",null);function v5(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=MS(r.sort((i,s)=>i-s))}return t._cache.$bar}function _5(t){const e=t.iScale,n=v5(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(Dl(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function b5(t,e,n,r){const i=n.barThickness;let s,o;return De(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function w5(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const u=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:u}}function x5(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,u=a;Math.abs(o)>Math.abs(a)&&(l=a,u=o),e[n.axis]=u,e._custom={barStart:l,barEnd:u,start:i,end:s,min:o,max:a}}function ZS(t,e,n,r){return ot(t)?x5(t,e,n,r):e[n.axis]=n.parse(t,r),e}function lw(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let u,c,h,f;for(u=n,c=n+r;u<c;++u)f=e[u],h={},h[i.axis]=a||i.parse(o[u],u),l.push(ZS(f,h,s,u));return l}function qd(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function E5(t,e,n){return t!==0?hr(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function T5(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function k5(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:u,bottom:c}=T5(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=u:(n._bottom||0)===r?i=c:(s[uw(c,o,a,l)]=!0,i=u)),s[uw(i,o,a,l)]=!0,t.borderSkipped=s}function uw(t,e,n,r){return r?(t=S5(t,e,n),t=cw(t,n,e)):t=cw(t,e,n),t}function S5(t,e,n){return t===e?n:t===n?e:t}function cw(t,e,n){return t==="start"?e:t==="end"?n:t}function A5(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Ec extends fr{parsePrimitiveData(e,n,r,i){return lw(e,n,r,i)}parseArrayData(e,n,r,i){return lw(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=s.axis==="x"?a:l,c=o.axis==="x"?a:l,h=[];let f,d,y,v;for(f=r,d=r+i;f<d;++f)v=n[f],y={},y[s.axis]=s.parse(Oi(v,u),f),h.push(ZS(Oi(v,c),y,o,f));return h}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=qd(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),u=a.isHorizontal(),c=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(n,i);for(let d=n;d<n+r;d++){const y=this.getParsed(d),v=s||De(y[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(d),_=this._calculateBarIndexPixels(d,c),g=(y._stacks||{})[a.axis],m={horizontal:u,base:v.base,enableBorderRadius:!g||qd(y._custom)||o===g._top||o===g._bottom,x:u?v.head:_.center,y:u?_.center:v.head,height:u?_.size:Math.abs(v.size),width:u?Math.abs(v.size):_.size};f&&(m.options=h||this.resolveDataElementOptions(d,e[d].active?"active":i));const w=m.options||e[d].options;k5(m,w,g,o),A5(m,w,c.ratio),this.updateElement(e[d],d,m,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(c=>c.controller.options.grouped),s=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[r.axis],u=c=>{const h=c._parsed.find(d=>d[r.axis]===l),f=h&&h[c.vScale.axis];if(De(f)||isNaN(f))return!0};for(const c of i)if(!(n!==void 0&&u(c))&&((s===!1||o.indexOf(c.stack)===-1||s===void 0&&c.stack===void 0)&&o.push(c.stack),c.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||_5(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),u=l._custom,c=qd(u);let h=l[n.axis],f=0,d=r?this.applyStack(n,l,r):h,y,v;d!==h&&(f=d-h,d=h),c&&(h=u.barStart,d=u.barEnd-u.barStart,h!==0&&hr(h)!==hr(u.barEnd)&&(f=0),f+=h);const _=!De(s)&&!c?s:f;let g=n.getPixelForValue(_);if(this.chart.getDataVisibility(e)?y=n.getPixelForValue(f+d):y=g,v=y-g,Math.abs(v)<o){v=E5(v,n,a)*o,h===a&&(g-=v/2);const m=n.getPixelForDecimal(0),w=n.getPixelForDecimal(1),b=Math.min(m,w),T=Math.max(m,w);g=Math.max(Math.min(g,T),b),y=g+v,r&&!c&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(y)-n.getValueForPixel(g))}if(g===n.getPixelForValue(a)){const m=hr(v)*n.getLineWidthForValue(a)/2;g+=m,v-=m}return{size:v,base:g,head:y,center:y+v/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=Ie(i.maxBarThickness,1/0);let a,l;if(n.grouped){const u=s?this._getStackCount(e):n.stackCount,c=i.barThickness==="flex"?w5(e,n,i,u):b5(e,n,i,u),h=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=c.start+c.chunk*h+c.chunk/2,l=Math.min(o,c.chunk*c.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}ce(Ec,"id","bar"),ce(Ec,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ce(Ec,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function I5(t,e,n){let r=1,i=1,s=0,o=0;if(e<rt){const a=t,l=a+e,u=Math.cos(a),c=Math.sin(a),h=Math.cos(l),f=Math.sin(l),d=(w,b,T)=>Ml(w,a,l,!0)?1:Math.max(b,b*n,T,T*n),y=(w,b,T)=>Ml(w,a,l,!0)?-1:Math.min(b,b*n,T,T*n),v=d(0,u,h),_=d(gt,c,f),g=y(Ze,u,h),m=y(Ze+gt,c,f);r=(v-g)/2,i=(_-m)/2,s=-(v+g)/2,o=-(_+m)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class Na extends fr{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(je(r[e])){const{key:l="value"}=this._parsing;s=u=>+Oi(r[u],l)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return Un(this.options.rotation-90)}_getCircumference(){return Un(this.options.circumference)}_getRotationExtents(){let e=rt,n=-rt;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(Mj(this.options.cutout,a),1),u=this._getRingWeight(this.index),{circumference:c,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:d,offsetX:y,offsetY:v}=I5(h,c,l),_=(r.width-o)/f,g=(r.height-o)/d,m=Math.max(Math.min(_,g)/2,0),w=OS(this.options.radius,m),b=Math.max(w*l,0),T=(w-b)/this._getVisibleDatasetWeightTotal();this.offsetX=y*w,this.offsetY=v*w,i.total=this.calculateTotal(),this.outerRadius=w-T*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-T*u,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/rt)}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,u=o.options.animation,c=(a.left+a.right)/2,h=(a.top+a.bottom)/2,f=s&&u.animateScale,d=f?0:this.innerRadius,y=f?0:this.outerRadius,{sharedOptions:v,includeOptions:_}=this._getSharedOptions(n,i);let g=this._getRotation(),m;for(m=0;m<n;++m)g+=this._circumference(m,s);for(m=n;m<n+r;++m){const w=this._circumference(m,s),b=e[m],T={x:c+this.offsetX,y:h+this.offsetY,startAngle:g,endAngle:g+w,circumference:w,outerRadius:y,innerRadius:d};_&&(T.options=v||this.resolveDataElementOptions(m,b.active?"active":i)),g+=w,this.updateElement(b,m,T,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?rt*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=wf(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(Ie(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ce(Na,"id","doughnut"),ce(Na,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ce(Na,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),ce(Na,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class Tc extends fr{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=VS(n,i,o);this._drawStart=a,this._drawCount=l,FS(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:u},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:c,includeOptions:h}=this._getSharedOptions(n,i),f=o.axis,d=a.axis,{spanGaps:y,segment:v}=this.options,_=Io(y)?y:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||s||i==="none",m=n+r,w=e.length;let b=n>0&&this.getParsed(n-1);for(let T=0;T<w;++T){const C=e[T],k=g?C:{};if(T<n||T>=m){k.skip=!0;continue}const x=this.getParsed(T),P=De(x[d]),S=k[f]=o.getPixelForValue(x[f],T),E=k[d]=s||P?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,x,l):x[d],T);k.skip=isNaN(S)||isNaN(E)||P,k.stop=T>0&&Math.abs(x[f]-b[f])>_,v&&(k.parsed=x,k.raw=u.data[T]),h&&(k.options=c||this.resolveDataElementOptions(T,C.active?"active":i)),g||this.updateElement(C,T,k,i),b=x}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ce(Tc,"id","line"),ce(Tc,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ce(Tc,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class kc extends fr{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=wf(n._parsed[e].r,r.options.locale);return{label:i[e]||"",value:s}}parseObjectData(e,n,r,i){return WS.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,r=e.options,i=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(i/2,0),o=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,l=o.options.animation,u=this._cachedMeta.rScale,c=u.xCenter,h=u.yCenter,f=u.getIndexAngle(0)-.5*Ze;let d=f,y;const v=360/this.countVisibleElements();for(y=0;y<n;++y)d+=this._computeAngle(y,i,v);for(y=n;y<n+r;y++){const _=e[y];let g=d,m=d+this._computeAngle(y,i,v),w=o.getDataVisibility(y)?u.getDistanceFromCenterForValue(this.getParsed(y).r):0;d=m,s&&(l.animateScale&&(w=0),l.animateRotate&&(g=m=f));const b={x:c,y:h,innerRadius:0,outerRadius:w,startAngle:g,endAngle:m,options:this.resolveDataElementOptions(y,_.active?"active":i)};this.updateElement(_,y,b,i)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?Un(this.resolveDataElementOptions(e,n).angle||r):0}}ce(kc,"id","polarArea"),ce(kc,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),ce(kc,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Tg extends Na{}ce(Tg,"id","pie"),ce(Tg,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Sc extends fr{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,i){return WS.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta,r=n.dataset,i=n.data||[],s=n.iScale.getLabels();if(r.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===i.length,options:o};this.updateElement(r,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,n,r,i){const s=this._cachedMeta.rScale,o=i==="reset";for(let a=n;a<n+r;a++){const l=e[a],u=this.resolveDataElementOptions(a,l.active?"active":i),c=s.getPointPositionForValue(a,this.getParsed(a).r),h=o?s.xCenter:c.x,f=o?s.yCenter:c.y,d={x:h,y:f,angle:c.angle,skip:isNaN(h)||isNaN(f),options:u};this.updateElement(l,a,d,i)}}}ce(Sc,"id","radar"),ce(Sc,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),ce(Sc,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Ac extends fr{getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:r[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:r=[]}=n,i=this.chart._animationsDisabled;let{start:s,count:o}=VS(n,r,i);if(this._drawStart=s,this._drawCount=o,FS(n)&&(s=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=r;const u=this.resolveDatasetElementOptions(e);u.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:u},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(r,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,c=this.resolveDataElementOptions(n,i),h=this.getSharedOptions(c),f=this.includeOptions(i,h),d=o.axis,y=a.axis,{spanGaps:v,segment:_}=this.options,g=Io(v)?v:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||s||i==="none";let w=n>0&&this.getParsed(n-1);for(let b=n;b<n+r;++b){const T=e[b],C=this.getParsed(b),k=m?T:{},x=De(C[y]),P=k[d]=o.getPixelForValue(C[d],b),S=k[y]=s||x?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,C,l):C[y],b);k.skip=isNaN(P)||isNaN(S)||x,k.stop=b>0&&Math.abs(C[d]-w[d])>g,_&&(k.parsed=C,k.raw=u.data[b]),f&&(k.options=h||this.resolveDataElementOptions(b,T.active?"active":i)),m||this.updateElement(T,b,k,i),w=C}this.updateSharedOptions(h,i,c)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const r=e.dataset,i=r.options&&r.options.borderWidth||0;if(!n.length)return i;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,s,o)/2}}ce(Ac,"id","scatter"),ce(Ac,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),ce(Ac,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function Ui(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class ev{constructor(e){ce(this,"options");this.options=e||{}}static override(e){Object.assign(ev.prototype,e)}init(){}formats(){return Ui()}parse(){return Ui()}format(){return Ui()}add(){return Ui()}diff(){return Ui()}startOf(){return Ui()}endOf(){return Ui()}}var P5={_date:ev};function O5(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const u=a._reversePixels?Yj:rs;if(r){if(i._sharedOptions){const c=s[0],h=typeof c.getRange=="function"&&c.getRange(e);if(h){const f=u(s,e,n-h),d=u(s,e,n+h);return{lo:f.lo,hi:d.hi}}}}else{const c=u(s,e,n);if(l){const{vScale:h}=i._cachedMeta,{_parsed:f}=t,d=f.slice(0,c.lo+1).reverse().findIndex(v=>!De(v[h.axis]));c.lo-=Math.max(0,d);const y=f.slice(c.hi).findIndex(v=>!De(v[h.axis]));c.hi+=Math.max(0,y)}return c}}return{lo:0,hi:s.length-1}}function Ef(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:u,data:c}=s[a],{lo:h,hi:f}=O5(s[a],e,o,i);for(let d=h;d<=f;++d){const y=c[d];y.skip||r(y,u,d)}}}function C5(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Hd(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||Ef(t,n,e,function(a,l,u){!i&&!Nr(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:u})},!0),s}function R5(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:u,endAngle:c}=o.getProps(["startAngle","endAngle"],r),{angle:h}=NS(o,{x:e.x,y:e.y});Ml(h,u,c)&&i.push({element:o,datasetIndex:a,index:l})}return Ef(t,n,e,s),i}function N5(t,e,n,r,i,s){let o=[];const a=C5(n);let l=Number.POSITIVE_INFINITY;function u(c,h,f){const d=c.inRange(e.x,e.y,i);if(r&&!d)return;const y=c.getCenterPoint(i);if(!(!!s||t.isPointInArea(y))&&!d)return;const _=a(e,y);_<l?(o=[{element:c,datasetIndex:h,index:f}],l=_):_===l&&o.push({element:c,datasetIndex:h,index:f})}return Ef(t,n,e,u),o}function Wd(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?R5(t,e,n,i):N5(t,e,n,r,i,s)}function hw(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Ef(t,n,e,(l,u,c)=>{l[o]&&l[o](e[n],i)&&(s.push({element:l,datasetIndex:u,index:c}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var D5={modes:{index(t,e,n,r){const i=Gi(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Hd(t,i,s,r,o):Wd(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const c=a[0].index,h=u.data[c];h&&!h.skip&&l.push({element:h,datasetIndex:u.index,index:c})}),l):[]},dataset(t,e,n,r){const i=Gi(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Hd(t,i,s,r,o):Wd(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,u=t.getDatasetMeta(l).data;a=[];for(let c=0;c<u.length;++c)a.push({element:u[c],datasetIndex:l,index:c})}return a},point(t,e,n,r){const i=Gi(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Hd(t,i,s,r,o)},nearest(t,e,n,r){const i=Gi(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Wd(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=Gi(e,t);return hw(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=Gi(e,t);return hw(t,i,"y",n.intersect,r)}}};const eA=["left","top","right","bottom"];function _a(t,e){return t.filter(n=>n.pos===e)}function fw(t,e){return t.filter(n=>eA.indexOf(n.pos)===-1&&n.box.axis===e)}function ba(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function M5(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function L5(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!eA.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function j5(t,e){const n=L5(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,u=n[a.stack],c=u&&a.stackWeight/u.weight;a.horizontal?(a.width=c?c*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=c?c*i:l&&e.availableHeight)}return n}function V5(t){const e=M5(t),n=ba(e.filter(u=>u.box.fullSize),!0),r=ba(_a(e,"left"),!0),i=ba(_a(e,"right")),s=ba(_a(e,"top"),!0),o=ba(_a(e,"bottom")),a=fw(e,"x"),l=fw(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:_a(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function dw(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function tA(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function F5(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!je(i)){n.size&&(t[i]-=n.size);const h=r[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?s.height:s.width),n.size=h.size/h.count,t[i]+=n.size}s.getPadding&&tA(o,s.getPadding());const a=Math.max(0,e.outerWidth-dw(o,t,"left","right")),l=Math.max(0,e.outerHeight-dw(o,t,"top","bottom")),u=a!==t.w,c=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:u,other:c}:{same:c,other:u}}function B5(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function z5(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function Da(t,e,n,r){const i=[];let s,o,a,l,u,c;for(s=0,o=t.length,u=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,z5(a.horizontal,e));const{same:h,other:f}=F5(e,n,a,r);u|=h&&i.length,c=c||f,l.fullSize||i.push(a)}return u&&Da(i,e,n,r)||c}function Ku(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function pw(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,u=r[a.stack]||{placed:0,weight:1},c=a.stackWeight/u.weight||1;if(a.horizontal){const h=e.w*c,f=u.size||l.height;Dl(u.start)&&(o=u.start),l.fullSize?Ku(l,i.left,o,n.outerWidth-i.right-i.left,f):Ku(l,e.left+u.placed,o,h,f),u.start=o,u.placed+=h,o=l.bottom}else{const h=e.h*c,f=u.size||l.width;Dl(u.start)&&(s=u.start),l.fullSize?Ku(l,s,i.top,f,n.outerHeight-i.bottom-i.top):Ku(l,s,e.top+u.placed,f,h),u.start=s,u.placed+=h,s=l.right}}e.x=s,e.y=o}var In={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=Yt(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=V5(t.boxes),l=a.vertical,u=a.horizontal;ze(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const c=l.reduce((v,_)=>_.box.options&&_.box.options.display===!1?v:v+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/c,hBoxMaxHeight:o/2}),f=Object.assign({},i);tA(f,Yt(r));const d=Object.assign({maxPadding:f,w:s,h:o,x:i.left,y:i.top},i),y=j5(l.concat(u),h);Da(a.fullSize,d,h,y),Da(l,d,h,y),Da(u,d,h,y)&&Da(l,d,h,y),B5(d),pw(a.leftAndTop,d,h,y),d.x+=d.w,d.y+=d.h,pw(a.rightAndBottom,d,h,y),t.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},ze(a.chartArea,v=>{const _=v.box;Object.assign(_,t.chartArea),_.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})})}};class nA{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class U5 extends nA{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Ic="$chartjs",$5={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},gw=t=>t===null||t==="";function q5(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[Ic]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",gw(i)){const s=Jb(t,"width");s!==void 0&&(t.width=s)}if(gw(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=Jb(t,"height");s!==void 0&&(t.height=s)}return t}const rA=$3?{passive:!0}:!1;function H5(t,e,n){t&&t.addEventListener(e,n,rA)}function W5(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,rA)}function K5(t,e){const n=$5[t.type]||t.type,{x:r,y:i}=Gi(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function Ph(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function G5(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Ph(a.addedNodes,r),o=o&&!Ph(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function Y5(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Ph(a.removedNodes,r),o=o&&!Ph(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const jl=new Map;let mw=0;function iA(){const t=window.devicePixelRatio;t!==mw&&(mw=t,jl.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function Q5(t,e){jl.size||window.addEventListener("resize",iA),jl.set(t,e)}function X5(t){jl.delete(t),jl.size||window.removeEventListener("resize",iA)}function J5(t,e,n){const r=t.canvas,i=r&&Zy(r);if(!i)return;const s=jS((a,l)=>{const u=i.clientWidth;n(a,l),u<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,c=l.contentRect.height;u===0&&c===0||s(u,c)});return o.observe(i),Q5(t,s),o}function Kd(t,e,n){n&&n.disconnect(),e==="resize"&&X5(t)}function Z5(t,e,n){const r=t.canvas,i=jS(s=>{t.ctx!==null&&n(K5(s,t))},t);return H5(r,e,i),i}class eV extends nA{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(q5(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Ic])return!1;const r=n[Ic].initial;["height","width"].forEach(s=>{const o=r[s];De(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[Ic],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:G5,detach:Y5,resize:J5}[n]||Z5;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:Kd,detach:Kd,resize:Kd}[n]||W5)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return U3(e,n,r,i)}isAttached(e){const n=e&&Zy(e);return!!(n&&n.isConnected)}}function tV(t){return!Jy()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?U5:eV}class Gn{constructor(){ce(this,"x");ce(this,"y");ce(this,"active",!1);ce(this,"options");ce(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Io(this.x)&&Io(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}}ce(Gn,"defaults",{}),ce(Gn,"defaultRoutes");function nV(t,e){const n=t.options.ticks,r=rV(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?sV(e):[],o=s.length,a=s[0],l=s[o-1],u=[];if(o>i)return oV(e,u,s,o/i),u;const c=iV(s,e,i);if(o>0){let h,f;const d=o>1?Math.round((l-a)/(o-1)):null;for(Gu(e,u,c,De(d)?0:a-d,a),h=0,f=o-1;h<f;h++)Gu(e,u,c,s[h],s[h+1]);return Gu(e,u,c,l,De(d)?e.length:l+d),u}return Gu(e,u,c),u}function rV(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function iV(t,e,n){const r=aV(t),i=e.length/n;if(!r)return Math.max(i,1);const s=$j(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function sV(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function oV(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function Gu(t,e,n,r,i){const s=Ie(r,0),o=Math.min(Ie(i,t.length),t.length);let a=0,l,u,c;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),c=s;c<0;)a++,c=Math.round(s+a*n);for(u=Math.max(s,0);u<o;u++)u===c&&(e.push(t[u]),a++,c=Math.round(s+a*n))}function aV(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const lV=t=>t==="left"?"right":t==="right"?"left":t,yw=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,vw=(t,e)=>Math.min(e||t,t);function _w(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function uV(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),u;if(!(n&&(r===1?u=Math.max(l-s,o-l):e===0?u=(t.getPixelForTick(1)-l)/2:u=(l-t.getPixelForTick(i-1))/2,l+=i<e?u:-u,l<s-a||l>o+a)))return l}function cV(t,e){ze(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function wa(t){return t.drawTicks?t.tickLength:0}function bw(t,e){if(!t.display)return 0;const n=Tt(t.font,e),r=Yt(t.padding);return(ot(t.text)?t.text.length:1)*n.lineHeight+r.height}function hV(t,e){return Mi(t,{scale:e,type:"scale"})}function fV(t,e,n){return Mi(t,{tick:n,index:e,type:"tick"})}function dV(t,e,n){let r=$y(t);return(n&&e!=="right"||!n&&e==="right")&&(r=lV(r)),r}function pV(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:u,scales:c}=l;let h=0,f,d,y;const v=o-i,_=a-s;if(t.isHorizontal()){if(d=zt(r,s,a),je(n)){const g=Object.keys(n)[0],m=n[g];y=c[g].getPixelForValue(m)+v-e}else n==="center"?y=(u.bottom+u.top)/2+v-e:y=yw(t,n,e);f=a-s}else{if(je(n)){const g=Object.keys(n)[0],m=n[g];d=c[g].getPixelForValue(m)-_+e}else n==="center"?d=(u.left+u.right)/2-_+e:d=yw(t,n,e);y=zt(r,o,i),h=n==="left"?-gt:gt}return{titleX:d,titleY:y,maxWidth:f,rotation:h}}class Uo extends Gn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=Jn(e,Number.POSITIVE_INFINITY),n=Jn(n,Number.NEGATIVE_INFINITY),r=Jn(r,Number.POSITIVE_INFINITY),i=Jn(i,Number.NEGATIVE_INFINITY),{min:Jn(e,r),max:Jn(n,i),minDefined:fn(e),maxDefined:fn(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:Jn(n,Jn(r,n)),max:Jn(r,Jn(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){We(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=b3(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?_w(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=nV(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){We(this.options.afterUpdate,[this])}beforeSetDimensions(){We(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){We(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),We(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){We(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=We(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){We(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){We(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=vw(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,u;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const c=this._getLabelSizes(),h=c.widest.width,f=c.highest.height,d=Ht(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/r:d/(r-1),h+6>a&&(a=d/(r-(e.offset?.5:1)),l=this.maxHeight-wa(e.grid)-n.padding-bw(e.title,this.chart.options.font),u=Math.sqrt(h*h+f*f),o=zy(Math.min(Math.asin(Ht((c.highest.height+6)/a,-1,1)),Math.asin(Ht(l/u,-1,1))-Math.asin(Ht(f/u,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){We(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){We(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=bw(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=wa(s)+l):(e.height=this.maxHeight,e.width=wa(s)+l),r.display&&this.ticks.length){const{first:u,last:c,widest:h,highest:f}=this._getLabelSizes(),d=r.padding*2,y=Un(this.labelRotation),v=Math.cos(y),_=Math.sin(y);if(a){const g=r.mirror?0:_*h.width+v*f.height;e.height=Math.min(this.maxHeight,e.height+g+d)}else{const g=r.mirror?0:v*h.width+_*f.height;e.width=Math.min(this.maxWidth,e.width+g+d)}this._calculatePadding(u,c,_,v)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const c=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,d=0;l?u?(f=i*e.width,d=r*n.height):(f=r*e.height,d=i*n.width):s==="start"?d=n.width:s==="end"?f=e.width:s!=="inner"&&(f=e.width/2,d=n.width/2),this.paddingLeft=Math.max((f-c+o)*this.width/(this.width-c),0),this.paddingRight=Math.max((d-h+o)*this.width/(this.width-h),0)}else{let c=n.height/2,h=e.height/2;s==="start"?(c=0,h=e.height):s==="end"&&(c=n.height,h=0),this.paddingTop=c+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){We(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)De(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=_w(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/vw(n,r));let u=0,c=0,h,f,d,y,v,_,g,m,w,b,T;for(h=0;h<n;h+=l){if(y=e[h].label,v=this._resolveTickFontOptions(h),i.font=_=v.string,g=s[_]=s[_]||{data:{},gc:[]},m=v.lineHeight,w=b=0,!De(y)&&!ot(y))w=Ah(i,g.data,g.gc,w,y),b=m;else if(ot(y))for(f=0,d=y.length;f<d;++f)T=y[f],!De(T)&&!ot(T)&&(w=Ah(i,g.data,g.gc,w,T),b+=m);o.push(w),a.push(b),u=Math.max(w,u),c=Math.max(b,c)}cV(s,n);const C=o.indexOf(u),k=a.indexOf(c),x=P=>({width:o[P]||0,height:a[P]||0});return{first:x(0),last:x(n-1),widest:x(C),highest:x(k),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return Gj(this._alignToPixels?zi(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=fV(this.getContext(),e,r))}return this.$context||(this.$context=hV(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Un(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,u=this.isHorizontal(),h=this.ticks.length+(l?1:0),f=wa(s),d=[],y=a.setContext(this.getContext()),v=y.display?y.width:0,_=v/2,g=function($){return zi(r,$,v)};let m,w,b,T,C,k,x,P,S,E,A,O;if(o==="top")m=g(this.bottom),k=this.bottom-f,P=m-_,E=g(e.top)+_,O=e.bottom;else if(o==="bottom")m=g(this.top),E=e.top,O=g(e.bottom)-_,k=m+_,P=this.top+f;else if(o==="left")m=g(this.right),C=this.right-f,x=m-_,S=g(e.left)+_,A=e.right;else if(o==="right")m=g(this.left),S=e.left,A=g(e.right)-_,C=m+_,x=this.left+f;else if(n==="x"){if(o==="center")m=g((e.top+e.bottom)/2+.5);else if(je(o)){const $=Object.keys(o)[0],q=o[$];m=g(this.chart.scales[$].getPixelForValue(q))}E=e.top,O=e.bottom,k=m+_,P=k+f}else if(n==="y"){if(o==="center")m=g((e.left+e.right)/2);else if(je(o)){const $=Object.keys(o)[0],q=o[$];m=g(this.chart.scales[$].getPixelForValue(q))}C=m-_,x=C-f,S=e.left,A=e.right}const M=Ie(i.ticks.maxTicksLimit,h),F=Math.max(1,Math.ceil(h/M));for(w=0;w<h;w+=F){const $=this.getContext(w),q=s.setContext($),W=a.setContext($),U=q.lineWidth,B=q.color,N=W.dash||[],V=W.dashOffset,z=q.tickWidth,G=q.tickColor,K=q.tickBorderDash||[],j=q.tickBorderDashOffset;b=uV(this,w,l),b!==void 0&&(T=zi(r,b,U),u?C=x=S=A=T:k=P=E=O=T,d.push({tx1:C,ty1:k,tx2:x,ty2:P,x1:S,y1:E,x2:A,y2:O,width:U,color:B,borderDash:N,borderDashOffset:V,tickWidth:z,tickColor:G,tickBorderDash:K,tickBorderDashOffset:j}))}return this._ticksLength=h,this._borderValue=m,d}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:c,mirror:h}=s,f=wa(r.grid),d=f+c,y=h?-c:d,v=-Un(this.labelRotation),_=[];let g,m,w,b,T,C,k,x,P,S,E,A,O="middle";if(i==="top")C=this.bottom-y,k=this._getXAxisLabelAlignment();else if(i==="bottom")C=this.top+y,k=this._getXAxisLabelAlignment();else if(i==="left"){const F=this._getYAxisLabelAlignment(f);k=F.textAlign,T=F.x}else if(i==="right"){const F=this._getYAxisLabelAlignment(f);k=F.textAlign,T=F.x}else if(n==="x"){if(i==="center")C=(e.top+e.bottom)/2+d;else if(je(i)){const F=Object.keys(i)[0],$=i[F];C=this.chart.scales[F].getPixelForValue($)+d}k=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")T=(e.left+e.right)/2-d;else if(je(i)){const F=Object.keys(i)[0],$=i[F];T=this.chart.scales[F].getPixelForValue($)}k=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?O="top":l==="end"&&(O="bottom"));const M=this._getLabelSizes();for(g=0,m=a.length;g<m;++g){w=a[g],b=w.label;const F=s.setContext(this.getContext(g));x=this.getPixelForTick(g)+s.labelOffset,P=this._resolveTickFontOptions(g),S=P.lineHeight,E=ot(b)?b.length:1;const $=E/2,q=F.color,W=F.textStrokeColor,U=F.textStrokeWidth;let B=k;o?(T=x,k==="inner"&&(g===m-1?B=this.options.reverse?"left":"right":g===0?B=this.options.reverse?"right":"left":B="center"),i==="top"?u==="near"||v!==0?A=-E*S+S/2:u==="center"?A=-M.highest.height/2-$*S+S:A=-M.highest.height+S/2:u==="near"||v!==0?A=S/2:u==="center"?A=M.highest.height/2-$*S:A=M.highest.height-E*S,h&&(A*=-1),v!==0&&!F.showLabelBackdrop&&(T+=S/2*Math.sin(v))):(C=x,A=(1-E)*S/2);let N;if(F.showLabelBackdrop){const V=Yt(F.backdropPadding),z=M.heights[g],G=M.widths[g];let K=A-V.top,j=0-V.left;switch(O){case"middle":K-=z/2;break;case"bottom":K-=z;break}switch(k){case"center":j-=G/2;break;case"right":j-=G;break;case"inner":g===m-1?j-=G:g>0&&(j-=G/2);break}N={left:j,top:K,width:G+V.width,height:z+V.height,color:F.backdropColor}}_.push({label:b,font:P,textOffset:A,options:{rotation:v,color:q,strokeColor:W,strokeWidth:U,textAlign:B,textBaseline:O,translation:[T,C],backdrop:N}})}return _}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Un(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let u,c;return n==="left"?i?(c=this.right+s,r==="near"?u="left":r==="center"?(u="center",c+=l/2):(u="right",c+=l)):(c=this.right-a,r==="near"?u="right":r==="center"?(u="center",c-=l/2):(u="left",c=this.left)):n==="right"?i?(c=this.left+s,r==="near"?u="right":r==="center"?(u="center",c-=l/2):(u="left",c-=l)):(c=this.left+a,r==="near"?u="left":r==="center"?(u="center",c+=l/2):(u="right",c=this.right)):u="right",{textAlign:u,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,u,c)=>{!c.width||!c.color||(r.save(),r.lineWidth=c.width,r.strokeStyle=c.color,r.setLineDash(c.borderDash||[]),r.lineDashOffset=c.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(u.x,u.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,c,h,f;this.isHorizontal()?(u=zi(e,this.left,o)-o/2,c=zi(e,this.right,a)+a/2,h=f=l):(h=zi(e,this.top,o)-o/2,f=zi(e,this.bottom,a)+a/2,u=c=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(u,h),n.lineTo(c,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Wy(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,u=o.label,c=o.textOffset;ks(r,u,0,c,l,a)}i&&Ky(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=Tt(r.font),o=Yt(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||je(n)?(l+=o.bottom,ot(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:u,titleY:c,maxWidth:h,rotation:f}=pV(this,l,n,a);ks(e,r.text,0,0,s,{color:r.color,maxWidth:h,rotation:f,textAlign:dV(a,n,i),textBaseline:"middle",translation:[u,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=Ie(e.grid&&e.grid.z,-1),i=Ie(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Uo.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Tt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Yu{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;yV(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,gV(e,o,r),this.override&&ft.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in ft[i]&&(delete ft[i][r],this.override&&delete Ts[r])}}function gV(t,e,n){const r=Nl(Object.create(null),[n?ft.get(n):{},ft.get(e),t.defaults]);ft.set(e,r),t.defaultRoutes&&mV(e,t.defaultRoutes),t.descriptors&&ft.describe(e,t.descriptors)}function mV(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");ft.route(s,i,l,a)})}function yV(t){return"id"in t&&"defaults"in t}class vV{constructor(){this.controllers=new Yu(fr,"datasets",!0),this.elements=new Yu(Gn,"elements"),this.plugins=new Yu(Object,"plugins"),this.scales=new Yu(Uo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):ze(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=By(e);We(r["before"+i],[],r),n[e](r),We(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var rr=new vV;class _V{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(We(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){De(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=Ie(r.options&&r.options.plugins,{}),s=bV(r);return i===!1&&!n?[]:xV(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function bV(t){const e={},n=[],r=Object.keys(rr.plugins.items);for(let s=0;s<r.length;s++)n.push(rr.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function wV(t,e){return!e&&t===!1?null:t===!0?{}:t}function xV(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,u=wV(r[l],i);u!==null&&s.push({plugin:a,options:EV(t.config,{plugin:a,local:n[l]},u,o)})}return s}function EV(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function kg(t,e){const n=ft.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function TV(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function kV(t,e){return t===e?"_index_":"_value_"}function ww(t){if(t==="x"||t==="y"||t==="r")return t}function SV(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Sg(t,...e){if(ww(t))return t;for(const n of e){const r=n.axis||SV(n.position)||t.length>1&&ww(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function xw(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function AV(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return xw(t,"x",n[0])||xw(t,"y",n[0])}return{}}function IV(t,e){const n=Ts[t.type]||{scales:{}},r=e.scales||{},i=kg(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!je(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Sg(o,a,AV(o,t),ft.scales[a.type]),u=kV(l,i),c=n.scales||{};s[o]=rl(Object.create(null),[{axis:l},a,c[l],c[u]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||kg(a,e),c=(Ts[a]||{}).scales||{};Object.keys(c).forEach(h=>{const f=TV(h,l),d=o[f+"AxisID"]||f;s[d]=s[d]||Object.create(null),rl(s[d],[{axis:f},r[d],c[h]])})}),Object.keys(s).forEach(o=>{const a=s[o];rl(a,[ft.scales[a.type],ft.scale])}),s}function sA(t){const e=t.options||(t.options={});e.plugins=Ie(e.plugins,{}),e.scales=IV(t,e)}function oA(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function PV(t){return t=t||{},t.data=oA(t.data),sA(t),t}const Ew=new Map,aA=new Set;function Qu(t,e){let n=Ew.get(t);return n||(n=e(),Ew.set(t,n),aA.add(n)),n}const xa=(t,e,n)=>{const r=Oi(e,n);r!==void 0&&t.add(r)};class OV{constructor(e){this._config=PV(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=oA(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),sA(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Qu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Qu(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Qu(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return Qu(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(c=>{e&&(l.add(e),c.forEach(h=>xa(l,e,h))),c.forEach(h=>xa(l,i,h)),c.forEach(h=>xa(l,Ts[s]||{},h)),c.forEach(h=>xa(l,ft,h)),c.forEach(h=>xa(l,xg,h))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),aA.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:e,type:n}=this;return[e,Ts[n]||{},ft.datasets[n]||{},{type:n},ft,xg]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=Tw(this._resolverCache,e,i);let l=o;if(RV(o,n)){s.$shared=!1,r=Ci(r)?r():r;const u=this.createResolver(e,r,a);l=Po(o,r,u)}for(const u of n)s[u]=l[u];return s}createResolver(e,n,r=[""],i){const{resolver:s}=Tw(this._resolverCache,e,r);return je(n)?Po(s,n,void 0,i):s}}function Tw(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:Yy(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const CV=t=>je(t)&&Object.getOwnPropertyNames(t).some(e=>Ci(t[e]));function RV(t,e){const{isScriptable:n,isIndexable:r}=US(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(Ci(a)||CV(a))||o&&ot(a))return!0}return!1}var NV="4.4.9";const DV=["top","bottom","left","right","chartArea"];function kw(t,e){return t==="top"||t==="bottom"||DV.indexOf(t)===-1&&e==="x"}function Sw(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function Aw(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),We(n&&n.onComplete,[t],e)}function MV(t){const e=t.chart,n=e.options.animation;We(n&&n.onProgress,[t],e)}function lA(t){return Jy()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Pc={},Iw=t=>{const e=lA(t);return Object.values(Pc).filter(n=>n.canvas===e).pop()};function LV(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function jV(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var Jr;let Tf=(Jr=class{static register(...e){rr.add(...e),Pw()}static unregister(...e){rr.remove(...e),Pw()}constructor(e,n){const r=this.config=new OV(n),i=lA(e),s=Iw(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||tV(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,u=l&&l.height,c=l&&l.width;if(this.id=Dj(),this.ctx=a,this.canvas=l,this.width=c,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new _V,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Jj(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Pc[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}br.listen(this,"complete",Aw),br.listen(this,"progress",MV),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return De(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return rr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Xb(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Gb(this.canvas,this.ctx),this}stop(){return br.stop(this),this}resize(e,n){br.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Xb(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),We(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ze(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Sg(o,a),u=l==="r",c=l==="x";return{options:a,dposition:u?"chartArea":c?"bottom":"left",dtype:u?"radialLinear":c?"category":"linear"}}))),ze(s,o=>{const a=o.options,l=a.id,u=Sg(l,a),c=Ie(a.type,o.dtype);(a.position===void 0||kw(a.position,u)!==kw(o.dposition))&&(a.position=o.dposition),i[l]=!0;let h=null;if(l in r&&r[l].type===c)h=r[l];else{const f=rr.getScale(c);h=new f({id:l,type:c,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(a,e)}),ze(i,(o,a)=>{o||delete r[a]}),ze(r,o=>{In.configure(this,o,o.options),In.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(Sw("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||kg(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=rr.getController(a),{datasetElementType:u,dataElementType:c}=ft.datasets[a];Object.assign(l,{dataElementType:rr.getElement(c),datasetElementType:u&&rr.getElement(u)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ze(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,c=this.data.datasets.length;u<c;u++){const{controller:h}=this.getDatasetMeta(u),f=!i&&s.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||ze(s,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Sw("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ze(this.scales,e=>{In.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!Fb(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;LV(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!Fb(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;In.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],ze(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Ci(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(br.has(this)?this.attached&&!br.running(this)&&br.start(this):(this.draw(),Aw({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=r5(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&Wy(n,i),e.controller.draw(),i&&Ky(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Nr(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=D5.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Mi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);Dl(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),br.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Gb(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Pc[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};ze(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,u)=>{n.addEventListener(this,l,u),e[l]=u},i=(l,u)=>{e[l]&&(n.removeEventListener(this,l,u),delete e[l])},s=(l,u)=>{this.canvas&&this.resize(l,u)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){ze(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ze(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Th(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,u)=>l.filter(c=>!u.some(h=>c.datasetIndex===h.datasetIndex&&c.index===h.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=Bj(e),u=jV(e,this._lastEvent,r,l);r&&(this._lastEvent=null,We(s.onHover,[e,a,this],this),l&&We(s.onClick,[e,a,this],this));const c=!Th(a,i);return(c||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=u,c}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}},ce(Jr,"defaults",ft),ce(Jr,"instances",Pc),ce(Jr,"overrides",Ts),ce(Jr,"registry",rr),ce(Jr,"version",NV),ce(Jr,"getChart",Iw),Jr);function Pw(){return ze(Tf.instances,t=>t._plugins.invalidate())}function VV(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let u=i/a;t.beginPath(),t.arc(s,o,a,r-u,n+u),l>i?(u=i/l,t.arc(s,o,l,n+u,r-u,!0)):t.arc(s,o,i,n+gt,r-gt),t.closePath(),t.clip()}function FV(t){return Gy(t,["outerStart","outerEnd","innerStart","innerEnd"])}function BV(t,e,n,r){const i=FV(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=l=>{const u=(n-Math.min(s,l))*r/2;return Ht(l,0,Math.min(s,u))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Ht(i.innerStart,0,o),innerEnd:Ht(i.innerEnd,0,o)}}function Vs(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function Oh(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:u,innerRadius:c}=e,h=Math.max(e.outerRadius+r+n-u,0),f=c>0?c+r+n+u:0;let d=0;const y=i-l;if(r){const F=c>0?c-r:0,$=h>0?h-r:0,q=(F+$)/2,W=q!==0?y*q/(q+r):y;d=(y-W)/2}const v=Math.max(.001,y*h-n/Ze)/h,_=(y-v)/2,g=l+_+d,m=i-_-d,{outerStart:w,outerEnd:b,innerStart:T,innerEnd:C}=BV(e,f,h,m-g),k=h-w,x=h-b,P=g+w/k,S=m-b/x,E=f+T,A=f+C,O=g+T/E,M=m-C/A;if(t.beginPath(),s){const F=(P+S)/2;if(t.arc(o,a,h,P,F),t.arc(o,a,h,F,S),b>0){const U=Vs(x,S,o,a);t.arc(U.x,U.y,b,S,m+gt)}const $=Vs(A,m,o,a);if(t.lineTo($.x,$.y),C>0){const U=Vs(A,M,o,a);t.arc(U.x,U.y,C,m+gt,M+Math.PI)}const q=(m-C/f+(g+T/f))/2;if(t.arc(o,a,f,m-C/f,q,!0),t.arc(o,a,f,q,g+T/f,!0),T>0){const U=Vs(E,O,o,a);t.arc(U.x,U.y,T,O+Math.PI,g-gt)}const W=Vs(k,g,o,a);if(t.lineTo(W.x,W.y),w>0){const U=Vs(k,P,o,a);t.arc(U.x,U.y,w,g-gt,P)}}else{t.moveTo(o,a);const F=Math.cos(P)*h+o,$=Math.sin(P)*h+a;t.lineTo(F,$);const q=Math.cos(S)*h+o,W=Math.sin(S)*h+a;t.lineTo(q,W)}t.closePath()}function zV(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){Oh(t,e,n,r,l,i);for(let u=0;u<s;++u)t.fill();isNaN(a)||(l=o+(a%rt||rt))}return Oh(t,e,n,r,l,i),t.fill(),l}function UV(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:u,borderJoinStyle:c,borderDash:h,borderDashOffset:f}=l,d=l.borderAlign==="inner";if(!u)return;t.setLineDash(h||[]),t.lineDashOffset=f,d?(t.lineWidth=u*2,t.lineJoin=c||"round"):(t.lineWidth=u,t.lineJoin=c||"bevel");let y=e.endAngle;if(s){Oh(t,e,n,r,y,i);for(let v=0;v<s;++v)t.stroke();isNaN(a)||(y=o+(a%rt||rt))}d&&VV(t,e,y),s||(Oh(t,e,n,r,y,i),t.stroke())}class Ma extends Gn{constructor(n){super();ce(this,"circumference");ce(this,"endAngle");ce(this,"fullCircles");ce(this,"innerRadius");ce(this,"outerRadius");ce(this,"pixelMargin");ce(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:a}=NS(s,{x:n,y:r}),{startAngle:l,endAngle:u,innerRadius:c,outerRadius:h,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),d=(this.options.spacing+this.options.borderWidth)/2,y=Ie(f,u-l),v=Ml(o,l,u)&&l!==u,_=y>=rt||v,g=hi(a,c+d,h+d);return _&&g}getCenterPoint(n){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:u,spacing:c}=this.options,h=(s+o)/2,f=(a+l+c+u)/2;return{x:r+Math.cos(h)*f,y:i+Math.sin(h)*f}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>rt?Math.floor(i/rt):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const u=1-Math.sin(Math.min(Ze,i||0)),c=s*u;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,zV(n,this,c,o,a),UV(n,this,c,o,a),n.restore()}}ce(Ma,"id","arc"),ce(Ma,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),ce(Ma,"defaultRoutes",{backgroundColor:"backgroundColor"}),ce(Ma,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function uA(t,e,n=e){t.lineCap=Ie(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Ie(n.borderDash,e.borderDash)),t.lineDashOffset=Ie(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Ie(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Ie(n.borderWidth,e.borderWidth),t.strokeStyle=Ie(n.borderColor,e.borderColor)}function $V(t,e,n){t.lineTo(n.x,n.y)}function qV(t){return t.stepped?h3:t.tension||t.cubicInterpolationMode==="monotone"?f3:$V}function cA(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),u=Math.min(s,a),c=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:u<l&&!c?r+u-l:u-l}}function HV(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:u}=cA(i,n,r),c=qV(s);let{move:h=!0,reverse:f}=r||{},d,y,v;for(d=0;d<=u;++d)y=i[(a+(f?u-d:d))%o],!y.skip&&(h?(t.moveTo(y.x,y.y),h=!1):c(t,v,y,f,s.stepped),v=y);return l&&(y=i[(a+(f?u:0))%o],c(t,v,y,f,s.stepped)),!!l}function WV(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=cA(i,n,r),{move:l=!0,reverse:u}=r||{};let c=0,h=0,f,d,y,v,_,g;const m=b=>(o+(u?a-b:b))%s,w=()=>{v!==_&&(t.lineTo(c,_),t.lineTo(c,v),t.lineTo(c,g))};for(l&&(d=i[m(0)],t.moveTo(d.x,d.y)),f=0;f<=a;++f){if(d=i[m(f)],d.skip)continue;const b=d.x,T=d.y,C=b|0;C===y?(T<v?v=T:T>_&&(_=T),c=(h*c+b)/++h):(w(),t.lineTo(b,T),y=C,h=0,v=_=T),g=T}w()}function Ag(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?WV:HV}function KV(t){return t.stepped?q3:t.tension||t.cubicInterpolationMode==="monotone"?H3:Yi}function GV(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),uA(t,e.options),t.stroke(i)}function YV(t,e,n,r){const{segments:i,options:s}=e,o=Ag(e);for(const a of i)uA(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const QV=typeof Path2D=="function";function XV(t,e,n,r){QV&&!e.options.segment?GV(t,e,n,r):YV(t,e,n,r)}class La extends Gn{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;L3(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Z3(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=Q3(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=KV(r);let u,c;for(u=0,c=o.length;u<c;++u){const{start:h,end:f}=o[u],d=s[h],y=s[f];if(d===y){a.push(d);continue}const v=Math.abs((i-d[n])/(y[n]-d[n])),_=l(d,y,v,r.stepped);_[n]=e[n],a.push(_)}return a.length===1?a[0]:a}pathSegment(e,n,r){return Ag(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=Ag(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),XV(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ce(La,"id","line"),ce(La,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ce(La,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ce(La,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Ow(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class Oc extends Gn{constructor(n){super();ce(this,"parsed");ce(this,"skip");ce(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return Ow(this,n,"x",r)}inYRange(n,r){return Ow(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!Nr(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,Eg(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ce(Oc,"id","point"),ce(Oc,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ce(Oc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function hA(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,u,c,h;return t.horizontal?(h=o/2,a=Math.min(n,i),l=Math.max(n,i),u=r-h,c=r+h):(h=s/2,a=n-h,l=n+h,u=Math.min(r,i),c=Math.max(r,i)),{left:a,top:u,right:l,bottom:c}}function fi(t,e,n,r){return t?0:Ht(e,n,r)}function JV(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=zS(r);return{t:fi(i.top,s.top,0,n),r:fi(i.right,s.right,0,e),b:fi(i.bottom,s.bottom,0,n),l:fi(i.left,s.left,0,e)}}function ZV(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=ls(i),o=Math.min(e,n),a=t.borderSkipped,l=r||je(i);return{topLeft:fi(!l||a.top||a.left,s.topLeft,0,o),topRight:fi(!l||a.top||a.right,s.topRight,0,o),bottomLeft:fi(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:fi(!l||a.bottom||a.right,s.bottomRight,0,o)}}function eF(t){const e=hA(t),n=e.right-e.left,r=e.bottom-e.top,i=JV(t,n/2,r/2),s=ZV(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function Gd(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&hA(t,r);return a&&(i||hi(e,a.left,a.right))&&(s||hi(n,a.top,a.bottom))}function tF(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function nF(t,e){t.rect(e.x,e.y,e.w,e.h)}function Yd(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class Cc extends Gn{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=eF(this),a=tF(o.radius)?Ll:nF;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,Yd(o,n,s)),e.clip(),a(e,Yd(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,Yd(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return Gd(this,e,n,r)}inXRange(e,n){return Gd(this,e,null,n)}inYRange(e,n){return Gd(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}ce(Cc,"id","bar"),ce(Cc,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ce(Cc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Cw=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},rF=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Rw extends Gn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=We(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=Tt(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Cw(r,s);let u,c;n.font=i.string,this.isHorizontal()?(u=this.maxWidth,c=this._fitRows(o,s,a,l)+10):(c=this.maxHeight,u=this._fitCols(o,i,a,l)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],c=i+a;let h=e;s.textAlign="left",s.textBaseline="middle";let f=-1,d=-c;return this.legendItems.forEach((y,v)=>{const _=r+n/2+s.measureText(y.text).width;(v===0||u[u.length-1]+_+2*a>o)&&(h+=c,u[u.length-(v>0?0:1)]=0,d+=c,f++),l[v]={left:0,top:d,row:f,width:_,height:i},u[u.length-1]+=_+a}),h}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],c=o-e;let h=a,f=0,d=0,y=0,v=0;return this.legendItems.forEach((_,g)=>{const{itemWidth:m,itemHeight:w}=iF(r,n,s,_,i);g>0&&d+w+2*a>c&&(h+=f+a,u.push({width:f,height:d}),y+=f+a,v++,f=d=0),l[g]={left:y,top:d,col:v,width:m,height:w},f=Math.max(f,m),d+=w+a}),h+=f,u.push({width:f,height:d}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=ho(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=zt(r,this.left+i,this.right-this.lineWidths[a]);for(const u of n)a!==u.row&&(a=u.row,l=zt(r,this.left+i,this.right-this.lineWidths[a])),u.top+=this.top+e+i,u.left=o.leftForLtr(o.x(l),u.width),l+=u.width+i}else{let a=0,l=zt(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const u of n)u.col!==a&&(a=u.col,l=zt(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+i,u.left=o.leftForLtr(o.x(u.left),u.width),l+=u.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Wy(e,this),this._draw(),Ky(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=ft.color,l=ho(e.rtl,this.left,this.width),u=Tt(o.font),{padding:c}=o,h=u.size,f=h/2;let d;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=u.string;const{boxWidth:y,boxHeight:v,itemHeight:_}=Cw(o,h),g=function(C,k,x){if(isNaN(y)||y<=0||isNaN(v)||v<0)return;i.save();const P=Ie(x.lineWidth,1);if(i.fillStyle=Ie(x.fillStyle,a),i.lineCap=Ie(x.lineCap,"butt"),i.lineDashOffset=Ie(x.lineDashOffset,0),i.lineJoin=Ie(x.lineJoin,"miter"),i.lineWidth=P,i.strokeStyle=Ie(x.strokeStyle,a),i.setLineDash(Ie(x.lineDash,[])),o.usePointStyle){const S={radius:v*Math.SQRT2/2,pointStyle:x.pointStyle,rotation:x.rotation,borderWidth:P},E=l.xPlus(C,y/2),A=k+f;BS(i,S,E,A,o.pointStyleWidth&&y)}else{const S=k+Math.max((h-v)/2,0),E=l.leftForLtr(C,y),A=ls(x.borderRadius);i.beginPath(),Object.values(A).some(O=>O!==0)?Ll(i,{x:E,y:S,w:y,h:v,radius:A}):i.rect(E,S,y,v),i.fill(),P!==0&&i.stroke()}i.restore()},m=function(C,k,x){ks(i,x.text,C,k+_/2,u,{strikethrough:x.hidden,textAlign:l.textAlign(x.textAlign)})},w=this.isHorizontal(),b=this._computeTitleHeight();w?d={x:zt(s,this.left+c,this.right-r[0]),y:this.top+c+b,line:0}:d={x:this.left+c,y:zt(s,this.top+b+c,this.bottom-n[0].height),line:0},GS(this.ctx,e.textDirection);const T=_+c;this.legendItems.forEach((C,k)=>{i.strokeStyle=C.fontColor,i.fillStyle=C.fontColor;const x=i.measureText(C.text).width,P=l.textAlign(C.textAlign||(C.textAlign=o.textAlign)),S=y+f+x;let E=d.x,A=d.y;l.setWidth(this.width),w?k>0&&E+S+c>this.right&&(A=d.y+=T,d.line++,E=d.x=zt(s,this.left+c,this.right-r[d.line])):k>0&&A+T>this.bottom&&(E=d.x=E+n[d.line].width+c,d.line++,A=d.y=zt(s,this.top+b+c,this.bottom-n[d.line].height));const O=l.x(E);if(g(O,A,C),E=Zj(P,E+y+f,w?E+S:this.right,e.rtl),m(l.x(E),A,C),w)d.x+=S+c;else if(typeof C.text!="string"){const M=u.lineHeight;d.y+=fA(C,M)+c}else d.y+=T}),YS(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Tt(n.font),i=Yt(n.padding);if(!n.display)return;const s=ho(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,u=i.top+l;let c,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),c=this.top+u,h=zt(e.align,h,this.right-f);else{const y=this.columnSizes.reduce((v,_)=>Math.max(v,_.height),0);c=u+zt(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const d=zt(a,h,h+f);o.textAlign=s.textAlign($y(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,ks(o,n.text,d,c,r)}_computeTitleHeight(){const e=this.options.title,n=Tt(e.font),r=Yt(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(hi(e,this.left,this.right)&&hi(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],hi(e,i.left,i.left+i.width)&&hi(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!aF(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=rF(i,r);i&&!s&&We(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&We(n.onHover,[e,r,this],this)}else r&&We(n.onClick,[e,r,this],this)}}function iF(t,e,n,r,i){const s=sF(r,t,e,n),o=oF(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function sF(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function oF(t,e,n){let r=t;return typeof e.text!="string"&&(r=fA(e,n)),r}function fA(t,e){const n=t.text?t.text.length:0;return e*n}function aF(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var lF={id:"legend",_element:Rw,start(t,e,n){const r=t.legend=new Rw({ctx:t.ctx,options:n,chart:t});In.configure(t,r,n),In.addBox(t,r)},stop(t){In.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;In.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(n?0:void 0),c=Yt(u.borderWidth);return{text:e[l.index].label,fillStyle:u.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:u.borderColor,pointStyle:r||u.pointStyle,rotation:u.rotation,textAlign:i||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class dA extends Gn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=ot(r.text)?r.text.length:1;this._padding=Yt(r.padding);const s=i*Tt(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,u,c,h;return this.isHorizontal()?(c=zt(a,r,s),h=n+e,u=s-r):(o.position==="left"?(c=r+e,h=zt(a,i,n),l=Ze*-.5):(c=s-e,h=zt(a,n,i),l=Ze*.5),u=i-n),{titleX:c,titleY:h,maxWidth:u,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Tt(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:u}=this._drawArgs(s);ks(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:u,textAlign:$y(n.align),textBaseline:"middle",translation:[o,a]})}}function uF(t,e){const n=new dA({ctx:t.ctx,options:e,chart:t});In.configure(t,n,e),In.addBox(t,n),t.titleBlock=n}var cF={id:"title",_element:dA,start(t,e,n){uF(t,n)},stop(t){const e=t.titleBlock;In.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;In.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ja={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),c=wg(e,u);c<i&&(i=c,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function tr(t,e){return e&&(ot(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function wr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function hF(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function Nw(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Tt(e.bodyFont),u=Tt(e.titleFont),c=Tt(e.footerFont),h=s.length,f=i.length,d=r.length,y=Yt(e.padding);let v=y.height,_=0,g=r.reduce((b,T)=>b+T.before.length+T.lines.length+T.after.length,0);if(g+=t.beforeBody.length+t.afterBody.length,h&&(v+=h*u.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),g){const b=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;v+=d*b+(g-d)*l.lineHeight+(g-1)*e.bodySpacing}f&&(v+=e.footerMarginTop+f*c.lineHeight+(f-1)*e.footerSpacing);let m=0;const w=function(b){_=Math.max(_,n.measureText(b).width+m)};return n.save(),n.font=u.string,ze(t.title,w),n.font=l.string,ze(t.beforeBody.concat(t.afterBody),w),m=e.displayColors?o+2+e.boxPadding:0,ze(r,b=>{ze(b.before,w),ze(b.lines,w),ze(b.after,w)}),m=0,n.font=c.string,ze(t.footer,w),n.restore(),_+=y.width,{width:_,height:v}}function fF(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function dF(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function pF(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let u="center";return r==="center"?u=i<=(a+l)/2?"left":"right":i<=s/2?u="left":i>=o-s/2&&(u="right"),dF(u,t,e,n)&&(u="center"),u}function Dw(t,e,n){const r=n.yAlign||e.yAlign||fF(t,n);return{xAlign:n.xAlign||e.xAlign||pF(t,e,n,r),yAlign:r}}function gF(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function mF(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function Mw(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,u=i+s,{topLeft:c,topRight:h,bottomLeft:f,bottomRight:d}=ls(o);let y=gF(e,a);const v=mF(e,l,u);return l==="center"?a==="left"?y+=u:a==="right"&&(y-=u):a==="left"?y-=Math.max(c,f)+i:a==="right"&&(y+=Math.max(h,d)+i),{x:Ht(y,0,r.width-e.width),y:Ht(v,0,r.height-e.height)}}function Xu(t,e,n){const r=Yt(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function Lw(t){return tr([],wr(t))}function yF(t,e,n){return Mi(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function jw(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const pA={beforeTitle:_r,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:_r,beforeBody:_r,beforeLabel:_r,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return De(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:_r,afterBody:_r,beforeFooter:_r,footer:_r,afterFooter:_r};function rn(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?pA[e].call(n,r):i}class Ig extends Gn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new XS(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=yF(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=rn(r,"beforeTitle",this,e),s=rn(r,"title",this,e),o=rn(r,"afterTitle",this,e);let a=[];return a=tr(a,wr(i)),a=tr(a,wr(s)),a=tr(a,wr(o)),a}getBeforeBody(e,n){return Lw(rn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return ze(e,s=>{const o={before:[],lines:[],after:[]},a=jw(r,s);tr(o.before,wr(rn(a,"beforeLabel",this,s))),tr(o.lines,rn(a,"label",this,s)),tr(o.after,wr(rn(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return Lw(rn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=rn(r,"beforeFooter",this,e),s=rn(r,"footer",this,e),o=rn(r,"afterFooter",this,e);let a=[];return a=tr(a,wr(i)),a=tr(a,wr(s)),a=tr(a,wr(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,u;for(l=0,u=n.length;l<u;++l)a.push(hF(this.chart,n[l]));return e.filter&&(a=a.filter((c,h,f)=>e.filter(c,h,f,r))),e.itemSort&&(a=a.sort((c,h)=>e.itemSort(c,h,r))),ze(a,c=>{const h=jw(e.callbacks,c);i.push(rn(h,"labelColor",this,c)),s.push(rn(h,"labelPointStyle",this,c)),o.push(rn(h,"labelTextColor",this,c))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=ja[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=Nw(this,r),u=Object.assign({},a,l),c=Dw(this.chart,r,u),h=Mw(r,u,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,s={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:u,bottomLeft:c,bottomRight:h}=ls(a),{x:f,y:d}=e,{width:y,height:v}=n;let _,g,m,w,b,T;return s==="center"?(b=d+v/2,i==="left"?(_=f,g=_-o,w=b+o,T=b-o):(_=f+y,g=_+o,w=b-o,T=b+o),m=_):(i==="left"?g=f+Math.max(l,c)+o:i==="right"?g=f+y-Math.max(u,h)-o:g=this.caretX,s==="top"?(w=d,b=w-o,_=g-o,m=g+o):(w=d+v,b=w+o,_=g+o,m=g-o),T=w),{x1:_,x2:g,x3:m,y1:w,y2:b,y3:T}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const u=ho(r.rtl,this.x,this.width);for(e.x=Xu(this,r.titleAlign,r),n.textAlign=u.textAlign(r.titleAlign),n.textBaseline="middle",o=Tt(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:u}=s,c=Tt(s.bodyFont),h=Xu(this,"left",s),f=i.x(h),d=l<c.lineHeight?(c.lineHeight-l)/2:0,y=n.y+d;if(s.usePointStyle){const v={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},_=i.leftForLtr(f,u)+u/2,g=y+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Eg(e,v,_,g),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Eg(e,v,_,g)}else{e.lineWidth=je(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const v=i.leftForLtr(f,u),_=i.leftForLtr(i.xPlus(f,1),u-2),g=ls(o.borderRadius);Object.values(g).some(m=>m!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Ll(e,{x:v,y,w:u,h:l,radius:g}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Ll(e,{x:_,y:y+1,w:u-2,h:l-2,radius:g}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(v,y,u,l),e.strokeRect(v,y,u,l),e.fillStyle=o.backgroundColor,e.fillRect(_,y+1,u-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:c}=r,h=Tt(r.bodyFont);let f=h.lineHeight,d=0;const y=ho(r.rtl,this.x,this.width),v=function(x){n.fillText(x,y.x(e.x+d),e.y+f/2),e.y+=f+s},_=y.textAlign(o);let g,m,w,b,T,C,k;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=Xu(this,_,r),n.fillStyle=r.bodyColor,ze(this.beforeBody,v),d=a&&_!=="right"?o==="center"?u/2+c:u+2+c:0,b=0,C=i.length;b<C;++b){for(g=i[b],m=this.labelTextColors[b],n.fillStyle=m,ze(g.before,v),w=g.lines,a&&w.length&&(this._drawColorBox(n,e,b,y,r),f=Math.max(h.lineHeight,l)),T=0,k=w.length;T<k;++T)v(w[T]),f=h.lineHeight;ze(g.after,v)}d=0,f=h.lineHeight,ze(this.afterBody,v),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=ho(r.rtl,this.x,this.width);for(e.x=Xu(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Tt(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:u,height:c}=r,{topLeft:h,topRight:f,bottomLeft:d,bottomRight:y}=ls(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+u-f,l),n.quadraticCurveTo(a+u,l,a+u,l+f),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+u,l+c-y),n.quadraticCurveTo(a+u,l+c,a+u-y,l+c),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+d,l+c),n.quadraticCurveTo(a,l+c,a,l+c-d),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=ja[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Nw(this,e),l=Object.assign({},o,this._size),u=Dw(n,e,l),c=Mw(e,l,u,n);(i._to!==c.x||s._to!==c.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Yt(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),GS(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),YS(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),s=!Th(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!Th(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=ja[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}ce(Ig,"positioners",ja);var vF={id:"tooltip",_element:Ig,positioners:ja,afterInit(t,e,n){n&&(t.tooltip=new Ig({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:pA},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const _F=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function bF(t,e,n,r){const i=t.indexOf(e);if(i===-1)return _F(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const wF=(t,e)=>t===null?null:Ht(Math.round(t),0,e);function Vw(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Pg extends Uo{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(De(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:bF(r,e,Ie(n,e),this._addedLabels),wF(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return Vw.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ce(Pg,"id","category"),ce(Pg,"defaults",{ticks:{callback:Vw}});function xF(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:u,maxTicks:c,maxDigits:h,includeBounds:f}=t,d=s||1,y=c-1,{min:v,max:_}=e,g=!De(o),m=!De(a),w=!De(u),b=(_-v)/(h+1);let T=zb((_-v)/y/d)*d,C,k,x,P;if(T<1e-14&&!g&&!m)return[{value:v},{value:_}];P=Math.ceil(_/T)-Math.floor(v/T),P>y&&(T=zb(P*T/y/d)*d),De(l)||(C=Math.pow(10,l),T=Math.ceil(T*C)/C),i==="ticks"?(k=Math.floor(v/T)*T,x=Math.ceil(_/T)*T):(k=v,x=_),g&&m&&s&&Hj((a-o)/s,T/1e3)?(P=Math.round(Math.min((a-o)/T,c)),T=(a-o)/P,k=o,x=a):w?(k=g?o:k,x=m?a:x,P=u-1,T=(x-k)/P):(P=(x-k)/T,il(P,Math.round(P),T/1e3)?P=Math.round(P):P=Math.ceil(P));const S=Math.max(Ub(T),Ub(k));C=Math.pow(10,De(l)?S:l),k=Math.round(k*C)/C,x=Math.round(x*C)/C;let E=0;for(g&&(f&&k!==o?(n.push({value:o}),k<o&&E++,il(Math.round((k+E*T)*C)/C,o,Fw(o,b,t))&&E++):k<o&&E++);E<P;++E){const A=Math.round((k+E*T)*C)/C;if(m&&A>a)break;n.push({value:A})}return m&&f&&x!==a?n.length&&il(n[n.length-1].value,a,Fw(a,b,t))?n[n.length-1].value=a:n.push({value:a}):(!m||x===a)&&n.push({value:x}),n}function Fw(t,e,{horizontal:n,minRotation:r}){const i=Un(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class Og extends Uo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return De(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=hr(i),u=hr(s);l<0&&u<0?a(0):l>0&&u>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=xF(i,s);return e.bounds==="ticks"&&Wj(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return wf(e,this.chart.options.locale,this.options.ticks.format)}}class Cg extends Og{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=fn(e)?e:0,this.max=fn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Un(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ce(Cg,"id","linear"),ce(Cg,"defaults",{ticks:{callback:Hy.formatters.numeric}});function Rg(t){const e=t.ticks;if(e.display&&t.display){const n=Yt(e.backdropPadding);return Ie(e.font&&e.font.size,ft.font.size)+n.height}return 0}function EF(t,e,n){return n=ot(n)?n:[n],{w:c3(t,e.string,n),h:n.length*e.lineHeight}}function Bw(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function TF(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Ze/s:0;for(let l=0;l<s;l++){const u=o.setContext(t.getPointLabelContext(l));i[l]=u.padding;const c=t.getPointPosition(l,t.drawingArea+i[l],a),h=Tt(u.font),f=EF(t.ctx,h,t._pointLabels[l]);r[l]=f;const d=Fn(t.getIndexAngle(l)+a),y=Math.round(zy(d)),v=Bw(y,c.x,f.w,0,180),_=Bw(y,c.y,f.h,90,270);kF(n,e,d,v,_)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=IF(t,r,i)}function kF(t,e,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function SF(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,r+i+o,s),u=Math.round(zy(Fn(l.angle+gt))),c=CF(l.y,a.h,u),h=PF(u),f=OF(l.x,a.w,h);return{visible:!0,x:l.x,y:c,textAlign:h,left:f,top:c,right:f+a.w,bottom:c+a.h}}function AF(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:s}=t;return!(Nr({x:n,y:r},e)||Nr({x:n,y:s},e)||Nr({x:i,y:r},e)||Nr({x:i,y:s},e))}function IF(t,e,n){const r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:Rg(s)/2,additionalAngle:o?Ze/i:0};let u;for(let c=0;c<i;c++){l.padding=n[c],l.size=e[c];const h=SF(t,c,l);r.push(h),a==="auto"&&(h.visible=AF(h,u),h.visible&&(u=h))}return r}function PF(t){return t===0||t===180?"center":t<180?"left":"right"}function OF(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function CF(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function RF(t,e,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!De(a)){const l=ls(e.borderRadius),u=Yt(e.backdropPadding);t.fillStyle=a;const c=r-u.left,h=i-u.top,f=s-r+u.width,d=o-i+u.height;Object.values(l).some(y=>y!==0)?(t.beginPath(),Ll(t,{x:c,y:h,w:f,h:d,radius:l}),t.fill()):t.fillRect(c,h,f,d)}}function NF(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const s=t._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(t.getPointLabelContext(i));RF(n,o,s);const a=Tt(o.font),{x:l,y:u,textAlign:c}=s;ks(n,t._pointLabels[i],l,u+a.lineHeight/2,a,{color:o.color,textAlign:c,textBaseline:"middle"})}}function gA(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,rt);else{let s=t.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=t.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function DF(t,e,n,r,i){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),gA(t,n,o,r),s.closePath(),s.stroke(),s.restore())}function MF(t,e,n){return Mi(t,{label:n,index:e,type:"pointLabel"})}class Va extends Og{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Yt(Rg(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=fn(e)&&!isNaN(e)?e:0,this.max=fn(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Rg(this.options))}generateTickLabels(e){Og.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const i=We(this.options.pointLabels.callback,[n,r],this);return i||i===0?i:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?TF(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,i))}getIndexAngle(e){const n=rt/(this._pointLabels.length||1),r=this.options.startAngle||0;return Fn(e*n+Un(r))}getDistanceFromCenterForValue(e){if(De(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(De(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return MF(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const i=this.getIndexAngle(e)-gt+r;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:n,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),gA(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:i,border:s}=n,o=this._pointLabels.length;let a,l,u;if(n.pointLabels.display&&NF(this,o),i.display&&this.ticks.forEach((c,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(c.value);const f=this.getContext(h),d=i.setContext(f),y=s.setContext(f);DF(this,d,l,o,y)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const c=r.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:f}=c;!f||!h||(e.lineWidth=f,e.strokeStyle=h,e.setLineDash(c.borderDash),e.lineDashOffset=c.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),u=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(u.x,u.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const u=r.setContext(this.getContext(l)),c=Tt(u.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),u.showLabelBackdrop){e.font=c.string,o=e.measureText(a.label).width,e.fillStyle=u.backdropColor;const h=Yt(u.backdropPadding);e.fillRect(-o/2-h.left,-s-c.size/2-h.top,o+h.width,c.size+h.height)}ks(e,a.label,0,-s,c,{color:u.color,strokeColor:u.textStrokeColor,strokeWidth:u.textStrokeWidth})}),e.restore()}drawTitle(){}}ce(Va,"id","radialLinear"),ce(Va,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Hy.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),ce(Va,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),ce(Va,"descriptors",{angleLines:{_fallback:"grid"}});const kf={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},on=Object.keys(kf);function zw(t,e){return t-e}function Uw(t,e){if(De(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),fn(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Io(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function $w(t,e,n,r){const i=on.length;for(let s=on.indexOf(t);s<i-1;++s){const o=kf[on[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return on[s]}return on[i-1]}function LF(t,e,n,r,i){for(let s=on.length-1;s>=on.indexOf(n);s--){const o=on[s];if(kf[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return on[n?on.indexOf(n):0]}function jF(t){for(let e=on.indexOf(t)+1,n=on.length;e<n;++e)if(kf[on[e]].common)return on[e]}function qw(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=Uy(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function VF(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function Hw(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:VF(t,r,i,n)}class Ch extends Uo{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new P5._date(e.adapters.date);i.init(n),rl(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Uw(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(u){!o&&!isNaN(u.min)&&(i=Math.min(i,u.min)),!a&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=fn(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=fn(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=Qj(i,s,o);return this._unit=n.unit||(r.autoSkip?$w(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):LF(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:jF(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),Hw(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Ht(n,0,o),r=Ht(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||$w(s.minUnit,n,r,this._getLabelCapacity(n)),a=Ie(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,u=Io(l)||l===!0,c={};let h=n,f,d;if(u&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,u?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const y=i.ticks.source==="data"&&this.getDataTimestamps();for(f=h,d=0;f<r;f=+e.add(f,a,o),d++)qw(c,f,y);return(f===r||i.bounds==="ticks"||d===1)&&qw(c,f,y),Object.keys(c).sort(zw).map(v=>+v)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return We(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,u=this._majorUnit,c=l&&a[l],h=u&&a[u],f=r[n],d=u&&h&&f&&f.major;return this._adapter.format(e,i||(d?h:c))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=Un(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,Hw(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(Uw(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return MS(e.sort(zw))}}ce(Ch,"id","time"),ce(Ch,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Ju(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=rs(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=rs(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const u=o-s;return u?a+(l-a)*(e-s)/u:a}class Ww extends Ch{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Ju(n,this.min),this._tableRange=Ju(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,u,c;for(o=0,a=e.length;o<a;++o)u=e[o],u>=n&&u<=r&&i.push(u);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)c=i[o+1],l=i[o-1],u=i[o],Math.round((c+l)/2)!==u&&s.push({time:u,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Ju(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Ju(this._table,r*this._tableRange+this._minPos,!0)}}ce(Ww,"id","timeseries"),ce(Ww,"defaults",Ch.defaults);const mA="label";function Kw(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function FF(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function yA(t,e){t.labels=e}function vA(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:mA;const r=[];t.datasets=e.map(i=>{const s=t.datasets.find(o=>o[n]===i[n]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function BF(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mA;const n={labels:[],datasets:[]};return yA(n,t.labels),vA(n,t.datasets,e),n}function zF(t,e){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:u=[],fallbackContent:c,updateMode:h,...f}=t,d=oe.useRef(null),y=oe.useRef(null),v=()=>{d.current&&(y.current=new Tf(d.current,{type:o,data:BF(a,s),options:l&&{...l},plugins:u}),Kw(e,y.current))},_=()=>{Kw(e,null),y.current&&(y.current.destroy(),y.current=null)};return oe.useEffect(()=>{!i&&y.current&&l&&FF(y.current,l)},[i,l]),oe.useEffect(()=>{!i&&y.current&&yA(y.current.config.data,a.labels)},[i,a.labels]),oe.useEffect(()=>{!i&&y.current&&a.datasets&&vA(y.current.config.data,a.datasets,s)},[i,a.datasets]),oe.useEffect(()=>{y.current&&(i?(_(),setTimeout(v)):y.current.update(h))},[i,l,a.labels,a.datasets,h]),oe.useEffect(()=>{y.current&&(_(),setTimeout(v))},[o]),oe.useEffect(()=>(v(),()=>_()),[]),et.createElement("canvas",{ref:d,role:"img",height:n,width:r,...f},c)}const UF=oe.forwardRef(zF);function $o(t,e){return Tf.register(e),oe.forwardRef((n,r)=>et.createElement(UF,{...n,ref:r,type:t}))}const Gw=$o("line",Tc),$F=$o("bar",Ec),qF=$o("radar",Sc),HF=$o("polarArea",kc),WF=$o("pie",Tg),KF=$o("scatter",Ac);function GF(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function QF(t,e,n){return e&&YF(t.prototype,e),t}function XF(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ng(){return Ng=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ng.apply(this,arguments)}function JF(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mg(t,e)}function Dg(t){return Dg=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Dg(t)}function Mg(t,e){return Mg=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Mg(t,e)}function _A(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZF(t,e){return e&&(typeof e=="object"||typeof e=="function")?e:_A(t)}function Qd(t,e){return e6(t)||t6(t,e)||n6()}function e6(t){if(Array.isArray(t))return t}function t6(t,e){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]"){var n=[],r=!0,i=!1,s=void 0;try{for(var o=t[Symbol.iterator](),a;!(r=(a=o.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,s=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(i)throw s}}return n}}function n6(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function r6(t,e){return e={exports:{}},t(e,e.exports),e.exports}var i6="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",s6=i6;function bA(){}function wA(){}wA.resetWarningCache=bA;var o6=function(){function t(r,i,s,o,a,l){if(l!==s6){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:wA,resetWarningCache:bA};return n.PropTypes=n,n},Me=r6(function(t){t.exports=o6()});function a6(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function l6(t,e){e===void 0&&(e=a6);var n,r=[],i,s=!1;function o(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return s&&n===this&&e(a,r)||(i=t.apply(this,a),s=!0,n=this,r=a),i}return o}var Yw=24*60*60*1e3,$i=7,u6=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],c6=["","Mon","","Wed","","Fri",""];function Rc(t,e){var n=new Date(t);return n.setDate(n.getDate()+e),n}function h6(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())}function Xd(t){return t instanceof Date?t:new Date(t)}function f6(t){return Rc(new Date,-200)}function Jd(t){for(var e=[],n=0;n<t;n+=1)e.push(n);return e}var Zn=10,Zu=4,qi="react-calendar-heatmap-",tv=function(t){JF(e,t);function e(){var n,r;GF(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=ZF(this,(n=Dg(e)).call.apply(n,[this].concat(s))),XF(_A(r),"getValueCache",l6(function(a){return a.values.reduce(function(l,u){var c=Xd(u.date),h=Math.floor((c-r.getStartDateWithEmptyDays())/Yw);return l[h]={value:u,className:r.props.classForValue(u),title:r.props.titleForValue?r.props.titleForValue(u):null,tooltipDataAttrs:r.getTooltipDataAttrsForValue(u)},l},{})})),r}return QF(e,[{key:"getDateDifferenceInDays",value:function(){var r=this.props,i=r.startDate,s=r.numDays;if(s)return console.warn("numDays is a deprecated prop. It will be removed in the next release. Consider using the startDate prop instead."),s;var o=this.getEndDate()-Xd(i);return Math.ceil(o/Yw)}},{key:"getSquareSizeWithGutter",value:function(){return Zn+this.props.gutterSize}},{key:"getMonthLabelSize",value:function(){return this.props.showMonthLabels?this.props.horizontal?Zn+Zu:2*(Zn+Zu):0}},{key:"getWeekdayLabelSize",value:function(){return this.props.showWeekdayLabels?this.props.horizontal?30:Zn*1.5:0}},{key:"getStartDate",value:function(){return Rc(this.getEndDate(),-this.getDateDifferenceInDays()+1)}},{key:"getEndDate",value:function(){return h6(Xd(this.props.endDate))}},{key:"getStartDateWithEmptyDays",value:function(){return Rc(this.getStartDate(),-this.getNumEmptyDaysAtStart())}},{key:"getNumEmptyDaysAtStart",value:function(){return this.getStartDate().getDay()}},{key:"getNumEmptyDaysAtEnd",value:function(){return $i-1-this.getEndDate().getDay()}},{key:"getWeekCount",value:function(){var r=this.getDateDifferenceInDays()+this.getNumEmptyDaysAtStart()+this.getNumEmptyDaysAtEnd();return Math.ceil(r/$i)}},{key:"getWeekWidth",value:function(){return $i*this.getSquareSizeWithGutter()}},{key:"getWidth",value:function(){return this.getWeekCount()*this.getSquareSizeWithGutter()-(this.props.gutterSize-this.getWeekdayLabelSize())}},{key:"getHeight",value:function(){return this.getWeekWidth()+(this.getMonthLabelSize()-this.props.gutterSize)+this.getWeekdayLabelSize()}},{key:"getValueForIndex",value:function(r){return this.valueCache[r]?this.valueCache[r].value:null}},{key:"getClassNameForIndex",value:function(r){return this.valueCache[r]?this.valueCache[r].className:this.props.classForValue(null)}},{key:"getTitleForIndex",value:function(r){return this.valueCache[r]?this.valueCache[r].title:this.props.titleForValue?this.props.titleForValue(null):null}},{key:"getTooltipDataAttrsForIndex",value:function(r){return this.valueCache[r]?this.valueCache[r].tooltipDataAttrs:this.getTooltipDataAttrsForValue({date:null,count:null})}},{key:"getTooltipDataAttrsForValue",value:function(r){var i=this.props.tooltipDataAttrs;return typeof i=="function"?i(r):i}},{key:"getTransformForWeek",value:function(r){return this.props.horizontal?"translate(".concat(r*this.getSquareSizeWithGutter(),", 0)"):"translate(0, ".concat(r*this.getSquareSizeWithGutter(),")")}},{key:"getTransformForWeekdayLabels",value:function(){return this.props.horizontal?"translate(".concat(Zn,", ").concat(this.getMonthLabelSize(),")"):null}},{key:"getTransformForMonthLabels",value:function(){return this.props.horizontal?"translate(".concat(this.getWeekdayLabelSize(),", 0)"):"translate(".concat(this.getWeekWidth()+Zu,", ").concat(this.getWeekdayLabelSize(),")")}},{key:"getTransformForAllWeeks",value:function(){return this.props.horizontal?"translate(".concat(this.getWeekdayLabelSize(),", ").concat(this.getMonthLabelSize(),")"):"translate(0, ".concat(this.getWeekdayLabelSize(),")")}},{key:"getViewBox",value:function(){return this.props.horizontal?"0 0 ".concat(this.getWidth()," ").concat(this.getHeight()):"0 0 ".concat(this.getHeight()," ").concat(this.getWidth())}},{key:"getSquareCoordinates",value:function(r){return this.props.horizontal?[0,r*this.getSquareSizeWithGutter()]:[r*this.getSquareSizeWithGutter(),0]}},{key:"getWeekdayLabelCoordinates",value:function(r){return this.props.horizontal?[0,(r+1)*Zn+r*this.props.gutterSize]:[r*Zn+r*this.props.gutterSize,Zn]}},{key:"getMonthLabelCoordinates",value:function(r){if(this.props.horizontal)return[r*this.getSquareSizeWithGutter(),this.getMonthLabelSize()-Zu];var i=-2;return[0,(r+1)*this.getSquareSizeWithGutter()+i]}},{key:"handleClick",value:function(r){this.props.onClick&&this.props.onClick(r)}},{key:"handleMouseOver",value:function(r,i){this.props.onMouseOver&&this.props.onMouseOver(r,i)}},{key:"handleMouseLeave",value:function(r,i){this.props.onMouseLeave&&this.props.onMouseLeave(r,i)}},{key:"renderSquare",value:function(r,i){var s=this,o=i<this.getNumEmptyDaysAtStart()||i>=this.getNumEmptyDaysAtStart()+this.getDateDifferenceInDays();if(o&&!this.props.showOutOfRangeDays)return null;var a=this.getSquareCoordinates(r),l=Qd(a,2),u=l[0],c=l[1],h=this.getValueForIndex(i),f=et.createElement("rect",Ng({key:i,width:Zn,height:Zn,x:u,y:c,className:this.getClassNameForIndex(i),onClick:function(){return s.handleClick(h)},onMouseOver:function(v){return s.handleMouseOver(v,h)},onMouseLeave:function(v){return s.handleMouseLeave(v,h)}},this.getTooltipDataAttrsForIndex(i)),et.createElement("title",null,this.getTitleForIndex(i))),d=this.props.transformDayElement;return d?d(f,h,i):f}},{key:"renderWeek",value:function(r){var i=this;return et.createElement("g",{key:r,transform:this.getTransformForWeek(r),className:"".concat(qi,"week")},Jd($i).map(function(s){return i.renderSquare(s,r*$i+s)}))}},{key:"renderAllWeeks",value:function(){var r=this;return Jd(this.getWeekCount()).map(function(i){return r.renderWeek(i)})}},{key:"renderMonthLabels",value:function(){var r=this;if(!this.props.showMonthLabels)return null;var i=Jd(this.getWeekCount()-1);return i.map(function(s){var o=Rc(r.getStartDateWithEmptyDays(),(s+1)*$i),a=r.getMonthLabelCoordinates(s),l=Qd(a,2),u=l[0],c=l[1];return o.getDate()>=1&&o.getDate()<=$i?et.createElement("text",{key:s,x:u,y:c,className:"".concat(qi,"month-label")},r.props.monthLabels[o.getMonth()]):null})}},{key:"renderWeekdayLabels",value:function(){var r=this;return this.props.showWeekdayLabels?this.props.weekdayLabels.map(function(i,s){var o=r.getWeekdayLabelCoordinates(s),a=Qd(o,2),l=a[0],u=a[1],c="".concat(r.props.horizontal?"":"".concat(qi,"small-text")," ").concat(qi,"weekday-label");return s&1?et.createElement("text",{key:"".concat(l).concat(u),x:l,y:u,className:c},i):null}):null}},{key:"render",value:function(){return this.valueCache=this.getValueCache(this.props),et.createElement("svg",{className:"react-calendar-heatmap",viewBox:this.getViewBox()},et.createElement("g",{transform:this.getTransformForMonthLabels(),className:"".concat(qi,"month-labels")},this.renderMonthLabels()),et.createElement("g",{transform:this.getTransformForAllWeeks(),className:"".concat(qi,"all-weeks")},this.renderAllWeeks()),et.createElement("g",{transform:this.getTransformForWeekdayLabels(),className:"".concat(qi,"weekday-labels")},this.renderWeekdayLabels()))}}]),e}(et.Component);tv.propTypes={values:Me.arrayOf(Me.shape({date:Me.oneOfType([Me.string,Me.number,Me.instanceOf(Date)]).isRequired}).isRequired).isRequired,numDays:Me.number,startDate:Me.oneOfType([Me.string,Me.number,Me.instanceOf(Date)]),endDate:Me.oneOfType([Me.string,Me.number,Me.instanceOf(Date)]),gutterSize:Me.number,horizontal:Me.bool,showMonthLabels:Me.bool,showWeekdayLabels:Me.bool,showOutOfRangeDays:Me.bool,tooltipDataAttrs:Me.oneOfType([Me.object,Me.func]),titleForValue:Me.func,classForValue:Me.func,monthLabels:Me.arrayOf(Me.string),weekdayLabels:Me.arrayOf(Me.string),onClick:Me.func,onMouseOver:Me.func,onMouseLeave:Me.func,transformDayElement:Me.func};tv.defaultProps={numDays:null,startDate:f6(),endDate:new Date,gutterSize:1,horizontal:!0,showMonthLabels:!0,showWeekdayLabels:!1,showOutOfRangeDays:!1,tooltipDataAttrs:null,titleForValue:null,classForValue:function(e){return e?"color-filled":"color-empty"},monthLabels:u6,weekdayLabels:c6,onClick:null,onMouseOver:null,onMouseLeave:null,transformDayElement:null};Tf.register(Pg,Cg,Cc,cF,vF,lF,Ma,Oc,La,Va);const d6=()=>{const{user:t}=zo(),[e,n]=oe.useState([]),[r,i]=oe.useState(!0);oe.useEffect(()=>{if(!t)return;i(!0);const E=Ao(yt,"users",t.uid,"habits"),A=ws(E,O=>{n(O.docs.map(M=>{const F=M.data();return{id:typeof M.id=="string"?parseInt(M.id):M.id,name:F.name,doneToday:F.doneToday,streak:F.streak,lastCompleted:F.lastCompleted,history:F.history||[]}})),i(!1)});return()=>A()},[t]);const s=e.length,o=e.reduce((E,A)=>E+A.history.length,0),a=e.length>0?Math.round(e.reduce((E,A)=>E+A.streak,0)/e.length):0,l=Math.max(0,...e.map(E=>E.streak)),u=(()=>{const E=e.flatMap(O=>O.history);return Array.from(new Set(E)).filter(O=>e.every(M=>M.history.includes(O))).length})(),h=e.reduce((E,A)=>E+(A.history.length+(A.streak?0:1)),0)-o,f={labels:["Completed","Missed"],datasets:[{data:[o,h>0?h:0],backgroundColor:["#38bdf8","#f87171"],borderWidth:2}]},d={labels:e.map(E=>E.name),datasets:[{label:"Completions",data:e.map(E=>E.history.length),backgroundColor:"#38bdf8",borderRadius:8}]},y={labels:e.map(E=>E.name),datasets:[{label:"Current Streak",data:e.map(E=>E.streak),borderColor:"#f59e42",backgroundColor:"rgba(245,158,66,0.2)",tension:.4,fill:!0}]},v={labels:e.map(E=>E.name),datasets:[{label:"Consistency %",data:e.map(E=>{const A=E.history.length+(E.streak?0:1);return A>0?Math.round(E.history.length/A*100):0}),backgroundColor:"rgba(56,189,248,0.2)",borderColor:"#38bdf8",pointBackgroundColor:"#f59e42"}]},_={labels:e.map(E=>E.name),datasets:[{label:"Habit Added",data:e.map(E=>E.id%10+1),backgroundColor:["#38bdf8","#f59e42","#f87171","#a78bfa","#34d399","#fbbf24","#f472b6"]}]},g=e.flatMap(E=>E.history),m={};g.forEach(E=>{m[E]=(m[E]||0)+1});const w=new Date,b=new Date;b.setDate(w.getDate()-180);const T=Array.from({length:181},(E,A)=>{const O=new Date(b);O.setDate(b.getDate()+A);const M=O.toISOString().slice(0,10);return{date:M,count:m[M]||0}}),C={datasets:[{label:"Habit Completions vs. Streak",data:e.map(E=>({x:E.history.length,y:E.streak})),backgroundColor:"#f59e42"}]},k=[],x=[],P=new Date;for(let E=11;E>=0;E--){const A=new Date(P);A.setDate(P.getDate()-P.getDay()-E*7);const O=new Date(A);O.setDate(A.getDate()+6);const M=`${A.toISOString().slice(5,10)}-${O.toISOString().slice(5,10)}`;k.push(M);const F=g.filter($=>{const q=new Date($);return q>=A&&q<=O}).length;x.push(F)}const S={labels:k,datasets:[{label:"Completions per Week",data:x,backgroundColor:"#a78bfa",borderColor:"#7c3aed",fill:!0,tension:.4}]};return D.jsxs("div",{className:"w-full max-w-3xl mx-auto p-2 sm:p-4 md:p-6 relative animate-fade-in-down bg-gradient-to-br from-[#fdf6e3] via-[#f5e9c6] to-[#e0d7c3] dark:from-[#23272e] dark:via-[#2d323c] dark:to-[#3b4252] border-[4px] border-black/60 rounded-[36px] shadow-xl font-hand",style:{backgroundImage:"repeating-linear-gradient(0deg, var(--journal-bg, #fdf6e3) 0px, var(--journal-bg, #fdf6e3) 31px, var(--journal-line, #e0d7c3) 32px, var(--journal-bg, #fdf6e3) 33px)",border:"4px solid #222",borderRadius:"36px",boxShadow:"0 8px 36px 0 rgba(60,40,10,0.13), 0 0 0 8px #f5e9c6",position:"relative"},children:[D.jsx("style",{children:`
        :root {
          --journal-bg: #fdf6e3;
          --journal-line: #e0d7c3;
        }
        .dark :root, .dark body {
          --journal-bg: #23272e;
          --journal-line: #3b4252;
        }
        .font-hand { font-family: 'Patrick Hand', Caveat, Gloria Hallelujah, cursive; }
        .doodle-border { border: 2.5px dashed #222; border-radius: 18px; box-shadow: 0 2px 8px #e0d7c3; }
        .doodle-shadow { box-shadow: 0 4px 18px 0 #e0d7c3, 0 0 0 3px #f5e9c6; }
        .doodle-title { text-shadow: 2px 2px 0 #fffbe6, 4px 4px 0 #e0d7c3; }
        .doodle-underline { border-bottom: 2.5px dashed #f59e42; }
        .doodle-badge { background: #fffbe6; border: 2px solid #f59e42; border-radius: 12px; padding: 2px 10px; font-size: 0.9em; margin-left: 8px; }
        .doodle-heatmap rect { stroke: #222; stroke-width: 1.2; }
        .doodle-chart { background: #fffbe6; border: 2px dashed #a78bfa; border-radius: 18px; padding: 1.5rem 1rem; margin-bottom: 1.5rem; width: 100%; min-width: 0; }
        .dark .doodle-chart { background: #23272e; border-color: #7c3aed; }
        .doodle-metric { font-size: 2.2rem; font-weight: bold; color: #f59e42; text-shadow: 1px 1px 0 #fffbe6; }
        .dark .doodle-metric { color: #fbbf24; text-shadow: 1px 1px 0 #23272e; }
        @media (max-width: 900px) {
          .doodle-title { font-size: 2rem !important; }
        }
        @media (max-width: 640px) {
          .doodle-chart { padding: 0.5rem 0.1rem; margin-bottom: 1rem; }
          .doodle-metric { font-size: 1.2rem; }
          .doodle-title { font-size: 1.2rem !important; }
        }
        /* Responsive grid for charts */
        .doodle-charts-grid { display: grid; grid-template-columns: 1fr; gap: 1rem; }
        @media (min-width: 700px) {
          .doodle-charts-grid { grid-template-columns: 1fr 1fr; gap: 2rem; }
        }
        @media (max-width: 400px) {
          .doodle-badge { font-size: 0.7em; padding: 1px 6px; }
        }
      `}),D.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-2 sm:gap-3 mb-6 animate-fade-in-down text-center",children:[D.jsx("span",{className:"text-3xl md:text-5xl font-extrabold text-sky-700 dark:text-sky-300 tracking-tight drop-shadow-xl uppercase select-none flex items-center gap-2 font-hand animate-wiggle doodle-title",children:D.jsx("span",{children:"📊 Habit Analytics"})}),D.jsx("span",{className:"text-2xl md:text-4xl select-none animate-bounce",children:"✨"})]}),D.jsx("div",{className:"mb-4 text-center text-base text-gray-600 dark:text-gray-300 font-hand animate-fade-in doodle-underline pb-2",children:D.jsxs("span",{children:["Track your progress, celebrate your streaks, and discover your habit patterns! ",D.jsx("span",{className:"ml-1",children:"🎉"})]})}),r?D.jsx("div",{className:"text-center text-sky-400 font-semibold animate-fade-in",children:"Loading..."}):D.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-4 mb-8 animate-fade-in-slow",children:[D.jsxs("div",{className:"bg-white dark:bg-gray-800 doodle-border p-2 sm:p-4 flex flex-col items-center animate-pop-in",children:[D.jsx("span",{className:"doodle-metric animate-wiggle",children:s}),D.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Total Habits"})]}),D.jsxs("div",{className:"bg-white dark:bg-gray-800 doodle-border p-2 sm:p-4 flex flex-col items-center animate-pop-in",children:[D.jsx("span",{className:"doodle-metric animate-wiggle",children:o}),D.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Total Completions"})]}),D.jsxs("div",{className:"bg-white dark:bg-gray-800 doodle-border p-2 sm:p-4 flex flex-col items-center animate-pop-in",children:[D.jsx("span",{className:"doodle-metric animate-wiggle",children:a}),D.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Avg Streak"})]}),D.jsxs("div",{className:"bg-white dark:bg-gray-800 doodle-border p-2 sm:p-4 flex flex-col items-center animate-pop-in",children:[D.jsx("span",{className:"doodle-metric animate-wiggle",children:l}),D.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Best Streak"})]}),D.jsxs("div",{className:"bg-white dark:bg-gray-800 doodle-border p-2 sm:p-4 flex flex-col items-center animate-pop-in col-span-2 sm:col-span-1",children:[D.jsx("span",{className:"doodle-metric animate-wiggle",children:u}),D.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Perfect Days"})]})]}),!r&&e.length>0&&D.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-8",children:[D.jsxs("div",{className:"doodle-chart animate-pop-in w-full",children:[D.jsxs("h3",{className:"text-lg font-bold mb-2 text-sky-700 font-hand",children:["Completion Ratio ",D.jsx("span",{className:"doodle-badge",children:"Pie"})]}),D.jsx(WF,{data:f})]}),D.jsxs("div",{className:"doodle-chart animate-pop-in w-full",children:[D.jsxs("h3",{className:"text-lg font-bold mb-2 text-green-700 font-hand",children:["Completions per Habit ",D.jsx("span",{className:"doodle-badge",children:"Bar"})]}),D.jsx($F,{data:d})]}),D.jsxs("div",{className:"doodle-chart animate-pop-in w-full",children:[D.jsxs("h3",{className:"text-lg font-bold mb-2 text-yellow-700 font-hand",children:["Streaks per Habit ",D.jsx("span",{className:"doodle-badge",children:"Line"})]}),D.jsx(Gw,{data:y})]}),D.jsxs("div",{className:"doodle-chart animate-pop-in w-full",children:[D.jsxs("h3",{className:"text-lg font-bold mb-2 text-indigo-700 font-hand",children:["Consistency Radar ",D.jsx("span",{className:"doodle-badge",children:"Radar"})]}),D.jsx(qF,{data:v})]}),D.jsxs("div",{className:"doodle-chart animate-pop-in w-full",children:[D.jsxs("h3",{className:"text-lg font-bold mb-2 text-pink-700 font-hand",children:["Habit Additions (Demo) ",D.jsx("span",{className:"doodle-badge",children:"Polar"})]}),D.jsx(HF,{data:_})]}),D.jsxs("div",{className:"doodle-chart animate-pop-in w-full md:col-span-2",children:[D.jsxs("h3",{className:"text-lg font-bold mb-2 text-orange-700 font-hand",children:["Calendar Heatmap (Last 6 Months)"," ",D.jsx("span",{className:"doodle-badge",children:"Heatmap"})]}),D.jsx("div",{className:"doodle-heatmap overflow-x-auto",children:D.jsx(tv,{startDate:b,endDate:w,values:T,classForValue:E=>{if(!E||typeof E=="object"&&"count"in E&&E.count===0)return"color-empty";const A=E&&typeof E=="object"&&"count"in E?E.count:0;return A<2?"color-scale-1":A<4?"color-scale-2":A<6?"color-scale-3":"color-scale-4"},showWeekdayLabels:!0})}),D.jsx("style",{children:`
              .color-empty { fill: #f3f4f6; }
              .color-scale-1 { fill: #bae6fd; }
              .color-scale-2 { fill: #38bdf8; }
              .color-scale-3 { fill: #0ea5e9; }
              .color-scale-4 { fill: #0369a1; }
            `})]}),D.jsxs("div",{className:"doodle-chart animate-pop-in w-full",children:[D.jsxs("h3",{className:"text-lg font-bold mb-2 text-fuchsia-700 font-hand",children:["Completions vs. Streak"," ",D.jsx("span",{className:"doodle-badge",children:"Scatter"})]}),D.jsx(KF,{data:C})]}),D.jsxs("div",{className:"doodle-chart animate-pop-in w-full md:col-span-2",children:[D.jsxs("h3",{className:"text-lg font-bold mb-2 text-purple-700 font-hand",children:["Completions per Week (Last 12 Weeks)"," ",D.jsx("span",{className:"doodle-badge",children:"Line"})]}),D.jsx(Gw,{data:S})]})]})]})},p6=({habitsCount:t,remindersCount:e,onResetHabits:n,onMarkAllDone:r,onClearReminders:i,onAddTestHabit:s,onAddTestReminder:o,appDate:a,setAppDate:l,onDeleteAllData:u})=>{const[c,h]=oe.useState(!1),[f,d]=oe.useState(a||new Date().toISOString().slice(0,10));return D.jsxs("div",{className:"fixed bottom-4 right-4 z-50 max-w-full",children:[D.jsx("button",{className:"bg-gray-800 text-white rounded-full p-3 shadow-lg hover:bg-sky-500 transition",onClick:()=>h(y=>!y),title:"Developer Cheat Menu",children:"🛠️"}),c&&D.jsxs("div",{className:"mt-2 bg-white dark:bg-gray-900 rounded-lg shadow-lg p-4 w-72 max-w-xs border border-gray-300 dark:border-gray-700",children:[D.jsx("div",{className:"font-bold mb-2 text-sky-600 dark:text-sky-300",children:"Developer Cheat Menu"}),D.jsx("div",{className:"mb-2 text-xs text-gray-500",children:"Quick test/dev actions"}),D.jsx("button",{className:"w-full mb-1 px-2 py-1 rounded bg-sky-400 hover:bg-sky-500 text-white text-xs font-semibold",onClick:n,children:"Reset All Habits"}),D.jsx("button",{className:"w-full mb-1 px-2 py-1 rounded bg-green-400 hover:bg-green-500 text-white text-xs font-semibold",onClick:r,children:"Mark All Done"}),D.jsx("button",{className:"w-full mb-1 px-2 py-1 rounded bg-indigo-400 hover:bg-indigo-500 text-white text-xs font-semibold",onClick:s,children:"Add Test Habit"}),D.jsx("button",{className:"w-full mb-1 px-2 py-1 rounded bg-yellow-400 hover:bg-yellow-500 text-white text-xs font-semibold",onClick:o,children:"Add Test Reminder"}),D.jsx("button",{className:"w-full mb-1 px-2 py-1 rounded bg-red-400 hover:bg-red-500 text-white text-xs font-semibold",onClick:i,children:"Clear All Reminders"}),D.jsx("button",{className:"w-full mb-1 px-2 py-1 rounded bg-red-600 hover:bg-red-700 text-white text-xs font-bold border-2 border-red-800 shadow",onClick:u,style:{marginTop:8},disabled:!u,title:"Delete ALL data (irreversible)",children:"Delete ALL Data"}),D.jsxs("div",{className:"mt-2 text-xs text-gray-700 dark:text-gray-300",children:[D.jsxs("div",{children:["Habits: ",t]}),D.jsxs("div",{children:["Reminders: ",e]})]}),D.jsxs("div",{className:"mt-4",children:[D.jsx("label",{className:"block text-xs font-semibold mb-1 text-gray-700 dark:text-gray-200",children:"Set App Date (for testing):"}),D.jsx("input",{type:"date",value:f,onChange:y=>d(y.target.value),className:"rounded px-2 py-1 border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none w-full"}),D.jsx("button",{className:"mt-2 w-full px-2 py-1 rounded bg-sky-500 hover:bg-sky-600 text-white text-xs font-semibold",onClick:()=>l(f),children:"Set App Date"}),D.jsx("button",{className:"mt-1 w-full px-2 py-1 rounded bg-gray-300 hover:bg-gray-400 text-gray-800 text-xs font-semibold",onClick:()=>{l(""),d(new Date().toISOString().slice(0,10))},children:"Reset to Today"})]})]})]})},g6="modulepreload",m6=function(t){return"/"+t},Qw={},y6=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=m6(l),l in Qw)return;Qw[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":g6,u||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((f,d)=>{h.addEventListener("load",f),h.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function v6(){this.__data__=[],this.size=0}var _6=v6;function b6(t,e){return t===e||t!==t&&e!==e}var xA=b6,w6=xA;function x6(t,e){for(var n=t.length;n--;)if(w6(t[n][0],e))return n;return-1}var Sf=x6,E6=Sf,T6=Array.prototype,k6=T6.splice;function S6(t){var e=this.__data__,n=E6(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():k6.call(e,n,1),--this.size,!0}var A6=S6,I6=Sf;function P6(t){var e=this.__data__,n=I6(e,t);return n<0?void 0:e[n][1]}var O6=P6,C6=Sf;function R6(t){return C6(this.__data__,t)>-1}var N6=R6,D6=Sf;function M6(t,e){var n=this.__data__,r=D6(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var L6=M6,j6=_6,V6=A6,F6=O6,B6=N6,z6=L6;function qo(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}qo.prototype.clear=j6;qo.prototype.delete=V6;qo.prototype.get=F6;qo.prototype.has=B6;qo.prototype.set=z6;var Af=qo,U6=Af;function $6(){this.__data__=new U6,this.size=0}var q6=$6;function H6(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var W6=H6;function K6(t){return this.__data__.get(t)}var G6=K6;function Y6(t){return this.__data__.has(t)}var Q6=Y6,X6=typeof mn=="object"&&mn&&mn.Object===Object&&mn,EA=X6,J6=EA,Z6=typeof self=="object"&&self&&self.Object===Object&&self,e9=J6||Z6||Function("return this")(),Wr=e9,t9=Wr,n9=t9.Symbol,nv=n9,Xw=nv,TA=Object.prototype,r9=TA.hasOwnProperty,i9=TA.toString,Ea=Xw?Xw.toStringTag:void 0;function s9(t){var e=r9.call(t,Ea),n=t[Ea];try{t[Ea]=void 0;var r=!0}catch{}var i=i9.call(t);return r&&(e?t[Ea]=n:delete t[Ea]),i}var o9=s9,a9=Object.prototype,l9=a9.toString;function u9(t){return l9.call(t)}var c9=u9,Jw=nv,h9=o9,f9=c9,d9="[object Null]",p9="[object Undefined]",Zw=Jw?Jw.toStringTag:void 0;function g9(t){return t==null?t===void 0?p9:d9:Zw&&Zw in Object(t)?h9(t):f9(t)}var If=g9;function m9(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var kA=m9,y9=If,v9=kA,_9="[object AsyncFunction]",b9="[object Function]",w9="[object GeneratorFunction]",x9="[object Proxy]";function E9(t){if(!v9(t))return!1;var e=y9(t);return e==b9||e==w9||e==_9||e==x9}var SA=E9,T9=Wr,k9=T9["__core-js_shared__"],S9=k9,Zd=S9,e1=function(){var t=/[^.]+$/.exec(Zd&&Zd.keys&&Zd.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function A9(t){return!!e1&&e1 in t}var I9=A9,P9=Function.prototype,O9=P9.toString;function C9(t){if(t!=null){try{return O9.call(t)}catch{}try{return t+""}catch{}}return""}var AA=C9,R9=SA,N9=I9,D9=kA,M9=AA,L9=/[\\^$.*+?()[\]{}|]/g,j9=/^\[object .+?Constructor\]$/,V9=Function.prototype,F9=Object.prototype,B9=V9.toString,z9=F9.hasOwnProperty,U9=RegExp("^"+B9.call(z9).replace(L9,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $9(t){if(!D9(t)||N9(t))return!1;var e=R9(t)?U9:j9;return e.test(M9(t))}var q9=$9;function H9(t,e){return t==null?void 0:t[e]}var W9=H9,K9=q9,G9=W9;function Y9(t,e){var n=G9(t,e);return K9(n)?n:void 0}var Ho=Y9,Q9=Ho,X9=Wr,J9=Q9(X9,"Map"),rv=J9,Z9=Ho,eB=Z9(Object,"create"),Pf=eB,t1=Pf;function tB(){this.__data__=t1?t1(null):{},this.size=0}var nB=tB;function rB(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var iB=rB,sB=Pf,oB="__lodash_hash_undefined__",aB=Object.prototype,lB=aB.hasOwnProperty;function uB(t){var e=this.__data__;if(sB){var n=e[t];return n===oB?void 0:n}return lB.call(e,t)?e[t]:void 0}var cB=uB,hB=Pf,fB=Object.prototype,dB=fB.hasOwnProperty;function pB(t){var e=this.__data__;return hB?e[t]!==void 0:dB.call(e,t)}var gB=pB,mB=Pf,yB="__lodash_hash_undefined__";function vB(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=mB&&e===void 0?yB:e,this}var _B=vB,bB=nB,wB=iB,xB=cB,EB=gB,TB=_B;function Wo(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Wo.prototype.clear=bB;Wo.prototype.delete=wB;Wo.prototype.get=xB;Wo.prototype.has=EB;Wo.prototype.set=TB;var kB=Wo,n1=kB,SB=Af,AB=rv;function IB(){this.size=0,this.__data__={hash:new n1,map:new(AB||SB),string:new n1}}var PB=IB;function OB(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var CB=OB,RB=CB;function NB(t,e){var n=t.__data__;return RB(e)?n[typeof e=="string"?"string":"hash"]:n.map}var Of=NB,DB=Of;function MB(t){var e=DB(this,t).delete(t);return this.size-=e?1:0,e}var LB=MB,jB=Of;function VB(t){return jB(this,t).get(t)}var FB=VB,BB=Of;function zB(t){return BB(this,t).has(t)}var UB=zB,$B=Of;function qB(t,e){var n=$B(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var HB=qB,WB=PB,KB=LB,GB=FB,YB=UB,QB=HB;function Ko(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ko.prototype.clear=WB;Ko.prototype.delete=KB;Ko.prototype.get=GB;Ko.prototype.has=YB;Ko.prototype.set=QB;var IA=Ko,XB=Af,JB=rv,ZB=IA,ez=200;function tz(t,e){var n=this.__data__;if(n instanceof XB){var r=n.__data__;if(!JB||r.length<ez-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new ZB(r)}return n.set(t,e),this.size=n.size,this}var nz=tz,rz=Af,iz=q6,sz=W6,oz=G6,az=Q6,lz=nz;function Go(t){var e=this.__data__=new rz(t);this.size=e.size}Go.prototype.clear=iz;Go.prototype.delete=sz;Go.prototype.get=oz;Go.prototype.has=az;Go.prototype.set=lz;var uz=Go,cz="__lodash_hash_undefined__";function hz(t){return this.__data__.set(t,cz),this}var fz=hz;function dz(t){return this.__data__.has(t)}var pz=dz,gz=IA,mz=fz,yz=pz;function Rh(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new gz;++e<n;)this.add(t[e])}Rh.prototype.add=Rh.prototype.push=mz;Rh.prototype.has=yz;var vz=Rh;function _z(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var bz=_z;function wz(t,e){return t.has(e)}var xz=wz,Ez=vz,Tz=bz,kz=xz,Sz=1,Az=2;function Iz(t,e,n,r,i,s){var o=n&Sz,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var u=s.get(t),c=s.get(e);if(u&&c)return u==e&&c==t;var h=-1,f=!0,d=n&Az?new Ez:void 0;for(s.set(t,e),s.set(e,t);++h<a;){var y=t[h],v=e[h];if(r)var _=o?r(v,y,h,e,t,s):r(y,v,h,t,e,s);if(_!==void 0){if(_)continue;f=!1;break}if(d){if(!Tz(e,function(g,m){if(!kz(d,m)&&(y===g||i(y,g,n,r,s)))return d.push(m)})){f=!1;break}}else if(!(y===v||i(y,v,n,r,s))){f=!1;break}}return s.delete(t),s.delete(e),f}var PA=Iz,Pz=Wr,Oz=Pz.Uint8Array,Cz=Oz;function Rz(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var Nz=Rz;function Dz(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var Mz=Dz,r1=nv,i1=Cz,Lz=xA,jz=PA,Vz=Nz,Fz=Mz,Bz=1,zz=2,Uz="[object Boolean]",$z="[object Date]",qz="[object Error]",Hz="[object Map]",Wz="[object Number]",Kz="[object RegExp]",Gz="[object Set]",Yz="[object String]",Qz="[object Symbol]",Xz="[object ArrayBuffer]",Jz="[object DataView]",s1=r1?r1.prototype:void 0,ep=s1?s1.valueOf:void 0;function Zz(t,e,n,r,i,s,o){switch(n){case Jz:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Xz:return!(t.byteLength!=e.byteLength||!s(new i1(t),new i1(e)));case Uz:case $z:case Wz:return Lz(+t,+e);case qz:return t.name==e.name&&t.message==e.message;case Kz:case Yz:return t==e+"";case Hz:var a=Vz;case Gz:var l=r&Bz;if(a||(a=Fz),t.size!=e.size&&!l)return!1;var u=o.get(t);if(u)return u==e;r|=zz,o.set(t,e);var c=jz(a(t),a(e),r,i,s,o);return o.delete(t),c;case Qz:if(ep)return ep.call(t)==ep.call(e)}return!1}var eU=Zz;function tU(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var nU=tU,rU=Array.isArray,iv=rU,iU=nU,sU=iv;function oU(t,e,n){var r=e(t);return sU(t)?r:iU(r,n(t))}var aU=oU;function lU(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}var uU=lU;function cU(){return[]}var hU=cU,fU=uU,dU=hU,pU=Object.prototype,gU=pU.propertyIsEnumerable,o1=Object.getOwnPropertySymbols,mU=o1?function(t){return t==null?[]:(t=Object(t),fU(o1(t),function(e){return gU.call(t,e)}))}:dU,yU=mU;function vU(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var _U=vU;function bU(t){return t!=null&&typeof t=="object"}var Cf=bU,wU=If,xU=Cf,EU="[object Arguments]";function TU(t){return xU(t)&&wU(t)==EU}var kU=TU,a1=kU,SU=Cf,OA=Object.prototype,AU=OA.hasOwnProperty,IU=OA.propertyIsEnumerable,PU=a1(function(){return arguments}())?a1:function(t){return SU(t)&&AU.call(t,"callee")&&!IU.call(t,"callee")},OU=PU,Nh={exports:{}};function CU(){return!1}var RU=CU;Nh.exports;(function(t,e){var n=Wr,r=RU,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||r;t.exports=u})(Nh,Nh.exports);var CA=Nh.exports,NU=9007199254740991,DU=/^(?:0|[1-9]\d*)$/;function MU(t,e){var n=typeof t;return e=e??NU,!!e&&(n=="number"||n!="symbol"&&DU.test(t))&&t>-1&&t%1==0&&t<e}var LU=MU,jU=9007199254740991;function VU(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=jU}var RA=VU,FU=If,BU=RA,zU=Cf,UU="[object Arguments]",$U="[object Array]",qU="[object Boolean]",HU="[object Date]",WU="[object Error]",KU="[object Function]",GU="[object Map]",YU="[object Number]",QU="[object Object]",XU="[object RegExp]",JU="[object Set]",ZU="[object String]",e8="[object WeakMap]",t8="[object ArrayBuffer]",n8="[object DataView]",r8="[object Float32Array]",i8="[object Float64Array]",s8="[object Int8Array]",o8="[object Int16Array]",a8="[object Int32Array]",l8="[object Uint8Array]",u8="[object Uint8ClampedArray]",c8="[object Uint16Array]",h8="[object Uint32Array]",Xe={};Xe[r8]=Xe[i8]=Xe[s8]=Xe[o8]=Xe[a8]=Xe[l8]=Xe[u8]=Xe[c8]=Xe[h8]=!0;Xe[UU]=Xe[$U]=Xe[t8]=Xe[qU]=Xe[n8]=Xe[HU]=Xe[WU]=Xe[KU]=Xe[GU]=Xe[YU]=Xe[QU]=Xe[XU]=Xe[JU]=Xe[ZU]=Xe[e8]=!1;function f8(t){return zU(t)&&BU(t.length)&&!!Xe[FU(t)]}var d8=f8;function p8(t){return function(e){return t(e)}}var g8=p8,Dh={exports:{}};Dh.exports;(function(t,e){var n=EA,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,o=s&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=a})(Dh,Dh.exports);var m8=Dh.exports,y8=d8,v8=g8,l1=m8,u1=l1&&l1.isTypedArray,_8=u1?v8(u1):y8,NA=_8,b8=_U,w8=OU,x8=iv,E8=CA,T8=LU,k8=NA,S8=Object.prototype,A8=S8.hasOwnProperty;function I8(t,e){var n=x8(t),r=!n&&w8(t),i=!n&&!r&&E8(t),s=!n&&!r&&!i&&k8(t),o=n||r||i||s,a=o?b8(t.length,String):[],l=a.length;for(var u in t)(e||A8.call(t,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||T8(u,l)))&&a.push(u);return a}var P8=I8,O8=Object.prototype;function C8(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||O8;return t===n}var R8=C8;function N8(t,e){return function(n){return t(e(n))}}var D8=N8,M8=D8,L8=M8(Object.keys,Object),j8=L8,V8=R8,F8=j8,B8=Object.prototype,z8=B8.hasOwnProperty;function U8(t){if(!V8(t))return F8(t);var e=[];for(var n in Object(t))z8.call(t,n)&&n!="constructor"&&e.push(n);return e}var $8=U8,q8=SA,H8=RA;function W8(t){return t!=null&&H8(t.length)&&!q8(t)}var K8=W8,G8=P8,Y8=$8,Q8=K8;function X8(t){return Q8(t)?G8(t):Y8(t)}var J8=X8,Z8=aU,e7=yU,t7=J8;function n7(t){return Z8(t,t7,e7)}var r7=n7,c1=r7,i7=1,s7=Object.prototype,o7=s7.hasOwnProperty;function a7(t,e,n,r,i,s){var o=n&i7,a=c1(t),l=a.length,u=c1(e),c=u.length;if(l!=c&&!o)return!1;for(var h=l;h--;){var f=a[h];if(!(o?f in e:o7.call(e,f)))return!1}var d=s.get(t),y=s.get(e);if(d&&y)return d==e&&y==t;var v=!0;s.set(t,e),s.set(e,t);for(var _=o;++h<l;){f=a[h];var g=t[f],m=e[f];if(r)var w=o?r(m,g,f,e,t,s):r(g,m,f,t,e,s);if(!(w===void 0?g===m||i(g,m,n,r,s):w)){v=!1;break}_||(_=f=="constructor")}if(v&&!_){var b=t.constructor,T=e.constructor;b!=T&&"constructor"in t&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof T=="function"&&T instanceof T)&&(v=!1)}return s.delete(t),s.delete(e),v}var l7=a7,u7=Ho,c7=Wr,h7=u7(c7,"DataView"),f7=h7,d7=Ho,p7=Wr,g7=d7(p7,"Promise"),m7=g7,y7=Ho,v7=Wr,_7=y7(v7,"Set"),b7=_7,w7=Ho,x7=Wr,E7=w7(x7,"WeakMap"),T7=E7,Lg=f7,jg=rv,Vg=m7,Fg=b7,Bg=T7,DA=If,Yo=AA,h1="[object Map]",k7="[object Object]",f1="[object Promise]",d1="[object Set]",p1="[object WeakMap]",g1="[object DataView]",S7=Yo(Lg),A7=Yo(jg),I7=Yo(Vg),P7=Yo(Fg),O7=Yo(Bg),Qi=DA;(Lg&&Qi(new Lg(new ArrayBuffer(1)))!=g1||jg&&Qi(new jg)!=h1||Vg&&Qi(Vg.resolve())!=f1||Fg&&Qi(new Fg)!=d1||Bg&&Qi(new Bg)!=p1)&&(Qi=function(t){var e=DA(t),n=e==k7?t.constructor:void 0,r=n?Yo(n):"";if(r)switch(r){case S7:return g1;case A7:return h1;case I7:return f1;case P7:return d1;case O7:return p1}return e});var C7=Qi,tp=uz,R7=PA,N7=eU,D7=l7,m1=C7,y1=iv,v1=CA,M7=NA,L7=1,_1="[object Arguments]",b1="[object Array]",ec="[object Object]",j7=Object.prototype,w1=j7.hasOwnProperty;function V7(t,e,n,r,i,s){var o=y1(t),a=y1(e),l=o?b1:m1(t),u=a?b1:m1(e);l=l==_1?ec:l,u=u==_1?ec:u;var c=l==ec,h=u==ec,f=l==u;if(f&&v1(t)){if(!v1(e))return!1;o=!0,c=!1}if(f&&!c)return s||(s=new tp),o||M7(t)?R7(t,e,n,r,i,s):N7(t,e,l,n,r,i,s);if(!(n&L7)){var d=c&&w1.call(t,"__wrapped__"),y=h&&w1.call(e,"__wrapped__");if(d||y){var v=d?t.value():t,_=y?e.value():e;return s||(s=new tp),i(v,_,n,r,s)}}return f?(s||(s=new tp),D7(t,e,n,r,i,s)):!1}var F7=V7,B7=F7,x1=Cf;function MA(t,e,n,r,i){return t===e?!0:t==null||e==null||!x1(t)&&!x1(e)?t!==t&&e!==e:B7(t,e,n,r,MA,i)}var z7=MA,U7=z7;function $7(t,e){return U7(t,e)}var q7=$7,LA={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(t,e){(function(r,i){t.exports=i()})(typeof self<"u"?self:mn,function(){return function(n){var r={};function i(s){if(r[s])return r[s].exports;var o=r[s]={i:s,l:!1,exports:{}};return n[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=n,i.c=r,i.d=function(s,o,a){i.o(s,o)||Object.defineProperty(s,o,{configurable:!1,enumerable:!0,get:a})},i.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(o,"a",o),o},i.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},i.p="",i(i.s=109)}([function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(17),o=i(18),a=i(19),l=i(45),u=i(46),c=i(47),h=i(48),f=i(49),d=i(12),y=i(32),v=i(33),_=i(31),g=i(1),m={Scope:g.Scope,create:g.create,find:g.find,query:g.query,register:g.register,Container:s.default,Format:o.default,Leaf:a.default,Embed:h.default,Scroll:l.default,Block:c.default,Inline:u.default,Text:f.default,Attributor:{Attribute:d.default,Class:y.default,Style:v.default,Store:_.default}};r.default=m},function(n,r,i){var s=this&&this.__extends||function(){var _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,m){g.__proto__=m}||function(g,m){for(var w in m)m.hasOwnProperty(w)&&(g[w]=m[w])};return function(g,m){_(g,m);function w(){this.constructor=g}g.prototype=m===null?Object.create(m):(w.prototype=m.prototype,new w)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=function(_){s(g,_);function g(m){var w=this;return m="[Parchment] "+m,w=_.call(this,m)||this,w.message=m,w.name=w.constructor.name,w}return g}(Error);r.ParchmentError=o;var a={},l={},u={},c={};r.DATA_KEY="__blot";var h;(function(_){_[_.TYPE=3]="TYPE",_[_.LEVEL=12]="LEVEL",_[_.ATTRIBUTE=13]="ATTRIBUTE",_[_.BLOT=14]="BLOT",_[_.INLINE=7]="INLINE",_[_.BLOCK=11]="BLOCK",_[_.BLOCK_BLOT=10]="BLOCK_BLOT",_[_.INLINE_BLOT=6]="INLINE_BLOT",_[_.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",_[_.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",_[_.ANY=15]="ANY"})(h=r.Scope||(r.Scope={}));function f(_,g){var m=y(_);if(m==null)throw new o("Unable to create "+_+" blot");var w=m,b=_ instanceof Node||_.nodeType===Node.TEXT_NODE?_:w.create(g);return new w(b,g)}r.create=f;function d(_,g){return g===void 0&&(g=!1),_==null?null:_[r.DATA_KEY]!=null?_[r.DATA_KEY].blot:g?d(_.parentNode,g):null}r.find=d;function y(_,g){g===void 0&&(g=h.ANY);var m;if(typeof _=="string")m=c[_]||a[_];else if(_ instanceof Text||_.nodeType===Node.TEXT_NODE)m=c.text;else if(typeof _=="number")_&h.LEVEL&h.BLOCK?m=c.block:_&h.LEVEL&h.INLINE&&(m=c.inline);else if(_ instanceof HTMLElement){var w=(_.getAttribute("class")||"").split(/\s+/);for(var b in w)if(m=l[w[b]],m)break;m=m||u[_.tagName]}return m==null?null:g&h.LEVEL&m.scope&&g&h.TYPE&m.scope?m:null}r.query=y;function v(){for(var _=[],g=0;g<arguments.length;g++)_[g]=arguments[g];if(_.length>1)return _.map(function(b){return v(b)});var m=_[0];if(typeof m.blotName!="string"&&typeof m.attrName!="string")throw new o("Invalid definition");if(m.blotName==="abstract")throw new o("Cannot register abstract class");if(c[m.blotName||m.attrName]=m,typeof m.keyName=="string")a[m.keyName]=m;else if(m.className!=null&&(l[m.className]=m),m.tagName!=null){Array.isArray(m.tagName)?m.tagName=m.tagName.map(function(b){return b.toUpperCase()}):m.tagName=m.tagName.toUpperCase();var w=Array.isArray(m.tagName)?m.tagName:[m.tagName];w.forEach(function(b){(u[b]==null||m.className==null)&&(u[b]=m)})}return m}r.register=v},function(n,r,i){var s=i(51),o=i(11),a=i(3),l=i(20),u="\0",c=function(h){Array.isArray(h)?this.ops=h:h!=null&&Array.isArray(h.ops)?this.ops=h.ops:this.ops=[]};c.prototype.insert=function(h,f){var d={};return h.length===0?this:(d.insert=h,f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(d.attributes=f),this.push(d))},c.prototype.delete=function(h){return h<=0?this:this.push({delete:h})},c.prototype.retain=function(h,f){if(h<=0)return this;var d={retain:h};return f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(d.attributes=f),this.push(d)},c.prototype.push=function(h){var f=this.ops.length,d=this.ops[f-1];if(h=a(!0,{},h),typeof d=="object"){if(typeof h.delete=="number"&&typeof d.delete=="number")return this.ops[f-1]={delete:d.delete+h.delete},this;if(typeof d.delete=="number"&&h.insert!=null&&(f-=1,d=this.ops[f-1],typeof d!="object"))return this.ops.unshift(h),this;if(o(h.attributes,d.attributes)){if(typeof h.insert=="string"&&typeof d.insert=="string")return this.ops[f-1]={insert:d.insert+h.insert},typeof h.attributes=="object"&&(this.ops[f-1].attributes=h.attributes),this;if(typeof h.retain=="number"&&typeof d.retain=="number")return this.ops[f-1]={retain:d.retain+h.retain},typeof h.attributes=="object"&&(this.ops[f-1].attributes=h.attributes),this}}return f===this.ops.length?this.ops.push(h):this.ops.splice(f,0,h),this},c.prototype.chop=function(){var h=this.ops[this.ops.length-1];return h&&h.retain&&!h.attributes&&this.ops.pop(),this},c.prototype.filter=function(h){return this.ops.filter(h)},c.prototype.forEach=function(h){this.ops.forEach(h)},c.prototype.map=function(h){return this.ops.map(h)},c.prototype.partition=function(h){var f=[],d=[];return this.forEach(function(y){var v=h(y)?f:d;v.push(y)}),[f,d]},c.prototype.reduce=function(h,f){return this.ops.reduce(h,f)},c.prototype.changeLength=function(){return this.reduce(function(h,f){return f.insert?h+l.length(f):f.delete?h-f.delete:h},0)},c.prototype.length=function(){return this.reduce(function(h,f){return h+l.length(f)},0)},c.prototype.slice=function(h,f){h=h||0,typeof f!="number"&&(f=1/0);for(var d=[],y=l.iterator(this.ops),v=0;v<f&&y.hasNext();){var _;v<h?_=y.next(h-v):(_=y.next(f-v),d.push(_)),v+=l.length(_)}return new c(d)},c.prototype.compose=function(h){var f=l.iterator(this.ops),d=l.iterator(h.ops),y=[],v=d.peek();if(v!=null&&typeof v.retain=="number"&&v.attributes==null){for(var _=v.retain;f.peekType()==="insert"&&f.peekLength()<=_;)_-=f.peekLength(),y.push(f.next());v.retain-_>0&&d.next(v.retain-_)}for(var g=new c(y);f.hasNext()||d.hasNext();)if(d.peekType()==="insert")g.push(d.next());else if(f.peekType()==="delete")g.push(f.next());else{var m=Math.min(f.peekLength(),d.peekLength()),w=f.next(m),b=d.next(m);if(typeof b.retain=="number"){var T={};typeof w.retain=="number"?T.retain=m:T.insert=w.insert;var C=l.attributes.compose(w.attributes,b.attributes,typeof w.retain=="number");if(C&&(T.attributes=C),g.push(T),!d.hasNext()&&o(g.ops[g.ops.length-1],T)){var k=new c(f.rest());return g.concat(k).chop()}}else typeof b.delete=="number"&&typeof w.retain=="number"&&g.push(b)}return g.chop()},c.prototype.concat=function(h){var f=new c(this.ops.slice());return h.ops.length>0&&(f.push(h.ops[0]),f.ops=f.ops.concat(h.ops.slice(1))),f},c.prototype.diff=function(h,f){if(this.ops===h.ops)return new c;var d=[this,h].map(function(m){return m.map(function(w){if(w.insert!=null)return typeof w.insert=="string"?w.insert:u;var b=m===h?"on":"with";throw new Error("diff() called "+b+" non-document")}).join("")}),y=new c,v=s(d[0],d[1],f),_=l.iterator(this.ops),g=l.iterator(h.ops);return v.forEach(function(m){for(var w=m[1].length;w>0;){var b=0;switch(m[0]){case s.INSERT:b=Math.min(g.peekLength(),w),y.push(g.next(b));break;case s.DELETE:b=Math.min(w,_.peekLength()),_.next(b),y.delete(b);break;case s.EQUAL:b=Math.min(_.peekLength(),g.peekLength(),w);var T=_.next(b),C=g.next(b);o(T.insert,C.insert)?y.retain(b,l.attributes.diff(T.attributes,C.attributes)):y.push(C).delete(b);break}w-=b}}),y.chop()},c.prototype.eachLine=function(h,f){f=f||`
`;for(var d=l.iterator(this.ops),y=new c,v=0;d.hasNext();){if(d.peekType()!=="insert")return;var _=d.peek(),g=l.length(_)-d.peekLength(),m=typeof _.insert=="string"?_.insert.indexOf(f,g)-g:-1;if(m<0)y.push(d.next());else if(m>0)y.push(d.next(m));else{if(h(y,d.next(1).attributes||{},v)===!1)return;v+=1,y=new c}}y.length()>0&&h(y,{},v)},c.prototype.transform=function(h,f){if(f=!!f,typeof h=="number")return this.transformPosition(h,f);for(var d=l.iterator(this.ops),y=l.iterator(h.ops),v=new c;d.hasNext()||y.hasNext();)if(d.peekType()==="insert"&&(f||y.peekType()!=="insert"))v.retain(l.length(d.next()));else if(y.peekType()==="insert")v.push(y.next());else{var _=Math.min(d.peekLength(),y.peekLength()),g=d.next(_),m=y.next(_);if(g.delete)continue;m.delete?v.push(m):v.retain(_,l.attributes.transform(g.attributes,m.attributes,f))}return v.chop()},c.prototype.transformPosition=function(h,f){f=!!f;for(var d=l.iterator(this.ops),y=0;d.hasNext()&&y<=h;){var v=d.peekLength(),_=d.peekType();if(d.next(),_==="delete"){h-=Math.min(v,h-y);continue}else _==="insert"&&(y<h||!f)&&(h+=v);y+=v}return h},n.exports=c},function(n,r){var i=Object.prototype.hasOwnProperty,s=Object.prototype.toString,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=function(d){return typeof Array.isArray=="function"?Array.isArray(d):s.call(d)==="[object Array]"},u=function(d){if(!d||s.call(d)!=="[object Object]")return!1;var y=i.call(d,"constructor"),v=d.constructor&&d.constructor.prototype&&i.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!y&&!v)return!1;var _;for(_ in d);return typeof _>"u"||i.call(d,_)},c=function(d,y){o&&y.name==="__proto__"?o(d,y.name,{enumerable:!0,configurable:!0,value:y.newValue,writable:!0}):d[y.name]=y.newValue},h=function(d,y){if(y==="__proto__")if(i.call(d,y)){if(a)return a(d,y).value}else return;return d[y]};n.exports=function f(){var d,y,v,_,g,m,w=arguments[0],b=1,T=arguments.length,C=!1;for(typeof w=="boolean"&&(C=w,w=arguments[1]||{},b=2),(w==null||typeof w!="object"&&typeof w!="function")&&(w={});b<T;++b)if(d=arguments[b],d!=null)for(y in d)v=h(w,y),_=h(d,y),w!==_&&(C&&_&&(u(_)||(g=l(_)))?(g?(g=!1,m=v&&l(v)?v:[]):m=v&&u(v)?v:{},c(w,{name:y,newValue:f(C,m,_)})):typeof _<"u"&&c(w,{name:y,newValue:_}));return w}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var s=function(){function E(A,O){for(var M=0;M<O.length;M++){var F=O[M];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(A,F.key,F)}}return function(A,O,M){return O&&E(A.prototype,O),M&&E(A,M),A}}(),o=function E(A,O,M){A===null&&(A=Function.prototype);var F=Object.getOwnPropertyDescriptor(A,O);if(F===void 0){var $=Object.getPrototypeOf(A);return $===null?void 0:E($,O,M)}else{if("value"in F)return F.value;var q=F.get;return q===void 0?void 0:q.call(M)}},a=i(3),l=w(a),u=i(2),c=w(u),h=i(0),f=w(h),d=i(16),y=w(d),v=i(6),_=w(v),g=i(7),m=w(g);function w(E){return E&&E.__esModule?E:{default:E}}function b(E,A){if(!(E instanceof A))throw new TypeError("Cannot call a class as a function")}function T(E,A){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:E}function C(E,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);E.prototype=Object.create(A&&A.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(E,A):E.__proto__=A)}var k=1,x=function(E){C(A,E);function A(){return b(this,A),T(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return s(A,[{key:"attach",value:function(){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"attach",this).call(this),this.attributes=new f.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new c.default().insert(this.value(),(0,l.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(M,F){var $=f.default.query(M,f.default.Scope.BLOCK_ATTRIBUTE);$!=null&&this.attributes.attribute($,F)}},{key:"formatAt",value:function(M,F,$,q){this.format($,q)}},{key:"insertAt",value:function(M,F,$){if(typeof F=="string"&&F.endsWith(`
`)){var q=f.default.create(P.blotName);this.parent.insertBefore(q,M===0?this:this.next),q.insertAt(0,F.slice(0,-1))}else o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,M,F,$)}}]),A}(f.default.Embed);x.scope=f.default.Scope.BLOCK_BLOT;var P=function(E){C(A,E);function A(O){b(this,A);var M=T(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,O));return M.cache={},M}return s(A,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(f.default.Leaf).reduce(function(M,F){return F.length()===0?M:M.insert(F.value(),S(F))},new c.default).insert(`
`,S(this))),this.cache.delta}},{key:"deleteAt",value:function(M,F){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"deleteAt",this).call(this,M,F),this.cache={}}},{key:"formatAt",value:function(M,F,$,q){F<=0||(f.default.query($,f.default.Scope.BLOCK)?M+F===this.length()&&this.format($,q):o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"formatAt",this).call(this,M,Math.min(F,this.length()-M-1),$,q),this.cache={})}},{key:"insertAt",value:function(M,F,$){if($!=null)return o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,M,F,$);if(F.length!==0){var q=F.split(`
`),W=q.shift();W.length>0&&(M<this.length()-1||this.children.tail==null?o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,Math.min(M,this.length()-1),W):this.children.tail.insertAt(this.children.tail.length(),W),this.cache={});var U=this;q.reduce(function(B,N){return U=U.split(B,!0),U.insertAt(0,N),N.length},M+W.length)}}},{key:"insertBefore",value:function(M,F){var $=this.children.head;o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertBefore",this).call(this,M,F),$ instanceof y.default&&$.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"length",this).call(this)+k),this.cache.length}},{key:"moveChildren",value:function(M,F){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"moveChildren",this).call(this,M,F),this.cache={}}},{key:"optimize",value:function(M){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,M),this.cache={}}},{key:"path",value:function(M){return o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"path",this).call(this,M,!0)}},{key:"removeChild",value:function(M){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"removeChild",this).call(this,M),this.cache={}}},{key:"split",value:function(M){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(F&&(M===0||M>=this.length()-k)){var $=this.clone();return M===0?(this.parent.insertBefore($,this),this):(this.parent.insertBefore($,this.next),$)}else{var q=o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"split",this).call(this,M,F);return this.cache={},q}}}]),A}(f.default.Block);P.blotName="block",P.tagName="P",P.defaultChild="break",P.allowedChildren=[_.default,f.default.Embed,m.default];function S(E){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return E==null||(typeof E.formats=="function"&&(A=(0,l.default)(A,E.formats())),E.parent==null||E.parent.blotName=="scroll"||E.parent.statics.scope!==E.statics.scope)?A:S(E.parent,A)}r.bubbleFormats=S,r.BlockEmbed=x,r.default=P},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},o=function(){function U(B,N){var V=[],z=!0,G=!1,K=void 0;try{for(var j=B[Symbol.iterator](),H;!(z=(H=j.next()).done)&&(V.push(H.value),!(N&&V.length===N));z=!0);}catch(X){G=!0,K=X}finally{try{!z&&j.return&&j.return()}finally{if(G)throw K}}return V}return function(B,N){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return U(B,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function U(B,N){for(var V=0;V<N.length;V++){var z=N[V];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(B,z.key,z)}}return function(B,N,V){return N&&U(B.prototype,N),V&&U(B,V),B}}();i(50);var l=i(2),u=S(l),c=i(14),h=S(c),f=i(8),d=S(f),y=i(9),v=S(y),_=i(0),g=S(_),m=i(15),w=S(m),b=i(3),T=S(b),C=i(10),k=S(C),x=i(34),P=S(x);function S(U){return U&&U.__esModule?U:{default:U}}function E(U,B,N){return B in U?Object.defineProperty(U,B,{value:N,enumerable:!0,configurable:!0,writable:!0}):U[B]=N,U}function A(U,B){if(!(U instanceof B))throw new TypeError("Cannot call a class as a function")}var O=(0,k.default)("quill"),M=function(){a(U,null,[{key:"debug",value:function(N){N===!0&&(N="log"),k.default.level(N)}},{key:"find",value:function(N){return N.__quill||g.default.find(N)}},{key:"import",value:function(N){return this.imports[N]==null&&O.error("Cannot import "+N+". Are you sure it was registered?"),this.imports[N]}},{key:"register",value:function(N,V){var z=this,G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof N!="string"){var K=N.attrName||N.blotName;typeof K=="string"?this.register("formats/"+K,N,V):Object.keys(N).forEach(function(j){z.register(j,N[j],V)})}else this.imports[N]!=null&&!G&&O.warn("Overwriting "+N+" with",V),this.imports[N]=V,(N.startsWith("blots/")||N.startsWith("formats/"))&&V.blotName!=="abstract"?g.default.register(V):N.startsWith("modules")&&typeof V.register=="function"&&V.register()}}]);function U(B){var N=this,V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(A(this,U),this.options=F(B,V),this.container=this.options.container,this.container==null)return O.error("Invalid Quill container",B);this.options.debug&&U.debug(this.options.debug);var z=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new d.default,this.scroll=g.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new h.default(this.scroll),this.selection=new w.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(d.default.events.EDITOR_CHANGE,function(K){K===d.default.events.TEXT_CHANGE&&N.root.classList.toggle("ql-blank",N.editor.isBlank())}),this.emitter.on(d.default.events.SCROLL_UPDATE,function(K,j){var H=N.selection.lastRange,X=H&&H.length===0?H.index:void 0;$.call(N,function(){return N.editor.update(null,j,X)},K)});var G=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+z+"<p><br></p></div>");this.setContents(G),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return a(U,[{key:"addContainer",value:function(N){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof N=="string"){var z=N;N=document.createElement("div"),N.classList.add(z)}return this.container.insertBefore(N,V),N}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(N,V,z){var G=this,K=q(N,V,z),j=o(K,4);return N=j[0],V=j[1],z=j[3],$.call(this,function(){return G.editor.deleteText(N,V)},z,N,-1*V)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(N),this.container.classList.toggle("ql-disabled",!N)}},{key:"focus",value:function(){var N=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=N,this.scrollIntoView()}},{key:"format",value:function(N,V){var z=this,G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:d.default.sources.API;return $.call(this,function(){var K=z.getSelection(!0),j=new u.default;if(K==null)return j;if(g.default.query(N,g.default.Scope.BLOCK))j=z.editor.formatLine(K.index,K.length,E({},N,V));else{if(K.length===0)return z.selection.format(N,V),j;j=z.editor.formatText(K.index,K.length,E({},N,V))}return z.setSelection(K,d.default.sources.SILENT),j},G)}},{key:"formatLine",value:function(N,V,z,G,K){var j=this,H=void 0,X=q(N,V,z,G,K),J=o(X,4);return N=J[0],V=J[1],H=J[2],K=J[3],$.call(this,function(){return j.editor.formatLine(N,V,H)},K,N,0)}},{key:"formatText",value:function(N,V,z,G,K){var j=this,H=void 0,X=q(N,V,z,G,K),J=o(X,4);return N=J[0],V=J[1],H=J[2],K=J[3],$.call(this,function(){return j.editor.formatText(N,V,H)},K,N,0)}},{key:"getBounds",value:function(N){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,z=void 0;typeof N=="number"?z=this.selection.getBounds(N,V):z=this.selection.getBounds(N.index,N.length);var G=this.container.getBoundingClientRect();return{bottom:z.bottom-G.top,height:z.height,left:z.left-G.left,right:z.right-G.left,top:z.top-G.top,width:z.width}}},{key:"getContents",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-N,z=q(N,V),G=o(z,2);return N=G[0],V=G[1],this.editor.getContents(N,V)}},{key:"getFormat",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof N=="number"?this.editor.getFormat(N,V):this.editor.getFormat(N.index,N.length)}},{key:"getIndex",value:function(N){return N.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(N){return this.scroll.leaf(N)}},{key:"getLine",value:function(N){return this.scroll.line(N)}},{key:"getLines",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof N!="number"?this.scroll.lines(N.index,N.length):this.scroll.lines(N,V)}},{key:"getModule",value:function(N){return this.theme.modules[N]}},{key:"getSelection",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return N&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-N,z=q(N,V),G=o(z,2);return N=G[0],V=G[1],this.editor.getText(N,V)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(N,V,z){var G=this,K=arguments.length>3&&arguments[3]!==void 0?arguments[3]:U.sources.API;return $.call(this,function(){return G.editor.insertEmbed(N,V,z)},K,N)}},{key:"insertText",value:function(N,V,z,G,K){var j=this,H=void 0,X=q(N,0,z,G,K),J=o(X,4);return N=J[0],H=J[2],K=J[3],$.call(this,function(){return j.editor.insertText(N,V,H)},K,N,V.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(N,V,z){this.clipboard.dangerouslyPasteHTML(N,V,z)}},{key:"removeFormat",value:function(N,V,z){var G=this,K=q(N,V,z),j=o(K,4);return N=j[0],V=j[1],z=j[3],$.call(this,function(){return G.editor.removeFormat(N,V)},z,N)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(N){var V=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.default.sources.API;return $.call(this,function(){N=new u.default(N);var G=V.getLength(),K=V.editor.deleteText(0,G),j=V.editor.applyDelta(N),H=j.ops[j.ops.length-1];H!=null&&typeof H.insert=="string"&&H.insert[H.insert.length-1]===`
`&&(V.editor.deleteText(V.getLength()-1,1),j.delete(1));var X=K.compose(j);return X},z)}},{key:"setSelection",value:function(N,V,z){if(N==null)this.selection.setRange(null,V||U.sources.API);else{var G=q(N,V,z),K=o(G,4);N=K[0],V=K[1],z=K[3],this.selection.setRange(new m.Range(N,V),z),z!==d.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(N){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.default.sources.API,z=new u.default().insert(N);return this.setContents(z,V)}},{key:"update",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d.default.sources.USER,V=this.scroll.update(N);return this.selection.update(N),V}},{key:"updateContents",value:function(N){var V=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.default.sources.API;return $.call(this,function(){return N=new u.default(N),V.editor.applyDelta(N,z)},z,!0)}}]),U}();M.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},M.events=d.default.events,M.sources=d.default.sources,M.version="1.3.7",M.imports={delta:u.default,parchment:g.default,"core/module":v.default,"core/theme":P.default};function F(U,B){if(B=(0,T.default)(!0,{container:U,modules:{clipboard:!0,keyboard:!0,history:!0}},B),!B.theme||B.theme===M.DEFAULTS.theme)B.theme=P.default;else if(B.theme=M.import("themes/"+B.theme),B.theme==null)throw new Error("Invalid theme "+B.theme+". Did you register it?");var N=(0,T.default)(!0,{},B.theme.DEFAULTS);[N,B].forEach(function(G){G.modules=G.modules||{},Object.keys(G.modules).forEach(function(K){G.modules[K]===!0&&(G.modules[K]={})})});var V=Object.keys(N.modules).concat(Object.keys(B.modules)),z=V.reduce(function(G,K){var j=M.import("modules/"+K);return j==null?O.error("Cannot load "+K+" module. Are you sure you registered it?"):G[K]=j.DEFAULTS||{},G},{});return B.modules!=null&&B.modules.toolbar&&B.modules.toolbar.constructor!==Object&&(B.modules.toolbar={container:B.modules.toolbar}),B=(0,T.default)(!0,{},M.DEFAULTS,{modules:z},N,B),["bounds","container","scrollingContainer"].forEach(function(G){typeof B[G]=="string"&&(B[G]=document.querySelector(B[G]))}),B.modules=Object.keys(B.modules).reduce(function(G,K){return B.modules[K]&&(G[K]=B.modules[K]),G},{}),B}function $(U,B,N,V){if(this.options.strict&&!this.isEnabled()&&B===d.default.sources.USER)return new u.default;var z=N==null?null:this.getSelection(),G=this.editor.delta,K=U();if(z!=null&&(N===!0&&(N=z.index),V==null?z=W(z,K,B):V!==0&&(z=W(z,N,V,B)),this.setSelection(z,d.default.sources.SILENT)),K.length()>0){var j,H=[d.default.events.TEXT_CHANGE,K,G,B];if((j=this.emitter).emit.apply(j,[d.default.events.EDITOR_CHANGE].concat(H)),B!==d.default.sources.SILENT){var X;(X=this.emitter).emit.apply(X,H)}}return K}function q(U,B,N,V,z){var G={};return typeof U.index=="number"&&typeof U.length=="number"?typeof B!="number"?(z=V,V=N,N=B,B=U.length,U=U.index):(B=U.length,U=U.index):typeof B!="number"&&(z=V,V=N,N=B,B=0),(typeof N>"u"?"undefined":s(N))==="object"?(G=N,z=V):typeof N=="string"&&(V!=null?G[N]=V:z=N),z=z||d.default.sources.API,[U,B,G,z]}function W(U,B,N,V){if(U==null)return null;var z=void 0,G=void 0;if(B instanceof u.default){var K=[U.index,U.index+U.length].map(function(J){return B.transformPosition(J,V!==d.default.sources.USER)}),j=o(K,2);z=j[0],G=j[1]}else{var H=[U.index,U.index+U.length].map(function(J){return J<B||J===B&&V===d.default.sources.USER?J:N>=0?J+N:Math.max(B,J+N)}),X=o(H,2);z=X[0],G=X[1]}return new m.Range(z,G-z)}r.expandConfig=F,r.overload=q,r.default=M},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function _(g,m){for(var w=0;w<m.length;w++){var b=m[w];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(g,m,w){return m&&_(g.prototype,m),w&&_(g,w),g}}(),o=function _(g,m,w){g===null&&(g=Function.prototype);var b=Object.getOwnPropertyDescriptor(g,m);if(b===void 0){var T=Object.getPrototypeOf(g);return T===null?void 0:_(T,m,w)}else{if("value"in b)return b.value;var C=b.get;return C===void 0?void 0:C.call(w)}},a=i(7),l=h(a),u=i(0),c=h(u);function h(_){return _&&_.__esModule?_:{default:_}}function f(_,g){if(!(_ instanceof g))throw new TypeError("Cannot call a class as a function")}function d(_,g){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:_}function y(_,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);_.prototype=Object.create(g&&g.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(_,g):_.__proto__=g)}var v=function(_){y(g,_);function g(){return f(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return s(g,[{key:"formatAt",value:function(w,b,T,C){if(g.compare(this.statics.blotName,T)<0&&c.default.query(T,c.default.Scope.BLOT)){var k=this.isolate(w,b);C&&k.wrap(T,C)}else o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"formatAt",this).call(this,w,b,T,C)}},{key:"optimize",value:function(w){if(o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"optimize",this).call(this,w),this.parent instanceof g&&g.compare(this.statics.blotName,this.parent.statics.blotName)>0){var b=this.parent.isolate(this.offset(),this.length());this.moveChildren(b),b.wrap(this)}}}],[{key:"compare",value:function(w,b){var T=g.order.indexOf(w),C=g.order.indexOf(b);return T>=0||C>=0?T-C:w===b?0:w<b?-1:1}}]),g}(c.default.Inline);v.allowedChildren=[v,c.default.Embed,l.default],v.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(0),o=a(s);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function u(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function c(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var h=function(f){c(d,f);function d(){return l(this,d),u(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(o.default.Text);r.default=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function m(w,b){for(var T=0;T<b.length;T++){var C=b[T];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(w,C.key,C)}}return function(w,b,T){return b&&m(w.prototype,b),T&&m(w,T),w}}(),o=function m(w,b,T){w===null&&(w=Function.prototype);var C=Object.getOwnPropertyDescriptor(w,b);if(C===void 0){var k=Object.getPrototypeOf(w);return k===null?void 0:m(k,b,T)}else{if("value"in C)return C.value;var x=C.get;return x===void 0?void 0:x.call(T)}},a=i(54),l=h(a),u=i(10),c=h(u);function h(m){return m&&m.__esModule?m:{default:m}}function f(m,w){if(!(m instanceof w))throw new TypeError("Cannot call a class as a function")}function d(m,w){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:m}function y(m,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);m.prototype=Object.create(w&&w.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(m,w):m.__proto__=w)}var v=(0,c.default)("quill:events"),_=["selectionchange","mousedown","mouseup","click"];_.forEach(function(m){document.addEventListener(m,function(){for(var w=arguments.length,b=Array(w),T=0;T<w;T++)b[T]=arguments[T];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(C){if(C.__quill&&C.__quill.emitter){var k;(k=C.__quill.emitter).handleDOM.apply(k,b)}})})});var g=function(m){y(w,m);function w(){f(this,w);var b=d(this,(w.__proto__||Object.getPrototypeOf(w)).call(this));return b.listeners={},b.on("error",v.error),b}return s(w,[{key:"emit",value:function(){v.log.apply(v,arguments),o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(T){for(var C=arguments.length,k=Array(C>1?C-1:0),x=1;x<C;x++)k[x-1]=arguments[x];(this.listeners[T.type]||[]).forEach(function(P){var S=P.node,E=P.handler;(T.target===S||S.contains(T.target))&&E.apply(void 0,[T].concat(k))})}},{key:"listenDOM",value:function(T,C,k){this.listeners[T]||(this.listeners[T]=[]),this.listeners[T].push({node:C,handler:k})}}]),w}(l.default);g.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},g.sources={API:"api",SILENT:"silent",USER:"user"},r.default=g},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});function s(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}var o=function a(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s(this,a),this.quill=l,this.options=u};o.DEFAULTS={},r.default=o},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=["error","warn","log","info"],o="warn";function a(u){if(s.indexOf(u)<=s.indexOf(o)){for(var c,h=arguments.length,f=Array(h>1?h-1:0),d=1;d<h;d++)f[d-1]=arguments[d];(c=console)[u].apply(c,f)}}function l(u){return s.reduce(function(c,h){return c[h]=a.bind(console,h,u),c},{})}a.level=l.level=function(u){o=u},r.default=l},function(n,r,i){var s=Array.prototype.slice,o=i(52),a=i(53),l=n.exports=function(f,d,y){return y||(y={}),f===d?!0:f instanceof Date&&d instanceof Date?f.getTime()===d.getTime():!f||!d||typeof f!="object"&&typeof d!="object"?y.strict?f===d:f==d:h(f,d,y)};function u(f){return f==null}function c(f){return!(!f||typeof f!="object"||typeof f.length!="number"||typeof f.copy!="function"||typeof f.slice!="function"||f.length>0&&typeof f[0]!="number")}function h(f,d,y){var v,_;if(u(f)||u(d)||f.prototype!==d.prototype)return!1;if(a(f))return a(d)?(f=s.call(f),d=s.call(d),l(f,d,y)):!1;if(c(f)){if(!c(d)||f.length!==d.length)return!1;for(v=0;v<f.length;v++)if(f[v]!==d[v])return!1;return!0}try{var g=o(f),m=o(d)}catch{return!1}if(g.length!=m.length)return!1;for(g.sort(),m.sort(),v=g.length-1;v>=0;v--)if(g[v]!=m[v])return!1;for(v=g.length-1;v>=0;v--)if(_=g[v],!l(f[_],d[_],y))return!1;return typeof f==typeof d}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(1),o=function(){function a(l,u,c){c===void 0&&(c={}),this.attrName=l,this.keyName=u;var h=s.Scope.TYPE&s.Scope.ATTRIBUTE;c.scope!=null?this.scope=c.scope&s.Scope.LEVEL|h:this.scope=s.Scope.ATTRIBUTE,c.whitelist!=null&&(this.whitelist=c.whitelist)}return a.keys=function(l){return[].map.call(l.attributes,function(u){return u.name})},a.prototype.add=function(l,u){return this.canAdd(l,u)?(l.setAttribute(this.keyName,u),!0):!1},a.prototype.canAdd=function(l,u){var c=s.query(l,s.Scope.BLOT&(this.scope|s.Scope.TYPE));return c==null?!1:this.whitelist==null?!0:typeof u=="string"?this.whitelist.indexOf(u.replace(/["']/g,""))>-1:this.whitelist.indexOf(u)>-1},a.prototype.remove=function(l){l.removeAttribute(this.keyName)},a.prototype.value=function(l){var u=l.getAttribute(this.keyName);return this.canAdd(l,u)&&u?u:""},a}();r.default=o},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var s=function(){function x(P,S){var E=[],A=!0,O=!1,M=void 0;try{for(var F=P[Symbol.iterator](),$;!(A=($=F.next()).done)&&(E.push($.value),!(S&&E.length===S));A=!0);}catch(q){O=!0,M=q}finally{try{!A&&F.return&&F.return()}finally{if(O)throw M}}return E}return function(P,S){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return x(P,S);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function x(P,S){for(var E=0;E<S.length;E++){var A=S[E];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(P,A.key,A)}}return function(P,S,E){return S&&x(P.prototype,S),E&&x(P,E),P}}(),a=function x(P,S,E){P===null&&(P=Function.prototype);var A=Object.getOwnPropertyDescriptor(P,S);if(A===void 0){var O=Object.getPrototypeOf(P);return O===null?void 0:x(O,S,E)}else{if("value"in A)return A.value;var M=A.get;return M===void 0?void 0:M.call(E)}},l=i(2),u=m(l),c=i(0),h=m(c),f=i(4),d=m(f),y=i(6),v=m(y),_=i(7),g=m(_);function m(x){return x&&x.__esModule?x:{default:x}}function w(x,P){if(!(x instanceof P))throw new TypeError("Cannot call a class as a function")}function b(x,P){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:x}function T(x,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);x.prototype=Object.create(P&&P.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(x,P):x.__proto__=P)}var C=function(x){T(P,x);function P(){return w(this,P),b(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}return P}(v.default);C.blotName="code",C.tagName="CODE";var k=function(x){T(P,x);function P(){return w(this,P),b(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}return o(P,[{key:"delta",value:function(){var E=this,A=this.domNode.textContent;return A.endsWith(`
`)&&(A=A.slice(0,-1)),A.split(`
`).reduce(function(O,M){return O.insert(M).insert(`
`,E.formats())},new u.default)}},{key:"format",value:function(E,A){if(!(E===this.statics.blotName&&A)){var O=this.descendant(g.default,this.length()-1),M=s(O,1),F=M[0];F!=null&&F.deleteAt(F.length()-1,1),a(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"format",this).call(this,E,A)}}},{key:"formatAt",value:function(E,A,O,M){if(A!==0&&!(h.default.query(O,h.default.Scope.BLOCK)==null||O===this.statics.blotName&&M===this.statics.formats(this.domNode))){var F=this.newlineIndex(E);if(!(F<0||F>=E+A)){var $=this.newlineIndex(E,!0)+1,q=F-$+1,W=this.isolate($,q),U=W.next;W.format(O,M),U instanceof P&&U.formatAt(0,E-$+A-q,O,M)}}}},{key:"insertAt",value:function(E,A,O){if(O==null){var M=this.descendant(g.default,E),F=s(M,2),$=F[0],q=F[1];$.insertAt(q,A)}}},{key:"length",value:function(){var E=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?E:E+1}},{key:"newlineIndex",value:function(E){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(A)return this.domNode.textContent.slice(0,E).lastIndexOf(`
`);var O=this.domNode.textContent.slice(E).indexOf(`
`);return O>-1?E+O:-1}},{key:"optimize",value:function(E){this.domNode.textContent.endsWith(`
`)||this.appendChild(h.default.create("text",`
`)),a(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"optimize",this).call(this,E);var A=this.next;A!=null&&A.prev===this&&A.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===A.statics.formats(A.domNode)&&(A.optimize(E),A.moveChildren(this),A.remove())}},{key:"replace",value:function(E){a(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"replace",this).call(this,E),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(A){var O=h.default.find(A);O==null?A.parentNode.removeChild(A):O instanceof h.default.Embed?O.remove():O.unwrap()})}}],[{key:"create",value:function(E){var A=a(P.__proto__||Object.getPrototypeOf(P),"create",this).call(this,E);return A.setAttribute("spellcheck",!1),A}},{key:"formats",value:function(){return!0}}]),P}(d.default);k.blotName="code-block",k.tagName="PRE",k.TAB="  ",r.Code=C,r.default=k},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},o=function(){function U(B,N){var V=[],z=!0,G=!1,K=void 0;try{for(var j=B[Symbol.iterator](),H;!(z=(H=j.next()).done)&&(V.push(H.value),!(N&&V.length===N));z=!0);}catch(X){G=!0,K=X}finally{try{!z&&j.return&&j.return()}finally{if(G)throw K}}return V}return function(B,N){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return U(B,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function U(B,N){for(var V=0;V<N.length;V++){var z=N[V];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(B,z.key,z)}}return function(B,N,V){return N&&U(B.prototype,N),V&&U(B,V),B}}(),l=i(2),u=A(l),c=i(20),h=A(c),f=i(0),d=A(f),y=i(13),v=A(y),_=i(24),g=A(_),m=i(4),w=A(m),b=i(16),T=A(b),C=i(21),k=A(C),x=i(11),P=A(x),S=i(3),E=A(S);function A(U){return U&&U.__esModule?U:{default:U}}function O(U,B,N){return B in U?Object.defineProperty(U,B,{value:N,enumerable:!0,configurable:!0,writable:!0}):U[B]=N,U}function M(U,B){if(!(U instanceof B))throw new TypeError("Cannot call a class as a function")}var F=/^[ -~]*$/,$=function(){function U(B){M(this,U),this.scroll=B,this.delta=this.getDelta()}return a(U,[{key:"applyDelta",value:function(N){var V=this,z=!1;this.scroll.update();var G=this.scroll.length();return this.scroll.batchStart(),N=W(N),N.reduce(function(K,j){var H=j.retain||j.delete||j.insert.length||1,X=j.attributes||{};if(j.insert!=null){if(typeof j.insert=="string"){var J=j.insert;J.endsWith(`
`)&&z&&(z=!1,J=J.slice(0,-1)),K>=G&&!J.endsWith(`
`)&&(z=!0),V.scroll.insertAt(K,J);var te=V.scroll.line(K),fe=o(te,2),ve=fe[0],_e=fe[1],Se=(0,E.default)({},(0,m.bubbleFormats)(ve));if(ve instanceof w.default){var Ce=ve.descendant(d.default.Leaf,_e),se=o(Ce,1),ge=se[0];Se=(0,E.default)(Se,(0,m.bubbleFormats)(ge))}X=h.default.attributes.diff(Se,X)||{}}else if(s(j.insert)==="object"){var Q=Object.keys(j.insert)[0];if(Q==null)return K;V.scroll.insertAt(K,Q,j.insert[Q])}G+=H}return Object.keys(X).forEach(function(ee){V.scroll.formatAt(K,H,ee,X[ee])}),K+H},0),N.reduce(function(K,j){return typeof j.delete=="number"?(V.scroll.deleteAt(K,j.delete),K):K+(j.retain||j.insert.length||1)},0),this.scroll.batchEnd(),this.update(N)}},{key:"deleteText",value:function(N,V){return this.scroll.deleteAt(N,V),this.update(new u.default().retain(N).delete(V))}},{key:"formatLine",value:function(N,V){var z=this,G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(G).forEach(function(K){if(!(z.scroll.whitelist!=null&&!z.scroll.whitelist[K])){var j=z.scroll.lines(N,Math.max(V,1)),H=V;j.forEach(function(X){var J=X.length();if(!(X instanceof v.default))X.format(K,G[K]);else{var te=N-X.offset(z.scroll),fe=X.newlineIndex(te+H)-te+1;X.formatAt(te,fe,K,G[K])}H-=J})}}),this.scroll.optimize(),this.update(new u.default().retain(N).retain(V,(0,k.default)(G)))}},{key:"formatText",value:function(N,V){var z=this,G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(G).forEach(function(K){z.scroll.formatAt(N,V,K,G[K])}),this.update(new u.default().retain(N).retain(V,(0,k.default)(G)))}},{key:"getContents",value:function(N,V){return this.delta.slice(N,N+V)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(N,V){return N.concat(V.delta())},new u.default)}},{key:"getFormat",value:function(N){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,z=[],G=[];V===0?this.scroll.path(N).forEach(function(j){var H=o(j,1),X=H[0];X instanceof w.default?z.push(X):X instanceof d.default.Leaf&&G.push(X)}):(z=this.scroll.lines(N,V),G=this.scroll.descendants(d.default.Leaf,N,V));var K=[z,G].map(function(j){if(j.length===0)return{};for(var H=(0,m.bubbleFormats)(j.shift());Object.keys(H).length>0;){var X=j.shift();if(X==null)return H;H=q((0,m.bubbleFormats)(X),H)}return H});return E.default.apply(E.default,K)}},{key:"getText",value:function(N,V){return this.getContents(N,V).filter(function(z){return typeof z.insert=="string"}).map(function(z){return z.insert}).join("")}},{key:"insertEmbed",value:function(N,V,z){return this.scroll.insertAt(N,V,z),this.update(new u.default().retain(N).insert(O({},V,z)))}},{key:"insertText",value:function(N,V){var z=this,G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return V=V.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(N,V),Object.keys(G).forEach(function(K){z.scroll.formatAt(N,V.length,K,G[K])}),this.update(new u.default().retain(N).insert(V,(0,k.default)(G)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var N=this.scroll.children.head;return N.statics.blotName!==w.default.blotName||N.children.length>1?!1:N.children.head instanceof T.default}},{key:"removeFormat",value:function(N,V){var z=this.getText(N,V),G=this.scroll.line(N+V),K=o(G,2),j=K[0],H=K[1],X=0,J=new u.default;j!=null&&(j instanceof v.default?X=j.newlineIndex(H)-H+1:X=j.length()-H,J=j.delta().slice(H,H+X-1).insert(`
`));var te=this.getContents(N,V+X),fe=te.diff(new u.default().insert(z).concat(J)),ve=new u.default().retain(N).concat(fe);return this.applyDelta(ve)}},{key:"update",value:function(N){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,G=this.delta;if(V.length===1&&V[0].type==="characterData"&&V[0].target.data.match(F)&&d.default.find(V[0].target)){var K=d.default.find(V[0].target),j=(0,m.bubbleFormats)(K),H=K.offset(this.scroll),X=V[0].oldValue.replace(g.default.CONTENTS,""),J=new u.default().insert(X),te=new u.default().insert(K.value()),fe=new u.default().retain(H).concat(J.diff(te,z));N=fe.reduce(function(ve,_e){return _e.insert?ve.insert(_e.insert,j):ve.push(_e)},new u.default),this.delta=G.compose(N)}else this.delta=this.getDelta(),(!N||!(0,P.default)(G.compose(N),this.delta))&&(N=G.diff(this.delta,z));return N}}]),U}();function q(U,B){return Object.keys(B).reduce(function(N,V){return U[V]==null||(B[V]===U[V]?N[V]=B[V]:Array.isArray(B[V])?B[V].indexOf(U[V])<0&&(N[V]=B[V].concat([U[V]])):N[V]=[B[V],U[V]]),N},{})}function W(U){return U.reduce(function(B,N){if(N.insert===1){var V=(0,k.default)(N.attributes);return delete V.image,B.insert({image:N.attributes.image},V)}if(N.attributes!=null&&(N.attributes.list===!0||N.attributes.bullet===!0)&&(N=(0,k.default)(N),N.attributes.list?N.attributes.list="ordered":(N.attributes.list="bullet",delete N.attributes.bullet)),typeof N.insert=="string"){var z=N.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return B.insert(z,N.attributes)}return B.push(N)},new u.default)}r.default=$},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var s=function(){function x(P,S){var E=[],A=!0,O=!1,M=void 0;try{for(var F=P[Symbol.iterator](),$;!(A=($=F.next()).done)&&(E.push($.value),!(S&&E.length===S));A=!0);}catch(q){O=!0,M=q}finally{try{!A&&F.return&&F.return()}finally{if(O)throw M}}return E}return function(P,S){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return x(P,S);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function x(P,S){for(var E=0;E<S.length;E++){var A=S[E];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(P,A.key,A)}}return function(P,S,E){return S&&x(P.prototype,S),E&&x(P,E),P}}(),a=i(0),l=g(a),u=i(21),c=g(u),h=i(11),f=g(h),d=i(8),y=g(d),v=i(10),_=g(v);function g(x){return x&&x.__esModule?x:{default:x}}function m(x){if(Array.isArray(x)){for(var P=0,S=Array(x.length);P<x.length;P++)S[P]=x[P];return S}else return Array.from(x)}function w(x,P){if(!(x instanceof P))throw new TypeError("Cannot call a class as a function")}var b=(0,_.default)("quill:selection"),T=function x(P){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;w(this,x),this.index=P,this.length=S},C=function(){function x(P,S){var E=this;w(this,x),this.emitter=S,this.scroll=P,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=l.default.create("cursor",this),this.lastRange=this.savedRange=new T(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){E.mouseDown||setTimeout(E.update.bind(E,y.default.sources.USER),1)}),this.emitter.on(y.default.events.EDITOR_CHANGE,function(A,O){A===y.default.events.TEXT_CHANGE&&O.length()>0&&E.update(y.default.sources.SILENT)}),this.emitter.on(y.default.events.SCROLL_BEFORE_UPDATE,function(){if(E.hasFocus()){var A=E.getNativeRange();A!=null&&A.start.node!==E.cursor.textNode&&E.emitter.once(y.default.events.SCROLL_UPDATE,function(){try{E.setNativeRange(A.start.node,A.start.offset,A.end.node,A.end.offset)}catch{}})}}),this.emitter.on(y.default.events.SCROLL_OPTIMIZE,function(A,O){if(O.range){var M=O.range,F=M.startNode,$=M.startOffset,q=M.endNode,W=M.endOffset;E.setNativeRange(F,$,q,W)}}),this.update(y.default.sources.SILENT)}return o(x,[{key:"handleComposition",value:function(){var S=this;this.root.addEventListener("compositionstart",function(){S.composing=!0}),this.root.addEventListener("compositionend",function(){if(S.composing=!1,S.cursor.parent){var E=S.cursor.restore();if(!E)return;setTimeout(function(){S.setNativeRange(E.startNode,E.startOffset,E.endNode,E.endOffset)},1)}})}},{key:"handleDragging",value:function(){var S=this;this.emitter.listenDOM("mousedown",document.body,function(){S.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){S.mouseDown=!1,S.update(y.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(S,E){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[S])){this.scroll.update();var A=this.getNativeRange();if(!(A==null||!A.native.collapsed||l.default.query(S,l.default.Scope.BLOCK))){if(A.start.node!==this.cursor.textNode){var O=l.default.find(A.start.node,!1);if(O==null)return;if(O instanceof l.default.Leaf){var M=O.split(A.start.offset);O.parent.insertBefore(this.cursor,M)}else O.insertBefore(this.cursor,A.start.node);this.cursor.attach()}this.cursor.format(S,E),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(S){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,A=this.scroll.length();S=Math.min(S,A-1),E=Math.min(S+E,A-1)-S;var O=void 0,M=this.scroll.leaf(S),F=s(M,2),$=F[0],q=F[1];if($==null)return null;var W=$.position(q,!0),U=s(W,2);O=U[0],q=U[1];var B=document.createRange();if(E>0){B.setStart(O,q);var N=this.scroll.leaf(S+E),V=s(N,2);if($=V[0],q=V[1],$==null)return null;var z=$.position(q,!0),G=s(z,2);return O=G[0],q=G[1],B.setEnd(O,q),B.getBoundingClientRect()}else{var K="left",j=void 0;return O instanceof Text?(q<O.data.length?(B.setStart(O,q),B.setEnd(O,q+1)):(B.setStart(O,q-1),B.setEnd(O,q),K="right"),j=B.getBoundingClientRect()):(j=$.domNode.getBoundingClientRect(),q>0&&(K="right")),{bottom:j.top+j.height,height:j.height,left:j[K],right:j[K],top:j.top,width:0}}}},{key:"getNativeRange",value:function(){var S=document.getSelection();if(S==null||S.rangeCount<=0)return null;var E=S.getRangeAt(0);if(E==null)return null;var A=this.normalizeNative(E);return b.info("getNativeRange",A),A}},{key:"getRange",value:function(){var S=this.getNativeRange();if(S==null)return[null,null];var E=this.normalizedToRange(S);return[E,S]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(S){var E=this,A=[[S.start.node,S.start.offset]];S.native.collapsed||A.push([S.end.node,S.end.offset]);var O=A.map(function($){var q=s($,2),W=q[0],U=q[1],B=l.default.find(W,!0),N=B.offset(E.scroll);return U===0?N:B instanceof l.default.Container?N+B.length():N+B.index(W,U)}),M=Math.min(Math.max.apply(Math,m(O)),this.scroll.length()-1),F=Math.min.apply(Math,[M].concat(m(O)));return new T(F,M-F)}},{key:"normalizeNative",value:function(S){if(!k(this.root,S.startContainer)||!S.collapsed&&!k(this.root,S.endContainer))return null;var E={start:{node:S.startContainer,offset:S.startOffset},end:{node:S.endContainer,offset:S.endOffset},native:S};return[E.start,E.end].forEach(function(A){for(var O=A.node,M=A.offset;!(O instanceof Text)&&O.childNodes.length>0;)if(O.childNodes.length>M)O=O.childNodes[M],M=0;else if(O.childNodes.length===M)O=O.lastChild,M=O instanceof Text?O.data.length:O.childNodes.length+1;else break;A.node=O,A.offset=M}),E}},{key:"rangeToNative",value:function(S){var E=this,A=S.collapsed?[S.index]:[S.index,S.index+S.length],O=[],M=this.scroll.length();return A.forEach(function(F,$){F=Math.min(M-1,F);var q=void 0,W=E.scroll.leaf(F),U=s(W,2),B=U[0],N=U[1],V=B.position(N,$!==0),z=s(V,2);q=z[0],N=z[1],O.push(q,N)}),O.length<2&&(O=O.concat(O)),O}},{key:"scrollIntoView",value:function(S){var E=this.lastRange;if(E!=null){var A=this.getBounds(E.index,E.length);if(A!=null){var O=this.scroll.length()-1,M=this.scroll.line(Math.min(E.index,O)),F=s(M,1),$=F[0],q=$;if(E.length>0){var W=this.scroll.line(Math.min(E.index+E.length,O)),U=s(W,1);q=U[0]}if(!($==null||q==null)){var B=S.getBoundingClientRect();A.top<B.top?S.scrollTop-=B.top-A.top:A.bottom>B.bottom&&(S.scrollTop+=A.bottom-B.bottom)}}}}},{key:"setNativeRange",value:function(S,E){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S,O=arguments.length>3&&arguments[3]!==void 0?arguments[3]:E,M=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(b.info("setNativeRange",S,E,A,O),!(S!=null&&(this.root.parentNode==null||S.parentNode==null||A.parentNode==null))){var F=document.getSelection();if(F!=null)if(S!=null){this.hasFocus()||this.root.focus();var $=(this.getNativeRange()||{}).native;if($==null||M||S!==$.startContainer||E!==$.startOffset||A!==$.endContainer||O!==$.endOffset){S.tagName=="BR"&&(E=[].indexOf.call(S.parentNode.childNodes,S),S=S.parentNode),A.tagName=="BR"&&(O=[].indexOf.call(A.parentNode.childNodes,A),A=A.parentNode);var q=document.createRange();q.setStart(S,E),q.setEnd(A,O),F.removeAllRanges(),F.addRange(q)}}else F.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(S){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.default.sources.API;if(typeof E=="string"&&(A=E,E=!1),b.info("setRange",S),S!=null){var O=this.rangeToNative(S);this.setNativeRange.apply(this,m(O).concat([E]))}else this.setNativeRange(null);this.update(A)}},{key:"update",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y.default.sources.USER,E=this.lastRange,A=this.getRange(),O=s(A,2),M=O[0],F=O[1];if(this.lastRange=M,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,f.default)(E,this.lastRange)){var $;!this.composing&&F!=null&&F.native.collapsed&&F.start.node!==this.cursor.textNode&&this.cursor.restore();var q=[y.default.events.SELECTION_CHANGE,(0,c.default)(this.lastRange),(0,c.default)(E),S];if(($=this.emitter).emit.apply($,[y.default.events.EDITOR_CHANGE].concat(q)),S!==y.default.sources.SILENT){var W;(W=this.emitter).emit.apply(W,q)}}}}]),x}();function k(x,P){try{P.parentNode}catch{return!1}return P instanceof Text&&(P=P.parentNode),x.contains(P)}r.Range=T,r.default=C},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function y(v,_){for(var g=0;g<_.length;g++){var m=_[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(v,m.key,m)}}return function(v,_,g){return _&&y(v.prototype,_),g&&y(v,g),v}}(),o=function y(v,_,g){v===null&&(v=Function.prototype);var m=Object.getOwnPropertyDescriptor(v,_);if(m===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:y(w,_,g)}else{if("value"in m)return m.value;var b=m.get;return b===void 0?void 0:b.call(g)}},a=i(0),l=u(a);function u(y){return y&&y.__esModule?y:{default:y}}function c(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function h(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function f(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var d=function(y){f(v,y);function v(){return c(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,[{key:"insertInto",value:function(g,m){g.children.length===0?o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"insertInto",this).call(this,g,m):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),v}(l.default.Embed);d.blotName="break",d.tagName="BR",r.default=d},function(n,r,i){var s=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var y in d)d.hasOwnProperty(y)&&(f[y]=d[y])};return function(f,d){h(f,d);function y(){this.constructor=f}f.prototype=d===null?Object.create(d):(y.prototype=d.prototype,new y)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(44),a=i(30),l=i(1),u=function(h){s(f,h);function f(d){var y=h.call(this,d)||this;return y.build(),y}return f.prototype.appendChild=function(d){this.insertBefore(d)},f.prototype.attach=function(){h.prototype.attach.call(this),this.children.forEach(function(d){d.attach()})},f.prototype.build=function(){var d=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(y){try{var v=c(y);d.insertBefore(v,d.children.head||void 0)}catch(_){if(_ instanceof l.ParchmentError)return;throw _}})},f.prototype.deleteAt=function(d,y){if(d===0&&y===this.length())return this.remove();this.children.forEachAt(d,y,function(v,_,g){v.deleteAt(_,g)})},f.prototype.descendant=function(d,y){var v=this.children.find(y),_=v[0],g=v[1];return d.blotName==null&&d(_)||d.blotName!=null&&_ instanceof d?[_,g]:_ instanceof f?_.descendant(d,g):[null,-1]},f.prototype.descendants=function(d,y,v){y===void 0&&(y=0),v===void 0&&(v=Number.MAX_VALUE);var _=[],g=v;return this.children.forEachAt(y,v,function(m,w,b){(d.blotName==null&&d(m)||d.blotName!=null&&m instanceof d)&&_.push(m),m instanceof f&&(_=_.concat(m.descendants(d,w,g))),g-=b}),_},f.prototype.detach=function(){this.children.forEach(function(d){d.detach()}),h.prototype.detach.call(this)},f.prototype.formatAt=function(d,y,v,_){this.children.forEachAt(d,y,function(g,m,w){g.formatAt(m,w,v,_)})},f.prototype.insertAt=function(d,y,v){var _=this.children.find(d),g=_[0],m=_[1];if(g)g.insertAt(m,y,v);else{var w=v==null?l.create("text",y):l.create(y,v);this.appendChild(w)}},f.prototype.insertBefore=function(d,y){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(v){return d instanceof v}))throw new l.ParchmentError("Cannot insert "+d.statics.blotName+" into "+this.statics.blotName);d.insertInto(this,y)},f.prototype.length=function(){return this.children.reduce(function(d,y){return d+y.length()},0)},f.prototype.moveChildren=function(d,y){this.children.forEach(function(v){d.insertBefore(v,y)})},f.prototype.optimize=function(d){if(h.prototype.optimize.call(this,d),this.children.length===0)if(this.statics.defaultChild!=null){var y=l.create(this.statics.defaultChild);this.appendChild(y),y.optimize(d)}else this.remove()},f.prototype.path=function(d,y){y===void 0&&(y=!1);var v=this.children.find(d,y),_=v[0],g=v[1],m=[[this,d]];return _ instanceof f?m.concat(_.path(g,y)):(_!=null&&m.push([_,g]),m)},f.prototype.removeChild=function(d){this.children.remove(d)},f.prototype.replace=function(d){d instanceof f&&d.moveChildren(this),h.prototype.replace.call(this,d)},f.prototype.split=function(d,y){if(y===void 0&&(y=!1),!y){if(d===0)return this;if(d===this.length())return this.next}var v=this.clone();return this.parent.insertBefore(v,this.next),this.children.forEachAt(d,this.length(),function(_,g,m){_=_.split(g,y),v.appendChild(_)}),v},f.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},f.prototype.update=function(d,y){var v=this,_=[],g=[];d.forEach(function(m){m.target===v.domNode&&m.type==="childList"&&(_.push.apply(_,m.addedNodes),g.push.apply(g,m.removedNodes))}),g.forEach(function(m){if(!(m.parentNode!=null&&m.tagName!=="IFRAME"&&document.body.compareDocumentPosition(m)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var w=l.find(m);w!=null&&(w.domNode.parentNode==null||w.domNode.parentNode===v.domNode)&&w.detach()}}),_.filter(function(m){return m.parentNode==v.domNode}).sort(function(m,w){return m===w?0:m.compareDocumentPosition(w)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(m){var w=null;m.nextSibling!=null&&(w=l.find(m.nextSibling));var b=c(m);(b.next!=w||b.next==null)&&(b.parent!=null&&b.parent.removeChild(v),v.insertBefore(b,w||void 0))})},f}(a.default);function c(h){var f=l.find(h);if(f==null)try{f=l.create(h)}catch{f=l.create(l.Scope.INLINE),[].slice.call(h.childNodes).forEach(function(y){f.domNode.appendChild(y)}),h.parentNode&&h.parentNode.replaceChild(f.domNode,h),f.attach()}return f}r.default=u},function(n,r,i){var s=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var y in d)d.hasOwnProperty(y)&&(f[y]=d[y])};return function(f,d){h(f,d);function y(){this.constructor=f}f.prototype=d===null?Object.create(d):(y.prototype=d.prototype,new y)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12),a=i(31),l=i(17),u=i(1),c=function(h){s(f,h);function f(d){var y=h.call(this,d)||this;return y.attributes=new a.default(y.domNode),y}return f.formats=function(d){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return d.tagName.toLowerCase()},f.prototype.format=function(d,y){var v=u.query(d);v instanceof o.default?this.attributes.attribute(v,y):y&&v!=null&&(d!==this.statics.blotName||this.formats()[d]!==y)&&this.replaceWith(d,y)},f.prototype.formats=function(){var d=this.attributes.values(),y=this.statics.formats(this.domNode);return y!=null&&(d[this.statics.blotName]=y),d},f.prototype.replaceWith=function(d,y){var v=h.prototype.replaceWith.call(this,d,y);return this.attributes.copy(v),v},f.prototype.update=function(d,y){var v=this;h.prototype.update.call(this,d,y),d.some(function(_){return _.target===v.domNode&&_.type==="attributes"})&&this.attributes.build()},f.prototype.wrap=function(d,y){var v=h.prototype.wrap.call(this,d,y);return v instanceof f&&v.statics.scope===this.statics.scope&&this.attributes.move(v),v},f}(l.default);r.default=c},function(n,r,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var f in h)h.hasOwnProperty(f)&&(c[f]=h[f])};return function(c,h){u(c,h);function f(){this.constructor=c}c.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(30),a=i(1),l=function(u){s(c,u);function c(){return u!==null&&u.apply(this,arguments)||this}return c.value=function(h){return!0},c.prototype.index=function(h,f){return this.domNode===h||this.domNode.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(f,1):-1},c.prototype.position=function(h,f){var d=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return h>0&&(d+=1),[this.parent.domNode,d]},c.prototype.value=function(){var h;return h={},h[this.statics.blotName]=this.statics.value(this.domNode)||!0,h},c.scope=a.Scope.INLINE_BLOT,c}(o.default);r.default=l},function(n,r,i){var s=i(11),o=i(3),a={attributes:{compose:function(u,c,h){typeof u!="object"&&(u={}),typeof c!="object"&&(c={});var f=o(!0,{},c);h||(f=Object.keys(f).reduce(function(y,v){return f[v]!=null&&(y[v]=f[v]),y},{}));for(var d in u)u[d]!==void 0&&c[d]===void 0&&(f[d]=u[d]);return Object.keys(f).length>0?f:void 0},diff:function(u,c){typeof u!="object"&&(u={}),typeof c!="object"&&(c={});var h=Object.keys(u).concat(Object.keys(c)).reduce(function(f,d){return s(u[d],c[d])||(f[d]=c[d]===void 0?null:c[d]),f},{});return Object.keys(h).length>0?h:void 0},transform:function(u,c,h){if(typeof u!="object")return c;if(typeof c=="object"){if(!h)return c;var f=Object.keys(c).reduce(function(d,y){return u[y]===void 0&&(d[y]=c[y]),d},{});return Object.keys(f).length>0?f:void 0}}},iterator:function(u){return new l(u)},length:function(u){return typeof u.delete=="number"?u.delete:typeof u.retain=="number"?u.retain:typeof u.insert=="string"?u.insert.length:1}};function l(u){this.ops=u,this.index=0,this.offset=0}l.prototype.hasNext=function(){return this.peekLength()<1/0},l.prototype.next=function(u){u||(u=1/0);var c=this.ops[this.index];if(c){var h=this.offset,f=a.length(c);if(u>=f-h?(u=f-h,this.index+=1,this.offset=0):this.offset+=u,typeof c.delete=="number")return{delete:u};var d={};return c.attributes&&(d.attributes=c.attributes),typeof c.retain=="number"?d.retain=u:typeof c.insert=="string"?d.insert=c.insert.substr(h,u):d.insert=c.insert,d}else return{retain:1/0}},l.prototype.peek=function(){return this.ops[this.index]},l.prototype.peekLength=function(){return this.ops[this.index]?a.length(this.ops[this.index])-this.offset:1/0},l.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},l.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var u=this.offset,c=this.index,h=this.next(),f=this.ops.slice(this.index);return this.offset=u,this.index=c,[h].concat(f)}else return[]},n.exports=a},function(n,r){var i=function(){function s(v,_){return _!=null&&v instanceof _}var o;try{o=Map}catch{o=function(){}}var a;try{a=Set}catch{a=function(){}}var l;try{l=Promise}catch{l=function(){}}function u(v,_,g,m,w){typeof _=="object"&&(g=_.depth,m=_.prototype,w=_.includeNonEnumerable,_=_.circular);var b=[],T=[],C=typeof Buffer<"u";typeof _>"u"&&(_=!0),typeof g>"u"&&(g=1/0);function k(x,P){if(x===null)return null;if(P===0)return x;var S,E;if(typeof x!="object")return x;if(s(x,o))S=new o;else if(s(x,a))S=new a;else if(s(x,l))S=new l(function(B,N){x.then(function(V){B(k(V,P-1))},function(V){N(k(V,P-1))})});else if(u.__isArray(x))S=[];else if(u.__isRegExp(x))S=new RegExp(x.source,y(x)),x.lastIndex&&(S.lastIndex=x.lastIndex);else if(u.__isDate(x))S=new Date(x.getTime());else{if(C&&Buffer.isBuffer(x))return Buffer.allocUnsafe?S=Buffer.allocUnsafe(x.length):S=new Buffer(x.length),x.copy(S),S;s(x,Error)?S=Object.create(x):typeof m>"u"?(E=Object.getPrototypeOf(x),S=Object.create(E)):(S=Object.create(m),E=m)}if(_){var A=b.indexOf(x);if(A!=-1)return T[A];b.push(x),T.push(S)}s(x,o)&&x.forEach(function(B,N){var V=k(N,P-1),z=k(B,P-1);S.set(V,z)}),s(x,a)&&x.forEach(function(B){var N=k(B,P-1);S.add(N)});for(var O in x){var M;E&&(M=Object.getOwnPropertyDescriptor(E,O)),!(M&&M.set==null)&&(S[O]=k(x[O],P-1))}if(Object.getOwnPropertySymbols)for(var F=Object.getOwnPropertySymbols(x),O=0;O<F.length;O++){var $=F[O],q=Object.getOwnPropertyDescriptor(x,$);q&&!q.enumerable&&!w||(S[$]=k(x[$],P-1),q.enumerable||Object.defineProperty(S,$,{enumerable:!1}))}if(w)for(var W=Object.getOwnPropertyNames(x),O=0;O<W.length;O++){var U=W[O],q=Object.getOwnPropertyDescriptor(x,U);q&&q.enumerable||(S[U]=k(x[U],P-1),Object.defineProperty(S,U,{enumerable:!1}))}return S}return k(v,g)}u.clonePrototype=function(_){if(_===null)return null;var g=function(){};return g.prototype=_,new g};function c(v){return Object.prototype.toString.call(v)}u.__objToStr=c;function h(v){return typeof v=="object"&&c(v)==="[object Date]"}u.__isDate=h;function f(v){return typeof v=="object"&&c(v)==="[object Array]"}u.__isArray=f;function d(v){return typeof v=="object"&&c(v)==="[object RegExp]"}u.__isRegExp=d;function y(v){var _="";return v.global&&(_+="g"),v.ignoreCase&&(_+="i"),v.multiline&&(_+="m"),_}return u.__getRegExpFlags=y,u}();typeof n=="object"&&n.exports&&(n.exports=i)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function S(E,A){var O=[],M=!0,F=!1,$=void 0;try{for(var q=E[Symbol.iterator](),W;!(M=(W=q.next()).done)&&(O.push(W.value),!(A&&O.length===A));M=!0);}catch(U){F=!0,$=U}finally{try{!M&&q.return&&q.return()}finally{if(F)throw $}}return O}return function(E,A){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return S(E,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function S(E,A){for(var O=0;O<A.length;O++){var M=A[O];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(E,M.key,M)}}return function(E,A,O){return A&&S(E.prototype,A),O&&S(E,O),E}}(),a=function S(E,A,O){E===null&&(E=Function.prototype);var M=Object.getOwnPropertyDescriptor(E,A);if(M===void 0){var F=Object.getPrototypeOf(E);return F===null?void 0:S(F,A,O)}else{if("value"in M)return M.value;var $=M.get;return $===void 0?void 0:$.call(O)}},l=i(0),u=b(l),c=i(8),h=b(c),f=i(4),d=b(f),y=i(16),v=b(y),_=i(13),g=b(_),m=i(25),w=b(m);function b(S){return S&&S.__esModule?S:{default:S}}function T(S,E){if(!(S instanceof E))throw new TypeError("Cannot call a class as a function")}function C(S,E){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:S}function k(S,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);S.prototype=Object.create(E&&E.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(S,E):S.__proto__=E)}function x(S){return S instanceof d.default||S instanceof f.BlockEmbed}var P=function(S){k(E,S);function E(A,O){T(this,E);var M=C(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,A));return M.emitter=O.emitter,Array.isArray(O.whitelist)&&(M.whitelist=O.whitelist.reduce(function(F,$){return F[$]=!0,F},{})),M.domNode.addEventListener("DOMNodeInserted",function(){}),M.optimize(),M.enable(),M}return o(E,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(O,M){var F=this.line(O),$=s(F,2),q=$[0],W=$[1],U=this.line(O+M),B=s(U,1),N=B[0];if(a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"deleteAt",this).call(this,O,M),N!=null&&q!==N&&W>0){if(q instanceof f.BlockEmbed||N instanceof f.BlockEmbed){this.optimize();return}if(q instanceof g.default){var V=q.newlineIndex(q.length(),!0);if(V>-1&&(q=q.split(V+1),q===N)){this.optimize();return}}else if(N instanceof g.default){var z=N.newlineIndex(0);z>-1&&N.split(z+1)}var G=N.children.head instanceof v.default?null:N.children.head;q.moveChildren(N,G),q.remove()}this.optimize()}},{key:"enable",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",O)}},{key:"formatAt",value:function(O,M,F,$){this.whitelist!=null&&!this.whitelist[F]||(a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"formatAt",this).call(this,O,M,F,$),this.optimize())}},{key:"insertAt",value:function(O,M,F){if(!(F!=null&&this.whitelist!=null&&!this.whitelist[M])){if(O>=this.length())if(F==null||u.default.query(M,u.default.Scope.BLOCK)==null){var $=u.default.create(this.statics.defaultChild);this.appendChild($),F==null&&M.endsWith(`
`)&&(M=M.slice(0,-1)),$.insertAt(0,M,F)}else{var q=u.default.create(M,F);this.appendChild(q)}else a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,O,M,F);this.optimize()}}},{key:"insertBefore",value:function(O,M){if(O.statics.scope===u.default.Scope.INLINE_BLOT){var F=u.default.create(this.statics.defaultChild);F.appendChild(O),O=F}a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertBefore",this).call(this,O,M)}},{key:"leaf",value:function(O){return this.path(O).pop()||[null,-1]}},{key:"line",value:function(O){return O===this.length()?this.line(O-1):this.descendant(x,O)}},{key:"lines",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,F=function $(q,W,U){var B=[],N=U;return q.children.forEachAt(W,U,function(V,z,G){x(V)?B.push(V):V instanceof u.default.Container&&(B=B.concat($(V,z,N))),N-=G}),B};return F(this,O,M)}},{key:"optimize",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,O,M),O.length>0&&this.emitter.emit(h.default.events.SCROLL_OPTIMIZE,O,M))}},{key:"path",value:function(O){return a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"path",this).call(this,O).slice(1)}},{key:"update",value:function(O){if(this.batch!==!0){var M=h.default.sources.USER;typeof O=="string"&&(M=O),Array.isArray(O)||(O=this.observer.takeRecords()),O.length>0&&this.emitter.emit(h.default.events.SCROLL_BEFORE_UPDATE,M,O),a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"update",this).call(this,O.concat([])),O.length>0&&this.emitter.emit(h.default.events.SCROLL_UPDATE,M,O)}}}]),E}(u.default.Scroll);P.blotName="scroll",P.className="ql-editor",P.tagName="DIV",P.defaultChild="block",P.allowedChildren=[d.default,f.BlockEmbed,w.default],r.default=P},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},o=function(){function j(H,X){var J=[],te=!0,fe=!1,ve=void 0;try{for(var _e=H[Symbol.iterator](),Se;!(te=(Se=_e.next()).done)&&(J.push(Se.value),!(X&&J.length===X));te=!0);}catch(Ce){fe=!0,ve=Ce}finally{try{!te&&_e.return&&_e.return()}finally{if(fe)throw ve}}return J}return function(H,X){if(Array.isArray(H))return H;if(Symbol.iterator in Object(H))return j(H,X);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function j(H,X){for(var J=0;J<X.length;J++){var te=X[J];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(H,te.key,te)}}return function(H,X,J){return X&&j(H.prototype,X),J&&j(H,J),H}}(),l=i(21),u=S(l),c=i(11),h=S(c),f=i(3),d=S(f),y=i(2),v=S(y),_=i(20),g=S(_),m=i(0),w=S(m),b=i(5),T=S(b),C=i(10),k=S(C),x=i(9),P=S(x);function S(j){return j&&j.__esModule?j:{default:j}}function E(j,H,X){return H in j?Object.defineProperty(j,H,{value:X,enumerable:!0,configurable:!0,writable:!0}):j[H]=X,j}function A(j,H){if(!(j instanceof H))throw new TypeError("Cannot call a class as a function")}function O(j,H){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H&&(typeof H=="object"||typeof H=="function")?H:j}function M(j,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof H);j.prototype=Object.create(H&&H.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),H&&(Object.setPrototypeOf?Object.setPrototypeOf(j,H):j.__proto__=H)}var F=(0,k.default)("quill:keyboard"),$=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",q=function(j){M(H,j),a(H,null,[{key:"match",value:function(J,te){return te=K(te),["altKey","ctrlKey","metaKey","shiftKey"].some(function(fe){return!!te[fe]!==J[fe]&&te[fe]!==null})?!1:te.key===(J.which||J.keyCode)}}]);function H(X,J){A(this,H);var te=O(this,(H.__proto__||Object.getPrototypeOf(H)).call(this,X,J));return te.bindings={},Object.keys(te.options.bindings).forEach(function(fe){fe==="list autofill"&&X.scroll.whitelist!=null&&!X.scroll.whitelist.list||te.options.bindings[fe]&&te.addBinding(te.options.bindings[fe])}),te.addBinding({key:H.keys.ENTER,shiftKey:null},V),te.addBinding({key:H.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(te.addBinding({key:H.keys.BACKSPACE},{collapsed:!0},U),te.addBinding({key:H.keys.DELETE},{collapsed:!0},B)):(te.addBinding({key:H.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},U),te.addBinding({key:H.keys.DELETE},{collapsed:!0,suffix:/^.?$/},B)),te.addBinding({key:H.keys.BACKSPACE},{collapsed:!1},N),te.addBinding({key:H.keys.DELETE},{collapsed:!1},N),te.addBinding({key:H.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},U),te.listen(),te}return a(H,[{key:"addBinding",value:function(J){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ve=K(J);if(ve==null||ve.key==null)return F.warn("Attempted to add invalid keyboard binding",ve);typeof te=="function"&&(te={handler:te}),typeof fe=="function"&&(fe={handler:fe}),ve=(0,d.default)(ve,te,fe),this.bindings[ve.key]=this.bindings[ve.key]||[],this.bindings[ve.key].push(ve)}},{key:"listen",value:function(){var J=this;this.quill.root.addEventListener("keydown",function(te){if(!te.defaultPrevented){var fe=te.which||te.keyCode,ve=(J.bindings[fe]||[]).filter(function(it){return H.match(te,it)});if(ve.length!==0){var _e=J.quill.getSelection();if(!(_e==null||!J.quill.hasFocus())){var Se=J.quill.getLine(_e.index),Ce=o(Se,2),se=Ce[0],ge=Ce[1],Q=J.quill.getLeaf(_e.index),ee=o(Q,2),le=ee[0],he=ee[1],ne=_e.length===0?[le,he]:J.quill.getLeaf(_e.index+_e.length),Te=o(ne,2),ke=Te[0],Ae=Te[1],Be=le instanceof w.default.Text?le.value().slice(0,he):"",Ge=ke instanceof w.default.Text?ke.value().slice(Ae):"",qe={collapsed:_e.length===0,empty:_e.length===0&&se.length()<=1,format:J.quill.getFormat(_e),offset:ge,prefix:Be,suffix:Ge},tu=ve.some(function(it){if(it.collapsed!=null&&it.collapsed!==qe.collapsed||it.empty!=null&&it.empty!==qe.empty||it.offset!=null&&it.offset!==qe.offset)return!1;if(Array.isArray(it.format)){if(it.format.every(function(Qn){return qe.format[Qn]==null}))return!1}else if(s(it.format)==="object"&&!Object.keys(it.format).every(function(Qn){return it.format[Qn]===!0?qe.format[Qn]!=null:it.format[Qn]===!1?qe.format[Qn]==null:(0,h.default)(it.format[Qn],qe.format[Qn])}))return!1;return it.prefix!=null&&!it.prefix.test(qe.prefix)||it.suffix!=null&&!it.suffix.test(qe.suffix)?!1:it.handler.call(J,_e,qe)!==!0});tu&&te.preventDefault()}}}})}}]),H}(P.default);q.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},q.DEFAULTS={bindings:{bold:G("bold"),italic:G("italic"),underline:G("underline"),indent:{key:q.keys.TAB,format:["blockquote","indent","list"],handler:function(H,X){if(X.collapsed&&X.offset!==0)return!0;this.quill.format("indent","+1",T.default.sources.USER)}},outdent:{key:q.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(H,X){if(X.collapsed&&X.offset!==0)return!0;this.quill.format("indent","-1",T.default.sources.USER)}},"outdent backspace":{key:q.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(H,X){X.format.indent!=null?this.quill.format("indent","-1",T.default.sources.USER):X.format.list!=null&&this.quill.format("list",!1,T.default.sources.USER)}},"indent code-block":z(!0),"outdent code-block":z(!1),"remove tab":{key:q.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(H){this.quill.deleteText(H.index-1,1,T.default.sources.USER)}},tab:{key:q.keys.TAB,handler:function(H){this.quill.history.cutoff();var X=new v.default().retain(H.index).delete(H.length).insert("	");this.quill.updateContents(X,T.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(H.index+1,T.default.sources.SILENT)}},"list empty enter":{key:q.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(H,X){this.quill.format("list",!1,T.default.sources.USER),X.format.indent&&this.quill.format("indent",!1,T.default.sources.USER)}},"checklist enter":{key:q.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(H){var X=this.quill.getLine(H.index),J=o(X,2),te=J[0],fe=J[1],ve=(0,d.default)({},te.formats(),{list:"checked"}),_e=new v.default().retain(H.index).insert(`
`,ve).retain(te.length()-fe-1).retain(1,{list:"unchecked"});this.quill.updateContents(_e,T.default.sources.USER),this.quill.setSelection(H.index+1,T.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:q.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(H,X){var J=this.quill.getLine(H.index),te=o(J,2),fe=te[0],ve=te[1],_e=new v.default().retain(H.index).insert(`
`,X.format).retain(fe.length()-ve-1).retain(1,{header:null});this.quill.updateContents(_e,T.default.sources.USER),this.quill.setSelection(H.index+1,T.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(H,X){var J=X.prefix.length,te=this.quill.getLine(H.index),fe=o(te,2),ve=fe[0],_e=fe[1];if(_e>J)return!0;var Se=void 0;switch(X.prefix.trim()){case"[]":case"[ ]":Se="unchecked";break;case"[x]":Se="checked";break;case"-":case"*":Se="bullet";break;default:Se="ordered"}this.quill.insertText(H.index," ",T.default.sources.USER),this.quill.history.cutoff();var Ce=new v.default().retain(H.index-_e).delete(J+1).retain(ve.length()-2-_e).retain(1,{list:Se});this.quill.updateContents(Ce,T.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(H.index-J,T.default.sources.SILENT)}},"code exit":{key:q.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(H){var X=this.quill.getLine(H.index),J=o(X,2),te=J[0],fe=J[1],ve=new v.default().retain(H.index+te.length()-fe-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(ve,T.default.sources.USER)}},"embed left":W(q.keys.LEFT,!1),"embed left shift":W(q.keys.LEFT,!0),"embed right":W(q.keys.RIGHT,!1),"embed right shift":W(q.keys.RIGHT,!0)}};function W(j,H){var X,J=j===q.keys.LEFT?"prefix":"suffix";return X={key:j,shiftKey:H,altKey:null},E(X,J,/^$/),E(X,"handler",function(fe){var ve=fe.index;j===q.keys.RIGHT&&(ve+=fe.length+1);var _e=this.quill.getLeaf(ve),Se=o(_e,1),Ce=Se[0];return Ce instanceof w.default.Embed?(j===q.keys.LEFT?H?this.quill.setSelection(fe.index-1,fe.length+1,T.default.sources.USER):this.quill.setSelection(fe.index-1,T.default.sources.USER):H?this.quill.setSelection(fe.index,fe.length+1,T.default.sources.USER):this.quill.setSelection(fe.index+fe.length+1,T.default.sources.USER),!1):!0}),X}function U(j,H){if(!(j.index===0||this.quill.getLength()<=1)){var X=this.quill.getLine(j.index),J=o(X,1),te=J[0],fe={};if(H.offset===0){var ve=this.quill.getLine(j.index-1),_e=o(ve,1),Se=_e[0];if(Se!=null&&Se.length()>1){var Ce=te.formats(),se=this.quill.getFormat(j.index-1,1);fe=g.default.attributes.diff(Ce,se)||{}}}var ge=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(H.prefix)?2:1;this.quill.deleteText(j.index-ge,ge,T.default.sources.USER),Object.keys(fe).length>0&&this.quill.formatLine(j.index-ge,ge,fe,T.default.sources.USER),this.quill.focus()}}function B(j,H){var X=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(H.suffix)?2:1;if(!(j.index>=this.quill.getLength()-X)){var J={},te=0,fe=this.quill.getLine(j.index),ve=o(fe,1),_e=ve[0];if(H.offset>=_e.length()-1){var Se=this.quill.getLine(j.index+1),Ce=o(Se,1),se=Ce[0];if(se){var ge=_e.formats(),Q=this.quill.getFormat(j.index,1);J=g.default.attributes.diff(ge,Q)||{},te=se.length()}}this.quill.deleteText(j.index,X,T.default.sources.USER),Object.keys(J).length>0&&this.quill.formatLine(j.index+te-1,X,J,T.default.sources.USER)}}function N(j){var H=this.quill.getLines(j),X={};if(H.length>1){var J=H[0].formats(),te=H[H.length-1].formats();X=g.default.attributes.diff(te,J)||{}}this.quill.deleteText(j,T.default.sources.USER),Object.keys(X).length>0&&this.quill.formatLine(j.index,1,X,T.default.sources.USER),this.quill.setSelection(j.index,T.default.sources.SILENT),this.quill.focus()}function V(j,H){var X=this;j.length>0&&this.quill.scroll.deleteAt(j.index,j.length);var J=Object.keys(H.format).reduce(function(te,fe){return w.default.query(fe,w.default.Scope.BLOCK)&&!Array.isArray(H.format[fe])&&(te[fe]=H.format[fe]),te},{});this.quill.insertText(j.index,`
`,J,T.default.sources.USER),this.quill.setSelection(j.index+1,T.default.sources.SILENT),this.quill.focus(),Object.keys(H.format).forEach(function(te){J[te]==null&&(Array.isArray(H.format[te])||te!=="link"&&X.quill.format(te,H.format[te],T.default.sources.USER))})}function z(j){return{key:q.keys.TAB,shiftKey:!j,format:{"code-block":!0},handler:function(X){var J=w.default.query("code-block"),te=X.index,fe=X.length,ve=this.quill.scroll.descendant(J,te),_e=o(ve,2),Se=_e[0],Ce=_e[1];if(Se!=null){var se=this.quill.getIndex(Se),ge=Se.newlineIndex(Ce,!0)+1,Q=Se.newlineIndex(se+Ce+fe),ee=Se.domNode.textContent.slice(ge,Q).split(`
`);Ce=0,ee.forEach(function(le,he){j?(Se.insertAt(ge+Ce,J.TAB),Ce+=J.TAB.length,he===0?te+=J.TAB.length:fe+=J.TAB.length):le.startsWith(J.TAB)&&(Se.deleteAt(ge+Ce,J.TAB.length),Ce-=J.TAB.length,he===0?te-=J.TAB.length:fe-=J.TAB.length),Ce+=le.length+1}),this.quill.update(T.default.sources.USER),this.quill.setSelection(te,fe,T.default.sources.SILENT)}}}}function G(j){return{key:j[0].toUpperCase(),shortKey:!0,handler:function(X,J){this.quill.format(j,!J.format[j],T.default.sources.USER)}}}function K(j){if(typeof j=="string"||typeof j=="number")return K({key:j});if((typeof j>"u"?"undefined":s(j))==="object"&&(j=(0,u.default)(j,!1)),typeof j.key=="string")if(q.keys[j.key.toUpperCase()]!=null)j.key=q.keys[j.key.toUpperCase()];else if(j.key.length===1)j.key=j.key.toUpperCase().charCodeAt(0);else return null;return j.shortKey&&(j[$]=j.shortKey,delete j.shortKey),j}r.default=q,r.SHORTKEY=$},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function g(m,w){var b=[],T=!0,C=!1,k=void 0;try{for(var x=m[Symbol.iterator](),P;!(T=(P=x.next()).done)&&(b.push(P.value),!(w&&b.length===w));T=!0);}catch(S){C=!0,k=S}finally{try{!T&&x.return&&x.return()}finally{if(C)throw k}}return b}return function(m,w){if(Array.isArray(m))return m;if(Symbol.iterator in Object(m))return g(m,w);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function g(m,w,b){m===null&&(m=Function.prototype);var T=Object.getOwnPropertyDescriptor(m,w);if(T===void 0){var C=Object.getPrototypeOf(m);return C===null?void 0:g(C,w,b)}else{if("value"in T)return T.value;var k=T.get;return k===void 0?void 0:k.call(b)}},a=function(){function g(m,w){for(var b=0;b<w.length;b++){var T=w[b];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(m,T.key,T)}}return function(m,w,b){return w&&g(m.prototype,w),b&&g(m,b),m}}(),l=i(0),u=f(l),c=i(7),h=f(c);function f(g){return g&&g.__esModule?g:{default:g}}function d(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function y(g,m){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:g}function v(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(g,m):g.__proto__=m)}var _=function(g){v(m,g),a(m,null,[{key:"value",value:function(){}}]);function m(w,b){d(this,m);var T=y(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,w));return T.selection=b,T.textNode=document.createTextNode(m.CONTENTS),T.domNode.appendChild(T.textNode),T._length=0,T}return a(m,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(b,T){if(this._length!==0)return o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,b,T);for(var C=this,k=0;C!=null&&C.statics.scope!==u.default.Scope.BLOCK_BLOT;)k+=C.offset(C.parent),C=C.parent;C!=null&&(this._length=m.CONTENTS.length,C.optimize(),C.formatAt(k,m.CONTENTS.length,b,T),this._length=0)}},{key:"index",value:function(b,T){return b===this.textNode?0:o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"index",this).call(this,b,T)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var b=this.textNode,T=this.selection.getNativeRange(),C=void 0,k=void 0,x=void 0;if(T!=null&&T.start.node===b&&T.end.node===b){var P=[b,T.start.offset,T.end.offset];C=P[0],k=P[1],x=P[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==m.CONTENTS){var S=this.textNode.data.split(m.CONTENTS).join("");this.next instanceof h.default?(C=this.next.domNode,this.next.insertAt(0,S),this.textNode.data=m.CONTENTS):(this.textNode.data=S,this.parent.insertBefore(u.default.create(this.textNode),this),this.textNode=document.createTextNode(m.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),k!=null){var E=[k,x].map(function(O){return Math.max(0,Math.min(C.data.length,O-1))}),A=s(E,2);return k=A[0],x=A[1],{startNode:C,startOffset:k,endNode:C,endOffset:x}}}}},{key:"update",value:function(b,T){var C=this;if(b.some(function(x){return x.type==="characterData"&&x.target===C.textNode})){var k=this.restore();k&&(T.range=k)}}},{key:"value",value:function(){return""}}]),m}(u.default.Embed);_.blotName="cursor",_.className="ql-cursor",_.tagName="span",_.CONTENTS="\uFEFF",r.default=_},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(0),o=u(s),a=i(4),l=u(a);function u(y){return y&&y.__esModule?y:{default:y}}function c(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function h(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function f(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var d=function(y){f(v,y);function v(){return c(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return v}(o.default.Container);d.allowedChildren=[l.default,a.BlockEmbed,d],r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var s=function(){function _(g,m){for(var w=0;w<m.length;w++){var b=m[w];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(g,m,w){return m&&_(g.prototype,m),w&&_(g,w),g}}(),o=function _(g,m,w){g===null&&(g=Function.prototype);var b=Object.getOwnPropertyDescriptor(g,m);if(b===void 0){var T=Object.getPrototypeOf(g);return T===null?void 0:_(T,m,w)}else{if("value"in b)return b.value;var C=b.get;return C===void 0?void 0:C.call(w)}},a=i(0),l=u(a);function u(_){return _&&_.__esModule?_:{default:_}}function c(_,g){if(!(_ instanceof g))throw new TypeError("Cannot call a class as a function")}function h(_,g){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:_}function f(_,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);_.prototype=Object.create(g&&g.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(_,g):_.__proto__=g)}var d=function(_){f(g,_);function g(){return c(this,g),h(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return s(g,[{key:"value",value:function(w){var b=o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"value",this).call(this,w);return b.startsWith("rgb(")?(b=b.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+b.split(",").map(function(T){return("00"+parseInt(T).toString(16)).slice(-2)}).join("")):b}}]),g}(l.default.Attributor.Style),y=new l.default.Attributor.Class("color","ql-color",{scope:l.default.Scope.INLINE}),v=new d("color","color",{scope:l.default.Scope.INLINE});r.ColorAttributor=d,r.ColorClass=y,r.ColorStyle=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var s=function(){function v(_,g){for(var m=0;m<g.length;m++){var w=g[m];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(_,w.key,w)}}return function(_,g,m){return g&&v(_.prototype,g),m&&v(_,m),_}}(),o=function v(_,g,m){_===null&&(_=Function.prototype);var w=Object.getOwnPropertyDescriptor(_,g);if(w===void 0){var b=Object.getPrototypeOf(_);return b===null?void 0:v(b,g,m)}else{if("value"in w)return w.value;var T=w.get;return T===void 0?void 0:T.call(m)}},a=i(6),l=u(a);function u(v){return v&&v.__esModule?v:{default:v}}function c(v,_){if(!(v instanceof _))throw new TypeError("Cannot call a class as a function")}function h(v,_){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:v}function f(v,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);v.prototype=Object.create(_&&_.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(v,_):v.__proto__=_)}var d=function(v){f(_,v);function _(){return c(this,_),h(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return s(_,[{key:"format",value:function(m,w){if(m!==this.statics.blotName||!w)return o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"format",this).call(this,m,w);w=this.constructor.sanitize(w),this.domNode.setAttribute("href",w)}}],[{key:"create",value:function(m){var w=o(_.__proto__||Object.getPrototypeOf(_),"create",this).call(this,m);return m=this.sanitize(m),w.setAttribute("href",m),w.setAttribute("rel","noopener noreferrer"),w.setAttribute("target","_blank"),w}},{key:"formats",value:function(m){return m.getAttribute("href")}},{key:"sanitize",value:function(m){return y(m,this.PROTOCOL_WHITELIST)?m:this.SANITIZED_URL}}]),_}(l.default);d.blotName="link",d.tagName="A",d.SANITIZED_URL="about:blank",d.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function y(v,_){var g=document.createElement("a");g.href=v;var m=g.href.slice(0,g.href.indexOf(":"));return _.indexOf(m)>-1}r.default=d,r.sanitize=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},o=function(){function _(g,m){for(var w=0;w<m.length;w++){var b=m[w];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(g,m,w){return m&&_(g.prototype,m),w&&_(g,w),g}}(),a=i(23),l=h(a),u=i(107),c=h(u);function h(_){return _&&_.__esModule?_:{default:_}}function f(_,g){if(!(_ instanceof g))throw new TypeError("Cannot call a class as a function")}var d=0;function y(_,g){_.setAttribute(g,_.getAttribute(g)!=="true")}var v=function(){function _(g){var m=this;f(this,_),this.select=g,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){m.togglePicker()}),this.label.addEventListener("keydown",function(w){switch(w.keyCode){case l.default.keys.ENTER:m.togglePicker();break;case l.default.keys.ESCAPE:m.escape(),w.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(_,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),y(this.label,"aria-expanded"),y(this.options,"aria-hidden")}},{key:"buildItem",value:function(m){var w=this,b=document.createElement("span");return b.tabIndex="0",b.setAttribute("role","button"),b.classList.add("ql-picker-item"),m.hasAttribute("value")&&b.setAttribute("data-value",m.getAttribute("value")),m.textContent&&b.setAttribute("data-label",m.textContent),b.addEventListener("click",function(){w.selectItem(b,!0)}),b.addEventListener("keydown",function(T){switch(T.keyCode){case l.default.keys.ENTER:w.selectItem(b,!0),T.preventDefault();break;case l.default.keys.ESCAPE:w.escape(),T.preventDefault();break}}),b}},{key:"buildLabel",value:function(){var m=document.createElement("span");return m.classList.add("ql-picker-label"),m.innerHTML=c.default,m.tabIndex="0",m.setAttribute("role","button"),m.setAttribute("aria-expanded","false"),this.container.appendChild(m),m}},{key:"buildOptions",value:function(){var m=this,w=document.createElement("span");w.classList.add("ql-picker-options"),w.setAttribute("aria-hidden","true"),w.tabIndex="-1",w.id="ql-picker-options-"+d,d+=1,this.label.setAttribute("aria-controls",w.id),this.options=w,[].slice.call(this.select.options).forEach(function(b){var T=m.buildItem(b);w.appendChild(T),b.selected===!0&&m.selectItem(T)}),this.container.appendChild(w)}},{key:"buildPicker",value:function(){var m=this;[].slice.call(this.select.attributes).forEach(function(w){m.container.setAttribute(w.name,w.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var m=this;this.close(),setTimeout(function(){return m.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(m){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,b=this.container.querySelector(".ql-selected");if(m!==b&&(b!=null&&b.classList.remove("ql-selected"),m!=null&&(m.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(m.parentNode.children,m),m.hasAttribute("data-value")?this.label.setAttribute("data-value",m.getAttribute("data-value")):this.label.removeAttribute("data-value"),m.hasAttribute("data-label")?this.label.setAttribute("data-label",m.getAttribute("data-label")):this.label.removeAttribute("data-label"),w))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":s(Event))==="object"){var T=document.createEvent("Event");T.initEvent("change",!0,!0),this.select.dispatchEvent(T)}this.close()}}},{key:"update",value:function(){var m=void 0;if(this.select.selectedIndex>-1){var w=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];m=this.select.options[this.select.selectedIndex],this.selectItem(w)}else this.selectItem(null);var b=m!=null&&m!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",b)}}]),_}();r.default=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(0),o=F(s),a=i(5),l=F(a),u=i(4),c=F(u),h=i(16),f=F(h),d=i(25),y=F(d),v=i(24),_=F(v),g=i(35),m=F(g),w=i(6),b=F(w),T=i(22),C=F(T),k=i(7),x=F(k),P=i(55),S=F(P),E=i(42),A=F(E),O=i(23),M=F(O);function F($){return $&&$.__esModule?$:{default:$}}l.default.register({"blots/block":c.default,"blots/block/embed":u.BlockEmbed,"blots/break":f.default,"blots/container":y.default,"blots/cursor":_.default,"blots/embed":m.default,"blots/inline":b.default,"blots/scroll":C.default,"blots/text":x.default,"modules/clipboard":S.default,"modules/history":A.default,"modules/keyboard":M.default}),o.default.register(c.default,f.default,_.default,b.default,C.default,x.default),r.default=l.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(1),o=function(){function a(l){this.domNode=l,this.domNode[s.DATA_KEY]={blot:this}}return Object.defineProperty(a.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),a.create=function(l){if(this.tagName==null)throw new s.ParchmentError("Blot definition missing tagName");var u;return Array.isArray(this.tagName)?(typeof l=="string"&&(l=l.toUpperCase(),parseInt(l).toString()===l&&(l=parseInt(l))),typeof l=="number"?u=document.createElement(this.tagName[l-1]):this.tagName.indexOf(l)>-1?u=document.createElement(l):u=document.createElement(this.tagName[0])):u=document.createElement(this.tagName),this.className&&u.classList.add(this.className),u},a.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},a.prototype.clone=function(){var l=this.domNode.cloneNode(!1);return s.create(l)},a.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[s.DATA_KEY]},a.prototype.deleteAt=function(l,u){var c=this.isolate(l,u);c.remove()},a.prototype.formatAt=function(l,u,c,h){var f=this.isolate(l,u);if(s.query(c,s.Scope.BLOT)!=null&&h)f.wrap(c,h);else if(s.query(c,s.Scope.ATTRIBUTE)!=null){var d=s.create(this.statics.scope);f.wrap(d),d.format(c,h)}},a.prototype.insertAt=function(l,u,c){var h=c==null?s.create("text",u):s.create(u,c),f=this.split(l);this.parent.insertBefore(h,f)},a.prototype.insertInto=function(l,u){u===void 0&&(u=null),this.parent!=null&&this.parent.children.remove(this);var c=null;l.children.insertBefore(this,u),u!=null&&(c=u.domNode),(this.domNode.parentNode!=l.domNode||this.domNode.nextSibling!=c)&&l.domNode.insertBefore(this.domNode,c),this.parent=l,this.attach()},a.prototype.isolate=function(l,u){var c=this.split(l);return c.split(u),c},a.prototype.length=function(){return 1},a.prototype.offset=function(l){return l===void 0&&(l=this.parent),this.parent==null||this==l?0:this.parent.children.offset(this)+this.parent.offset(l)},a.prototype.optimize=function(l){this.domNode[s.DATA_KEY]!=null&&delete this.domNode[s.DATA_KEY].mutations},a.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},a.prototype.replace=function(l){l.parent!=null&&(l.parent.insertBefore(this,l.next),l.remove())},a.prototype.replaceWith=function(l,u){var c=typeof l=="string"?s.create(l,u):l;return c.replace(this),c},a.prototype.split=function(l,u){return l===0?this:this.next},a.prototype.update=function(l,u){},a.prototype.wrap=function(l,u){var c=typeof l=="string"?s.create(l,u):l;return this.parent!=null&&this.parent.insertBefore(c,this.next),c.appendChild(this),c},a.blotName="abstract",a}();r.default=o},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(12),o=i(32),a=i(33),l=i(1),u=function(){function c(h){this.attributes={},this.domNode=h,this.build()}return c.prototype.attribute=function(h,f){f?h.add(this.domNode,f)&&(h.value(this.domNode)!=null?this.attributes[h.attrName]=h:delete this.attributes[h.attrName]):(h.remove(this.domNode),delete this.attributes[h.attrName])},c.prototype.build=function(){var h=this;this.attributes={};var f=s.default.keys(this.domNode),d=o.default.keys(this.domNode),y=a.default.keys(this.domNode);f.concat(d).concat(y).forEach(function(v){var _=l.query(v,l.Scope.ATTRIBUTE);_ instanceof s.default&&(h.attributes[_.attrName]=_)})},c.prototype.copy=function(h){var f=this;Object.keys(this.attributes).forEach(function(d){var y=f.attributes[d].value(f.domNode);h.format(d,y)})},c.prototype.move=function(h){var f=this;this.copy(h),Object.keys(this.attributes).forEach(function(d){f.attributes[d].remove(f.domNode)}),this.attributes={}},c.prototype.values=function(){var h=this;return Object.keys(this.attributes).reduce(function(f,d){return f[d]=h.attributes[d].value(h.domNode),f},{})},c}();r.default=u},function(n,r,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var f in h)h.hasOwnProperty(f)&&(c[f]=h[f])};return function(c,h){u(c,h);function f(){this.constructor=c}c.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12);function a(u,c){var h=u.getAttribute("class")||"";return h.split(/\s+/).filter(function(f){return f.indexOf(c+"-")===0})}var l=function(u){s(c,u);function c(){return u!==null&&u.apply(this,arguments)||this}return c.keys=function(h){return(h.getAttribute("class")||"").split(/\s+/).map(function(f){return f.split("-").slice(0,-1).join("-")})},c.prototype.add=function(h,f){return this.canAdd(h,f)?(this.remove(h),h.classList.add(this.keyName+"-"+f),!0):!1},c.prototype.remove=function(h){var f=a(h,this.keyName);f.forEach(function(d){h.classList.remove(d)}),h.classList.length===0&&h.removeAttribute("class")},c.prototype.value=function(h){var f=a(h,this.keyName)[0]||"",d=f.slice(this.keyName.length+1);return this.canAdd(h,d)?d:""},c}(o.default);r.default=l},function(n,r,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var f in h)h.hasOwnProperty(f)&&(c[f]=h[f])};return function(c,h){u(c,h);function f(){this.constructor=c}c.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12);function a(u){var c=u.split("-"),h=c.slice(1).map(function(f){return f[0].toUpperCase()+f.slice(1)}).join("");return c[0]+h}var l=function(u){s(c,u);function c(){return u!==null&&u.apply(this,arguments)||this}return c.keys=function(h){return(h.getAttribute("style")||"").split(";").map(function(f){var d=f.split(":");return d[0].trim()})},c.prototype.add=function(h,f){return this.canAdd(h,f)?(h.style[a(this.keyName)]=f,!0):!1},c.prototype.remove=function(h){h.style[a(this.keyName)]="",h.getAttribute("style")||h.removeAttribute("style")},c.prototype.value=function(h){var f=h.style[a(this.keyName)];return this.canAdd(h,f)?f:""},c}(o.default);r.default=l},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function l(u,c){for(var h=0;h<c.length;h++){var f=c[h];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(u,f.key,f)}}return function(u,c,h){return c&&l(u.prototype,c),h&&l(u,h),u}}();function o(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var a=function(){function l(u,c){o(this,l),this.quill=u,this.options=c,this.modules={}}return s(l,[{key:"init",value:function(){var c=this;Object.keys(this.options.modules).forEach(function(h){c.modules[h]==null&&c.addModule(h)})}},{key:"addModule",value:function(c){var h=this.quill.constructor.import("modules/"+c);return this.modules[c]=new h(this.quill,this.options.modules[c]||{}),this.modules[c]}}]),l}();a.DEFAULTS={modules:{}},a.themes={default:a},r.default=a},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function g(m,w){for(var b=0;b<w.length;b++){var T=w[b];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(m,T.key,T)}}return function(m,w,b){return w&&g(m.prototype,w),b&&g(m,b),m}}(),o=function g(m,w,b){m===null&&(m=Function.prototype);var T=Object.getOwnPropertyDescriptor(m,w);if(T===void 0){var C=Object.getPrototypeOf(m);return C===null?void 0:g(C,w,b)}else{if("value"in T)return T.value;var k=T.get;return k===void 0?void 0:k.call(b)}},a=i(0),l=h(a),u=i(7),c=h(u);function h(g){return g&&g.__esModule?g:{default:g}}function f(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function d(g,m){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:g}function y(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(g,m):g.__proto__=m)}var v="\uFEFF",_=function(g){y(m,g);function m(w){f(this,m);var b=d(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,w));return b.contentNode=document.createElement("span"),b.contentNode.setAttribute("contenteditable",!1),[].slice.call(b.domNode.childNodes).forEach(function(T){b.contentNode.appendChild(T)}),b.leftGuard=document.createTextNode(v),b.rightGuard=document.createTextNode(v),b.domNode.appendChild(b.leftGuard),b.domNode.appendChild(b.contentNode),b.domNode.appendChild(b.rightGuard),b}return s(m,[{key:"index",value:function(b,T){return b===this.leftGuard?0:b===this.rightGuard?1:o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"index",this).call(this,b,T)}},{key:"restore",value:function(b){var T=void 0,C=void 0,k=b.data.split(v).join("");if(b===this.leftGuard)if(this.prev instanceof c.default){var x=this.prev.length();this.prev.insertAt(x,k),T={startNode:this.prev.domNode,startOffset:x+k.length}}else C=document.createTextNode(k),this.parent.insertBefore(l.default.create(C),this),T={startNode:C,startOffset:k.length};else b===this.rightGuard&&(this.next instanceof c.default?(this.next.insertAt(0,k),T={startNode:this.next.domNode,startOffset:k.length}):(C=document.createTextNode(k),this.parent.insertBefore(l.default.create(C),this.next),T={startNode:C,startOffset:k.length}));return b.data=v,T}},{key:"update",value:function(b,T){var C=this;b.forEach(function(k){if(k.type==="characterData"&&(k.target===C.leftGuard||k.target===C.rightGuard)){var x=C.restore(k.target);x&&(T.range=x)}})}}]),m}(l.default.Embed);r.default=_},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var s=i(0),o=a(s);function a(f){return f&&f.__esModule?f:{default:f}}var l={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},u=new o.default.Attributor.Attribute("align","align",l),c=new o.default.Attributor.Class("align","ql-align",l),h=new o.default.Attributor.Style("align","text-align",l);r.AlignAttribute=u,r.AlignClass=c,r.AlignStyle=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var s=i(0),o=l(s),a=i(26);function l(h){return h&&h.__esModule?h:{default:h}}var u=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),c=new a.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});r.BackgroundClass=u,r.BackgroundStyle=c},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var s=i(0),o=a(s);function a(f){return f&&f.__esModule?f:{default:f}}var l={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},u=new o.default.Attributor.Attribute("direction","dir",l),c=new o.default.Attributor.Class("direction","ql-direction",l),h=new o.default.Attributor.Style("direction","direction",l);r.DirectionAttribute=u,r.DirectionClass=c,r.DirectionStyle=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var s=function(){function g(m,w){for(var b=0;b<w.length;b++){var T=w[b];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(m,T.key,T)}}return function(m,w,b){return w&&g(m.prototype,w),b&&g(m,b),m}}(),o=function g(m,w,b){m===null&&(m=Function.prototype);var T=Object.getOwnPropertyDescriptor(m,w);if(T===void 0){var C=Object.getPrototypeOf(m);return C===null?void 0:g(C,w,b)}else{if("value"in T)return T.value;var k=T.get;return k===void 0?void 0:k.call(b)}},a=i(0),l=u(a);function u(g){return g&&g.__esModule?g:{default:g}}function c(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function h(g,m){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:g}function f(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(g,m):g.__proto__=m)}var d={scope:l.default.Scope.INLINE,whitelist:["serif","monospace"]},y=new l.default.Attributor.Class("font","ql-font",d),v=function(g){f(m,g);function m(){return c(this,m),h(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return s(m,[{key:"value",value:function(b){return o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"value",this).call(this,b).replace(/["']/g,"")}}]),m}(l.default.Attributor.Style),_=new v("font","font-family",d);r.FontStyle=_,r.FontClass=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var s=i(0),o=a(s);function a(c){return c&&c.__esModule?c:{default:c}}var l=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),u=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=l,r.SizeStyle=u},function(n,r,i){n.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var s=function(){function w(b,T){for(var C=0;C<T.length;C++){var k=T[C];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(b,k.key,k)}}return function(b,T,C){return T&&w(b.prototype,T),C&&w(b,C),b}}(),o=i(0),a=f(o),l=i(5),u=f(l),c=i(9),h=f(c);function f(w){return w&&w.__esModule?w:{default:w}}function d(w,b){if(!(w instanceof b))throw new TypeError("Cannot call a class as a function")}function y(w,b){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:w}function v(w,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);w.prototype=Object.create(b&&b.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(w,b):w.__proto__=b)}var _=function(w){v(b,w);function b(T,C){d(this,b);var k=y(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,T,C));return k.lastRecorded=0,k.ignoreChange=!1,k.clear(),k.quill.on(u.default.events.EDITOR_CHANGE,function(x,P,S,E){x!==u.default.events.TEXT_CHANGE||k.ignoreChange||(!k.options.userOnly||E===u.default.sources.USER?k.record(P,S):k.transform(P))}),k.quill.keyboard.addBinding({key:"Z",shortKey:!0},k.undo.bind(k)),k.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},k.redo.bind(k)),/Win/i.test(navigator.platform)&&k.quill.keyboard.addBinding({key:"Y",shortKey:!0},k.redo.bind(k)),k}return s(b,[{key:"change",value:function(C,k){if(this.stack[C].length!==0){var x=this.stack[C].pop();this.stack[k].push(x),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(x[C],u.default.sources.USER),this.ignoreChange=!1;var P=m(x[C]);this.quill.setSelection(P)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(C,k){if(C.ops.length!==0){this.stack.redo=[];var x=this.quill.getContents().diff(k),P=Date.now();if(this.lastRecorded+this.options.delay>P&&this.stack.undo.length>0){var S=this.stack.undo.pop();x=x.compose(S.undo),C=S.redo.compose(C)}else this.lastRecorded=P;this.stack.undo.push({redo:C,undo:x}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(C){this.stack.undo.forEach(function(k){k.undo=C.transform(k.undo,!0),k.redo=C.transform(k.redo,!0)}),this.stack.redo.forEach(function(k){k.undo=C.transform(k.undo,!0),k.redo=C.transform(k.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),b}(h.default);_.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function g(w){var b=w.ops[w.ops.length-1];return b==null?!1:b.insert!=null?typeof b.insert=="string"&&b.insert.endsWith(`
`):b.attributes!=null?Object.keys(b.attributes).some(function(T){return a.default.query(T,a.default.Scope.BLOCK)!=null}):!1}function m(w){var b=w.reduce(function(C,k){return C+=k.delete||0,C},0),T=w.length()-b;return g(w)&&(T-=1),T}r.default=_,r.getLastChangeIndex=m},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var s=function(){function V(z,G){for(var K=0;K<G.length;K++){var j=G[K];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(z,j.key,j)}}return function(z,G,K){return G&&V(z.prototype,G),K&&V(z,K),z}}(),o=function V(z,G,K){z===null&&(z=Function.prototype);var j=Object.getOwnPropertyDescriptor(z,G);if(j===void 0){var H=Object.getPrototypeOf(z);return H===null?void 0:V(H,G,K)}else{if("value"in j)return j.value;var X=j.get;return X===void 0?void 0:X.call(K)}},a=i(3),l=P(a),u=i(2),c=P(u),h=i(8),f=P(h),d=i(23),y=P(d),v=i(34),_=P(v),g=i(59),m=P(g),w=i(60),b=P(w),T=i(28),C=P(T),k=i(61),x=P(k);function P(V){return V&&V.__esModule?V:{default:V}}function S(V,z){if(!(V instanceof z))throw new TypeError("Cannot call a class as a function")}function E(V,z){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:V}function A(V,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);V.prototype=Object.create(z&&z.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(V,z):V.__proto__=z)}var O=[!1,"center","right","justify"],M=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],F=[!1,"serif","monospace"],$=["1","2","3",!1],q=["small",!1,"large","huge"],W=function(V){A(z,V);function z(G,K){S(this,z);var j=E(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,G,K)),H=function X(J){if(!document.body.contains(G.root))return document.body.removeEventListener("click",X);j.tooltip!=null&&!j.tooltip.root.contains(J.target)&&document.activeElement!==j.tooltip.textbox&&!j.quill.hasFocus()&&j.tooltip.hide(),j.pickers!=null&&j.pickers.forEach(function(te){te.container.contains(J.target)||te.close()})};return G.emitter.listenDOM("click",document.body,H),j}return s(z,[{key:"addModule",value:function(K){var j=o(z.prototype.__proto__||Object.getPrototypeOf(z.prototype),"addModule",this).call(this,K);return K==="toolbar"&&this.extendToolbar(j),j}},{key:"buildButtons",value:function(K,j){K.forEach(function(H){var X=H.getAttribute("class")||"";X.split(/\s+/).forEach(function(J){if(J.startsWith("ql-")&&(J=J.slice(3),j[J]!=null))if(J==="direction")H.innerHTML=j[J][""]+j[J].rtl;else if(typeof j[J]=="string")H.innerHTML=j[J];else{var te=H.value||"";te!=null&&j[J][te]&&(H.innerHTML=j[J][te])}})})}},{key:"buildPickers",value:function(K,j){var H=this;this.pickers=K.map(function(J){if(J.classList.contains("ql-align"))return J.querySelector("option")==null&&N(J,O),new b.default(J,j.align);if(J.classList.contains("ql-background")||J.classList.contains("ql-color")){var te=J.classList.contains("ql-background")?"background":"color";return J.querySelector("option")==null&&N(J,M,te==="background"?"#ffffff":"#000000"),new m.default(J,j[te])}else return J.querySelector("option")==null&&(J.classList.contains("ql-font")?N(J,F):J.classList.contains("ql-header")?N(J,$):J.classList.contains("ql-size")&&N(J,q)),new C.default(J)});var X=function(){H.pickers.forEach(function(te){te.update()})};this.quill.on(f.default.events.EDITOR_CHANGE,X)}}]),z}(_.default);W.DEFAULTS=(0,l.default)(!0,{},_.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var z=this,G=this.container.querySelector("input.ql-image[type=file]");G==null&&(G=document.createElement("input"),G.setAttribute("type","file"),G.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),G.classList.add("ql-image"),G.addEventListener("change",function(){if(G.files!=null&&G.files[0]!=null){var K=new FileReader;K.onload=function(j){var H=z.quill.getSelection(!0);z.quill.updateContents(new c.default().retain(H.index).delete(H.length).insert({image:j.target.result}),f.default.sources.USER),z.quill.setSelection(H.index+1,f.default.sources.SILENT),G.value=""},K.readAsDataURL(G.files[0])}}),this.container.appendChild(G)),G.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var U=function(V){A(z,V);function z(G,K){S(this,z);var j=E(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,G,K));return j.textbox=j.root.querySelector('input[type="text"]'),j.listen(),j}return s(z,[{key:"listen",value:function(){var K=this;this.textbox.addEventListener("keydown",function(j){y.default.match(j,"enter")?(K.save(),j.preventDefault()):y.default.match(j,"escape")&&(K.cancel(),j.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),j!=null?this.textbox.value=j:K!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+K)||""),this.root.setAttribute("data-mode",K)}},{key:"restoreFocus",value:function(){var K=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=K}},{key:"save",value:function(){var K=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var j=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",K,f.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",K,f.default.sources.USER)),this.quill.root.scrollTop=j;break}case"video":K=B(K);case"formula":{if(!K)break;var H=this.quill.getSelection(!0);if(H!=null){var X=H.index+H.length;this.quill.insertEmbed(X,this.root.getAttribute("data-mode"),K,f.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(X+1," ",f.default.sources.USER),this.quill.setSelection(X+2,f.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),z}(x.default);function B(V){var z=V.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||V.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return z?(z[1]||"https")+"://www.youtube.com/embed/"+z[2]+"?showinfo=0":(z=V.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(z[1]||"https")+"://player.vimeo.com/video/"+z[2]+"/":V}function N(V,z){var G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;z.forEach(function(K){var j=document.createElement("option");K===G?j.setAttribute("selected","selected"):j.setAttribute("value",K),V.appendChild(j)})}r.BaseTooltip=U,r.default=W},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];this.insertBefore(a[0],null),a.length>1&&this.append.apply(this,a.slice(1))},o.prototype.contains=function(a){for(var l,u=this.iterator();l=u();)if(l===a)return!0;return!1},o.prototype.insertBefore=function(a,l){a&&(a.next=l,l!=null?(a.prev=l.prev,l.prev!=null&&(l.prev.next=a),l.prev=a,l===this.head&&(this.head=a)):this.tail!=null?(this.tail.next=a,a.prev=this.tail,this.tail=a):(a.prev=null,this.head=this.tail=a),this.length+=1)},o.prototype.offset=function(a){for(var l=0,u=this.head;u!=null;){if(u===a)return l;l+=u.length(),u=u.next}return-1},o.prototype.remove=function(a){this.contains(a)&&(a.prev!=null&&(a.prev.next=a.next),a.next!=null&&(a.next.prev=a.prev),a===this.head&&(this.head=a.next),a===this.tail&&(this.tail=a.prev),this.length-=1)},o.prototype.iterator=function(a){return a===void 0&&(a=this.head),function(){var l=a;return a!=null&&(a=a.next),l}},o.prototype.find=function(a,l){l===void 0&&(l=!1);for(var u,c=this.iterator();u=c();){var h=u.length();if(a<h||l&&a===h&&(u.next==null||u.next.length()!==0))return[u,a];a-=h}return[null,0]},o.prototype.forEach=function(a){for(var l,u=this.iterator();l=u();)a(l)},o.prototype.forEachAt=function(a,l,u){if(!(l<=0))for(var c=this.find(a),h=c[0],f=c[1],d,y=a-f,v=this.iterator(h);(d=v())&&y<a+l;){var _=d.length();a>y?u(d,a-y,Math.min(l,y+_-a)):u(d,0,Math.min(_,a+l-y)),y+=_}},o.prototype.map=function(a){return this.reduce(function(l,u){return l.push(a(u)),l},[])},o.prototype.reduce=function(a,l){for(var u,c=this.iterator();u=c();)l=a(l,u);return l},o}();r.default=s},function(n,r,i){var s=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var y in d)d.hasOwnProperty(y)&&(f[y]=d[y])};return function(f,d){h(f,d);function y(){this.constructor=f}f.prototype=d===null?Object.create(d):(y.prototype=d.prototype,new y)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(17),a=i(1),l={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},u=100,c=function(h){s(f,h);function f(d){var y=h.call(this,d)||this;return y.scroll=y,y.observer=new MutationObserver(function(v){y.update(v)}),y.observer.observe(y.domNode,l),y.attach(),y}return f.prototype.detach=function(){h.prototype.detach.call(this),this.observer.disconnect()},f.prototype.deleteAt=function(d,y){this.update(),d===0&&y===this.length()?this.children.forEach(function(v){v.remove()}):h.prototype.deleteAt.call(this,d,y)},f.prototype.formatAt=function(d,y,v,_){this.update(),h.prototype.formatAt.call(this,d,y,v,_)},f.prototype.insertAt=function(d,y,v){this.update(),h.prototype.insertAt.call(this,d,y,v)},f.prototype.optimize=function(d,y){var v=this;d===void 0&&(d=[]),y===void 0&&(y={}),h.prototype.optimize.call(this,y);for(var _=[].slice.call(this.observer.takeRecords());_.length>0;)d.push(_.pop());for(var g=function(T,C){C===void 0&&(C=!0),!(T==null||T===v)&&T.domNode.parentNode!=null&&(T.domNode[a.DATA_KEY].mutations==null&&(T.domNode[a.DATA_KEY].mutations=[]),C&&g(T.parent))},m=function(T){T.domNode[a.DATA_KEY]==null||T.domNode[a.DATA_KEY].mutations==null||(T instanceof o.default&&T.children.forEach(m),T.optimize(y))},w=d,b=0;w.length>0;b+=1){if(b>=u)throw new Error("[Parchment] Maximum optimize iterations reached");for(w.forEach(function(T){var C=a.find(T.target,!0);C!=null&&(C.domNode===T.target&&(T.type==="childList"?(g(a.find(T.previousSibling,!1)),[].forEach.call(T.addedNodes,function(k){var x=a.find(k,!1);g(x,!1),x instanceof o.default&&x.children.forEach(function(P){g(P,!1)})})):T.type==="attributes"&&g(C.prev)),g(C))}),this.children.forEach(m),w=[].slice.call(this.observer.takeRecords()),_=w.slice();_.length>0;)d.push(_.pop())}},f.prototype.update=function(d,y){var v=this;y===void 0&&(y={}),d=d||this.observer.takeRecords(),d.map(function(_){var g=a.find(_.target,!0);return g==null?null:g.domNode[a.DATA_KEY].mutations==null?(g.domNode[a.DATA_KEY].mutations=[_],g):(g.domNode[a.DATA_KEY].mutations.push(_),null)}).forEach(function(_){_==null||_===v||_.domNode[a.DATA_KEY]==null||_.update(_.domNode[a.DATA_KEY].mutations||[],y)}),this.domNode[a.DATA_KEY].mutations!=null&&h.prototype.update.call(this,this.domNode[a.DATA_KEY].mutations,y),this.optimize(d,y)},f.blotName="scroll",f.defaultChild="block",f.scope=a.Scope.BLOCK_BLOT,f.tagName="DIV",f}(o.default);r.default=c},function(n,r,i){var s=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var d in f)f.hasOwnProperty(d)&&(h[d]=f[d])};return function(h,f){c(h,f);function d(){this.constructor=h}h.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(18),a=i(1);function l(c,h){if(Object.keys(c).length!==Object.keys(h).length)return!1;for(var f in c)if(c[f]!==h[f])return!1;return!0}var u=function(c){s(h,c);function h(){return c!==null&&c.apply(this,arguments)||this}return h.formats=function(f){if(f.tagName!==h.tagName)return c.formats.call(this,f)},h.prototype.format=function(f,d){var y=this;f===this.statics.blotName&&!d?(this.children.forEach(function(v){v instanceof o.default||(v=v.wrap(h.blotName,!0)),y.attributes.copy(v)}),this.unwrap()):c.prototype.format.call(this,f,d)},h.prototype.formatAt=function(f,d,y,v){if(this.formats()[y]!=null||a.query(y,a.Scope.ATTRIBUTE)){var _=this.isolate(f,d);_.format(y,v)}else c.prototype.formatAt.call(this,f,d,y,v)},h.prototype.optimize=function(f){c.prototype.optimize.call(this,f);var d=this.formats();if(Object.keys(d).length===0)return this.unwrap();var y=this.next;y instanceof h&&y.prev===this&&l(d,y.formats())&&(y.moveChildren(this),y.remove())},h.blotName="inline",h.scope=a.Scope.INLINE_BLOT,h.tagName="SPAN",h}(o.default);r.default=u},function(n,r,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var f in h)h.hasOwnProperty(f)&&(c[f]=h[f])};return function(c,h){u(c,h);function f(){this.constructor=c}c.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(18),a=i(1),l=function(u){s(c,u);function c(){return u!==null&&u.apply(this,arguments)||this}return c.formats=function(h){var f=a.query(c.blotName).tagName;if(h.tagName!==f)return u.formats.call(this,h)},c.prototype.format=function(h,f){a.query(h,a.Scope.BLOCK)!=null&&(h===this.statics.blotName&&!f?this.replaceWith(c.blotName):u.prototype.format.call(this,h,f))},c.prototype.formatAt=function(h,f,d,y){a.query(d,a.Scope.BLOCK)!=null?this.format(d,y):u.prototype.formatAt.call(this,h,f,d,y)},c.prototype.insertAt=function(h,f,d){if(d==null||a.query(f,a.Scope.INLINE)!=null)u.prototype.insertAt.call(this,h,f,d);else{var y=this.split(h),v=a.create(f,d);y.parent.insertBefore(v,y)}},c.prototype.update=function(h,f){navigator.userAgent.match(/Trident/)?this.build():u.prototype.update.call(this,h,f)},c.blotName="block",c.scope=a.Scope.BLOCK_BLOT,c.tagName="P",c}(o.default);r.default=l},function(n,r,i){var s=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,c){u.__proto__=c}||function(u,c){for(var h in c)c.hasOwnProperty(h)&&(u[h]=c[h])};return function(u,c){l(u,c);function h(){this.constructor=u}u.prototype=c===null?Object.create(c):(h.prototype=c.prototype,new h)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(19),a=function(l){s(u,l);function u(){return l!==null&&l.apply(this,arguments)||this}return u.formats=function(c){},u.prototype.format=function(c,h){l.prototype.formatAt.call(this,0,this.length(),c,h)},u.prototype.formatAt=function(c,h,f,d){c===0&&h===this.length()?this.format(f,d):l.prototype.formatAt.call(this,c,h,f,d)},u.prototype.formats=function(){return this.statics.formats(this.domNode)},u}(o.default);r.default=a},function(n,r,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var f in h)h.hasOwnProperty(f)&&(c[f]=h[f])};return function(c,h){u(c,h);function f(){this.constructor=c}c.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(19),a=i(1),l=function(u){s(c,u);function c(h){var f=u.call(this,h)||this;return f.text=f.statics.value(f.domNode),f}return c.create=function(h){return document.createTextNode(h)},c.value=function(h){var f=h.data;return f.normalize&&(f=f.normalize()),f},c.prototype.deleteAt=function(h,f){this.domNode.data=this.text=this.text.slice(0,h)+this.text.slice(h+f)},c.prototype.index=function(h,f){return this.domNode===h?f:-1},c.prototype.insertAt=function(h,f,d){d==null?(this.text=this.text.slice(0,h)+f+this.text.slice(h),this.domNode.data=this.text):u.prototype.insertAt.call(this,h,f,d)},c.prototype.length=function(){return this.text.length},c.prototype.optimize=function(h){u.prototype.optimize.call(this,h),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof c&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},c.prototype.position=function(h,f){return[this.domNode,h]},c.prototype.split=function(h,f){if(f===void 0&&(f=!1),!f){if(h===0)return this;if(h===this.length())return this.next}var d=a.create(this.domNode.splitText(h));return this.parent.insertBefore(d,this.next),this.text=this.statics.value(this.domNode),d},c.prototype.update=function(h,f){var d=this;h.some(function(y){return y.type==="characterData"&&y.target===d.domNode})&&(this.text=this.statics.value(this.domNode))},c.prototype.value=function(){return this.text},c.blotName="text",c.scope=a.Scope.INLINE_BLOT,c}(o.default);r.default=l},function(n,r,i){var s=document.createElement("div");if(s.classList.toggle("test-class",!1),s.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(a,l){return arguments.length>1&&!this.contains(a)==!l?l:o.call(this,a)}}String.prototype.startsWith||(String.prototype.startsWith=function(a,l){return l=l||0,this.substr(l,a.length)===a}),String.prototype.endsWith||(String.prototype.endsWith=function(a,l){var u=this.toString();(typeof l!="number"||!isFinite(l)||Math.floor(l)!==l||l>u.length)&&(l=u.length),l-=a.length;var c=u.indexOf(a,l);return c!==-1&&c===l}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(l){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof l!="function")throw new TypeError("predicate must be a function");for(var u=Object(this),c=u.length>>>0,h=arguments[1],f,d=0;d<c;d++)if(f=u[d],l.call(h,f,d,u))return f}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(n,r){var i=-1,s=1,o=0;function a(b,T,C){if(b==T)return b?[[o,b]]:[];(C<0||b.length<C)&&(C=null);var k=h(b,T),x=b.substring(0,k);b=b.substring(k),T=T.substring(k),k=f(b,T);var P=b.substring(b.length-k);b=b.substring(0,b.length-k),T=T.substring(0,T.length-k);var S=l(b,T);return x&&S.unshift([o,x]),P&&S.push([o,P]),y(S),C!=null&&(S=g(S,C)),S=m(S),S}function l(b,T){var C;if(!b)return[[s,T]];if(!T)return[[i,b]];var k=b.length>T.length?b:T,x=b.length>T.length?T:b,P=k.indexOf(x);if(P!=-1)return C=[[s,k.substring(0,P)],[o,x],[s,k.substring(P+x.length)]],b.length>T.length&&(C[0][0]=C[2][0]=i),C;if(x.length==1)return[[i,b],[s,T]];var S=d(b,T);if(S){var E=S[0],A=S[1],O=S[2],M=S[3],F=S[4],$=a(E,O),q=a(A,M);return $.concat([[o,F]],q)}return u(b,T)}function u(b,T){for(var C=b.length,k=T.length,x=Math.ceil((C+k)/2),P=x,S=2*x,E=new Array(S),A=new Array(S),O=0;O<S;O++)E[O]=-1,A[O]=-1;E[P+1]=0,A[P+1]=0;for(var M=C-k,F=M%2!=0,$=0,q=0,W=0,U=0,B=0;B<x;B++){for(var N=-B+$;N<=B-q;N+=2){var V=P+N,z;N==-B||N!=B&&E[V-1]<E[V+1]?z=E[V+1]:z=E[V-1]+1;for(var G=z-N;z<C&&G<k&&b.charAt(z)==T.charAt(G);)z++,G++;if(E[V]=z,z>C)q+=2;else if(G>k)$+=2;else if(F){var K=P+M-N;if(K>=0&&K<S&&A[K]!=-1){var j=C-A[K];if(z>=j)return c(b,T,z,G)}}}for(var H=-B+W;H<=B-U;H+=2){var K=P+H,j;H==-B||H!=B&&A[K-1]<A[K+1]?j=A[K+1]:j=A[K-1]+1;for(var X=j-H;j<C&&X<k&&b.charAt(C-j-1)==T.charAt(k-X-1);)j++,X++;if(A[K]=j,j>C)U+=2;else if(X>k)W+=2;else if(!F){var V=P+M-H;if(V>=0&&V<S&&E[V]!=-1){var z=E[V],G=P+z-V;if(j=C-j,z>=j)return c(b,T,z,G)}}}}return[[i,b],[s,T]]}function c(b,T,C,k){var x=b.substring(0,C),P=T.substring(0,k),S=b.substring(C),E=T.substring(k),A=a(x,P),O=a(S,E);return A.concat(O)}function h(b,T){if(!b||!T||b.charAt(0)!=T.charAt(0))return 0;for(var C=0,k=Math.min(b.length,T.length),x=k,P=0;C<x;)b.substring(P,x)==T.substring(P,x)?(C=x,P=C):k=x,x=Math.floor((k-C)/2+C);return x}function f(b,T){if(!b||!T||b.charAt(b.length-1)!=T.charAt(T.length-1))return 0;for(var C=0,k=Math.min(b.length,T.length),x=k,P=0;C<x;)b.substring(b.length-x,b.length-P)==T.substring(T.length-x,T.length-P)?(C=x,P=C):k=x,x=Math.floor((k-C)/2+C);return x}function d(b,T){var C=b.length>T.length?b:T,k=b.length>T.length?T:b;if(C.length<4||k.length*2<C.length)return null;function x(q,W,U){for(var B=q.substring(U,U+Math.floor(q.length/4)),N=-1,V="",z,G,K,j;(N=W.indexOf(B,N+1))!=-1;){var H=h(q.substring(U),W.substring(N)),X=f(q.substring(0,U),W.substring(0,N));V.length<X+H&&(V=W.substring(N-X,N)+W.substring(N,N+H),z=q.substring(0,U-X),G=q.substring(U+H),K=W.substring(0,N-X),j=W.substring(N+H))}return V.length*2>=q.length?[z,G,K,j,V]:null}var P=x(C,k,Math.ceil(C.length/4)),S=x(C,k,Math.ceil(C.length/2)),E;if(!P&&!S)return null;S?P?E=P[4].length>S[4].length?P:S:E=S:E=P;var A,O,M,F;b.length>T.length?(A=E[0],O=E[1],M=E[2],F=E[3]):(M=E[0],F=E[1],A=E[2],O=E[3]);var $=E[4];return[A,O,M,F,$]}function y(b){b.push([o,""]);for(var T=0,C=0,k=0,x="",P="",S;T<b.length;)switch(b[T][0]){case s:k++,P+=b[T][1],T++;break;case i:C++,x+=b[T][1],T++;break;case o:C+k>1?(C!==0&&k!==0&&(S=h(P,x),S!==0&&(T-C-k>0&&b[T-C-k-1][0]==o?b[T-C-k-1][1]+=P.substring(0,S):(b.splice(0,0,[o,P.substring(0,S)]),T++),P=P.substring(S),x=x.substring(S)),S=f(P,x),S!==0&&(b[T][1]=P.substring(P.length-S)+b[T][1],P=P.substring(0,P.length-S),x=x.substring(0,x.length-S))),C===0?b.splice(T-k,C+k,[s,P]):k===0?b.splice(T-C,C+k,[i,x]):b.splice(T-C-k,C+k,[i,x],[s,P]),T=T-C-k+(C?1:0)+(k?1:0)+1):T!==0&&b[T-1][0]==o?(b[T-1][1]+=b[T][1],b.splice(T,1)):T++,k=0,C=0,x="",P="";break}b[b.length-1][1]===""&&b.pop();var E=!1;for(T=1;T<b.length-1;)b[T-1][0]==o&&b[T+1][0]==o&&(b[T][1].substring(b[T][1].length-b[T-1][1].length)==b[T-1][1]?(b[T][1]=b[T-1][1]+b[T][1].substring(0,b[T][1].length-b[T-1][1].length),b[T+1][1]=b[T-1][1]+b[T+1][1],b.splice(T-1,1),E=!0):b[T][1].substring(0,b[T+1][1].length)==b[T+1][1]&&(b[T-1][1]+=b[T+1][1],b[T][1]=b[T][1].substring(b[T+1][1].length)+b[T+1][1],b.splice(T+1,1),E=!0)),T++;E&&y(b)}var v=a;v.INSERT=s,v.DELETE=i,v.EQUAL=o,n.exports=v;function _(b,T){if(T===0)return[o,b];for(var C=0,k=0;k<b.length;k++){var x=b[k];if(x[0]===i||x[0]===o){var P=C+x[1].length;if(T===P)return[k+1,b];if(T<P){b=b.slice();var S=T-C,E=[x[0],x[1].slice(0,S)],A=[x[0],x[1].slice(S)];return b.splice(k,1,E,A),[k+1,b]}else C=P}}throw new Error("cursor_pos is out of bounds!")}function g(b,T){var C=_(b,T),k=C[1],x=C[0],P=k[x],S=k[x+1];if(P==null)return b;if(P[0]!==o)return b;if(S!=null&&P[1]+S[1]===S[1]+P[1])return k.splice(x,2,S,P),w(k,x,2);if(S!=null&&S[1].indexOf(P[1])===0){k.splice(x,2,[S[0],P[1]],[0,P[1]]);var E=S[1].slice(P[1].length);return E.length>0&&k.splice(x+2,0,[S[0],E]),w(k,x,3)}else return b}function m(b){for(var T=!1,C=function(S){return S.charCodeAt(0)>=56320&&S.charCodeAt(0)<=57343},k=function(S){return S.charCodeAt(S.length-1)>=55296&&S.charCodeAt(S.length-1)<=56319},x=2;x<b.length;x+=1)b[x-2][0]===o&&k(b[x-2][1])&&b[x-1][0]===i&&C(b[x-1][1])&&b[x][0]===s&&C(b[x][1])&&(T=!0,b[x-1][1]=b[x-2][1].slice(-1)+b[x-1][1],b[x][1]=b[x-2][1].slice(-1)+b[x][1],b[x-2][1]=b[x-2][1].slice(0,-1));if(!T)return b;for(var P=[],x=0;x<b.length;x+=1)b[x][1].length>0&&P.push(b[x]);return P}function w(b,T,C){for(var k=T+C-1;k>=0&&k>=T-1;k--)if(k+1<b.length){var x=b[k],P=b[k+1];x[0]===P[1]&&b.splice(k,2,[x[0],x[1]+P[1]])}return b}},function(n,r){r=n.exports=typeof Object.keys=="function"?Object.keys:i,r.shim=i;function i(s){var o=[];for(var a in s)o.push(a);return o}},function(n,r){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";r=n.exports=i?s:o,r.supported=s;function s(a){return Object.prototype.toString.call(a)=="[object Arguments]"}r.unsupported=o;function o(a){return a&&typeof a=="object"&&typeof a.length=="number"&&Object.prototype.hasOwnProperty.call(a,"callee")&&!Object.prototype.propertyIsEnumerable.call(a,"callee")||!1}},function(n,r){var i=Object.prototype.hasOwnProperty,s="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(s=!1));function a(u,c,h){this.fn=u,this.context=c,this.once=h||!1}function l(){this._events=new o,this._eventsCount=0}l.prototype.eventNames=function(){var c=[],h,f;if(this._eventsCount===0)return c;for(f in h=this._events)i.call(h,f)&&c.push(s?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(h)):c},l.prototype.listeners=function(c,h){var f=s?s+c:c,d=this._events[f];if(h)return!!d;if(!d)return[];if(d.fn)return[d.fn];for(var y=0,v=d.length,_=new Array(v);y<v;y++)_[y]=d[y].fn;return _},l.prototype.emit=function(c,h,f,d,y,v){var _=s?s+c:c;if(!this._events[_])return!1;var g=this._events[_],m=arguments.length,w,b;if(g.fn){switch(g.once&&this.removeListener(c,g.fn,void 0,!0),m){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,h),!0;case 3:return g.fn.call(g.context,h,f),!0;case 4:return g.fn.call(g.context,h,f,d),!0;case 5:return g.fn.call(g.context,h,f,d,y),!0;case 6:return g.fn.call(g.context,h,f,d,y,v),!0}for(b=1,w=new Array(m-1);b<m;b++)w[b-1]=arguments[b];g.fn.apply(g.context,w)}else{var T=g.length,C;for(b=0;b<T;b++)switch(g[b].once&&this.removeListener(c,g[b].fn,void 0,!0),m){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,h);break;case 3:g[b].fn.call(g[b].context,h,f);break;case 4:g[b].fn.call(g[b].context,h,f,d);break;default:if(!w)for(C=1,w=new Array(m-1);C<m;C++)w[C-1]=arguments[C];g[b].fn.apply(g[b].context,w)}}return!0},l.prototype.on=function(c,h,f){var d=new a(h,f||this),y=s?s+c:c;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],d]:this._events[y].push(d):(this._events[y]=d,this._eventsCount++),this},l.prototype.once=function(c,h,f){var d=new a(h,f||this,!0),y=s?s+c:c;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],d]:this._events[y].push(d):(this._events[y]=d,this._eventsCount++),this},l.prototype.removeListener=function(c,h,f,d){var y=s?s+c:c;if(!this._events[y])return this;if(!h)return--this._eventsCount===0?this._events=new o:delete this._events[y],this;var v=this._events[y];if(v.fn)v.fn===h&&(!d||v.once)&&(!f||v.context===f)&&(--this._eventsCount===0?this._events=new o:delete this._events[y]);else{for(var _=0,g=[],m=v.length;_<m;_++)(v[_].fn!==h||d&&!v[_].once||f&&v[_].context!==f)&&g.push(v[_]);g.length?this._events[y]=g.length===1?g[0]:g:--this._eventsCount===0?this._events=new o:delete this._events[y]}return this},l.prototype.removeAllListeners=function(c){var h;return c?(h=s?s+c:c,this._events[h]&&(--this._eventsCount===0?this._events=new o:delete this._events[h])):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prototype.setMaxListeners=function(){return this},l.prefixed=s,l.EventEmitter=l,typeof n<"u"&&(n.exports=l)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},o=function(){function Q(ee,le){var he=[],ne=!0,Te=!1,ke=void 0;try{for(var Ae=ee[Symbol.iterator](),Be;!(ne=(Be=Ae.next()).done)&&(he.push(Be.value),!(le&&he.length===le));ne=!0);}catch(Ge){Te=!0,ke=Ge}finally{try{!ne&&Ae.return&&Ae.return()}finally{if(Te)throw ke}}return he}return function(ee,le){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return Q(ee,le);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function Q(ee,le){for(var he=0;he<le.length;he++){var ne=le[he];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(ee,ne.key,ne)}}return function(ee,le,he){return le&&Q(ee.prototype,le),he&&Q(ee,he),ee}}(),l=i(3),u=A(l),c=i(2),h=A(c),f=i(0),d=A(f),y=i(5),v=A(y),_=i(10),g=A(_),m=i(9),w=A(m),b=i(36),T=i(37),C=i(13),k=A(C),x=i(26),P=i(38),S=i(39),E=i(40);function A(Q){return Q&&Q.__esModule?Q:{default:Q}}function O(Q,ee,le){return ee in Q?Object.defineProperty(Q,ee,{value:le,enumerable:!0,configurable:!0,writable:!0}):Q[ee]=le,Q}function M(Q,ee){if(!(Q instanceof ee))throw new TypeError("Cannot call a class as a function")}function F(Q,ee){if(!Q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ee&&(typeof ee=="object"||typeof ee=="function")?ee:Q}function $(Q,ee){if(typeof ee!="function"&&ee!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ee);Q.prototype=Object.create(ee&&ee.prototype,{constructor:{value:Q,enumerable:!1,writable:!0,configurable:!0}}),ee&&(Object.setPrototypeOf?Object.setPrototypeOf(Q,ee):Q.__proto__=ee)}var q=(0,g.default)("quill:clipboard"),W="__ql-matcher",U=[[Node.TEXT_NODE,ge],[Node.TEXT_NODE,Se],["br",fe],[Node.ELEMENT_NODE,Se],[Node.ELEMENT_NODE,te],[Node.ELEMENT_NODE,Ce],[Node.ELEMENT_NODE,J],[Node.ELEMENT_NODE,se],["li",_e],["b",X.bind(X,"bold")],["i",X.bind(X,"italic")],["style",ve]],B=[b.AlignAttribute,P.DirectionAttribute].reduce(function(Q,ee){return Q[ee.keyName]=ee,Q},{}),N=[b.AlignStyle,T.BackgroundStyle,x.ColorStyle,P.DirectionStyle,S.FontStyle,E.SizeStyle].reduce(function(Q,ee){return Q[ee.keyName]=ee,Q},{}),V=function(Q){$(ee,Q);function ee(le,he){M(this,ee);var ne=F(this,(ee.__proto__||Object.getPrototypeOf(ee)).call(this,le,he));return ne.quill.root.addEventListener("paste",ne.onPaste.bind(ne)),ne.container=ne.quill.addContainer("ql-clipboard"),ne.container.setAttribute("contenteditable",!0),ne.container.setAttribute("tabindex",-1),ne.matchers=[],U.concat(ne.options.matchers).forEach(function(Te){var ke=o(Te,2),Ae=ke[0],Be=ke[1];!he.matchVisual&&Be===Ce||ne.addMatcher(Ae,Be)}),ne}return a(ee,[{key:"addMatcher",value:function(he,ne){this.matchers.push([he,ne])}},{key:"convert",value:function(he){if(typeof he=="string")return this.container.innerHTML=he.replace(/\>\r?\n +\</g,"><"),this.convert();var ne=this.quill.getFormat(this.quill.selection.savedRange.index);if(ne[k.default.blotName]){var Te=this.container.innerText;return this.container.innerHTML="",new h.default().insert(Te,O({},k.default.blotName,ne[k.default.blotName]))}var ke=this.prepareMatching(),Ae=o(ke,2),Be=Ae[0],Ge=Ae[1],qe=H(this.container,Be,Ge);return K(qe,`
`)&&qe.ops[qe.ops.length-1].attributes==null&&(qe=qe.compose(new h.default().retain(qe.length()-1).delete(1))),q.log("convert",this.container.innerHTML,qe),this.container.innerHTML="",qe}},{key:"dangerouslyPasteHTML",value:function(he,ne){var Te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.default.sources.API;if(typeof he=="string")this.quill.setContents(this.convert(he),ne),this.quill.setSelection(0,v.default.sources.SILENT);else{var ke=this.convert(ne);this.quill.updateContents(new h.default().retain(he).concat(ke),Te),this.quill.setSelection(he+ke.length(),v.default.sources.SILENT)}}},{key:"onPaste",value:function(he){var ne=this;if(!(he.defaultPrevented||!this.quill.isEnabled())){var Te=this.quill.getSelection(),ke=new h.default().retain(Te.index),Ae=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(v.default.sources.SILENT),setTimeout(function(){ke=ke.concat(ne.convert()).delete(Te.length),ne.quill.updateContents(ke,v.default.sources.USER),ne.quill.setSelection(ke.length()-Te.length,v.default.sources.SILENT),ne.quill.scrollingContainer.scrollTop=Ae,ne.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var he=this,ne=[],Te=[];return this.matchers.forEach(function(ke){var Ae=o(ke,2),Be=Ae[0],Ge=Ae[1];switch(Be){case Node.TEXT_NODE:Te.push(Ge);break;case Node.ELEMENT_NODE:ne.push(Ge);break;default:[].forEach.call(he.container.querySelectorAll(Be),function(qe){qe[W]=qe[W]||[],qe[W].push(Ge)});break}}),[ne,Te]}}]),ee}(w.default);V.DEFAULTS={matchers:[],matchVisual:!0};function z(Q,ee,le){return(typeof ee>"u"?"undefined":s(ee))==="object"?Object.keys(ee).reduce(function(he,ne){return z(he,ne,ee[ne])},Q):Q.reduce(function(he,ne){return ne.attributes&&ne.attributes[ee]?he.push(ne):he.insert(ne.insert,(0,u.default)({},O({},ee,le),ne.attributes))},new h.default)}function G(Q){if(Q.nodeType!==Node.ELEMENT_NODE)return{};var ee="__ql-computed-style";return Q[ee]||(Q[ee]=window.getComputedStyle(Q))}function K(Q,ee){for(var le="",he=Q.ops.length-1;he>=0&&le.length<ee.length;--he){var ne=Q.ops[he];if(typeof ne.insert!="string")break;le=ne.insert+le}return le.slice(-1*ee.length)===ee}function j(Q){if(Q.childNodes.length===0)return!1;var ee=G(Q);return["block","list-item"].indexOf(ee.display)>-1}function H(Q,ee,le){return Q.nodeType===Q.TEXT_NODE?le.reduce(function(he,ne){return ne(Q,he)},new h.default):Q.nodeType===Q.ELEMENT_NODE?[].reduce.call(Q.childNodes||[],function(he,ne){var Te=H(ne,ee,le);return ne.nodeType===Q.ELEMENT_NODE&&(Te=ee.reduce(function(ke,Ae){return Ae(ne,ke)},Te),Te=(ne[W]||[]).reduce(function(ke,Ae){return Ae(ne,ke)},Te)),he.concat(Te)},new h.default):new h.default}function X(Q,ee,le){return z(le,Q,!0)}function J(Q,ee){var le=d.default.Attributor.Attribute.keys(Q),he=d.default.Attributor.Class.keys(Q),ne=d.default.Attributor.Style.keys(Q),Te={};return le.concat(he).concat(ne).forEach(function(ke){var Ae=d.default.query(ke,d.default.Scope.ATTRIBUTE);Ae!=null&&(Te[Ae.attrName]=Ae.value(Q),Te[Ae.attrName])||(Ae=B[ke],Ae!=null&&(Ae.attrName===ke||Ae.keyName===ke)&&(Te[Ae.attrName]=Ae.value(Q)||void 0),Ae=N[ke],Ae!=null&&(Ae.attrName===ke||Ae.keyName===ke)&&(Ae=N[ke],Te[Ae.attrName]=Ae.value(Q)||void 0))}),Object.keys(Te).length>0&&(ee=z(ee,Te)),ee}function te(Q,ee){var le=d.default.query(Q);if(le==null)return ee;if(le.prototype instanceof d.default.Embed){var he={},ne=le.value(Q);ne!=null&&(he[le.blotName]=ne,ee=new h.default().insert(he,le.formats(Q)))}else typeof le.formats=="function"&&(ee=z(ee,le.blotName,le.formats(Q)));return ee}function fe(Q,ee){return K(ee,`
`)||ee.insert(`
`),ee}function ve(){return new h.default}function _e(Q,ee){var le=d.default.query(Q);if(le==null||le.blotName!=="list-item"||!K(ee,`
`))return ee;for(var he=-1,ne=Q.parentNode;!ne.classList.contains("ql-clipboard");)(d.default.query(ne)||{}).blotName==="list"&&(he+=1),ne=ne.parentNode;return he<=0?ee:ee.compose(new h.default().retain(ee.length()-1).retain(1,{indent:he}))}function Se(Q,ee){return K(ee,`
`)||(j(Q)||ee.length()>0&&Q.nextSibling&&j(Q.nextSibling))&&ee.insert(`
`),ee}function Ce(Q,ee){if(j(Q)&&Q.nextElementSibling!=null&&!K(ee,`

`)){var le=Q.offsetHeight+parseFloat(G(Q).marginTop)+parseFloat(G(Q).marginBottom);Q.nextElementSibling.offsetTop>Q.offsetTop+le*1.5&&ee.insert(`
`)}return ee}function se(Q,ee){var le={},he=Q.style||{};return he.fontStyle&&G(Q).fontStyle==="italic"&&(le.italic=!0),he.fontWeight&&(G(Q).fontWeight.startsWith("bold")||parseInt(G(Q).fontWeight)>=700)&&(le.bold=!0),Object.keys(le).length>0&&(ee=z(ee,le)),parseFloat(he.textIndent||0)>0&&(ee=new h.default().insert("	").concat(ee)),ee}function ge(Q,ee){var le=Q.data;if(Q.parentNode.tagName==="O:P")return ee.insert(le.trim());if(le.trim().length===0&&Q.parentNode.classList.contains("ql-clipboard"))return ee;if(!G(Q.parentNode).whiteSpace.startsWith("pre")){var he=function(Te,ke){return ke=ke.replace(/[^\u00a0]/g,""),ke.length<1&&Te?" ":ke};le=le.replace(/\r\n/g," ").replace(/\n/g," "),le=le.replace(/\s\s+/g,he.bind(he,!0)),(Q.previousSibling==null&&j(Q.parentNode)||Q.previousSibling!=null&&j(Q.previousSibling))&&(le=le.replace(/^\s+/,he.bind(he,!1))),(Q.nextSibling==null&&j(Q.parentNode)||Q.nextSibling!=null&&j(Q.nextSibling))&&(le=le.replace(/\s+$/,he.bind(he,!1)))}return ee.insert(le)}r.default=V,r.matchAttributor=J,r.matchBlot=te,r.matchNewline=Se,r.matchSpacing=Ce,r.matchText=ge},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function y(v,_){for(var g=0;g<_.length;g++){var m=_[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(v,m.key,m)}}return function(v,_,g){return _&&y(v.prototype,_),g&&y(v,g),v}}(),o=function y(v,_,g){v===null&&(v=Function.prototype);var m=Object.getOwnPropertyDescriptor(v,_);if(m===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:y(w,_,g)}else{if("value"in m)return m.value;var b=m.get;return b===void 0?void 0:b.call(g)}},a=i(6),l=u(a);function u(y){return y&&y.__esModule?y:{default:y}}function c(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function h(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function f(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var d=function(y){f(v,y);function v(){return c(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,[{key:"optimize",value:function(g){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,g),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),v}(l.default);d.blotName="bold",d.tagName=["STRONG","B"],r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var s=function(){function E(A,O){var M=[],F=!0,$=!1,q=void 0;try{for(var W=A[Symbol.iterator](),U;!(F=(U=W.next()).done)&&(M.push(U.value),!(O&&M.length===O));F=!0);}catch(B){$=!0,q=B}finally{try{!F&&W.return&&W.return()}finally{if($)throw q}}return M}return function(A,O){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return E(A,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function E(A,O){for(var M=0;M<O.length;M++){var F=O[M];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(A,F.key,F)}}return function(A,O,M){return O&&E(A.prototype,O),M&&E(A,M),A}}(),a=i(2),l=g(a),u=i(0),c=g(u),h=i(5),f=g(h),d=i(10),y=g(d),v=i(9),_=g(v);function g(E){return E&&E.__esModule?E:{default:E}}function m(E,A,O){return A in E?Object.defineProperty(E,A,{value:O,enumerable:!0,configurable:!0,writable:!0}):E[A]=O,E}function w(E,A){if(!(E instanceof A))throw new TypeError("Cannot call a class as a function")}function b(E,A){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:E}function T(E,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);E.prototype=Object.create(A&&A.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(E,A):E.__proto__=A)}var C=(0,y.default)("quill:toolbar"),k=function(E){T(A,E);function A(O,M){w(this,A);var F=b(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,O,M));if(Array.isArray(F.options.container)){var $=document.createElement("div");P($,F.options.container),O.container.parentNode.insertBefore($,O.container),F.container=$}else typeof F.options.container=="string"?F.container=document.querySelector(F.options.container):F.container=F.options.container;if(!(F.container instanceof HTMLElement)){var q;return q=C.error("Container required for toolbar",F.options),b(F,q)}return F.container.classList.add("ql-toolbar"),F.controls=[],F.handlers={},Object.keys(F.options.handlers).forEach(function(W){F.addHandler(W,F.options.handlers[W])}),[].forEach.call(F.container.querySelectorAll("button, select"),function(W){F.attach(W)}),F.quill.on(f.default.events.EDITOR_CHANGE,function(W,U){W===f.default.events.SELECTION_CHANGE&&F.update(U)}),F.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){var W=F.quill.selection.getRange(),U=s(W,1),B=U[0];F.update(B)}),F}return o(A,[{key:"addHandler",value:function(M,F){this.handlers[M]=F}},{key:"attach",value:function(M){var F=this,$=[].find.call(M.classList,function(W){return W.indexOf("ql-")===0});if($){if($=$.slice(3),M.tagName==="BUTTON"&&M.setAttribute("type","button"),this.handlers[$]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[$]==null){C.warn("ignoring attaching to disabled format",$,M);return}if(c.default.query($)==null){C.warn("ignoring attaching to nonexistent format",$,M);return}}var q=M.tagName==="SELECT"?"change":"click";M.addEventListener(q,function(W){var U=void 0;if(M.tagName==="SELECT"){if(M.selectedIndex<0)return;var B=M.options[M.selectedIndex];B.hasAttribute("selected")?U=!1:U=B.value||!1}else M.classList.contains("ql-active")?U=!1:U=M.value||!M.hasAttribute("value"),W.preventDefault();F.quill.focus();var N=F.quill.selection.getRange(),V=s(N,1),z=V[0];if(F.handlers[$]!=null)F.handlers[$].call(F,U);else if(c.default.query($).prototype instanceof c.default.Embed){if(U=prompt("Enter "+$),!U)return;F.quill.updateContents(new l.default().retain(z.index).delete(z.length).insert(m({},$,U)),f.default.sources.USER)}else F.quill.format($,U,f.default.sources.USER);F.update(z)}),this.controls.push([$,M])}}},{key:"update",value:function(M){var F=M==null?{}:this.quill.getFormat(M);this.controls.forEach(function($){var q=s($,2),W=q[0],U=q[1];if(U.tagName==="SELECT"){var B=void 0;if(M==null)B=null;else if(F[W]==null)B=U.querySelector("option[selected]");else if(!Array.isArray(F[W])){var N=F[W];typeof N=="string"&&(N=N.replace(/\"/g,'\\"')),B=U.querySelector('option[value="'+N+'"]')}B==null?(U.value="",U.selectedIndex=-1):B.selected=!0}else if(M==null)U.classList.remove("ql-active");else if(U.hasAttribute("value")){var V=F[W]===U.getAttribute("value")||F[W]!=null&&F[W].toString()===U.getAttribute("value")||F[W]==null&&!U.getAttribute("value");U.classList.toggle("ql-active",V)}else U.classList.toggle("ql-active",F[W]!=null)})}}]),A}(_.default);k.DEFAULTS={};function x(E,A,O){var M=document.createElement("button");M.setAttribute("type","button"),M.classList.add("ql-"+A),O!=null&&(M.value=O),E.appendChild(M)}function P(E,A){Array.isArray(A[0])||(A=[A]),A.forEach(function(O){var M=document.createElement("span");M.classList.add("ql-formats"),O.forEach(function(F){if(typeof F=="string")x(M,F);else{var $=Object.keys(F)[0],q=F[$];Array.isArray(q)?S(M,$,q):x(M,$,q)}}),E.appendChild(M)})}function S(E,A,O){var M=document.createElement("select");M.classList.add("ql-"+A),O.forEach(function(F){var $=document.createElement("option");F!==!1?$.setAttribute("value",F):$.setAttribute("selected","selected"),M.appendChild($)}),E.appendChild(M)}k.DEFAULTS={container:null,handlers:{clean:function(){var A=this,O=this.quill.getSelection();if(O!=null)if(O.length==0){var M=this.quill.getFormat();Object.keys(M).forEach(function(F){c.default.query(F,c.default.Scope.INLINE)!=null&&A.quill.format(F,!1)})}else this.quill.removeFormat(O,f.default.sources.USER)},direction:function(A){var O=this.quill.getFormat().align;A==="rtl"&&O==null?this.quill.format("align","right",f.default.sources.USER):!A&&O==="right"&&this.quill.format("align",!1,f.default.sources.USER),this.quill.format("direction",A,f.default.sources.USER)},indent:function(A){var O=this.quill.getSelection(),M=this.quill.getFormat(O),F=parseInt(M.indent||0);if(A==="+1"||A==="-1"){var $=A==="+1"?1:-1;M.direction==="rtl"&&($*=-1),this.quill.format("indent",F+$,f.default.sources.USER)}},link:function(A){A===!0&&(A=prompt("Enter link URL:")),this.quill.format("link",A,f.default.sources.USER)},list:function(A){var O=this.quill.getSelection(),M=this.quill.getFormat(O);A==="check"?M.list==="checked"||M.list==="unchecked"?this.quill.format("list",!1,f.default.sources.USER):this.quill.format("list","unchecked",f.default.sources.USER):this.quill.format("list",A,f.default.sources.USER)}}},r.default=k,r.addControls=P},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function y(v,_){for(var g=0;g<_.length;g++){var m=_[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(v,m.key,m)}}return function(v,_,g){return _&&y(v.prototype,_),g&&y(v,g),v}}(),o=function y(v,_,g){v===null&&(v=Function.prototype);var m=Object.getOwnPropertyDescriptor(v,_);if(m===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:y(w,_,g)}else{if("value"in m)return m.value;var b=m.get;return b===void 0?void 0:b.call(g)}},a=i(28),l=u(a);function u(y){return y&&y.__esModule?y:{default:y}}function c(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function h(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function f(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var d=function(y){f(v,y);function v(_,g){c(this,v);var m=h(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,_));return m.label.innerHTML=g,m.container.classList.add("ql-color-picker"),[].slice.call(m.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(w){w.classList.add("ql-primary")}),m}return s(v,[{key:"buildItem",value:function(g){var m=o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"buildItem",this).call(this,g);return m.style.backgroundColor=g.getAttribute("value")||"",m}},{key:"selectItem",value:function(g,m){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,g,m);var w=this.label.querySelector(".ql-color-label"),b=g&&g.getAttribute("data-value")||"";w&&(w.tagName==="line"?w.style.stroke=b:w.style.fill=b)}}]),v}(l.default);r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function y(v,_){for(var g=0;g<_.length;g++){var m=_[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(v,m.key,m)}}return function(v,_,g){return _&&y(v.prototype,_),g&&y(v,g),v}}(),o=function y(v,_,g){v===null&&(v=Function.prototype);var m=Object.getOwnPropertyDescriptor(v,_);if(m===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:y(w,_,g)}else{if("value"in m)return m.value;var b=m.get;return b===void 0?void 0:b.call(g)}},a=i(28),l=u(a);function u(y){return y&&y.__esModule?y:{default:y}}function c(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function h(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function f(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var d=function(y){f(v,y);function v(_,g){c(this,v);var m=h(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,_));return m.container.classList.add("ql-icon-picker"),[].forEach.call(m.container.querySelectorAll(".ql-picker-item"),function(w){w.innerHTML=g[w.getAttribute("data-value")||""]}),m.defaultItem=m.container.querySelector(".ql-selected"),m.selectItem(m.defaultItem),m}return s(v,[{key:"selectItem",value:function(g,m){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,g,m),g=g||this.defaultItem,this.label.innerHTML=g.innerHTML}}]),v}(l.default);r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function l(u,c){for(var h=0;h<c.length;h++){var f=c[h];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(u,f.key,f)}}return function(u,c,h){return c&&l(u.prototype,c),h&&l(u,h),u}}();function o(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var a=function(){function l(u,c){var h=this;o(this,l),this.quill=u,this.boundsContainer=c||document.body,this.root=u.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){h.root.style.marginTop=-1*h.quill.root.scrollTop+"px"}),this.hide()}return s(l,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(c){var h=c.left+c.width/2-this.root.offsetWidth/2,f=c.bottom+this.quill.root.scrollTop;this.root.style.left=h+"px",this.root.style.top=f+"px",this.root.classList.remove("ql-flip");var d=this.boundsContainer.getBoundingClientRect(),y=this.root.getBoundingClientRect(),v=0;if(y.right>d.right&&(v=d.right-y.right,this.root.style.left=h+v+"px"),y.left<d.left&&(v=d.left-y.left,this.root.style.left=h+v+"px"),y.bottom>d.bottom){var _=y.bottom-y.top,g=c.bottom-c.top+_;this.root.style.top=f-g+"px",this.root.classList.add("ql-flip")}return v}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),l}();r.default=a},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function S(E,A){var O=[],M=!0,F=!1,$=void 0;try{for(var q=E[Symbol.iterator](),W;!(M=(W=q.next()).done)&&(O.push(W.value),!(A&&O.length===A));M=!0);}catch(U){F=!0,$=U}finally{try{!M&&q.return&&q.return()}finally{if(F)throw $}}return O}return function(E,A){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return S(E,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function S(E,A,O){E===null&&(E=Function.prototype);var M=Object.getOwnPropertyDescriptor(E,A);if(M===void 0){var F=Object.getPrototypeOf(E);return F===null?void 0:S(F,A,O)}else{if("value"in M)return M.value;var $=M.get;return $===void 0?void 0:$.call(O)}},a=function(){function S(E,A){for(var O=0;O<A.length;O++){var M=A[O];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(E,M.key,M)}}return function(E,A,O){return A&&S(E.prototype,A),O&&S(E,O),E}}(),l=i(3),u=w(l),c=i(8),h=w(c),f=i(43),d=w(f),y=i(27),v=w(y),_=i(15),g=i(41),m=w(g);function w(S){return S&&S.__esModule?S:{default:S}}function b(S,E){if(!(S instanceof E))throw new TypeError("Cannot call a class as a function")}function T(S,E){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:S}function C(S,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);S.prototype=Object.create(E&&E.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(S,E):S.__proto__=E)}var k=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],x=function(S){C(E,S);function E(A,O){b(this,E),O.modules.toolbar!=null&&O.modules.toolbar.container==null&&(O.modules.toolbar.container=k);var M=T(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,A,O));return M.quill.container.classList.add("ql-snow"),M}return a(E,[{key:"extendToolbar",value:function(O){O.container.classList.add("ql-snow"),this.buildButtons([].slice.call(O.container.querySelectorAll("button")),m.default),this.buildPickers([].slice.call(O.container.querySelectorAll("select")),m.default),this.tooltip=new P(this.quill,this.options.bounds),O.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(M,F){O.handlers.link.call(O,!F.format.link)})}}]),E}(d.default);x.DEFAULTS=(0,u.default)(!0,{},d.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(E){if(E){var A=this.quill.getSelection();if(A==null||A.length==0)return;var O=this.quill.getText(A);/^\S+@\S+\.\S+$/.test(O)&&O.indexOf("mailto:")!==0&&(O="mailto:"+O);var M=this.quill.theme.tooltip;M.edit("link",O)}else this.quill.format("link",!1)}}}}});var P=function(S){C(E,S);function E(A,O){b(this,E);var M=T(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,A,O));return M.preview=M.root.querySelector("a.ql-preview"),M}return a(E,[{key:"listen",value:function(){var O=this;o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(M){O.root.classList.contains("ql-editing")?O.save():O.edit("link",O.preview.textContent),M.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(M){if(O.linkRange!=null){var F=O.linkRange;O.restoreFocus(),O.quill.formatText(F,"link",!1,h.default.sources.USER),delete O.linkRange}M.preventDefault(),O.hide()}),this.quill.on(h.default.events.SELECTION_CHANGE,function(M,F,$){if(M!=null){if(M.length===0&&$===h.default.sources.USER){var q=O.quill.scroll.descendant(v.default,M.index),W=s(q,2),U=W[0],B=W[1];if(U!=null){O.linkRange=new _.Range(M.index-B,U.length());var N=v.default.formats(U.domNode);O.preview.textContent=N,O.preview.setAttribute("href",N),O.show(),O.position(O.quill.getBounds(O.linkRange));return}}else delete O.linkRange;O.hide()}})}},{key:"show",value:function(){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),E}(f.BaseTooltip);P.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=x},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(29),o=ne(s),a=i(36),l=i(38),u=i(64),c=i(65),h=ne(c),f=i(66),d=ne(f),y=i(67),v=ne(y),_=i(37),g=i(26),m=i(39),w=i(40),b=i(56),T=ne(b),C=i(68),k=ne(C),x=i(27),P=ne(x),S=i(69),E=ne(S),A=i(70),O=ne(A),M=i(71),F=ne(M),$=i(72),q=ne($),W=i(73),U=ne(W),B=i(13),N=ne(B),V=i(74),z=ne(V),G=i(75),K=ne(G),j=i(57),H=ne(j),X=i(41),J=ne(X),te=i(28),fe=ne(te),ve=i(59),_e=ne(ve),Se=i(60),Ce=ne(Se),se=i(61),ge=ne(se),Q=i(108),ee=ne(Q),le=i(62),he=ne(le);function ne(Te){return Te&&Te.__esModule?Te:{default:Te}}o.default.register({"attributors/attribute/direction":l.DirectionAttribute,"attributors/class/align":a.AlignClass,"attributors/class/background":_.BackgroundClass,"attributors/class/color":g.ColorClass,"attributors/class/direction":l.DirectionClass,"attributors/class/font":m.FontClass,"attributors/class/size":w.SizeClass,"attributors/style/align":a.AlignStyle,"attributors/style/background":_.BackgroundStyle,"attributors/style/color":g.ColorStyle,"attributors/style/direction":l.DirectionStyle,"attributors/style/font":m.FontStyle,"attributors/style/size":w.SizeStyle},!0),o.default.register({"formats/align":a.AlignClass,"formats/direction":l.DirectionClass,"formats/indent":u.IndentClass,"formats/background":_.BackgroundStyle,"formats/color":g.ColorStyle,"formats/font":m.FontClass,"formats/size":w.SizeClass,"formats/blockquote":h.default,"formats/code-block":N.default,"formats/header":d.default,"formats/list":v.default,"formats/bold":T.default,"formats/code":B.Code,"formats/italic":k.default,"formats/link":P.default,"formats/script":E.default,"formats/strike":O.default,"formats/underline":F.default,"formats/image":q.default,"formats/video":U.default,"formats/list/item":y.ListItem,"modules/formula":z.default,"modules/syntax":K.default,"modules/toolbar":H.default,"themes/bubble":ee.default,"themes/snow":he.default,"ui/icons":J.default,"ui/picker":fe.default,"ui/icon-picker":Ce.default,"ui/color-picker":_e.default,"ui/tooltip":ge.default},!0),r.default=o.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var s=function(){function v(_,g){for(var m=0;m<g.length;m++){var w=g[m];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(_,w.key,w)}}return function(_,g,m){return g&&v(_.prototype,g),m&&v(_,m),_}}(),o=function v(_,g,m){_===null&&(_=Function.prototype);var w=Object.getOwnPropertyDescriptor(_,g);if(w===void 0){var b=Object.getPrototypeOf(_);return b===null?void 0:v(b,g,m)}else{if("value"in w)return w.value;var T=w.get;return T===void 0?void 0:T.call(m)}},a=i(0),l=u(a);function u(v){return v&&v.__esModule?v:{default:v}}function c(v,_){if(!(v instanceof _))throw new TypeError("Cannot call a class as a function")}function h(v,_){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:v}function f(v,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);v.prototype=Object.create(_&&_.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(v,_):v.__proto__=_)}var d=function(v){f(_,v);function _(){return c(this,_),h(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return s(_,[{key:"add",value:function(m,w){if(w==="+1"||w==="-1"){var b=this.value(m)||0;w=w==="+1"?b+1:b-1}return w===0?(this.remove(m),!0):o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"add",this).call(this,m,w)}},{key:"canAdd",value:function(m,w){return o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"canAdd",this).call(this,m,w)||o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"canAdd",this).call(this,m,parseInt(w))}},{key:"value",value:function(m){return parseInt(o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"value",this).call(this,m))||void 0}}]),_}(l.default.Attributor.Class),y=new d("indent","ql-indent",{scope:l.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(4),o=a(s);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function u(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function c(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var h=function(f){c(d,f);function d(){return l(this,d),u(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(o.default);h.blotName="blockquote",h.tagName="blockquote",r.default=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function d(y,v){for(var _=0;_<v.length;_++){var g=v[_];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(y,g.key,g)}}return function(y,v,_){return v&&d(y.prototype,v),_&&d(y,_),y}}(),o=i(4),a=l(o);function l(d){return d&&d.__esModule?d:{default:d}}function u(d,y){if(!(d instanceof y))throw new TypeError("Cannot call a class as a function")}function c(d,y){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:d}function h(d,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);d.prototype=Object.create(y&&y.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(d,y):d.__proto__=y)}var f=function(d){h(y,d);function y(){return u(this,y),c(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return s(y,null,[{key:"formats",value:function(_){return this.tagName.indexOf(_.tagName)+1}}]),y}(a.default);f.blotName="header",f.tagName=["H1","H2","H3","H4","H5","H6"],r.default=f},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var s=function(){function b(T,C){for(var k=0;k<C.length;k++){var x=C[k];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(T,x.key,x)}}return function(T,C,k){return C&&b(T.prototype,C),k&&b(T,k),T}}(),o=function b(T,C,k){T===null&&(T=Function.prototype);var x=Object.getOwnPropertyDescriptor(T,C);if(x===void 0){var P=Object.getPrototypeOf(T);return P===null?void 0:b(P,C,k)}else{if("value"in x)return x.value;var S=x.get;return S===void 0?void 0:S.call(k)}},a=i(0),l=d(a),u=i(4),c=d(u),h=i(25),f=d(h);function d(b){return b&&b.__esModule?b:{default:b}}function y(b,T,C){return T in b?Object.defineProperty(b,T,{value:C,enumerable:!0,configurable:!0,writable:!0}):b[T]=C,b}function v(b,T){if(!(b instanceof T))throw new TypeError("Cannot call a class as a function")}function _(b,T){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:b}function g(b,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);b.prototype=Object.create(T&&T.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(b,T):b.__proto__=T)}var m=function(b){g(T,b);function T(){return v(this,T),_(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return s(T,[{key:"format",value:function(k,x){k===w.blotName&&!x?this.replaceWith(l.default.create(this.statics.scope)):o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"format",this).call(this,k,x)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(k,x){return this.parent.isolate(this.offset(this.parent),this.length()),k===this.parent.statics.blotName?(this.parent.replaceWith(k,x),this):(this.parent.unwrap(),o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"replaceWith",this).call(this,k,x))}}],[{key:"formats",value:function(k){return k.tagName===this.tagName?void 0:o(T.__proto__||Object.getPrototypeOf(T),"formats",this).call(this,k)}}]),T}(c.default);m.blotName="list-item",m.tagName="LI";var w=function(b){g(T,b),s(T,null,[{key:"create",value:function(k){var x=k==="ordered"?"OL":"UL",P=o(T.__proto__||Object.getPrototypeOf(T),"create",this).call(this,x);return(k==="checked"||k==="unchecked")&&P.setAttribute("data-checked",k==="checked"),P}},{key:"formats",value:function(k){if(k.tagName==="OL")return"ordered";if(k.tagName==="UL")return k.hasAttribute("data-checked")?k.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function T(C){v(this,T);var k=_(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,C)),x=function(S){if(S.target.parentNode===C){var E=k.statics.formats(C),A=l.default.find(S.target);E==="checked"?A.format("list","unchecked"):E==="unchecked"&&A.format("list","checked")}};return C.addEventListener("touchstart",x),C.addEventListener("mousedown",x),k}return s(T,[{key:"format",value:function(k,x){this.children.length>0&&this.children.tail.format(k,x)}},{key:"formats",value:function(){return y({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(k,x){if(k instanceof m)o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertBefore",this).call(this,k,x);else{var P=x==null?this.length():x.offset(this),S=this.split(P);S.parent.insertBefore(k,S)}}},{key:"optimize",value:function(k){o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"optimize",this).call(this,k);var x=this.next;x!=null&&x.prev===this&&x.statics.blotName===this.statics.blotName&&x.domNode.tagName===this.domNode.tagName&&x.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(x.moveChildren(this),x.remove())}},{key:"replace",value:function(k){if(k.statics.blotName!==this.statics.blotName){var x=l.default.create(this.statics.defaultChild);k.moveChildren(x),this.appendChild(x)}o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"replace",this).call(this,k)}}]),T}(f.default);w.blotName="list",w.scope=l.default.Scope.BLOCK_BLOT,w.tagName=["OL","UL"],w.defaultChild="list-item",w.allowedChildren=[m],r.ListItem=m,r.default=w},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(56),o=a(s);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function u(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function c(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var h=function(f){c(d,f);function d(){return l(this,d),u(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(o.default);h.blotName="italic",h.tagName=["EM","I"],r.default=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function y(v,_){for(var g=0;g<_.length;g++){var m=_[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(v,m.key,m)}}return function(v,_,g){return _&&y(v.prototype,_),g&&y(v,g),v}}(),o=function y(v,_,g){v===null&&(v=Function.prototype);var m=Object.getOwnPropertyDescriptor(v,_);if(m===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:y(w,_,g)}else{if("value"in m)return m.value;var b=m.get;return b===void 0?void 0:b.call(g)}},a=i(6),l=u(a);function u(y){return y&&y.__esModule?y:{default:y}}function c(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function h(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function f(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var d=function(y){f(v,y);function v(){return c(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,null,[{key:"create",value:function(g){return g==="super"?document.createElement("sup"):g==="sub"?document.createElement("sub"):o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,g)}},{key:"formats",value:function(g){if(g.tagName==="SUB")return"sub";if(g.tagName==="SUP")return"super"}}]),v}(l.default);d.blotName="script",d.tagName=["SUB","SUP"],r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(6),o=a(s);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function u(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function c(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var h=function(f){c(d,f);function d(){return l(this,d),u(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(o.default);h.blotName="strike",h.tagName="S",r.default=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(6),o=a(s);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function u(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function c(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var h=function(f){c(d,f);function d(){return l(this,d),u(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(o.default);h.blotName="underline",h.tagName="U",r.default=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function _(g,m){for(var w=0;w<m.length;w++){var b=m[w];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(g,m,w){return m&&_(g.prototype,m),w&&_(g,w),g}}(),o=function _(g,m,w){g===null&&(g=Function.prototype);var b=Object.getOwnPropertyDescriptor(g,m);if(b===void 0){var T=Object.getPrototypeOf(g);return T===null?void 0:_(T,m,w)}else{if("value"in b)return b.value;var C=b.get;return C===void 0?void 0:C.call(w)}},a=i(0),l=c(a),u=i(27);function c(_){return _&&_.__esModule?_:{default:_}}function h(_,g){if(!(_ instanceof g))throw new TypeError("Cannot call a class as a function")}function f(_,g){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:_}function d(_,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);_.prototype=Object.create(g&&g.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(_,g):_.__proto__=g)}var y=["alt","height","width"],v=function(_){d(g,_);function g(){return h(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return s(g,[{key:"format",value:function(w,b){y.indexOf(w)>-1?b?this.domNode.setAttribute(w,b):this.domNode.removeAttribute(w):o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,w,b)}}],[{key:"create",value:function(w){var b=o(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,w);return typeof w=="string"&&b.setAttribute("src",this.sanitize(w)),b}},{key:"formats",value:function(w){return y.reduce(function(b,T){return w.hasAttribute(T)&&(b[T]=w.getAttribute(T)),b},{})}},{key:"match",value:function(w){return/\.(jpe?g|gif|png)$/.test(w)||/^data:image\/.+;base64/.test(w)}},{key:"sanitize",value:function(w){return(0,u.sanitize)(w,["http","https","data"])?w:"//:0"}},{key:"value",value:function(w){return w.getAttribute("src")}}]),g}(l.default.Embed);v.blotName="image",v.tagName="IMG",r.default=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function _(g,m){for(var w=0;w<m.length;w++){var b=m[w];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(g,m,w){return m&&_(g.prototype,m),w&&_(g,w),g}}(),o=function _(g,m,w){g===null&&(g=Function.prototype);var b=Object.getOwnPropertyDescriptor(g,m);if(b===void 0){var T=Object.getPrototypeOf(g);return T===null?void 0:_(T,m,w)}else{if("value"in b)return b.value;var C=b.get;return C===void 0?void 0:C.call(w)}},a=i(4),l=i(27),u=c(l);function c(_){return _&&_.__esModule?_:{default:_}}function h(_,g){if(!(_ instanceof g))throw new TypeError("Cannot call a class as a function")}function f(_,g){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:_}function d(_,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);_.prototype=Object.create(g&&g.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(_,g):_.__proto__=g)}var y=["height","width"],v=function(_){d(g,_);function g(){return h(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return s(g,[{key:"format",value:function(w,b){y.indexOf(w)>-1?b?this.domNode.setAttribute(w,b):this.domNode.removeAttribute(w):o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,w,b)}}],[{key:"create",value:function(w){var b=o(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,w);return b.setAttribute("frameborder","0"),b.setAttribute("allowfullscreen",!0),b.setAttribute("src",this.sanitize(w)),b}},{key:"formats",value:function(w){return y.reduce(function(b,T){return w.hasAttribute(T)&&(b[T]=w.getAttribute(T)),b},{})}},{key:"sanitize",value:function(w){return u.default.sanitize(w)}},{key:"value",value:function(w){return w.getAttribute("src")}}]),g}(a.BlockEmbed);v.blotName="video",v.className="ql-video",v.tagName="IFRAME",r.default=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var s=function(){function w(b,T){for(var C=0;C<T.length;C++){var k=T[C];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(b,k.key,k)}}return function(b,T,C){return T&&w(b.prototype,T),C&&w(b,C),b}}(),o=function w(b,T,C){b===null&&(b=Function.prototype);var k=Object.getOwnPropertyDescriptor(b,T);if(k===void 0){var x=Object.getPrototypeOf(b);return x===null?void 0:w(x,T,C)}else{if("value"in k)return k.value;var P=k.get;return P===void 0?void 0:P.call(C)}},a=i(35),l=d(a),u=i(5),c=d(u),h=i(9),f=d(h);function d(w){return w&&w.__esModule?w:{default:w}}function y(w,b){if(!(w instanceof b))throw new TypeError("Cannot call a class as a function")}function v(w,b){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:w}function _(w,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);w.prototype=Object.create(b&&b.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(w,b):w.__proto__=b)}var g=function(w){_(b,w);function b(){return y(this,b),v(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return s(b,null,[{key:"create",value:function(C){var k=o(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,C);return typeof C=="string"&&(window.katex.render(C,k,{throwOnError:!1,errorColor:"#f00"}),k.setAttribute("data-value",C)),k}},{key:"value",value:function(C){return C.getAttribute("data-value")}}]),b}(l.default);g.blotName="formula",g.className="ql-formula",g.tagName="SPAN";var m=function(w){_(b,w),s(b,null,[{key:"register",value:function(){c.default.register(g,!0)}}]);function b(){y(this,b);var T=v(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return T}return b}(f.default);r.FormulaBlot=g,r.default=m},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var s=function(){function C(k,x){for(var P=0;P<x.length;P++){var S=x[P];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(k,S.key,S)}}return function(k,x,P){return x&&C(k.prototype,x),P&&C(k,P),k}}(),o=function C(k,x,P){k===null&&(k=Function.prototype);var S=Object.getOwnPropertyDescriptor(k,x);if(S===void 0){var E=Object.getPrototypeOf(k);return E===null?void 0:C(E,x,P)}else{if("value"in S)return S.value;var A=S.get;return A===void 0?void 0:A.call(P)}},a=i(0),l=v(a),u=i(5),c=v(u),h=i(9),f=v(h),d=i(13),y=v(d);function v(C){return C&&C.__esModule?C:{default:C}}function _(C,k){if(!(C instanceof k))throw new TypeError("Cannot call a class as a function")}function g(C,k){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:C}function m(C,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);C.prototype=Object.create(k&&k.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(C,k):C.__proto__=k)}var w=function(C){m(k,C);function k(){return _(this,k),g(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return s(k,[{key:"replaceWith",value:function(P){this.domNode.textContent=this.domNode.textContent,this.attach(),o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"replaceWith",this).call(this,P)}},{key:"highlight",value:function(P){var S=this.domNode.textContent;this.cachedText!==S&&((S.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=P(S),this.domNode.normalize(),this.attach()),this.cachedText=S)}}]),k}(y.default);w.className="ql-syntax";var b=new l.default.Attributor.Class("token","hljs",{scope:l.default.Scope.INLINE}),T=function(C){m(k,C),s(k,null,[{key:"register",value:function(){c.default.register(b,!0),c.default.register(w,!0)}}]);function k(x,P){_(this,k);var S=g(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,x,P));if(typeof S.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var E=null;return S.quill.on(c.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(E),E=setTimeout(function(){S.highlight(),E=null},S.options.interval)}),S.highlight(),S}return s(k,[{key:"highlight",value:function(){var P=this;if(!this.quill.selection.composing){this.quill.update(c.default.sources.USER);var S=this.quill.getSelection();this.quill.scroll.descendants(w).forEach(function(E){E.highlight(P.options.highlight)}),this.quill.update(c.default.sources.SILENT),S!=null&&this.quill.setSelection(S,c.default.sources.SILENT)}}}]),k}(f.default);T.DEFAULTS={highlight:function(){return window.hljs==null?null:function(C){var k=window.hljs.highlightAuto(C);return k.value}}(),interval:1e3},r.CodeBlock=w,r.CodeToken=b,r.default=T},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var s=function k(x,P,S){x===null&&(x=Function.prototype);var E=Object.getOwnPropertyDescriptor(x,P);if(E===void 0){var A=Object.getPrototypeOf(x);return A===null?void 0:k(A,P,S)}else{if("value"in E)return E.value;var O=E.get;return O===void 0?void 0:O.call(S)}},o=function(){function k(x,P){for(var S=0;S<P.length;S++){var E=P[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(x,E.key,E)}}return function(x,P,S){return P&&k(x.prototype,P),S&&k(x,S),x}}(),a=i(3),l=_(a),u=i(8),c=_(u),h=i(43),f=_(h),d=i(15),y=i(41),v=_(y);function _(k){return k&&k.__esModule?k:{default:k}}function g(k,x){if(!(k instanceof x))throw new TypeError("Cannot call a class as a function")}function m(k,x){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:k}function w(k,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);k.prototype=Object.create(x&&x.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(k,x):k.__proto__=x)}var b=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],T=function(k){w(x,k);function x(P,S){g(this,x),S.modules.toolbar!=null&&S.modules.toolbar.container==null&&(S.modules.toolbar.container=b);var E=m(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,P,S));return E.quill.container.classList.add("ql-bubble"),E}return o(x,[{key:"extendToolbar",value:function(S){this.tooltip=new C(this.quill,this.options.bounds),this.tooltip.root.appendChild(S.container),this.buildButtons([].slice.call(S.container.querySelectorAll("button")),v.default),this.buildPickers([].slice.call(S.container.querySelectorAll("select")),v.default)}}]),x}(f.default);T.DEFAULTS=(0,l.default)(!0,{},f.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(x){x?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var C=function(k){w(x,k);function x(P,S){g(this,x);var E=m(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,P,S));return E.quill.on(c.default.events.EDITOR_CHANGE,function(A,O,M,F){if(A===c.default.events.SELECTION_CHANGE)if(O!=null&&O.length>0&&F===c.default.sources.USER){E.show(),E.root.style.left="0px",E.root.style.width="",E.root.style.width=E.root.offsetWidth+"px";var $=E.quill.getLines(O.index,O.length);if($.length===1)E.position(E.quill.getBounds(O));else{var q=$[$.length-1],W=E.quill.getIndex(q),U=Math.min(q.length()-1,O.index+O.length-W),B=E.quill.getBounds(new d.Range(W,U));E.position(B)}}else document.activeElement!==E.textbox&&E.quill.hasFocus()&&E.hide()}),E}return o(x,[{key:"listen",value:function(){var S=this;s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){S.root.classList.remove("ql-editing")}),this.quill.on(c.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!S.root.classList.contains("ql-hidden")){var E=S.quill.getSelection();E!=null&&S.position(S.quill.getBounds(E))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(S){var E=s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"position",this).call(this,S),A=this.root.querySelector(".ql-tooltip-arrow");if(A.style.marginLeft="",E===0)return E;A.style.marginLeft=-1*E-A.offsetWidth/2+"px"}}]),x}(h.BaseTooltip);C.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=C,r.default=T},function(n,r,i){n.exports=i(63)}]).default})})(LA);var H7=LA.exports,W7=mn&&mn.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mh=mn&&mn.__assign||function(){return Mh=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Mh.apply(this,arguments)},K7=mn&&mn.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r},Rf=mn&&mn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},er=Rf(oe),G7=Rf(BE),Ta=Rf(q7),E1=Rf(H7),Y7=function(t){W7(e,t);function e(n){var r=t.call(this,n)||this;r.dirtyProps=["modules","formats","bounds","theme","children"],r.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],r.state={generation:0},r.selection=null,r.onEditorChange=function(s,o,a,l){var u,c,h,f;s==="text-change"?(c=(u=r).onEditorChangeText)===null||c===void 0||c.call(u,r.editor.root.innerHTML,o,l,r.unprivilegedEditor):s==="selection-change"&&((f=(h=r).onEditorChangeSelection)===null||f===void 0||f.call(h,o,l,r.unprivilegedEditor))};var i=r.isControlled()?n.value:n.defaultValue;return r.value=i??"",r}return e.prototype.validateProps=function(n){var r;if(er.default.Children.count(n.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(er.default.Children.count(n.children)){var i=er.default.Children.only(n.children);if(((r=i)===null||r===void 0?void 0:r.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&n.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},e.prototype.shouldComponentUpdate=function(n,r){var i=this,s;if(this.validateProps(n),!this.editor||this.state.generation!==r.generation)return!0;if("value"in n){var o=this.getEditorContents(),a=(s=n.value,s??"");this.isEqualValue(a,o)||this.setEditorContents(this.editor,a)}return n.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,n.readOnly),K7(this.cleanProps,this.dirtyProps).some(function(l){return!Ta.default(n[l],i.props[l])})},e.prototype.shouldComponentRegenerate=function(n){var r=this;return this.dirtyProps.some(function(i){return!Ta.default(n[i],r.props[i])})},e.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},e.prototype.componentWillUnmount=function(){this.destroyEditor()},e.prototype.componentDidUpdate=function(n,r){var i=this;if(this.editor&&this.shouldComponentRegenerate(n)){var s=this.editor.getContents(),o=this.editor.getSelection();this.regenerationSnapshot={delta:s,selection:o},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==r.generation){var a=this.regenerationSnapshot,s=a.delta,l=a.selection;delete this.regenerationSnapshot,this.instantiateEditor();var u=this.editor;u.setContents(s),T1(function(){return i.setEditorSelection(u,l)})}},e.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},e.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},e.prototype.isControlled=function(){return"value"in this.props},e.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},e.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},e.prototype.createEditor=function(n,r){var i=new E1.default(n,r);return r.tabIndex!=null&&this.setEditorTabIndex(i,r.tabIndex),this.hookEditor(i),i},e.prototype.hookEditor=function(n){this.unprivilegedEditor=this.makeUnprivilegedEditor(n),n.on("editor-change",this.onEditorChange)},e.prototype.unhookEditor=function(n){n.off("editor-change",this.onEditorChange)},e.prototype.getEditorContents=function(){return this.value},e.prototype.getEditorSelection=function(){return this.selection},e.prototype.isDelta=function(n){return n&&n.ops},e.prototype.isEqualValue=function(n,r){return this.isDelta(n)&&this.isDelta(r)?Ta.default(n.ops,r.ops):Ta.default(n,r)},e.prototype.setEditorContents=function(n,r){var i=this;this.value=r;var s=this.getEditorSelection();typeof r=="string"?n.setContents(n.clipboard.convert(r)):n.setContents(r),T1(function(){return i.setEditorSelection(n,s)})},e.prototype.setEditorSelection=function(n,r){if(this.selection=r,r){var i=n.getLength();r.index=Math.max(0,Math.min(r.index,i-1)),r.length=Math.max(0,Math.min(r.length,i-1-r.index)),n.setSelection(r)}},e.prototype.setEditorTabIndex=function(n,r){var i,s;!((s=(i=n)===null||i===void 0?void 0:i.scroll)===null||s===void 0)&&s.domNode&&(n.scroll.domNode.tabIndex=r)},e.prototype.setEditorReadOnly=function(n,r){r?n.disable():n.enable()},e.prototype.makeUnprivilegedEditor=function(n){var r=n;return{getHTML:function(){return r.root.innerHTML},getLength:r.getLength.bind(r),getText:r.getText.bind(r),getContents:r.getContents.bind(r),getSelection:r.getSelection.bind(r),getBounds:r.getBounds.bind(r)}},e.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var n=G7.default.findDOMNode(this.editingArea);if(!n)throw new Error("Cannot find element for editing area");if(n.nodeType===3)throw new Error("Editing area cannot be a text node");return n},e.prototype.renderEditingArea=function(){var n=this,r=this.props,i=r.children,s=r.preserveWhitespace,o=this.state.generation,a={key:o,ref:function(l){n.editingArea=l}};return er.default.Children.count(i)?er.default.cloneElement(er.default.Children.only(i),a):s?er.default.createElement("pre",Mh({},a)):er.default.createElement("div",Mh({},a))},e.prototype.render=function(){var n;return er.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(n=this.props.className,n??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},e.prototype.onEditorChangeText=function(n,r,i,s){var o,a;if(this.editor){var l=this.isDelta(this.value)?s.getContents():s.getHTML();l!==this.getEditorContents()&&(this.lastDeltaChangeSet=r,this.value=l,(a=(o=this.props).onChange)===null||a===void 0||a.call(o,n,r,i,s))}},e.prototype.onEditorChangeSelection=function(n,r,i){var s,o,a,l,u,c;if(this.editor){var h=this.getEditorSelection(),f=!h&&n,d=h&&!n;Ta.default(n,h)||(this.selection=n,(o=(s=this.props).onChangeSelection)===null||o===void 0||o.call(s,n,r,i),f?(l=(a=this.props).onFocus)===null||l===void 0||l.call(a,n,r,i):d&&((c=(u=this.props).onBlur)===null||c===void 0||c.call(u,h,r,i)))}},e.prototype.focus=function(){this.editor&&this.editor.focus()},e.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},e.displayName="React Quill",e.Quill=E1.default,e.defaultProps={theme:"snow",modules:{},readOnly:!1},e}(er.default.Component);function T1(t){Promise.resolve().then(t)}var Q7=Y7;const X7=A1(Q7),J7=t=>t||new Date().toISOString().slice(0,10),k1=[{label:"😊 Happy",value:"happy",emoji:"😊"},{label:"😐 Neutral",value:"neutral",emoji:"😐"},{label:"😔 Sad",value:"sad",emoji:"😔"},{label:"😠 Angry",value:"angry",emoji:"😠"},{label:"😴 Tired",value:"tired",emoji:"😴"},{label:"😇 Grateful",value:"grateful",emoji:"😇"}],S1=["What are you grateful for today?","Describe a challenge you overcame.","What made you smile today?","What is one thing you want to improve tomorrow?","Write about a small win you had today.","How did you take care of yourself today?","What is something you learned today?"],Z7={backgroundImage:"repeating-linear-gradient(0deg, var(--journal-bg, #fdf6e3) 0px, var(--journal-bg, #fdf6e3) 31px, var(--journal-line, #e0d7c3) 32px, var(--journal-bg, #fdf6e3) 33px)",backgroundColor:"var(--journal-bg, #fdf6e3)"},e$={border:"3px solid #222",borderRadius:"32px",boxShadow:"0 6px 32px 0 rgba(60,40,10,0.10), 0 0 0 6px #f5e9c6"},t$=({appDate:t})=>{const{user:e}=zo(),[n,r]=oe.useState(J7(t)),[i,s]=oe.useState(""),[o,a]=oe.useState(""),[l,u]=oe.useState(""),[c,h]=oe.useState(!1),[f,d]=oe.useState(!1),[y,v]=oe.useState(!1),[_,g]=oe.useState([]),[m,w]=oe.useState(""),[b,T]=oe.useState(!1);oe.useEffect(()=>{u(S1[new Date(n).getDate()%S1.length])},[n]),oe.useEffect(()=>{if(!e)return;h(!0),d(!1),(async()=>{const P=Jt(yt,"users",e.uid,"journal",n),S=await Jk(P);S.exists()?(s(S.data().text||""),a(S.data().mood||"")):(s(""),a("")),h(!1)})()},[e,n]),oe.useEffect(()=>{!e||!b||y6(async()=>{const{collection:x,getDocs:P}=await Promise.resolve().then(()=>dL);return{collection:x,getDocs:P}},void 0).then(({collection:x,getDocs:P})=>{(async()=>{const E=x(yt,"users",e.uid,"journal");P(E).then(A=>{const O=[];A.forEach(M=>{O.push({date:M.id,mood:M.data().mood||"",text:M.data().text||""})}),g(O)})})()})},[e,b]);const C=async()=>{e&&(v(!0),await Rr(Jt(yt,"users",e.uid,"journal",n),{text:i,mood:o}),v(!1),d(!0),setTimeout(()=>d(!1),1500))},k=_.filter(x=>x.text.toLowerCase().includes(m.toLowerCase())||x.date.includes(m)||x.mood.toLowerCase().includes(m.toLowerCase()));return D.jsxs("div",{className:"relative max-w-3xl mx-auto mt-8 p-6 md:p-10 overflow-hidden",style:{...Z7,...e$,fontFamily:"Patrick Hand, Caveat, Gloria Hallelujah, cursive",position:"relative"},children:[D.jsx("style",{children:`
        :root {
          --journal-bg: #fdf6e3;
          --journal-line: #e0d7c3;
          --journal-hole-bg: #e0d7c3;
          --journal-hole-border: #b7a77a;
        }
        .dark :root, .dark body {
          --journal-bg: #23272e;
          --journal-line: #3b4252;
          --journal-hole-bg: #3b4252;
          --journal-hole-border: #6b7280;
        }
      `}),D.jsx("div",{className:"absolute left-0 top-8 flex flex-col gap-8 h-[90%] z-10",children:[...Array(6)].map((x,P)=>D.jsx("span",{className:"w-4 h-4 rounded-full shadow-inner block ml-[-28px]",style:{background:"var(--journal-hole-bg, #e0d7c3)",border:"2px solid var(--journal-hole-border, #b7a77a)"}},P))}),D.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[D.jsx("span",{className:"text-3xl md:text-4xl font-extrabold text-sky-700 dark:text-sky-300 tracking-tight drop-shadow-xl uppercase select-none flex items-center gap-2 font-hand",children:D.jsx(Eh,{type:"underline",show:!0,color:"#f59e42",animationDuration:1200,padding:6,strokeWidth:3,children:D.jsx("span",{children:"📘 Daily Journal"})})}),D.jsx("span",{className:"text-2xl md:text-3xl select-none",children:"✏️"})]}),D.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mb-6 items-center justify-between",children:[D.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[D.jsx("label",{className:"text-lg font-bold text-gray-700 dark:text-gray-200 font-hand",children:"Date:"}),D.jsx("input",{type:"date",value:n,onChange:x=>r(x.target.value),className:"rounded-xl px-4 py-2 border-2 border-dashed border-sky-400 bg-[#fdf6e3] text-gray-900 font-hand focus:outline-none focus:ring-2 focus:ring-sky-400 transition w-full md:w-auto shadow-md font-semibold",style:{boxShadow:"2px 2px 0 #e0d7c3"}}),D.jsx("span",{className:"ml-2 text-xl select-none",children:"☀️"})]}),D.jsxs("button",{className:"px-4 py-2 rounded-xl border-2 border-dashed border-sky-400 bg-[#fffbe6] hover:bg-[#fdf6e3] text-sky-700 font-bold shadow-lg transition w-full md:w-auto tracking-wide font-hand flex items-center gap-2",onClick:()=>T(x=>!x),type:"button",children:[b?"Hide History":"Show History"," ",D.jsx("span",{children:"📖"})]})]}),D.jsxs("div",{className:"mb-6 flex flex-wrap gap-3 items-center justify-center",children:[D.jsx("span",{className:"text-lg font-bold text-gray-700 dark:text-gray-200 font-hand",children:"Mood:"}),k1.map(x=>D.jsx("button",{className:`px-4 py-2 rounded-full text-2xl border-2 border-dashed shadow-lg transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-sky-400 font-hand ${x.value===o?"bg-sky-200 text-sky-900 border-sky-700 scale-110 ring-2 ring-sky-400":"bg-[#fffbe6] text-gray-900 border-sky-300 hover:bg-sky-100"}`,onClick:()=>a(x.value),type:"button","aria-label":x.label,style:{boxShadow:"2px 2px 0 #e0d7c3"},children:x.emoji},x.value))]}),D.jsx("div",{className:"mb-6 text-center text-sky-700 dark:text-sky-300 italic text-xl font-medium tracking-wide animate-fade-in font-hand",children:D.jsx(Eh,{type:"box",show:!0,color:"#f59e42",animationDuration:900,padding:8,strokeWidth:2,children:l})}),D.jsx("div",{className:"mb-6 rounded-2xl overflow-hidden border-2 border-dashed border-sky-300 shadow-lg bg-[#fffbe6] font-hand",style:{boxShadow:"2px 2px 0 #e0d7c3"},children:D.jsx(X7,{value:i,onChange:s,theme:"snow",className:"rounded-2xl min-h-[180px] bg-[#fffbe6] border-none focus:outline-none text-lg font-hand",readOnly:y,placeholder:"Write your thoughts, reflections, or gratitude for today..."})}),D.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between mb-4",children:[D.jsxs("button",{className:"px-8 py-3 rounded-xl border-2 border-dashed border-sky-400 bg-gradient-to-r from-[#ffe6b3] to-[#fdf6e3] hover:from-[#fdf6e3] hover:to-[#ffe6b3] text-sky-800 font-extrabold shadow-xl transition w-full md:w-auto text-lg tracking-wider uppercase font-hand flex items-center gap-2",onClick:C,disabled:y,type:"button",children:[D.jsx("span",{children:"💾"})," ",y?"Saving...":"Save"]}),f&&D.jsx("span",{className:"text-green-500 font-bold text-lg animate-pulse font-hand",children:"Saved!"})]}),b&&D.jsxs("div",{className:"mt-8 bg-[#fffbe6]/90 rounded-2xl p-6 border-2 border-dashed border-sky-200 shadow-2xl max-h-[400px] overflow-y-auto transition-all font-hand",style:{boxShadow:"2px 2px 0 #e0d7c3"},children:[D.jsxs("div",{className:"mb-4 flex flex-col md:flex-row gap-3 items-center justify-between",children:[D.jsx("input",{type:"text",value:m,onChange:x=>w(x.target.value),placeholder:"Search journal entries...",className:"rounded-xl px-4 py-2 border-2 border-dashed border-sky-400 bg-[#fffbe6] text-gray-900 font-hand focus:outline-none focus:ring-2 focus:ring-sky-400 transition w-full md:w-auto shadow-md font-semibold",style:{boxShadow:"2px 2px 0 #e0d7c3"}}),D.jsx("span",{className:"text-xl select-none",children:"🔍"})]}),D.jsxs("div",{children:[k.length===0&&D.jsx("div",{className:"text-center text-gray-500",children:"No entries found."}),k.map(x=>{var P;return D.jsxs("div",{className:"mb-6 p-4 rounded-2xl border-2 border-dashed border-sky-100 bg-gradient-to-br from-[#fffbe6] to-[#fdf6e3] shadow-lg font-hand",style:{boxShadow:"2px 2px 0 #e0d7c3"},children:[D.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[((P=k1.find(S=>S.value===x.mood))==null?void 0:P.emoji)||"📝",D.jsx("span",{className:"text-xs text-gray-500 font-mono",children:x.date})]}),D.jsx("div",{className:"prose prose-base max-w-none font-hand",dangerouslySetInnerHTML:{__html:x.text}})]},x.date)})]})]}),D.jsx("div",{className:"pointer-events-none absolute inset-0 z-0","aria-hidden":"true",children:[...Array(18)].map((x,P)=>D.jsx("div",{className:"w-full h-[1px]",style:{background:"var(--journal-line, #e0d7c3)",opacity:.6,position:"absolute",top:`${(P+1)*32}px`}},P))})]})},jA=oe.createContext(void 0),n$=()=>{const t=oe.useContext(jA);if(!t)throw new Error("useCheatMenu must be used within CheatMenuContext.Provider");return t};function r$(){const[t,e]=oe.useState("habits"),[n,r]=et.useState(null),[i,s]=et.useState([]),[o,a]=et.useState([]),{user:l}=zo();et.useEffect(()=>{if(!l)return;const g=Ao(yt,"users",l.uid,"habits"),m=ws(g,T=>{s(T.docs.map(C=>{const k=C.data();return{id:typeof C.id=="string"?parseInt(C.id):C.id,name:k.name,doneToday:k.doneToday,streak:k.streak,lastCompleted:k.lastCompleted,history:k.history||[]}}))}),w=Ao(yt,"users",l.uid,"reminders"),b=ws(w,T=>{a(T.docs.map(C=>{const k=C.data();return{id:typeof C.id=="string"?parseInt(C.id):C.id,hour:k.hour,minute:k.minute,message:k.message,sound:k.sound,vibrate:k.vibrate}}))});return()=>{m(),b()}},[l]);const u=i.length,c=o.length,h=async()=>{if(l)for(const g of i)await Rr(Jt(yt,"users",l.uid,"habits",g.id.toString()),{...g,doneToday:!1,streak:0,lastCompleted:null,history:[]})},f=async()=>{if(!l)return;const g=n||new Date().toISOString().slice(0,10);for(const m of i)await Rr(Jt(yt,"users",l.uid,"habits",m.id.toString()),{...m,doneToday:!0,streak:m.streak+1,lastCompleted:g,history:[...m.history,g]})},d=async()=>{if(l)for(const g of o)await el(Jt(yt,"users",l.uid,"reminders",g.id.toString()))},y=async()=>{if(!l)return;const g={id:Date.now(),name:"Test Habit "+Math.floor(Math.random()*1e3),doneToday:!1,streak:0,lastCompleted:null,history:[]};await Rr(Jt(yt,"users",l.uid,"habits",g.id.toString()),g)},v=async()=>{if(!l)return;const g={id:Date.now()+Math.floor(Math.random()*1e4),hour:12,minute:0,message:"Test Reminder",sound:!0,vibrate:!0};await Rr(Jt(yt,"users",l.uid,"reminders",g.id.toString()),g)},_=async()=>{if(!l||!window.confirm("Are you absolutely sure you want to delete ALL your data? This cannot be undone! Type DELETE in the next prompt to confirm."))return;if(window.prompt("Type DELETE to confirm you want to erase all your data. This action is irreversible.")!=="DELETE"){alert("Data deletion cancelled.");return}for(const w of i)await el(Jt(yt,"users",l.uid,"habits",w.id.toString()));for(const w of o)await el(Jt(yt,"users",l.uid,"reminders",w.id.toString()));alert("All your data has been deleted. The app is now reset.")};return D.jsx(jA.Provider,{value:{habits:i,reminders:o,habitsCount:u,remindersCount:c,onResetHabits:h,onMarkAllDone:f,onClearReminders:d,onAddTestHabit:y,onAddTestReminder:v,appDate:n,setAppDate:r},children:D.jsxs("div",{className:"min-h-screen bg-[#fdf6e3] dark:bg-[#23272e] font-hand animate-fade-in-down",style:{background:"repeating-linear-gradient(0deg, var(--journal-bg, #fdf6e3) 0px, var(--journal-bg, #fdf6e3) 31px, var(--journal-line, #e0d7c3) 32px, var(--journal-bg, #fdf6e3) 33px)",fontFamily:"Patrick Hand, Caveat, Gloria Hallelujah, cursive",minHeight:"100vh"},children:[D.jsx("style",{children:`
          :root {
            --journal-bg: #fdf6e3;
            --journal-line: #e0d7c3;
          }
          .dark :root, .dark body {
            --journal-bg: #23272e;
            --journal-line: #3b4252;
          }
          @keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
          @keyframes fade-in-down { from { opacity: 0; transform: translateY(-24px); } to { opacity: 1; transform: translateY(0); } }
          @keyframes fade-in-slow { from { opacity: 0; } to { opacity: 1; } }
          @keyframes pop-in { 0% { transform: scale(0.7); opacity: 0; } 80% { transform: scale(1.1); opacity: 1; } 100% { transform: scale(1); } }
          @keyframes wiggle { 0%, 100% { transform: rotate(-2deg); } 50% { transform: rotate(2deg); } }
          .animate-fade-in { animation: fade-in 0.7s ease; }
          .animate-fade-in-down { animation: fade-in-down 0.7s cubic-bezier(.4,2,.6,1); }
          .animate-fade-in-slow { animation: fade-in-slow 1.2s ease; }
          .animate-pop-in { animation: pop-in 0.5s cubic-bezier(.4,2,.6,1); }
          .animate-wiggle { animation: wiggle 1.2s infinite alternate; }
        `}),D.jsxs(V4,{children:[D.jsxs("div",{className:"w-full max-w-2xl mx-auto",children:[D.jsxs("div",{className:"flex justify-center gap-4 mb-6 mt-2",children:[D.jsx("button",{className:`px-4 py-2 rounded-t-lg font-semibold transition-colors focus:outline-none ${t==="habits"?"bg-sky-400 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100"}`,onClick:()=>e("habits"),children:"Habits"}),D.jsx("button",{className:`px-4 py-2 rounded-t-lg font-semibold transition-colors focus:outline-none ${t==="schedule"?"bg-sky-400 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100"}`,onClick:()=>e("schedule"),children:"Time-blocks"}),D.jsx("button",{className:`px-4 py-2 rounded-t-lg font-semibold transition-colors focus:outline-none ${t==="analytics"?"bg-sky-400 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100"}`,onClick:()=>e("analytics"),children:"Analytics"}),D.jsx("button",{className:`px-4 py-2 rounded-t-lg font-semibold transition-colors focus:outline-none ${t==="journal"?"bg-sky-400 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100"}`,onClick:()=>e("journal"),children:"Journal"})]}),t==="habits"&&D.jsx(aj,{appDate:n,setAppDate:r}),t==="schedule"&&D.jsx(hj,{}),t==="analytics"&&D.jsx(d6,{}),t==="journal"&&D.jsx(t$,{appDate:n})]}),D.jsx(p6,{habitsCount:u,remindersCount:c,onResetHabits:h,onMarkAllDone:f,onClearReminders:d,onAddTestHabit:y,onAddTestReminder:v,appDate:n,setAppDate:r,onDeleteAllData:_})]})]})})}function i$(){return D.jsx(M4,{children:D.jsx(r$,{})})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").catch(t=>{console.warn("Service worker registration failed:",t)})});sj();np.createRoot(document.getElementById("root")).render(D.jsxs(et.StrictMode,{children:[D.jsx(i$,{}),","]}));
