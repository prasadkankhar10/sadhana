(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Gt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hv={exports:{}},_u={},Wv={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ia=Symbol.for("react.element"),PT=Symbol.for("react.portal"),RT=Symbol.for("react.fragment"),NT=Symbol.for("react.strict_mode"),CT=Symbol.for("react.profiler"),DT=Symbol.for("react.provider"),LT=Symbol.for("react.context"),MT=Symbol.for("react.forward_ref"),jT=Symbol.for("react.suspense"),VT=Symbol.for("react.memo"),FT=Symbol.for("react.lazy"),Rm=Symbol.iterator;function UT(t){return t===null||typeof t!="object"?null:(t=Rm&&t[Rm]||t["@@iterator"],typeof t=="function"?t:null)}var Kv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Gv=Object.assign,Qv={};function bo(t,e,n){this.props=t,this.context=e,this.refs=Qv,this.updater=n||Kv}bo.prototype.isReactComponent={};bo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};bo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Yv(){}Yv.prototype=bo.prototype;function Bh(t,e,n){this.props=t,this.context=e,this.refs=Qv,this.updater=n||Kv}var qh=Bh.prototype=new Yv;qh.constructor=Bh;Gv(qh,bo.prototype);qh.isPureReactComponent=!0;var Nm=Array.isArray,Xv=Object.prototype.hasOwnProperty,$h={current:null},Jv={key:!0,ref:!0,__self:!0,__source:!0};function Zv(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)Xv.call(e,r)&&!Jv.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ia,type:t,key:o,ref:s,props:i,_owner:$h.current}}function BT(t,e){return{$$typeof:ia,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function zh(t){return typeof t=="object"&&t!==null&&t.$$typeof===ia}function qT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Cm=/\/+/g;function Ac(t,e){return typeof t=="object"&&t!==null&&t.key!=null?qT(""+t.key):e.toString(36)}function ol(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case ia:case PT:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Ac(s,0):r,Nm(i)?(n="",t!=null&&(n=t.replace(Cm,"$&/")+"/"),ol(i,e,n,"",function(c){return c})):i!=null&&(zh(i)&&(i=BT(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Cm,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",Nm(t))for(var a=0;a<t.length;a++){o=t[a];var l=r+Ac(o,a);s+=ol(o,e,n,l,i)}else if(l=UT(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=r+Ac(o,a++),s+=ol(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Ma(t,e,n){if(t==null)return t;var r=[],i=0;return ol(t,r,"","",function(o){return e.call(n,o,i++)}),r}function $T(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Vt={current:null},sl={transition:null},zT={ReactCurrentDispatcher:Vt,ReactCurrentBatchConfig:sl,ReactCurrentOwner:$h};function e0(){throw Error("act(...) is not supported in production builds of React.")}ke.Children={map:Ma,forEach:function(t,e,n){Ma(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ma(t,function(){e++}),e},toArray:function(t){return Ma(t,function(e){return e})||[]},only:function(t){if(!zh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ke.Component=bo;ke.Fragment=RT;ke.Profiler=CT;ke.PureComponent=Bh;ke.StrictMode=NT;ke.Suspense=jT;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zT;ke.act=e0;ke.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Gv({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=$h.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Xv.call(e,l)&&!Jv.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:ia,type:t.type,key:i,ref:o,props:r,_owner:s}};ke.createContext=function(t){return t={$$typeof:LT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:DT,_context:t},t.Consumer=t};ke.createElement=Zv;ke.createFactory=function(t){var e=Zv.bind(null,t);return e.type=t,e};ke.createRef=function(){return{current:null}};ke.forwardRef=function(t){return{$$typeof:MT,render:t}};ke.isValidElement=zh;ke.lazy=function(t){return{$$typeof:FT,_payload:{_status:-1,_result:t},_init:$T}};ke.memo=function(t,e){return{$$typeof:VT,type:t,compare:e===void 0?null:e}};ke.startTransition=function(t){var e=sl.transition;sl.transition={};try{t()}finally{sl.transition=e}};ke.unstable_act=e0;ke.useCallback=function(t,e){return Vt.current.useCallback(t,e)};ke.useContext=function(t){return Vt.current.useContext(t)};ke.useDebugValue=function(){};ke.useDeferredValue=function(t){return Vt.current.useDeferredValue(t)};ke.useEffect=function(t,e){return Vt.current.useEffect(t,e)};ke.useId=function(){return Vt.current.useId()};ke.useImperativeHandle=function(t,e,n){return Vt.current.useImperativeHandle(t,e,n)};ke.useInsertionEffect=function(t,e){return Vt.current.useInsertionEffect(t,e)};ke.useLayoutEffect=function(t,e){return Vt.current.useLayoutEffect(t,e)};ke.useMemo=function(t,e){return Vt.current.useMemo(t,e)};ke.useReducer=function(t,e,n){return Vt.current.useReducer(t,e,n)};ke.useRef=function(t){return Vt.current.useRef(t)};ke.useState=function(t){return Vt.current.useState(t)};ke.useSyncExternalStore=function(t,e,n){return Vt.current.useSyncExternalStore(t,e,n)};ke.useTransition=function(){return Vt.current.useTransition()};ke.version="18.3.1";Wv.exports=ke;var le=Wv.exports;const zn=zv(le);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HT=le,WT=Symbol.for("react.element"),KT=Symbol.for("react.fragment"),GT=Object.prototype.hasOwnProperty,QT=HT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,YT={key:!0,ref:!0,__self:!0,__source:!0};function t0(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)GT.call(e,r)&&!YT.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:WT,type:t,key:o,ref:s,props:i,_owner:QT.current}}_u.Fragment=KT;_u.jsx=t0;_u.jsxs=t0;Hv.exports=_u;var B=Hv.exports,vf={},n0={exports:{}},Zt={},r0={exports:{}},i0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,q){var F=H.length;H.push(q);e:for(;0<F;){var N=F-1>>>1,D=H[N];if(0<i(D,q))H[N]=q,H[F]=D,F=N;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var q=H[0],F=H.pop();if(F!==q){H[0]=F;e:for(var N=0,D=H.length,j=D>>>1;N<j;){var z=2*(N+1)-1,W=H[z],V=z+1,$=H[V];if(0>i(W,F))V<D&&0>i($,W)?(H[N]=$,H[V]=F,N=V):(H[N]=W,H[z]=F,N=z);else if(V<D&&0>i($,F))H[N]=$,H[V]=F,N=V;else break e}}return q}function i(H,q){var F=H.sortIndex-q.sortIndex;return F!==0?F:H.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],c=[],p=1,h=null,f=3,d=!1,_=!1,v=!1,E=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(H){for(var q=n(c);q!==null;){if(q.callback===null)r(c);else if(q.startTime<=H)r(c),q.sortIndex=q.expirationTime,e(l,q);else break;q=n(c)}}function y(H){if(v=!1,w(H),!_)if(n(l)!==null)_=!0,K(I);else{var q=n(c);q!==null&&G(y,q.startTime-H)}}function I(H,q){_=!1,v&&(v=!1,m(T),T=-1),d=!0;var F=f;try{for(w(q),h=n(l);h!==null&&(!(h.expirationTime>q)||H&&!k());){var N=h.callback;if(typeof N=="function"){h.callback=null,f=h.priorityLevel;var D=N(h.expirationTime<=q);q=t.unstable_now(),typeof D=="function"?h.callback=D:h===n(l)&&r(l),w(q)}else r(l);h=n(l)}if(h!==null)var j=!0;else{var z=n(c);z!==null&&G(y,z.startTime-q),j=!1}return j}finally{h=null,f=F,d=!1}}var C=!1,S=null,T=-1,P=5,b=-1;function k(){return!(t.unstable_now()-b<P)}function x(){if(S!==null){var H=t.unstable_now();b=H;var q=!0;try{q=S(!0,H)}finally{q?O():(C=!1,S=null)}}else C=!1}var O;if(typeof g=="function")O=function(){g(x)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,U=M.port2;M.port1.onmessage=x,O=function(){U.postMessage(null)}}else O=function(){E(x,0)};function K(H){S=H,C||(C=!0,O())}function G(H,q){T=E(function(){H(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){_||d||(_=!0,K(I))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(H){switch(f){case 1:case 2:case 3:var q=3;break;default:q=f}var F=f;f=q;try{return H()}finally{f=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,q){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var F=f;f=H;try{return q()}finally{f=F}},t.unstable_scheduleCallback=function(H,q,F){var N=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?N+F:N):F=N,H){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=F+D,H={id:p++,callback:q,priorityLevel:H,startTime:F,expirationTime:D,sortIndex:-1},F>N?(H.sortIndex=F,e(c,H),n(l)===null&&H===n(c)&&(v?(m(T),T=-1):v=!0,G(y,F-N))):(H.sortIndex=D,e(l,H),_||d||(_=!0,K(I))),H},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(H){var q=f;return function(){var F=f;f=q;try{return H.apply(this,arguments)}finally{f=F}}}})(i0);r0.exports=i0;var XT=r0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JT=le,Jt=XT;function oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o0=new Set,Cs={};function bi(t,e){ao(t,e),ao(t+"Capture",e)}function ao(t,e){for(Cs[t]=e,t=0;t<e.length;t++)o0.add(e[t])}var tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_f=Object.prototype.hasOwnProperty,ZT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dm={},Lm={};function eb(t){return _f.call(Lm,t)?!0:_f.call(Dm,t)?!1:ZT.test(t)?Lm[t]=!0:(Dm[t]=!0,!1)}function tb(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nb(t,e,n,r){if(e===null||typeof e>"u"||tb(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ft(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tt[t]=new Ft(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tt[e]=new Ft(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tt[t]=new Ft(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tt[t]=new Ft(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tt[t]=new Ft(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tt[t]=new Ft(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tt[t]=new Ft(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tt[t]=new Ft(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tt[t]=new Ft(t,5,!1,t.toLowerCase(),null,!1,!1)});var Hh=/[\-:]([a-z])/g;function Wh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Hh,Wh);Tt[e]=new Ft(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Hh,Wh);Tt[e]=new Ft(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Hh,Wh);Tt[e]=new Ft(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tt[t]=new Ft(t,1,!1,t.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new Ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tt[t]=new Ft(t,1,!1,t.toLowerCase(),null,!0,!0)});function Kh(t,e,n,r){var i=Tt.hasOwnProperty(e)?Tt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nb(e,n,i,r)&&(n=null),r||i===null?eb(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ur=JT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ja=Symbol.for("react.element"),ji=Symbol.for("react.portal"),Vi=Symbol.for("react.fragment"),Gh=Symbol.for("react.strict_mode"),wf=Symbol.for("react.profiler"),s0=Symbol.for("react.provider"),a0=Symbol.for("react.context"),Qh=Symbol.for("react.forward_ref"),Ef=Symbol.for("react.suspense"),Tf=Symbol.for("react.suspense_list"),Yh=Symbol.for("react.memo"),gr=Symbol.for("react.lazy"),l0=Symbol.for("react.offscreen"),Mm=Symbol.iterator;function Zo(t){return t===null||typeof t!="object"?null:(t=Mm&&t[Mm]||t["@@iterator"],typeof t=="function"?t:null)}var Ye=Object.assign,Ic;function cs(t){if(Ic===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ic=e&&e[1]||""}return`
`+Ic+t}var xc=!1;function Oc(t,e){if(!t||xc)return"";xc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{xc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?cs(t):""}function rb(t){switch(t.tag){case 5:return cs(t.type);case 16:return cs("Lazy");case 13:return cs("Suspense");case 19:return cs("SuspenseList");case 0:case 2:case 15:return t=Oc(t.type,!1),t;case 11:return t=Oc(t.type.render,!1),t;case 1:return t=Oc(t.type,!0),t;default:return""}}function bf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Vi:return"Fragment";case ji:return"Portal";case wf:return"Profiler";case Gh:return"StrictMode";case Ef:return"Suspense";case Tf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case a0:return(t.displayName||"Context")+".Consumer";case s0:return(t._context.displayName||"Context")+".Provider";case Qh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Yh:return e=t.displayName||null,e!==null?e:bf(t.type)||"Memo";case gr:e=t._payload,t=t._init;try{return bf(t(e))}catch{}}return null}function ib(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bf(e);case 8:return e===Gh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Mr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function u0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ob(t){var e=u0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Va(t){t._valueTracker||(t._valueTracker=ob(t))}function c0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=u0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function kl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sf(t,e){var n=e.checked;return Ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function jm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Mr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function f0(t,e){e=e.checked,e!=null&&Kh(t,"checked",e,!1)}function kf(t,e){f0(t,e);var n=Mr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Af(t,e.type,n):e.hasOwnProperty("defaultValue")&&Af(t,e.type,Mr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Vm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Af(t,e,n){(e!=="number"||kl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var fs=Array.isArray;function Yi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Mr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function If(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(oe(91));return Ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Fm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(oe(92));if(fs(n)){if(1<n.length)throw Error(oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Mr(n)}}function h0(t,e){var n=Mr(e.value),r=Mr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Um(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function d0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?d0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Fa,p0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Fa=Fa||document.createElement("div"),Fa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ds(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ys={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sb=["Webkit","ms","Moz","O"];Object.keys(ys).forEach(function(t){sb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ys[e]=ys[t]})});function m0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ys.hasOwnProperty(t)&&ys[t]?(""+e).trim():e+"px"}function g0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=m0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var ab=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Of(t,e){if(e){if(ab[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(oe(62))}}function Pf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rf=null;function Xh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Nf=null,Xi=null,Ji=null;function Bm(t){if(t=aa(t)){if(typeof Nf!="function")throw Error(oe(280));var e=t.stateNode;e&&(e=Su(e),Nf(t.stateNode,t.type,e))}}function y0(t){Xi?Ji?Ji.push(t):Ji=[t]:Xi=t}function v0(){if(Xi){var t=Xi,e=Ji;if(Ji=Xi=null,Bm(t),e)for(t=0;t<e.length;t++)Bm(e[t])}}function _0(t,e){return t(e)}function w0(){}var Pc=!1;function E0(t,e,n){if(Pc)return t(e,n);Pc=!0;try{return _0(t,e,n)}finally{Pc=!1,(Xi!==null||Ji!==null)&&(w0(),v0())}}function Ls(t,e){var n=t.stateNode;if(n===null)return null;var r=Su(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(oe(231,e,typeof n));return n}var Cf=!1;if(tr)try{var es={};Object.defineProperty(es,"passive",{get:function(){Cf=!0}}),window.addEventListener("test",es,es),window.removeEventListener("test",es,es)}catch{Cf=!1}function lb(t,e,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(p){this.onError(p)}}var vs=!1,Al=null,Il=!1,Df=null,ub={onError:function(t){vs=!0,Al=t}};function cb(t,e,n,r,i,o,s,a,l){vs=!1,Al=null,lb.apply(ub,arguments)}function fb(t,e,n,r,i,o,s,a,l){if(cb.apply(this,arguments),vs){if(vs){var c=Al;vs=!1,Al=null}else throw Error(oe(198));Il||(Il=!0,Df=c)}}function Si(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function T0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function qm(t){if(Si(t)!==t)throw Error(oe(188))}function hb(t){var e=t.alternate;if(!e){if(e=Si(t),e===null)throw Error(oe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return qm(i),t;if(o===r)return qm(i),e;o=o.sibling}throw Error(oe(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(oe(189))}}if(n.alternate!==r)throw Error(oe(190))}if(n.tag!==3)throw Error(oe(188));return n.stateNode.current===n?t:e}function b0(t){return t=hb(t),t!==null?S0(t):null}function S0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=S0(t);if(e!==null)return e;t=t.sibling}return null}var k0=Jt.unstable_scheduleCallback,$m=Jt.unstable_cancelCallback,db=Jt.unstable_shouldYield,pb=Jt.unstable_requestPaint,nt=Jt.unstable_now,mb=Jt.unstable_getCurrentPriorityLevel,Jh=Jt.unstable_ImmediatePriority,A0=Jt.unstable_UserBlockingPriority,xl=Jt.unstable_NormalPriority,gb=Jt.unstable_LowPriority,I0=Jt.unstable_IdlePriority,wu=null,Pn=null;function yb(t){if(Pn&&typeof Pn.onCommitFiberRoot=="function")try{Pn.onCommitFiberRoot(wu,t,void 0,(t.current.flags&128)===128)}catch{}}var _n=Math.clz32?Math.clz32:wb,vb=Math.log,_b=Math.LN2;function wb(t){return t>>>=0,t===0?32:31-(vb(t)/_b|0)|0}var Ua=64,Ba=4194304;function hs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ol(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=hs(a):(o&=s,o!==0&&(r=hs(o)))}else s=n&~i,s!==0?r=hs(s):o!==0&&(r=hs(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-_n(e),i=1<<n,r|=t[n],e&=~i;return r}function Eb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tb(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-_n(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=Eb(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function Lf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function x0(){var t=Ua;return Ua<<=1,!(Ua&4194240)&&(Ua=64),t}function Rc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function oa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-_n(e),t[e]=n}function bb(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-_n(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Zh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-_n(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var De=0;function O0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var P0,ed,R0,N0,C0,Mf=!1,qa=[],Ar=null,Ir=null,xr=null,Ms=new Map,js=new Map,vr=[],Sb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zm(t,e){switch(t){case"focusin":case"focusout":Ar=null;break;case"dragenter":case"dragleave":Ir=null;break;case"mouseover":case"mouseout":xr=null;break;case"pointerover":case"pointerout":Ms.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":js.delete(e.pointerId)}}function ts(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=aa(e),e!==null&&ed(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function kb(t,e,n,r,i){switch(e){case"focusin":return Ar=ts(Ar,t,e,n,r,i),!0;case"dragenter":return Ir=ts(Ir,t,e,n,r,i),!0;case"mouseover":return xr=ts(xr,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ms.set(o,ts(Ms.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,js.set(o,ts(js.get(o)||null,t,e,n,r,i)),!0}return!1}function D0(t){var e=Zr(t.target);if(e!==null){var n=Si(e);if(n!==null){if(e=n.tag,e===13){if(e=T0(n),e!==null){t.blockedOn=e,C0(t.priority,function(){R0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function al(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=jf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Rf=r,n.target.dispatchEvent(r),Rf=null}else return e=aa(n),e!==null&&ed(e),t.blockedOn=n,!1;e.shift()}return!0}function Hm(t,e,n){al(t)&&n.delete(e)}function Ab(){Mf=!1,Ar!==null&&al(Ar)&&(Ar=null),Ir!==null&&al(Ir)&&(Ir=null),xr!==null&&al(xr)&&(xr=null),Ms.forEach(Hm),js.forEach(Hm)}function ns(t,e){t.blockedOn===e&&(t.blockedOn=null,Mf||(Mf=!0,Jt.unstable_scheduleCallback(Jt.unstable_NormalPriority,Ab)))}function Vs(t){function e(i){return ns(i,t)}if(0<qa.length){ns(qa[0],t);for(var n=1;n<qa.length;n++){var r=qa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ar!==null&&ns(Ar,t),Ir!==null&&ns(Ir,t),xr!==null&&ns(xr,t),Ms.forEach(e),js.forEach(e),n=0;n<vr.length;n++)r=vr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<vr.length&&(n=vr[0],n.blockedOn===null);)D0(n),n.blockedOn===null&&vr.shift()}var Zi=ur.ReactCurrentBatchConfig,Pl=!0;function Ib(t,e,n,r){var i=De,o=Zi.transition;Zi.transition=null;try{De=1,td(t,e,n,r)}finally{De=i,Zi.transition=o}}function xb(t,e,n,r){var i=De,o=Zi.transition;Zi.transition=null;try{De=4,td(t,e,n,r)}finally{De=i,Zi.transition=o}}function td(t,e,n,r){if(Pl){var i=jf(t,e,n,r);if(i===null)Bc(t,e,r,Rl,n),zm(t,r);else if(kb(i,t,e,n,r))r.stopPropagation();else if(zm(t,r),e&4&&-1<Sb.indexOf(t)){for(;i!==null;){var o=aa(i);if(o!==null&&P0(o),o=jf(t,e,n,r),o===null&&Bc(t,e,r,Rl,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Bc(t,e,r,null,n)}}var Rl=null;function jf(t,e,n,r){if(Rl=null,t=Xh(r),t=Zr(t),t!==null)if(e=Si(t),e===null)t=null;else if(n=e.tag,n===13){if(t=T0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Rl=t,null}function L0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mb()){case Jh:return 1;case A0:return 4;case xl:case gb:return 16;case I0:return 536870912;default:return 16}default:return 16}}var br=null,nd=null,ll=null;function M0(){if(ll)return ll;var t,e=nd,n=e.length,r,i="value"in br?br.value:br.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return ll=i.slice(t,1<r?1-r:void 0)}function ul(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function $a(){return!0}function Wm(){return!1}function en(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?$a:Wm,this.isPropagationStopped=Wm,this}return Ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$a)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$a)},persist:function(){},isPersistent:$a}),e}var So={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rd=en(So),sa=Ye({},So,{view:0,detail:0}),Ob=en(sa),Nc,Cc,rs,Eu=Ye({},sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:id,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==rs&&(rs&&t.type==="mousemove"?(Nc=t.screenX-rs.screenX,Cc=t.screenY-rs.screenY):Cc=Nc=0,rs=t),Nc)},movementY:function(t){return"movementY"in t?t.movementY:Cc}}),Km=en(Eu),Pb=Ye({},Eu,{dataTransfer:0}),Rb=en(Pb),Nb=Ye({},sa,{relatedTarget:0}),Dc=en(Nb),Cb=Ye({},So,{animationName:0,elapsedTime:0,pseudoElement:0}),Db=en(Cb),Lb=Ye({},So,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Mb=en(Lb),jb=Ye({},So,{data:0}),Gm=en(jb),Vb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ub={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ub[t])?!!e[t]:!1}function id(){return Bb}var qb=Ye({},sa,{key:function(t){if(t.key){var e=Vb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ul(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Fb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:id,charCode:function(t){return t.type==="keypress"?ul(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ul(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$b=en(qb),zb=Ye({},Eu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qm=en(zb),Hb=Ye({},sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:id}),Wb=en(Hb),Kb=Ye({},So,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gb=en(Kb),Qb=Ye({},Eu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Yb=en(Qb),Xb=[9,13,27,32],od=tr&&"CompositionEvent"in window,_s=null;tr&&"documentMode"in document&&(_s=document.documentMode);var Jb=tr&&"TextEvent"in window&&!_s,j0=tr&&(!od||_s&&8<_s&&11>=_s),Ym=" ",Xm=!1;function V0(t,e){switch(t){case"keyup":return Xb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function F0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fi=!1;function Zb(t,e){switch(t){case"compositionend":return F0(e);case"keypress":return e.which!==32?null:(Xm=!0,Ym);case"textInput":return t=e.data,t===Ym&&Xm?null:t;default:return null}}function eS(t,e){if(Fi)return t==="compositionend"||!od&&V0(t,e)?(t=M0(),ll=nd=br=null,Fi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return j0&&e.locale!=="ko"?null:e.data;default:return null}}var tS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tS[t.type]:e==="textarea"}function U0(t,e,n,r){y0(r),e=Nl(e,"onChange"),0<e.length&&(n=new rd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ws=null,Fs=null;function nS(t){X0(t,0)}function Tu(t){var e=qi(t);if(c0(e))return t}function rS(t,e){if(t==="change")return e}var B0=!1;if(tr){var Lc;if(tr){var Mc="oninput"in document;if(!Mc){var Zm=document.createElement("div");Zm.setAttribute("oninput","return;"),Mc=typeof Zm.oninput=="function"}Lc=Mc}else Lc=!1;B0=Lc&&(!document.documentMode||9<document.documentMode)}function eg(){ws&&(ws.detachEvent("onpropertychange",q0),Fs=ws=null)}function q0(t){if(t.propertyName==="value"&&Tu(Fs)){var e=[];U0(e,Fs,t,Xh(t)),E0(nS,e)}}function iS(t,e,n){t==="focusin"?(eg(),ws=e,Fs=n,ws.attachEvent("onpropertychange",q0)):t==="focusout"&&eg()}function oS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Tu(Fs)}function sS(t,e){if(t==="click")return Tu(e)}function aS(t,e){if(t==="input"||t==="change")return Tu(e)}function lS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Tn=typeof Object.is=="function"?Object.is:lS;function Us(t,e){if(Tn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!_f.call(e,i)||!Tn(t[i],e[i]))return!1}return!0}function tg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ng(t,e){var n=tg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=tg(n)}}function $0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?$0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function z0(){for(var t=window,e=kl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=kl(t.document)}return e}function sd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function uS(t){var e=z0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&$0(n.ownerDocument.documentElement,n)){if(r!==null&&sd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=ng(n,o);var s=ng(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var cS=tr&&"documentMode"in document&&11>=document.documentMode,Ui=null,Vf=null,Es=null,Ff=!1;function rg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ff||Ui==null||Ui!==kl(r)||(r=Ui,"selectionStart"in r&&sd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Es&&Us(Es,r)||(Es=r,r=Nl(Vf,"onSelect"),0<r.length&&(e=new rd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ui)))}function za(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bi={animationend:za("Animation","AnimationEnd"),animationiteration:za("Animation","AnimationIteration"),animationstart:za("Animation","AnimationStart"),transitionend:za("Transition","TransitionEnd")},jc={},H0={};tr&&(H0=document.createElement("div").style,"AnimationEvent"in window||(delete Bi.animationend.animation,delete Bi.animationiteration.animation,delete Bi.animationstart.animation),"TransitionEvent"in window||delete Bi.transitionend.transition);function bu(t){if(jc[t])return jc[t];if(!Bi[t])return t;var e=Bi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in H0)return jc[t]=e[n];return t}var W0=bu("animationend"),K0=bu("animationiteration"),G0=bu("animationstart"),Q0=bu("transitionend"),Y0=new Map,ig="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qr(t,e){Y0.set(t,e),bi(e,[t])}for(var Vc=0;Vc<ig.length;Vc++){var Fc=ig[Vc],fS=Fc.toLowerCase(),hS=Fc[0].toUpperCase()+Fc.slice(1);qr(fS,"on"+hS)}qr(W0,"onAnimationEnd");qr(K0,"onAnimationIteration");qr(G0,"onAnimationStart");qr("dblclick","onDoubleClick");qr("focusin","onFocus");qr("focusout","onBlur");qr(Q0,"onTransitionEnd");ao("onMouseEnter",["mouseout","mouseover"]);ao("onMouseLeave",["mouseout","mouseover"]);ao("onPointerEnter",["pointerout","pointerover"]);ao("onPointerLeave",["pointerout","pointerover"]);bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bi("onBeforeInput",["compositionend","keypress","textInput","paste"]);bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ds="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dS=new Set("cancel close invalid load scroll toggle".split(" ").concat(ds));function og(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,fb(r,e,void 0,t),t.currentTarget=null}function X0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;og(i,a,c),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;og(i,a,c),o=l}}}if(Il)throw t=Df,Il=!1,Df=null,t}function Be(t,e){var n=e[zf];n===void 0&&(n=e[zf]=new Set);var r=t+"__bubble";n.has(r)||(J0(e,t,2,!1),n.add(r))}function Uc(t,e,n){var r=0;e&&(r|=4),J0(n,t,r,e)}var Ha="_reactListening"+Math.random().toString(36).slice(2);function Bs(t){if(!t[Ha]){t[Ha]=!0,o0.forEach(function(n){n!=="selectionchange"&&(dS.has(n)||Uc(n,!1,t),Uc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ha]||(e[Ha]=!0,Uc("selectionchange",!1,e))}}function J0(t,e,n,r){switch(L0(e)){case 1:var i=Ib;break;case 4:i=xb;break;default:i=td}n=i.bind(null,e,n,t),i=void 0,!Cf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Bc(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Zr(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}E0(function(){var c=o,p=Xh(n),h=[];e:{var f=Y0.get(t);if(f!==void 0){var d=rd,_=t;switch(t){case"keypress":if(ul(n)===0)break e;case"keydown":case"keyup":d=$b;break;case"focusin":_="focus",d=Dc;break;case"focusout":_="blur",d=Dc;break;case"beforeblur":case"afterblur":d=Dc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=Km;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=Rb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=Wb;break;case W0:case K0:case G0:d=Db;break;case Q0:d=Gb;break;case"scroll":d=Ob;break;case"wheel":d=Yb;break;case"copy":case"cut":case"paste":d=Mb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=Qm}var v=(e&4)!==0,E=!v&&t==="scroll",m=v?f!==null?f+"Capture":null:f;v=[];for(var g=c,w;g!==null;){w=g;var y=w.stateNode;if(w.tag===5&&y!==null&&(w=y,m!==null&&(y=Ls(g,m),y!=null&&v.push(qs(g,y,w)))),E)break;g=g.return}0<v.length&&(f=new d(f,_,null,n,p),h.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",f&&n!==Rf&&(_=n.relatedTarget||n.fromElement)&&(Zr(_)||_[nr]))break e;if((d||f)&&(f=p.window===p?p:(f=p.ownerDocument)?f.defaultView||f.parentWindow:window,d?(_=n.relatedTarget||n.toElement,d=c,_=_?Zr(_):null,_!==null&&(E=Si(_),_!==E||_.tag!==5&&_.tag!==6)&&(_=null)):(d=null,_=c),d!==_)){if(v=Km,y="onMouseLeave",m="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(v=Qm,y="onPointerLeave",m="onPointerEnter",g="pointer"),E=d==null?f:qi(d),w=_==null?f:qi(_),f=new v(y,g+"leave",d,n,p),f.target=E,f.relatedTarget=w,y=null,Zr(p)===c&&(v=new v(m,g+"enter",_,n,p),v.target=w,v.relatedTarget=E,y=v),E=y,d&&_)t:{for(v=d,m=_,g=0,w=v;w;w=Ci(w))g++;for(w=0,y=m;y;y=Ci(y))w++;for(;0<g-w;)v=Ci(v),g--;for(;0<w-g;)m=Ci(m),w--;for(;g--;){if(v===m||m!==null&&v===m.alternate)break t;v=Ci(v),m=Ci(m)}v=null}else v=null;d!==null&&sg(h,f,d,v,!1),_!==null&&E!==null&&sg(h,E,_,v,!0)}}e:{if(f=c?qi(c):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var I=rS;else if(Jm(f))if(B0)I=aS;else{I=oS;var C=iS}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(I=sS);if(I&&(I=I(t,c))){U0(h,I,n,p);break e}C&&C(t,f,c),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Af(f,"number",f.value)}switch(C=c?qi(c):window,t){case"focusin":(Jm(C)||C.contentEditable==="true")&&(Ui=C,Vf=c,Es=null);break;case"focusout":Es=Vf=Ui=null;break;case"mousedown":Ff=!0;break;case"contextmenu":case"mouseup":case"dragend":Ff=!1,rg(h,n,p);break;case"selectionchange":if(cS)break;case"keydown":case"keyup":rg(h,n,p)}var S;if(od)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Fi?V0(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(j0&&n.locale!=="ko"&&(Fi||T!=="onCompositionStart"?T==="onCompositionEnd"&&Fi&&(S=M0()):(br=p,nd="value"in br?br.value:br.textContent,Fi=!0)),C=Nl(c,T),0<C.length&&(T=new Gm(T,t,null,n,p),h.push({event:T,listeners:C}),S?T.data=S:(S=F0(n),S!==null&&(T.data=S)))),(S=Jb?Zb(t,n):eS(t,n))&&(c=Nl(c,"onBeforeInput"),0<c.length&&(p=new Gm("onBeforeInput","beforeinput",null,n,p),h.push({event:p,listeners:c}),p.data=S))}X0(h,e)})}function qs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Nl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Ls(t,n),o!=null&&r.unshift(qs(t,o,i)),o=Ls(t,e),o!=null&&r.push(qs(t,o,i))),t=t.return}return r}function Ci(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function sg(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ls(n,o),l!=null&&s.unshift(qs(n,l,a))):i||(l=Ls(n,o),l!=null&&s.push(qs(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var pS=/\r\n?/g,mS=/\u0000|\uFFFD/g;function ag(t){return(typeof t=="string"?t:""+t).replace(pS,`
`).replace(mS,"")}function Wa(t,e,n){if(e=ag(e),ag(t)!==e&&n)throw Error(oe(425))}function Cl(){}var Uf=null,Bf=null;function qf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $f=typeof setTimeout=="function"?setTimeout:void 0,gS=typeof clearTimeout=="function"?clearTimeout:void 0,lg=typeof Promise=="function"?Promise:void 0,yS=typeof queueMicrotask=="function"?queueMicrotask:typeof lg<"u"?function(t){return lg.resolve(null).then(t).catch(vS)}:$f;function vS(t){setTimeout(function(){throw t})}function qc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Vs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Vs(e)}function Or(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ug(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ko=Math.random().toString(36).slice(2),On="__reactFiber$"+ko,$s="__reactProps$"+ko,nr="__reactContainer$"+ko,zf="__reactEvents$"+ko,_S="__reactListeners$"+ko,wS="__reactHandles$"+ko;function Zr(t){var e=t[On];if(e)return e;for(var n=t.parentNode;n;){if(e=n[nr]||n[On]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ug(t);t!==null;){if(n=t[On])return n;t=ug(t)}return e}t=n,n=t.parentNode}return null}function aa(t){return t=t[On]||t[nr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(oe(33))}function Su(t){return t[$s]||null}var Hf=[],$i=-1;function $r(t){return{current:t}}function $e(t){0>$i||(t.current=Hf[$i],Hf[$i]=null,$i--)}function Ve(t,e){$i++,Hf[$i]=t.current,t.current=e}var jr={},Rt=$r(jr),qt=$r(!1),ui=jr;function lo(t,e){var n=t.type.contextTypes;if(!n)return jr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function $t(t){return t=t.childContextTypes,t!=null}function Dl(){$e(qt),$e(Rt)}function cg(t,e,n){if(Rt.current!==jr)throw Error(oe(168));Ve(Rt,e),Ve(qt,n)}function Z0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(oe(108,ib(t)||"Unknown",i));return Ye({},n,r)}function Ll(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||jr,ui=Rt.current,Ve(Rt,t),Ve(qt,qt.current),!0}function fg(t,e,n){var r=t.stateNode;if(!r)throw Error(oe(169));n?(t=Z0(t,e,ui),r.__reactInternalMemoizedMergedChildContext=t,$e(qt),$e(Rt),Ve(Rt,t)):$e(qt),Ve(qt,n)}var $n=null,ku=!1,$c=!1;function e_(t){$n===null?$n=[t]:$n.push(t)}function ES(t){ku=!0,e_(t)}function zr(){if(!$c&&$n!==null){$c=!0;var t=0,e=De;try{var n=$n;for(De=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}$n=null,ku=!1}catch(i){throw $n!==null&&($n=$n.slice(t+1)),k0(Jh,zr),i}finally{De=e,$c=!1}}return null}var zi=[],Hi=0,Ml=null,jl=0,tn=[],nn=0,ci=null,Wn=1,Kn="";function Qr(t,e){zi[Hi++]=jl,zi[Hi++]=Ml,Ml=t,jl=e}function t_(t,e,n){tn[nn++]=Wn,tn[nn++]=Kn,tn[nn++]=ci,ci=t;var r=Wn;t=Kn;var i=32-_n(r)-1;r&=~(1<<i),n+=1;var o=32-_n(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Wn=1<<32-_n(e)+i|n<<i|r,Kn=o+t}else Wn=1<<o|n<<i|r,Kn=t}function ad(t){t.return!==null&&(Qr(t,1),t_(t,1,0))}function ld(t){for(;t===Ml;)Ml=zi[--Hi],zi[Hi]=null,jl=zi[--Hi],zi[Hi]=null;for(;t===ci;)ci=tn[--nn],tn[nn]=null,Kn=tn[--nn],tn[nn]=null,Wn=tn[--nn],tn[nn]=null}var Yt=null,Qt=null,ze=!1,gn=null;function n_(t,e){var n=on(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function hg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Yt=t,Qt=Or(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Yt=t,Qt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ci!==null?{id:Wn,overflow:Kn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=on(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Yt=t,Qt=null,!0):!1;default:return!1}}function Wf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Kf(t){if(ze){var e=Qt;if(e){var n=e;if(!hg(t,e)){if(Wf(t))throw Error(oe(418));e=Or(n.nextSibling);var r=Yt;e&&hg(t,e)?n_(r,n):(t.flags=t.flags&-4097|2,ze=!1,Yt=t)}}else{if(Wf(t))throw Error(oe(418));t.flags=t.flags&-4097|2,ze=!1,Yt=t}}}function dg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Yt=t}function Ka(t){if(t!==Yt)return!1;if(!ze)return dg(t),ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!qf(t.type,t.memoizedProps)),e&&(e=Qt)){if(Wf(t))throw r_(),Error(oe(418));for(;e;)n_(t,e),e=Or(e.nextSibling)}if(dg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Qt=Or(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Qt=null}}else Qt=Yt?Or(t.stateNode.nextSibling):null;return!0}function r_(){for(var t=Qt;t;)t=Or(t.nextSibling)}function uo(){Qt=Yt=null,ze=!1}function ud(t){gn===null?gn=[t]:gn.push(t)}var TS=ur.ReactCurrentBatchConfig;function is(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(oe(309));var r=n.stateNode}if(!r)throw Error(oe(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(oe(284));if(!n._owner)throw Error(oe(290,t))}return t}function Ga(t,e){throw t=Object.prototype.toString.call(e),Error(oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function pg(t){var e=t._init;return e(t._payload)}function i_(t){function e(m,g){if(t){var w=m.deletions;w===null?(m.deletions=[g],m.flags|=16):w.push(g)}}function n(m,g){if(!t)return null;for(;g!==null;)e(m,g),g=g.sibling;return null}function r(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function i(m,g){return m=Cr(m,g),m.index=0,m.sibling=null,m}function o(m,g,w){return m.index=w,t?(w=m.alternate,w!==null?(w=w.index,w<g?(m.flags|=2,g):w):(m.flags|=2,g)):(m.flags|=1048576,g)}function s(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,g,w,y){return g===null||g.tag!==6?(g=Yc(w,m.mode,y),g.return=m,g):(g=i(g,w),g.return=m,g)}function l(m,g,w,y){var I=w.type;return I===Vi?p(m,g,w.props.children,y,w.key):g!==null&&(g.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===gr&&pg(I)===g.type)?(y=i(g,w.props),y.ref=is(m,g,w),y.return=m,y):(y=gl(w.type,w.key,w.props,null,m.mode,y),y.ref=is(m,g,w),y.return=m,y)}function c(m,g,w,y){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=Xc(w,m.mode,y),g.return=m,g):(g=i(g,w.children||[]),g.return=m,g)}function p(m,g,w,y,I){return g===null||g.tag!==7?(g=si(w,m.mode,y,I),g.return=m,g):(g=i(g,w),g.return=m,g)}function h(m,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Yc(""+g,m.mode,w),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ja:return w=gl(g.type,g.key,g.props,null,m.mode,w),w.ref=is(m,null,g),w.return=m,w;case ji:return g=Xc(g,m.mode,w),g.return=m,g;case gr:var y=g._init;return h(m,y(g._payload),w)}if(fs(g)||Zo(g))return g=si(g,m.mode,w,null),g.return=m,g;Ga(m,g)}return null}function f(m,g,w,y){var I=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return I!==null?null:a(m,g,""+w,y);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ja:return w.key===I?l(m,g,w,y):null;case ji:return w.key===I?c(m,g,w,y):null;case gr:return I=w._init,f(m,g,I(w._payload),y)}if(fs(w)||Zo(w))return I!==null?null:p(m,g,w,y,null);Ga(m,w)}return null}function d(m,g,w,y,I){if(typeof y=="string"&&y!==""||typeof y=="number")return m=m.get(w)||null,a(g,m,""+y,I);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ja:return m=m.get(y.key===null?w:y.key)||null,l(g,m,y,I);case ji:return m=m.get(y.key===null?w:y.key)||null,c(g,m,y,I);case gr:var C=y._init;return d(m,g,w,C(y._payload),I)}if(fs(y)||Zo(y))return m=m.get(w)||null,p(g,m,y,I,null);Ga(g,y)}return null}function _(m,g,w,y){for(var I=null,C=null,S=g,T=g=0,P=null;S!==null&&T<w.length;T++){S.index>T?(P=S,S=null):P=S.sibling;var b=f(m,S,w[T],y);if(b===null){S===null&&(S=P);break}t&&S&&b.alternate===null&&e(m,S),g=o(b,g,T),C===null?I=b:C.sibling=b,C=b,S=P}if(T===w.length)return n(m,S),ze&&Qr(m,T),I;if(S===null){for(;T<w.length;T++)S=h(m,w[T],y),S!==null&&(g=o(S,g,T),C===null?I=S:C.sibling=S,C=S);return ze&&Qr(m,T),I}for(S=r(m,S);T<w.length;T++)P=d(S,m,T,w[T],y),P!==null&&(t&&P.alternate!==null&&S.delete(P.key===null?T:P.key),g=o(P,g,T),C===null?I=P:C.sibling=P,C=P);return t&&S.forEach(function(k){return e(m,k)}),ze&&Qr(m,T),I}function v(m,g,w,y){var I=Zo(w);if(typeof I!="function")throw Error(oe(150));if(w=I.call(w),w==null)throw Error(oe(151));for(var C=I=null,S=g,T=g=0,P=null,b=w.next();S!==null&&!b.done;T++,b=w.next()){S.index>T?(P=S,S=null):P=S.sibling;var k=f(m,S,b.value,y);if(k===null){S===null&&(S=P);break}t&&S&&k.alternate===null&&e(m,S),g=o(k,g,T),C===null?I=k:C.sibling=k,C=k,S=P}if(b.done)return n(m,S),ze&&Qr(m,T),I;if(S===null){for(;!b.done;T++,b=w.next())b=h(m,b.value,y),b!==null&&(g=o(b,g,T),C===null?I=b:C.sibling=b,C=b);return ze&&Qr(m,T),I}for(S=r(m,S);!b.done;T++,b=w.next())b=d(S,m,T,b.value,y),b!==null&&(t&&b.alternate!==null&&S.delete(b.key===null?T:b.key),g=o(b,g,T),C===null?I=b:C.sibling=b,C=b);return t&&S.forEach(function(x){return e(m,x)}),ze&&Qr(m,T),I}function E(m,g,w,y){if(typeof w=="object"&&w!==null&&w.type===Vi&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case ja:e:{for(var I=w.key,C=g;C!==null;){if(C.key===I){if(I=w.type,I===Vi){if(C.tag===7){n(m,C.sibling),g=i(C,w.props.children),g.return=m,m=g;break e}}else if(C.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===gr&&pg(I)===C.type){n(m,C.sibling),g=i(C,w.props),g.ref=is(m,C,w),g.return=m,m=g;break e}n(m,C);break}else e(m,C);C=C.sibling}w.type===Vi?(g=si(w.props.children,m.mode,y,w.key),g.return=m,m=g):(y=gl(w.type,w.key,w.props,null,m.mode,y),y.ref=is(m,g,w),y.return=m,m=y)}return s(m);case ji:e:{for(C=w.key;g!==null;){if(g.key===C)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){n(m,g.sibling),g=i(g,w.children||[]),g.return=m,m=g;break e}else{n(m,g);break}else e(m,g);g=g.sibling}g=Xc(w,m.mode,y),g.return=m,m=g}return s(m);case gr:return C=w._init,E(m,g,C(w._payload),y)}if(fs(w))return _(m,g,w,y);if(Zo(w))return v(m,g,w,y);Ga(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(n(m,g.sibling),g=i(g,w),g.return=m,m=g):(n(m,g),g=Yc(w,m.mode,y),g.return=m,m=g),s(m)):n(m,g)}return E}var co=i_(!0),o_=i_(!1),Vl=$r(null),Fl=null,Wi=null,cd=null;function fd(){cd=Wi=Fl=null}function hd(t){var e=Vl.current;$e(Vl),t._currentValue=e}function Gf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function eo(t,e){Fl=t,cd=Wi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Bt=!0),t.firstContext=null)}function un(t){var e=t._currentValue;if(cd!==t)if(t={context:t,memoizedValue:e,next:null},Wi===null){if(Fl===null)throw Error(oe(308));Wi=t,Fl.dependencies={lanes:0,firstContext:t}}else Wi=Wi.next=t;return e}var ei=null;function dd(t){ei===null?ei=[t]:ei.push(t)}function s_(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,dd(e)):(n.next=i.next,i.next=n),e.interleaved=n,rr(t,r)}function rr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var yr=!1;function pd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function a_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Jn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Pr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Pe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,rr(t,n)}return i=r.interleaved,i===null?(e.next=e,dd(r)):(e.next=i.next,i.next=e),r.interleaved=e,rr(t,n)}function cl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Zh(t,n)}}function mg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ul(t,e,n,r){var i=t.updateQueue;yr=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?o=c:s.next=c,s=l;var p=t.alternate;p!==null&&(p=p.updateQueue,a=p.lastBaseUpdate,a!==s&&(a===null?p.firstBaseUpdate=c:a.next=c,p.lastBaseUpdate=l))}if(o!==null){var h=i.baseState;s=0,p=c=l=null,a=o;do{var f=a.lane,d=a.eventTime;if((r&f)===f){p!==null&&(p=p.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,v=a;switch(f=e,d=n,v.tag){case 1:if(_=v.payload,typeof _=="function"){h=_.call(d,h,f);break e}h=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=v.payload,f=typeof _=="function"?_.call(d,h,f):_,f==null)break e;h=Ye({},h,f);break e;case 2:yr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else d={eventTime:d,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},p===null?(c=p=d,l=h):p=p.next=d,s|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(p===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);hi|=s,t.lanes=s,t.memoizedState=h}}function gg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(oe(191,i));i.call(r)}}}var la={},Rn=$r(la),zs=$r(la),Hs=$r(la);function ti(t){if(t===la)throw Error(oe(174));return t}function md(t,e){switch(Ve(Hs,e),Ve(zs,t),Ve(Rn,la),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xf(e,t)}$e(Rn),Ve(Rn,e)}function fo(){$e(Rn),$e(zs),$e(Hs)}function l_(t){ti(Hs.current);var e=ti(Rn.current),n=xf(e,t.type);e!==n&&(Ve(zs,t),Ve(Rn,n))}function gd(t){zs.current===t&&($e(Rn),$e(zs))}var Ge=$r(0);function Bl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zc=[];function yd(){for(var t=0;t<zc.length;t++)zc[t]._workInProgressVersionPrimary=null;zc.length=0}var fl=ur.ReactCurrentDispatcher,Hc=ur.ReactCurrentBatchConfig,fi=0,Qe=null,at=null,ft=null,ql=!1,Ts=!1,Ws=0,bS=0;function kt(){throw Error(oe(321))}function vd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Tn(t[n],e[n]))return!1;return!0}function _d(t,e,n,r,i,o){if(fi=o,Qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,fl.current=t===null||t.memoizedState===null?IS:xS,t=n(r,i),Ts){o=0;do{if(Ts=!1,Ws=0,25<=o)throw Error(oe(301));o+=1,ft=at=null,e.updateQueue=null,fl.current=OS,t=n(r,i)}while(Ts)}if(fl.current=$l,e=at!==null&&at.next!==null,fi=0,ft=at=Qe=null,ql=!1,e)throw Error(oe(300));return t}function wd(){var t=Ws!==0;return Ws=0,t}function xn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?Qe.memoizedState=ft=t:ft=ft.next=t,ft}function cn(){if(at===null){var t=Qe.alternate;t=t!==null?t.memoizedState:null}else t=at.next;var e=ft===null?Qe.memoizedState:ft.next;if(e!==null)ft=e,at=t;else{if(t===null)throw Error(oe(310));at=t,t={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},ft===null?Qe.memoizedState=ft=t:ft=ft.next=t}return ft}function Ks(t,e){return typeof e=="function"?e(t):e}function Wc(t){var e=cn(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=at,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,c=o;do{var p=c.lane;if((fi&p)===p)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:p,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,s=r):l=l.next=h,Qe.lanes|=p,hi|=p}c=c.next}while(c!==null&&c!==o);l===null?s=r:l.next=a,Tn(r,e.memoizedState)||(Bt=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Qe.lanes|=o,hi|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Kc(t){var e=cn(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);Tn(o,e.memoizedState)||(Bt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function u_(){}function c_(t,e){var n=Qe,r=cn(),i=e(),o=!Tn(r.memoizedState,i);if(o&&(r.memoizedState=i,Bt=!0),r=r.queue,Ed(d_.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||ft!==null&&ft.memoizedState.tag&1){if(n.flags|=2048,Gs(9,h_.bind(null,n,r,i,e),void 0,null),pt===null)throw Error(oe(349));fi&30||f_(n,e,i)}return i}function f_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function h_(t,e,n,r){e.value=n,e.getSnapshot=r,p_(e)&&m_(t)}function d_(t,e,n){return n(function(){p_(e)&&m_(t)})}function p_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Tn(t,n)}catch{return!0}}function m_(t){var e=rr(t,1);e!==null&&wn(e,t,1,-1)}function yg(t){var e=xn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:t},e.queue=t,t=t.dispatch=AS.bind(null,Qe,t),[e.memoizedState,t]}function Gs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function g_(){return cn().memoizedState}function hl(t,e,n,r){var i=xn();Qe.flags|=t,i.memoizedState=Gs(1|e,n,void 0,r===void 0?null:r)}function Au(t,e,n,r){var i=cn();r=r===void 0?null:r;var o=void 0;if(at!==null){var s=at.memoizedState;if(o=s.destroy,r!==null&&vd(r,s.deps)){i.memoizedState=Gs(e,n,o,r);return}}Qe.flags|=t,i.memoizedState=Gs(1|e,n,o,r)}function vg(t,e){return hl(8390656,8,t,e)}function Ed(t,e){return Au(2048,8,t,e)}function y_(t,e){return Au(4,2,t,e)}function v_(t,e){return Au(4,4,t,e)}function __(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function w_(t,e,n){return n=n!=null?n.concat([t]):null,Au(4,4,__.bind(null,e,t),n)}function Td(){}function E_(t,e){var n=cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&vd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function T_(t,e){var n=cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&vd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function b_(t,e,n){return fi&21?(Tn(n,e)||(n=x0(),Qe.lanes|=n,hi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Bt=!0),t.memoizedState=n)}function SS(t,e){var n=De;De=n!==0&&4>n?n:4,t(!0);var r=Hc.transition;Hc.transition={};try{t(!1),e()}finally{De=n,Hc.transition=r}}function S_(){return cn().memoizedState}function kS(t,e,n){var r=Nr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},k_(t))A_(e,n);else if(n=s_(t,e,n,r),n!==null){var i=Mt();wn(n,t,r,i),I_(n,e,r)}}function AS(t,e,n){var r=Nr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(k_(t))A_(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,Tn(a,s)){var l=e.interleaved;l===null?(i.next=i,dd(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=s_(t,e,i,r),n!==null&&(i=Mt(),wn(n,t,r,i),I_(n,e,r))}}function k_(t){var e=t.alternate;return t===Qe||e!==null&&e===Qe}function A_(t,e){Ts=ql=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function I_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Zh(t,n)}}var $l={readContext:un,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},IS={readContext:un,useCallback:function(t,e){return xn().memoizedState=[t,e===void 0?null:e],t},useContext:un,useEffect:vg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hl(4194308,4,__.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hl(4194308,4,t,e)},useInsertionEffect:function(t,e){return hl(4,2,t,e)},useMemo:function(t,e){var n=xn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=xn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=kS.bind(null,Qe,t),[r.memoizedState,t]},useRef:function(t){var e=xn();return t={current:t},e.memoizedState=t},useState:yg,useDebugValue:Td,useDeferredValue:function(t){return xn().memoizedState=t},useTransition:function(){var t=yg(!1),e=t[0];return t=SS.bind(null,t[1]),xn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Qe,i=xn();if(ze){if(n===void 0)throw Error(oe(407));n=n()}else{if(n=e(),pt===null)throw Error(oe(349));fi&30||f_(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,vg(d_.bind(null,r,o,t),[t]),r.flags|=2048,Gs(9,h_.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=xn(),e=pt.identifierPrefix;if(ze){var n=Kn,r=Wn;n=(r&~(1<<32-_n(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ws++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=bS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xS={readContext:un,useCallback:E_,useContext:un,useEffect:Ed,useImperativeHandle:w_,useInsertionEffect:y_,useLayoutEffect:v_,useMemo:T_,useReducer:Wc,useRef:g_,useState:function(){return Wc(Ks)},useDebugValue:Td,useDeferredValue:function(t){var e=cn();return b_(e,at.memoizedState,t)},useTransition:function(){var t=Wc(Ks)[0],e=cn().memoizedState;return[t,e]},useMutableSource:u_,useSyncExternalStore:c_,useId:S_,unstable_isNewReconciler:!1},OS={readContext:un,useCallback:E_,useContext:un,useEffect:Ed,useImperativeHandle:w_,useInsertionEffect:y_,useLayoutEffect:v_,useMemo:T_,useReducer:Kc,useRef:g_,useState:function(){return Kc(Ks)},useDebugValue:Td,useDeferredValue:function(t){var e=cn();return at===null?e.memoizedState=t:b_(e,at.memoizedState,t)},useTransition:function(){var t=Kc(Ks)[0],e=cn().memoizedState;return[t,e]},useMutableSource:u_,useSyncExternalStore:c_,useId:S_,unstable_isNewReconciler:!1};function pn(t,e){if(t&&t.defaultProps){e=Ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Qf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Iu={isMounted:function(t){return(t=t._reactInternals)?Si(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Mt(),i=Nr(t),o=Jn(r,i);o.payload=e,n!=null&&(o.callback=n),e=Pr(t,o,i),e!==null&&(wn(e,t,i,r),cl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Mt(),i=Nr(t),o=Jn(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Pr(t,o,i),e!==null&&(wn(e,t,i,r),cl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Mt(),r=Nr(t),i=Jn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Pr(t,i,r),e!==null&&(wn(e,t,r,n),cl(e,t,r))}};function _g(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Us(n,r)||!Us(i,o):!0}function x_(t,e,n){var r=!1,i=jr,o=e.contextType;return typeof o=="object"&&o!==null?o=un(o):(i=$t(e)?ui:Rt.current,r=e.contextTypes,o=(r=r!=null)?lo(t,i):jr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Iu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function wg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Iu.enqueueReplaceState(e,e.state,null)}function Yf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},pd(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=un(o):(o=$t(e)?ui:Rt.current,i.context=lo(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Qf(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Iu.enqueueReplaceState(i,i.state,null),Ul(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ho(t,e){try{var n="",r=e;do n+=rb(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Gc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Xf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var PS=typeof WeakMap=="function"?WeakMap:Map;function O_(t,e,n){n=Jn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Hl||(Hl=!0,ah=r),Xf(t,e)},n}function P_(t,e,n){n=Jn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Xf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Xf(t,e),typeof r!="function"&&(Rr===null?Rr=new Set([this]):Rr.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function Eg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new PS;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=zS.bind(null,t,e,n),e.then(t,t))}function Tg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function bg(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Jn(-1,1),e.tag=2,Pr(n,e,1))),n.lanes|=1),t)}var RS=ur.ReactCurrentOwner,Bt=!1;function Lt(t,e,n,r){e.child=t===null?o_(e,null,n,r):co(e,t.child,n,r)}function Sg(t,e,n,r,i){n=n.render;var o=e.ref;return eo(e,i),r=_d(t,e,n,r,o,i),n=wd(),t!==null&&!Bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ir(t,e,i)):(ze&&n&&ad(e),e.flags|=1,Lt(t,e,r,i),e.child)}function kg(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Pd(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,R_(t,e,o,r,i)):(t=gl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Us,n(s,r)&&t.ref===e.ref)return ir(t,e,i)}return e.flags|=1,t=Cr(o,r),t.ref=e.ref,t.return=e,e.child=t}function R_(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Us(o,r)&&t.ref===e.ref)if(Bt=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Bt=!0);else return e.lanes=t.lanes,ir(t,e,i)}return Jf(t,e,n,r,i)}function N_(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(Gi,Kt),Kt|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ve(Gi,Kt),Kt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ve(Gi,Kt),Kt|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Ve(Gi,Kt),Kt|=r;return Lt(t,e,i,n),e.child}function C_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Jf(t,e,n,r,i){var o=$t(n)?ui:Rt.current;return o=lo(e,o),eo(e,i),n=_d(t,e,n,r,o,i),r=wd(),t!==null&&!Bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ir(t,e,i)):(ze&&r&&ad(e),e.flags|=1,Lt(t,e,n,i),e.child)}function Ag(t,e,n,r,i){if($t(n)){var o=!0;Ll(e)}else o=!1;if(eo(e,i),e.stateNode===null)dl(t,e),x_(e,n,r),Yf(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=un(c):(c=$t(n)?ui:Rt.current,c=lo(e,c));var p=n.getDerivedStateFromProps,h=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==c)&&wg(e,s,r,c),yr=!1;var f=e.memoizedState;s.state=f,Ul(e,r,s,i),l=e.memoizedState,a!==r||f!==l||qt.current||yr?(typeof p=="function"&&(Qf(e,n,p,r),l=e.memoizedState),(a=yr||_g(e,n,a,r,f,l,c))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,a_(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:pn(e.type,a),s.props=c,h=e.pendingProps,f=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=un(l):(l=$t(n)?ui:Rt.current,l=lo(e,l));var d=n.getDerivedStateFromProps;(p=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==h||f!==l)&&wg(e,s,r,l),yr=!1,f=e.memoizedState,s.state=f,Ul(e,r,s,i);var _=e.memoizedState;a!==h||f!==_||qt.current||yr?(typeof d=="function"&&(Qf(e,n,d,r),_=e.memoizedState),(c=yr||_g(e,n,c,r,f,_,l)||!1)?(p||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,_,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,_,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),s.props=r,s.state=_,s.context=l,r=c):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Zf(t,e,n,r,o,i)}function Zf(t,e,n,r,i,o){C_(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&fg(e,n,!1),ir(t,e,o);r=e.stateNode,RS.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=co(e,t.child,null,o),e.child=co(e,null,a,o)):Lt(t,e,a,o),e.memoizedState=r.state,i&&fg(e,n,!0),e.child}function D_(t){var e=t.stateNode;e.pendingContext?cg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cg(t,e.context,!1),md(t,e.containerInfo)}function Ig(t,e,n,r,i){return uo(),ud(i),e.flags|=256,Lt(t,e,n,r),e.child}var eh={dehydrated:null,treeContext:null,retryLane:0};function th(t){return{baseLanes:t,cachePool:null,transitions:null}}function L_(t,e,n){var r=e.pendingProps,i=Ge.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ve(Ge,i&1),t===null)return Kf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Pu(s,r,0,null),t=si(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=th(n),e.memoizedState=eh,t):bd(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return NS(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Cr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Cr(a,o):(o=si(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?th(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=eh,r}return o=t.child,t=o.sibling,r=Cr(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function bd(t,e){return e=Pu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qa(t,e,n,r){return r!==null&&ud(r),co(e,t.child,null,n),t=bd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function NS(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=Gc(Error(oe(422))),Qa(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Pu({mode:"visible",children:r.children},i,0,null),o=si(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&co(e,t.child,null,s),e.child.memoizedState=th(s),e.memoizedState=eh,o);if(!(e.mode&1))return Qa(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(oe(419)),r=Gc(o,r,void 0),Qa(t,e,s,r)}if(a=(s&t.childLanes)!==0,Bt||a){if(r=pt,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,rr(t,i),wn(r,t,i,-1))}return Od(),r=Gc(Error(oe(421))),Qa(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=HS.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Qt=Or(i.nextSibling),Yt=e,ze=!0,gn=null,t!==null&&(tn[nn++]=Wn,tn[nn++]=Kn,tn[nn++]=ci,Wn=t.id,Kn=t.overflow,ci=e),e=bd(e,r.children),e.flags|=4096,e)}function xg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Gf(t.return,e,n)}function Qc(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function M_(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Lt(t,e,r.children,n),r=Ge.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&xg(t,n,e);else if(t.tag===19)xg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ve(Ge,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Bl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Qc(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Bl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Qc(e,!0,n,null,o);break;case"together":Qc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function dl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ir(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),hi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(oe(153));if(e.child!==null){for(t=e.child,n=Cr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Cr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function CS(t,e,n){switch(e.tag){case 3:D_(e),uo();break;case 5:l_(e);break;case 1:$t(e.type)&&Ll(e);break;case 4:md(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ve(Vl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ve(Ge,Ge.current&1),e.flags|=128,null):n&e.child.childLanes?L_(t,e,n):(Ve(Ge,Ge.current&1),t=ir(t,e,n),t!==null?t.sibling:null);Ve(Ge,Ge.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return M_(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ve(Ge,Ge.current),r)break;return null;case 22:case 23:return e.lanes=0,N_(t,e,n)}return ir(t,e,n)}var j_,nh,V_,F_;j_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};nh=function(){};V_=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ti(Rn.current);var o=null;switch(n){case"input":i=Sf(t,i),r=Sf(t,r),o=[];break;case"select":i=Ye({},i,{value:void 0}),r=Ye({},r,{value:void 0}),o=[];break;case"textarea":i=If(t,i),r=If(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Cl)}Of(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Cs.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Cs.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Be("scroll",t),o||a===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};F_=function(t,e,n,r){n!==r&&(e.flags|=4)};function os(t,e){if(!ze)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function At(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function DS(t,e,n){var r=e.pendingProps;switch(ld(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(e),null;case 1:return $t(e.type)&&Dl(),At(e),null;case 3:return r=e.stateNode,fo(),$e(qt),$e(Rt),yd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ka(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gn!==null&&(ch(gn),gn=null))),nh(t,e),At(e),null;case 5:gd(e);var i=ti(Hs.current);if(n=e.type,t!==null&&e.stateNode!=null)V_(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(oe(166));return At(e),null}if(t=ti(Rn.current),Ka(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[On]=e,r[$s]=o,t=(e.mode&1)!==0,n){case"dialog":Be("cancel",r),Be("close",r);break;case"iframe":case"object":case"embed":Be("load",r);break;case"video":case"audio":for(i=0;i<ds.length;i++)Be(ds[i],r);break;case"source":Be("error",r);break;case"img":case"image":case"link":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"input":jm(r,o),Be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Be("invalid",r);break;case"textarea":Fm(r,o),Be("invalid",r)}Of(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Wa(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Wa(r.textContent,a,t),i=["children",""+a]):Cs.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Be("scroll",r)}switch(n){case"input":Va(r),Vm(r,o,!0);break;case"textarea":Va(r),Um(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Cl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=d0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[On]=e,t[$s]=r,j_(t,e,!1,!1),e.stateNode=t;e:{switch(s=Pf(n,r),n){case"dialog":Be("cancel",t),Be("close",t),i=r;break;case"iframe":case"object":case"embed":Be("load",t),i=r;break;case"video":case"audio":for(i=0;i<ds.length;i++)Be(ds[i],t);i=r;break;case"source":Be("error",t),i=r;break;case"img":case"image":case"link":Be("error",t),Be("load",t),i=r;break;case"details":Be("toggle",t),i=r;break;case"input":jm(t,r),i=Sf(t,r),Be("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ye({},r,{value:void 0}),Be("invalid",t);break;case"textarea":Fm(t,r),i=If(t,r),Be("invalid",t);break;default:i=r}Of(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?g0(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&p0(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ds(t,l):typeof l=="number"&&Ds(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Cs.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Be("scroll",t):l!=null&&Kh(t,o,l,s))}switch(n){case"input":Va(t),Vm(t,r,!1);break;case"textarea":Va(t),Um(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Mr(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Yi(t,!!r.multiple,o,!1):r.defaultValue!=null&&Yi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Cl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return At(e),null;case 6:if(t&&e.stateNode!=null)F_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(oe(166));if(n=ti(Hs.current),ti(Rn.current),Ka(e)){if(r=e.stateNode,n=e.memoizedProps,r[On]=e,(o=r.nodeValue!==n)&&(t=Yt,t!==null))switch(t.tag){case 3:Wa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wa(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[On]=e,e.stateNode=r}return At(e),null;case 13:if($e(Ge),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ze&&Qt!==null&&e.mode&1&&!(e.flags&128))r_(),uo(),e.flags|=98560,o=!1;else if(o=Ka(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(oe(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(oe(317));o[On]=e}else uo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;At(e),o=!1}else gn!==null&&(ch(gn),gn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ge.current&1?ut===0&&(ut=3):Od())),e.updateQueue!==null&&(e.flags|=4),At(e),null);case 4:return fo(),nh(t,e),t===null&&Bs(e.stateNode.containerInfo),At(e),null;case 10:return hd(e.type._context),At(e),null;case 17:return $t(e.type)&&Dl(),At(e),null;case 19:if($e(Ge),o=e.memoizedState,o===null)return At(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)os(o,!1);else{if(ut!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Bl(t),s!==null){for(e.flags|=128,os(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ve(Ge,Ge.current&1|2),e.child}t=t.sibling}o.tail!==null&&nt()>po&&(e.flags|=128,r=!0,os(o,!1),e.lanes=4194304)}else{if(!r)if(t=Bl(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),os(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!ze)return At(e),null}else 2*nt()-o.renderingStartTime>po&&n!==1073741824&&(e.flags|=128,r=!0,os(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=nt(),e.sibling=null,n=Ge.current,Ve(Ge,r?n&1|2:n&1),e):(At(e),null);case 22:case 23:return xd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Kt&1073741824&&(At(e),e.subtreeFlags&6&&(e.flags|=8192)):At(e),null;case 24:return null;case 25:return null}throw Error(oe(156,e.tag))}function LS(t,e){switch(ld(e),e.tag){case 1:return $t(e.type)&&Dl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return fo(),$e(qt),$e(Rt),yd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return gd(e),null;case 13:if($e(Ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(oe(340));uo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $e(Ge),null;case 4:return fo(),null;case 10:return hd(e.type._context),null;case 22:case 23:return xd(),null;case 24:return null;default:return null}}var Ya=!1,Ot=!1,MS=typeof WeakSet=="function"?WeakSet:Set,fe=null;function Ki(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ze(t,e,r)}else n.current=null}function rh(t,e,n){try{n()}catch(r){Ze(t,e,r)}}var Og=!1;function jS(t,e){if(Uf=Pl,t=z0(),sd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,c=0,p=0,h=t,f=null;t:for(;;){for(var d;h!==n||i!==0&&h.nodeType!==3||(a=s+i),h!==o||r!==0&&h.nodeType!==3||(l=s+r),h.nodeType===3&&(s+=h.nodeValue.length),(d=h.firstChild)!==null;)f=h,h=d;for(;;){if(h===t)break t;if(f===n&&++c===i&&(a=s),f===o&&++p===r&&(l=s),(d=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=d}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bf={focusedElem:t,selectionRange:n},Pl=!1,fe=e;fe!==null;)if(e=fe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,fe=t;else for(;fe!==null;){e=fe;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var v=_.memoizedProps,E=_.memoizedState,m=e.stateNode,g=m.getSnapshotBeforeUpdate(e.elementType===e.type?v:pn(e.type,v),E);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(y){Ze(e,e.return,y)}if(t=e.sibling,t!==null){t.return=e.return,fe=t;break}fe=e.return}return _=Og,Og=!1,_}function bs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&rh(e,n,o)}i=i.next}while(i!==r)}}function xu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ih(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function U_(t){var e=t.alternate;e!==null&&(t.alternate=null,U_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[On],delete e[$s],delete e[zf],delete e[_S],delete e[wS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function B_(t){return t.tag===5||t.tag===3||t.tag===4}function Pg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||B_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function oh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Cl));else if(r!==4&&(t=t.child,t!==null))for(oh(t,e,n),t=t.sibling;t!==null;)oh(t,e,n),t=t.sibling}function sh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(sh(t,e,n),t=t.sibling;t!==null;)sh(t,e,n),t=t.sibling}var vt=null,mn=!1;function pr(t,e,n){for(n=n.child;n!==null;)q_(t,e,n),n=n.sibling}function q_(t,e,n){if(Pn&&typeof Pn.onCommitFiberUnmount=="function")try{Pn.onCommitFiberUnmount(wu,n)}catch{}switch(n.tag){case 5:Ot||Ki(n,e);case 6:var r=vt,i=mn;vt=null,pr(t,e,n),vt=r,mn=i,vt!==null&&(mn?(t=vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vt.removeChild(n.stateNode));break;case 18:vt!==null&&(mn?(t=vt,n=n.stateNode,t.nodeType===8?qc(t.parentNode,n):t.nodeType===1&&qc(t,n),Vs(t)):qc(vt,n.stateNode));break;case 4:r=vt,i=mn,vt=n.stateNode.containerInfo,mn=!0,pr(t,e,n),vt=r,mn=i;break;case 0:case 11:case 14:case 15:if(!Ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&rh(n,e,s),i=i.next}while(i!==r)}pr(t,e,n);break;case 1:if(!Ot&&(Ki(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ze(n,e,a)}pr(t,e,n);break;case 21:pr(t,e,n);break;case 22:n.mode&1?(Ot=(r=Ot)||n.memoizedState!==null,pr(t,e,n),Ot=r):pr(t,e,n);break;default:pr(t,e,n)}}function Rg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new MS),e.forEach(function(r){var i=WS.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function hn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:vt=a.stateNode,mn=!1;break e;case 3:vt=a.stateNode.containerInfo,mn=!0;break e;case 4:vt=a.stateNode.containerInfo,mn=!0;break e}a=a.return}if(vt===null)throw Error(oe(160));q_(o,s,i),vt=null,mn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ze(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$_(e,t),e=e.sibling}function $_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(hn(e,t),An(t),r&4){try{bs(3,t,t.return),xu(3,t)}catch(v){Ze(t,t.return,v)}try{bs(5,t,t.return)}catch(v){Ze(t,t.return,v)}}break;case 1:hn(e,t),An(t),r&512&&n!==null&&Ki(n,n.return);break;case 5:if(hn(e,t),An(t),r&512&&n!==null&&Ki(n,n.return),t.flags&32){var i=t.stateNode;try{Ds(i,"")}catch(v){Ze(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&f0(i,o),Pf(a,s);var c=Pf(a,o);for(s=0;s<l.length;s+=2){var p=l[s],h=l[s+1];p==="style"?g0(i,h):p==="dangerouslySetInnerHTML"?p0(i,h):p==="children"?Ds(i,h):Kh(i,p,h,c)}switch(a){case"input":kf(i,o);break;case"textarea":h0(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var d=o.value;d!=null?Yi(i,!!o.multiple,d,!1):f!==!!o.multiple&&(o.defaultValue!=null?Yi(i,!!o.multiple,o.defaultValue,!0):Yi(i,!!o.multiple,o.multiple?[]:"",!1))}i[$s]=o}catch(v){Ze(t,t.return,v)}}break;case 6:if(hn(e,t),An(t),r&4){if(t.stateNode===null)throw Error(oe(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(v){Ze(t,t.return,v)}}break;case 3:if(hn(e,t),An(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Vs(e.containerInfo)}catch(v){Ze(t,t.return,v)}break;case 4:hn(e,t),An(t);break;case 13:hn(e,t),An(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Ad=nt())),r&4&&Rg(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Ot=(c=Ot)||p,hn(e,t),Ot=c):hn(e,t),An(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!p&&t.mode&1)for(fe=t,p=t.child;p!==null;){for(h=fe=p;fe!==null;){switch(f=fe,d=f.child,f.tag){case 0:case 11:case 14:case 15:bs(4,f,f.return);break;case 1:Ki(f,f.return);var _=f.stateNode;if(typeof _.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(v){Ze(r,n,v)}}break;case 5:Ki(f,f.return);break;case 22:if(f.memoizedState!==null){Cg(h);continue}}d!==null?(d.return=f,fe=d):Cg(h)}p=p.sibling}e:for(p=null,h=t;;){if(h.tag===5){if(p===null){p=h;try{i=h.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=h.stateNode,l=h.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=m0("display",s))}catch(v){Ze(t,t.return,v)}}}else if(h.tag===6){if(p===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(v){Ze(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;p===h&&(p=null),h=h.return}p===h&&(p=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:hn(e,t),An(t),r&4&&Rg(t);break;case 21:break;default:hn(e,t),An(t)}}function An(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(B_(n)){var r=n;break e}n=n.return}throw Error(oe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ds(i,""),r.flags&=-33);var o=Pg(t);sh(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=Pg(t);oh(t,a,s);break;default:throw Error(oe(161))}}catch(l){Ze(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function VS(t,e,n){fe=t,z_(t)}function z_(t,e,n){for(var r=(t.mode&1)!==0;fe!==null;){var i=fe,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Ya;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ot;a=Ya;var c=Ot;if(Ya=s,(Ot=l)&&!c)for(fe=i;fe!==null;)s=fe,l=s.child,s.tag===22&&s.memoizedState!==null?Dg(i):l!==null?(l.return=s,fe=l):Dg(i);for(;o!==null;)fe=o,z_(o),o=o.sibling;fe=i,Ya=a,Ot=c}Ng(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,fe=o):Ng(t)}}function Ng(t){for(;fe!==null;){var e=fe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ot||xu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ot)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:pn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&gg(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}gg(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var p=c.memoizedState;if(p!==null){var h=p.dehydrated;h!==null&&Vs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}Ot||e.flags&512&&ih(e)}catch(f){Ze(e,e.return,f)}}if(e===t){fe=null;break}if(n=e.sibling,n!==null){n.return=e.return,fe=n;break}fe=e.return}}function Cg(t){for(;fe!==null;){var e=fe;if(e===t){fe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,fe=n;break}fe=e.return}}function Dg(t){for(;fe!==null;){var e=fe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{xu(4,e)}catch(l){Ze(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ze(e,i,l)}}var o=e.return;try{ih(e)}catch(l){Ze(e,o,l)}break;case 5:var s=e.return;try{ih(e)}catch(l){Ze(e,s,l)}}}catch(l){Ze(e,e.return,l)}if(e===t){fe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,fe=a;break}fe=e.return}}var FS=Math.ceil,zl=ur.ReactCurrentDispatcher,Sd=ur.ReactCurrentOwner,sn=ur.ReactCurrentBatchConfig,Pe=0,pt=null,it=null,wt=0,Kt=0,Gi=$r(0),ut=0,Qs=null,hi=0,Ou=0,kd=0,Ss=null,Ut=null,Ad=0,po=1/0,qn=null,Hl=!1,ah=null,Rr=null,Xa=!1,Sr=null,Wl=0,ks=0,lh=null,pl=-1,ml=0;function Mt(){return Pe&6?nt():pl!==-1?pl:pl=nt()}function Nr(t){return t.mode&1?Pe&2&&wt!==0?wt&-wt:TS.transition!==null?(ml===0&&(ml=x0()),ml):(t=De,t!==0||(t=window.event,t=t===void 0?16:L0(t.type)),t):1}function wn(t,e,n,r){if(50<ks)throw ks=0,lh=null,Error(oe(185));oa(t,n,r),(!(Pe&2)||t!==pt)&&(t===pt&&(!(Pe&2)&&(Ou|=n),ut===4&&_r(t,wt)),zt(t,r),n===1&&Pe===0&&!(e.mode&1)&&(po=nt()+500,ku&&zr()))}function zt(t,e){var n=t.callbackNode;Tb(t,e);var r=Ol(t,t===pt?wt:0);if(r===0)n!==null&&$m(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&$m(n),e===1)t.tag===0?ES(Lg.bind(null,t)):e_(Lg.bind(null,t)),yS(function(){!(Pe&6)&&zr()}),n=null;else{switch(O0(r)){case 1:n=Jh;break;case 4:n=A0;break;case 16:n=xl;break;case 536870912:n=I0;break;default:n=xl}n=J_(n,H_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function H_(t,e){if(pl=-1,ml=0,Pe&6)throw Error(oe(327));var n=t.callbackNode;if(to()&&t.callbackNode!==n)return null;var r=Ol(t,t===pt?wt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Kl(t,r);else{e=r;var i=Pe;Pe|=2;var o=K_();(pt!==t||wt!==e)&&(qn=null,po=nt()+500,oi(t,e));do try{qS();break}catch(a){W_(t,a)}while(!0);fd(),zl.current=o,Pe=i,it!==null?e=0:(pt=null,wt=0,e=ut)}if(e!==0){if(e===2&&(i=Lf(t),i!==0&&(r=i,e=uh(t,i))),e===1)throw n=Qs,oi(t,0),_r(t,r),zt(t,nt()),n;if(e===6)_r(t,r);else{if(i=t.current.alternate,!(r&30)&&!US(i)&&(e=Kl(t,r),e===2&&(o=Lf(t),o!==0&&(r=o,e=uh(t,o))),e===1))throw n=Qs,oi(t,0),_r(t,r),zt(t,nt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(oe(345));case 2:Yr(t,Ut,qn);break;case 3:if(_r(t,r),(r&130023424)===r&&(e=Ad+500-nt(),10<e)){if(Ol(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Mt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=$f(Yr.bind(null,t,Ut,qn),e);break}Yr(t,Ut,qn);break;case 4:if(_r(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-_n(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*FS(r/1960))-r,10<r){t.timeoutHandle=$f(Yr.bind(null,t,Ut,qn),r);break}Yr(t,Ut,qn);break;case 5:Yr(t,Ut,qn);break;default:throw Error(oe(329))}}}return zt(t,nt()),t.callbackNode===n?H_.bind(null,t):null}function uh(t,e){var n=Ss;return t.current.memoizedState.isDehydrated&&(oi(t,e).flags|=256),t=Kl(t,e),t!==2&&(e=Ut,Ut=n,e!==null&&ch(e)),t}function ch(t){Ut===null?Ut=t:Ut.push.apply(Ut,t)}function US(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Tn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _r(t,e){for(e&=~kd,e&=~Ou,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-_n(e),r=1<<n;t[n]=-1,e&=~r}}function Lg(t){if(Pe&6)throw Error(oe(327));to();var e=Ol(t,0);if(!(e&1))return zt(t,nt()),null;var n=Kl(t,e);if(t.tag!==0&&n===2){var r=Lf(t);r!==0&&(e=r,n=uh(t,r))}if(n===1)throw n=Qs,oi(t,0),_r(t,e),zt(t,nt()),n;if(n===6)throw Error(oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yr(t,Ut,qn),zt(t,nt()),null}function Id(t,e){var n=Pe;Pe|=1;try{return t(e)}finally{Pe=n,Pe===0&&(po=nt()+500,ku&&zr())}}function di(t){Sr!==null&&Sr.tag===0&&!(Pe&6)&&to();var e=Pe;Pe|=1;var n=sn.transition,r=De;try{if(sn.transition=null,De=1,t)return t()}finally{De=r,sn.transition=n,Pe=e,!(Pe&6)&&zr()}}function xd(){Kt=Gi.current,$e(Gi)}function oi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,gS(n)),it!==null)for(n=it.return;n!==null;){var r=n;switch(ld(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Dl();break;case 3:fo(),$e(qt),$e(Rt),yd();break;case 5:gd(r);break;case 4:fo();break;case 13:$e(Ge);break;case 19:$e(Ge);break;case 10:hd(r.type._context);break;case 22:case 23:xd()}n=n.return}if(pt=t,it=t=Cr(t.current,null),wt=Kt=e,ut=0,Qs=null,kd=Ou=hi=0,Ut=Ss=null,ei!==null){for(e=0;e<ei.length;e++)if(n=ei[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}ei=null}return t}function W_(t,e){do{var n=it;try{if(fd(),fl.current=$l,ql){for(var r=Qe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ql=!1}if(fi=0,ft=at=Qe=null,Ts=!1,Ws=0,Sd.current=null,n===null||n.return===null){ut=1,Qs=e,it=null;break}e:{var o=t,s=n.return,a=n,l=e;if(e=wt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,p=a,h=p.tag;if(!(p.mode&1)&&(h===0||h===11||h===15)){var f=p.alternate;f?(p.updateQueue=f.updateQueue,p.memoizedState=f.memoizedState,p.lanes=f.lanes):(p.updateQueue=null,p.memoizedState=null)}var d=Tg(s);if(d!==null){d.flags&=-257,bg(d,s,a,o,e),d.mode&1&&Eg(o,c,e),e=d,l=c;var _=e.updateQueue;if(_===null){var v=new Set;v.add(l),e.updateQueue=v}else _.add(l);break e}else{if(!(e&1)){Eg(o,c,e),Od();break e}l=Error(oe(426))}}else if(ze&&a.mode&1){var E=Tg(s);if(E!==null){!(E.flags&65536)&&(E.flags|=256),bg(E,s,a,o,e),ud(ho(l,a));break e}}o=l=ho(l,a),ut!==4&&(ut=2),Ss===null?Ss=[o]:Ss.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var m=O_(o,l,e);mg(o,m);break e;case 1:a=l;var g=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Rr===null||!Rr.has(w)))){o.flags|=65536,e&=-e,o.lanes|=e;var y=P_(o,a,e);mg(o,y);break e}}o=o.return}while(o!==null)}Q_(n)}catch(I){e=I,it===n&&n!==null&&(it=n=n.return);continue}break}while(!0)}function K_(){var t=zl.current;return zl.current=$l,t===null?$l:t}function Od(){(ut===0||ut===3||ut===2)&&(ut=4),pt===null||!(hi&268435455)&&!(Ou&268435455)||_r(pt,wt)}function Kl(t,e){var n=Pe;Pe|=2;var r=K_();(pt!==t||wt!==e)&&(qn=null,oi(t,e));do try{BS();break}catch(i){W_(t,i)}while(!0);if(fd(),Pe=n,zl.current=r,it!==null)throw Error(oe(261));return pt=null,wt=0,ut}function BS(){for(;it!==null;)G_(it)}function qS(){for(;it!==null&&!db();)G_(it)}function G_(t){var e=X_(t.alternate,t,Kt);t.memoizedProps=t.pendingProps,e===null?Q_(t):it=e,Sd.current=null}function Q_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=LS(n,e),n!==null){n.flags&=32767,it=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ut=6,it=null;return}}else if(n=DS(n,e,Kt),n!==null){it=n;return}if(e=e.sibling,e!==null){it=e;return}it=e=t}while(e!==null);ut===0&&(ut=5)}function Yr(t,e,n){var r=De,i=sn.transition;try{sn.transition=null,De=1,$S(t,e,n,r)}finally{sn.transition=i,De=r}return null}function $S(t,e,n,r){do to();while(Sr!==null);if(Pe&6)throw Error(oe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(oe(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(bb(t,o),t===pt&&(it=pt=null,wt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Xa||(Xa=!0,J_(xl,function(){return to(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=sn.transition,sn.transition=null;var s=De;De=1;var a=Pe;Pe|=4,Sd.current=null,jS(t,n),$_(n,t),uS(Bf),Pl=!!Uf,Bf=Uf=null,t.current=n,VS(n),pb(),Pe=a,De=s,sn.transition=o}else t.current=n;if(Xa&&(Xa=!1,Sr=t,Wl=i),o=t.pendingLanes,o===0&&(Rr=null),yb(n.stateNode),zt(t,nt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,t=ah,ah=null,t;return Wl&1&&t.tag!==0&&to(),o=t.pendingLanes,o&1?t===lh?ks++:(ks=0,lh=t):ks=0,zr(),null}function to(){if(Sr!==null){var t=O0(Wl),e=sn.transition,n=De;try{if(sn.transition=null,De=16>t?16:t,Sr===null)var r=!1;else{if(t=Sr,Sr=null,Wl=0,Pe&6)throw Error(oe(331));var i=Pe;for(Pe|=4,fe=t.current;fe!==null;){var o=fe,s=o.child;if(fe.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(fe=c;fe!==null;){var p=fe;switch(p.tag){case 0:case 11:case 15:bs(8,p,o)}var h=p.child;if(h!==null)h.return=p,fe=h;else for(;fe!==null;){p=fe;var f=p.sibling,d=p.return;if(U_(p),p===c){fe=null;break}if(f!==null){f.return=d,fe=f;break}fe=d}}}var _=o.alternate;if(_!==null){var v=_.child;if(v!==null){_.child=null;do{var E=v.sibling;v.sibling=null,v=E}while(v!==null)}}fe=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,fe=s;else e:for(;fe!==null;){if(o=fe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:bs(9,o,o.return)}var m=o.sibling;if(m!==null){m.return=o.return,fe=m;break e}fe=o.return}}var g=t.current;for(fe=g;fe!==null;){s=fe;var w=s.child;if(s.subtreeFlags&2064&&w!==null)w.return=s,fe=w;else e:for(s=g;fe!==null;){if(a=fe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:xu(9,a)}}catch(I){Ze(a,a.return,I)}if(a===s){fe=null;break e}var y=a.sibling;if(y!==null){y.return=a.return,fe=y;break e}fe=a.return}}if(Pe=i,zr(),Pn&&typeof Pn.onPostCommitFiberRoot=="function")try{Pn.onPostCommitFiberRoot(wu,t)}catch{}r=!0}return r}finally{De=n,sn.transition=e}}return!1}function Mg(t,e,n){e=ho(n,e),e=O_(t,e,1),t=Pr(t,e,1),e=Mt(),t!==null&&(oa(t,1,e),zt(t,e))}function Ze(t,e,n){if(t.tag===3)Mg(t,t,n);else for(;e!==null;){if(e.tag===3){Mg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Rr===null||!Rr.has(r))){t=ho(n,t),t=P_(e,t,1),e=Pr(e,t,1),t=Mt(),e!==null&&(oa(e,1,t),zt(e,t));break}}e=e.return}}function zS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Mt(),t.pingedLanes|=t.suspendedLanes&n,pt===t&&(wt&n)===n&&(ut===4||ut===3&&(wt&130023424)===wt&&500>nt()-Ad?oi(t,0):kd|=n),zt(t,e)}function Y_(t,e){e===0&&(t.mode&1?(e=Ba,Ba<<=1,!(Ba&130023424)&&(Ba=4194304)):e=1);var n=Mt();t=rr(t,e),t!==null&&(oa(t,e,n),zt(t,n))}function HS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Y_(t,n)}function WS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(oe(314))}r!==null&&r.delete(e),Y_(t,n)}var X_;X_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||qt.current)Bt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Bt=!1,CS(t,e,n);Bt=!!(t.flags&131072)}else Bt=!1,ze&&e.flags&1048576&&t_(e,jl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;dl(t,e),t=e.pendingProps;var i=lo(e,Rt.current);eo(e,n),i=_d(null,e,r,t,i,n);var o=wd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$t(r)?(o=!0,Ll(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,pd(e),i.updater=Iu,e.stateNode=i,i._reactInternals=e,Yf(e,r,t,n),e=Zf(null,e,r,!0,o,n)):(e.tag=0,ze&&o&&ad(e),Lt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(dl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=GS(r),t=pn(r,t),i){case 0:e=Jf(null,e,r,t,n);break e;case 1:e=Ag(null,e,r,t,n);break e;case 11:e=Sg(null,e,r,t,n);break e;case 14:e=kg(null,e,r,pn(r.type,t),n);break e}throw Error(oe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pn(r,i),Jf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pn(r,i),Ag(t,e,r,i,n);case 3:e:{if(D_(e),t===null)throw Error(oe(387));r=e.pendingProps,o=e.memoizedState,i=o.element,a_(t,e),Ul(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=ho(Error(oe(423)),e),e=Ig(t,e,r,n,i);break e}else if(r!==i){i=ho(Error(oe(424)),e),e=Ig(t,e,r,n,i);break e}else for(Qt=Or(e.stateNode.containerInfo.firstChild),Yt=e,ze=!0,gn=null,n=o_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(uo(),r===i){e=ir(t,e,n);break e}Lt(t,e,r,n)}e=e.child}return e;case 5:return l_(e),t===null&&Kf(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,qf(r,i)?s=null:o!==null&&qf(r,o)&&(e.flags|=32),C_(t,e),Lt(t,e,s,n),e.child;case 6:return t===null&&Kf(e),null;case 13:return L_(t,e,n);case 4:return md(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=co(e,null,r,n):Lt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pn(r,i),Sg(t,e,r,i,n);case 7:return Lt(t,e,e.pendingProps,n),e.child;case 8:return Lt(t,e,e.pendingProps.children,n),e.child;case 12:return Lt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Ve(Vl,r._currentValue),r._currentValue=s,o!==null)if(Tn(o.value,s)){if(o.children===i.children&&!qt.current){e=ir(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Jn(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var p=c.pending;p===null?l.next=l:(l.next=p.next,p.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Gf(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(oe(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Gf(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Lt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,eo(e,n),i=un(i),r=r(i),e.flags|=1,Lt(t,e,r,n),e.child;case 14:return r=e.type,i=pn(r,e.pendingProps),i=pn(r.type,i),kg(t,e,r,i,n);case 15:return R_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pn(r,i),dl(t,e),e.tag=1,$t(r)?(t=!0,Ll(e)):t=!1,eo(e,n),x_(e,r,i),Yf(e,r,i,n),Zf(null,e,r,!0,t,n);case 19:return M_(t,e,n);case 22:return N_(t,e,n)}throw Error(oe(156,e.tag))};function J_(t,e){return k0(t,e)}function KS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(t,e,n,r){return new KS(t,e,n,r)}function Pd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function GS(t){if(typeof t=="function")return Pd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Qh)return 11;if(t===Yh)return 14}return 2}function Cr(t,e){var n=t.alternate;return n===null?(n=on(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function gl(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Pd(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Vi:return si(n.children,i,o,e);case Gh:s=8,i|=8;break;case wf:return t=on(12,n,e,i|2),t.elementType=wf,t.lanes=o,t;case Ef:return t=on(13,n,e,i),t.elementType=Ef,t.lanes=o,t;case Tf:return t=on(19,n,e,i),t.elementType=Tf,t.lanes=o,t;case l0:return Pu(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case s0:s=10;break e;case a0:s=9;break e;case Qh:s=11;break e;case Yh:s=14;break e;case gr:s=16,r=null;break e}throw Error(oe(130,t==null?t:typeof t,""))}return e=on(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function si(t,e,n,r){return t=on(7,t,r,e),t.lanes=n,t}function Pu(t,e,n,r){return t=on(22,t,r,e),t.elementType=l0,t.lanes=n,t.stateNode={isHidden:!1},t}function Yc(t,e,n){return t=on(6,t,null,e),t.lanes=n,t}function Xc(t,e,n){return e=on(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function QS(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rc(0),this.expirationTimes=Rc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Rd(t,e,n,r,i,o,s,a,l){return t=new QS(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=on(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},pd(o),t}function YS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ji,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Z_(t){if(!t)return jr;t=t._reactInternals;e:{if(Si(t)!==t||t.tag!==1)throw Error(oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($t(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(oe(171))}if(t.tag===1){var n=t.type;if($t(n))return Z0(t,n,e)}return e}function e1(t,e,n,r,i,o,s,a,l){return t=Rd(n,r,!0,t,i,o,s,a,l),t.context=Z_(null),n=t.current,r=Mt(),i=Nr(n),o=Jn(r,i),o.callback=e??null,Pr(n,o,i),t.current.lanes=i,oa(t,i,r),zt(t,r),t}function Ru(t,e,n,r){var i=e.current,o=Mt(),s=Nr(i);return n=Z_(n),e.context===null?e.context=n:e.pendingContext=n,e=Jn(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Pr(i,e,s),t!==null&&(wn(t,i,s,o),cl(t,i,s)),s}function Gl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function jg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Nd(t,e){jg(t,e),(t=t.alternate)&&jg(t,e)}function XS(){return null}var t1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Cd(t){this._internalRoot=t}Nu.prototype.render=Cd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(oe(409));Ru(t,e,null,null)};Nu.prototype.unmount=Cd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;di(function(){Ru(null,t,null,null)}),e[nr]=null}};function Nu(t){this._internalRoot=t}Nu.prototype.unstable_scheduleHydration=function(t){if(t){var e=N0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<vr.length&&e!==0&&e<vr[n].priority;n++);vr.splice(n,0,t),n===0&&D0(t)}};function Dd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Cu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Vg(){}function JS(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=Gl(s);o.call(c)}}var s=e1(e,r,t,0,null,!1,!1,"",Vg);return t._reactRootContainer=s,t[nr]=s.current,Bs(t.nodeType===8?t.parentNode:t),di(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Gl(l);a.call(c)}}var l=Rd(t,0,!1,null,null,!1,!1,"",Vg);return t._reactRootContainer=l,t[nr]=l.current,Bs(t.nodeType===8?t.parentNode:t),di(function(){Ru(e,l,n,r)}),l}function Du(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=Gl(s);a.call(l)}}Ru(e,s,t,i)}else s=JS(n,e,t,i,r);return Gl(s)}P0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=hs(e.pendingLanes);n!==0&&(Zh(e,n|1),zt(e,nt()),!(Pe&6)&&(po=nt()+500,zr()))}break;case 13:di(function(){var r=rr(t,1);if(r!==null){var i=Mt();wn(r,t,1,i)}}),Nd(t,1)}};ed=function(t){if(t.tag===13){var e=rr(t,134217728);if(e!==null){var n=Mt();wn(e,t,134217728,n)}Nd(t,134217728)}};R0=function(t){if(t.tag===13){var e=Nr(t),n=rr(t,e);if(n!==null){var r=Mt();wn(n,t,e,r)}Nd(t,e)}};N0=function(){return De};C0=function(t,e){var n=De;try{return De=t,e()}finally{De=n}};Nf=function(t,e,n){switch(e){case"input":if(kf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Su(r);if(!i)throw Error(oe(90));c0(r),kf(r,i)}}}break;case"textarea":h0(t,n);break;case"select":e=n.value,e!=null&&Yi(t,!!n.multiple,e,!1)}};_0=Id;w0=di;var ZS={usingClientEntryPoint:!1,Events:[aa,qi,Su,y0,v0,Id]},ss={findFiberByHostInstance:Zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ek={bundleType:ss.bundleType,version:ss.version,rendererPackageName:ss.rendererPackageName,rendererConfig:ss.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ur.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=b0(t),t===null?null:t.stateNode},findFiberByHostInstance:ss.findFiberByHostInstance||XS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ja=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ja.isDisabled&&Ja.supportsFiber)try{wu=Ja.inject(ek),Pn=Ja}catch{}}Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZS;Zt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dd(e))throw Error(oe(200));return YS(t,e,null,n)};Zt.createRoot=function(t,e){if(!Dd(t))throw Error(oe(299));var n=!1,r="",i=t1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Rd(t,1,!1,null,null,n,!1,r,i),t[nr]=e.current,Bs(t.nodeType===8?t.parentNode:t),new Cd(e)};Zt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(oe(188)):(t=Object.keys(t).join(","),Error(oe(268,t)));return t=b0(e),t=t===null?null:t.stateNode,t};Zt.flushSync=function(t){return di(t)};Zt.hydrate=function(t,e,n){if(!Cu(e))throw Error(oe(200));return Du(null,t,e,!0,n)};Zt.hydrateRoot=function(t,e,n){if(!Dd(t))throw Error(oe(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=t1;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=e1(e,null,t,1,n??null,i,!1,o,s),t[nr]=e.current,Bs(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Nu(e)};Zt.render=function(t,e,n){if(!Cu(e))throw Error(oe(200));return Du(null,t,e,!1,n)};Zt.unmountComponentAtNode=function(t){if(!Cu(t))throw Error(oe(40));return t._reactRootContainer?(di(function(){Du(null,null,t,!1,function(){t._reactRootContainer=null,t[nr]=null})}),!0):!1};Zt.unstable_batchedUpdates=Id;Zt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Cu(n))throw Error(oe(200));if(t==null||t._reactInternals===void 0)throw Error(oe(38));return Du(t,e,n,!1,r)};Zt.version="18.3.1-next-f1338f8080-20240426";function n1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n1)}catch(t){console.error(t)}}n1(),n0.exports=Zt;var r1=n0.exports,Fg=r1;vf.createRoot=Fg.createRoot,vf.hydrateRoot=Fg.hydrateRoot;var Ug={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},tk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],a=t[n++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},o1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,p=o>>2,h=(o&3)<<4|a>>4;let f=(a&15)<<2|c>>6,d=c&63;l||(d=64,s||(f=64)),r.push(n[p],n[h],n[f],n[d])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(i1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):tk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||c==null||h==null)throw new nk;const f=o<<2|a>>4;if(r.push(f),c!==64){const d=a<<4&240|c>>2;if(r.push(d),h!==64){const _=c<<6&192|h;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class nk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rk=function(t){const e=i1(t);return o1.encodeByteArray(e,!0)},Ql=function(t){return rk(t).replace(/\./g,"")},s1=function(t){try{return o1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=()=>ik().__FIREBASE_DEFAULTS__,sk=()=>{if(typeof process>"u"||typeof Ug>"u")return;const t=Ug.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ak=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&s1(t[1]);return e&&JSON.parse(e)},Lu=()=>{try{return ok()||sk()||ak()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},a1=t=>{var e,n;return(n=(e=Lu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},lk=t=>{const e=a1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},l1=()=>{var t;return(t=Lu())===null||t===void 0?void 0:t.config},u1=t=>{var e;return(e=Lu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ql(JSON.stringify(n)),Ql(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nt())}function hk(){var t;const e=(t=Lu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function c1(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function pk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mk(){const t=Nt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function gk(){return!hk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function f1(){try{return typeof indexedDB=="object"}catch{return!1}}function h1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function yk(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk="FirebaseError";class Sn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=vk,Object.setPrototypeOf(this,Sn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ki.prototype.create)}}class ki{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?_k(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Sn(i,a,r)}}function _k(t,e){return t.replace(wk,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const wk=/\{\$([^}]+)}/g;function Ek(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ys(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(Bg(o)&&Bg(s)){if(!Ys(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Bg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ua(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Tk(t,e){const n=new bk(t,e);return n.subscribe.bind(n)}class bk{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Sk(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Jc),i.error===void 0&&(i.error=Jc),i.complete===void 0&&(i.complete=Jc);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Sk(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Jc(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=1e3,Ak=2,Ik=4*60*60*1e3,xk=.5;function qg(t,e=kk,n=Ak){const r=e*Math.pow(n,t),i=Math.round(xk*r*(Math.random()-.5)*2);return Math.min(Ik,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(t){return t&&t._delegate?t._delegate:t}class bn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new uk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Rk(e))try{this.getOrInitializeService({instanceIdentifier:Xr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Xr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xr){return this.instances.has(e)}getOptions(e=Xr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Pk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xr){return this.component?this.component.multipleInstances?e:Xr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Pk(t){return t===Xr?void 0:t}function Rk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Ok(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ie||(Ie={}));const Ck={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},Dk=Ie.INFO,Lk={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},Mk=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Lk[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mu{constructor(e){this.name=e,this._logLevel=Dk,this._logHandler=Mk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ck[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}}const jk=(t,e)=>e.some(n=>t instanceof n);let $g,zg;function Vk(){return $g||($g=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Fk(){return zg||(zg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const d1=new WeakMap,fh=new WeakMap,p1=new WeakMap,Zc=new WeakMap,Ld=new WeakMap;function Uk(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Dr(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&d1.set(n,t)}).catch(()=>{}),Ld.set(e,t),e}function Bk(t){if(fh.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});fh.set(t,e)}let hh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return fh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||p1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function qk(t){hh=t(hh)}function $k(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ef(this),e,...n);return p1.set(r,e.sort?e.sort():[e]),Dr(r)}:Fk().includes(t)?function(...e){return t.apply(ef(this),e),Dr(d1.get(this))}:function(...e){return Dr(t.apply(ef(this),e))}}function zk(t){return typeof t=="function"?$k(t):(t instanceof IDBTransaction&&Bk(t),jk(t,Vk())?new Proxy(t,hh):t)}function Dr(t){if(t instanceof IDBRequest)return Uk(t);if(Zc.has(t))return Zc.get(t);const e=zk(t);return e!==t&&(Zc.set(t,e),Ld.set(e,t)),e}const ef=t=>Ld.get(t);function m1(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=Dr(s);return r&&s.addEventListener("upgradeneeded",l=>{r(Dr(s.result),l.oldVersion,l.newVersion,Dr(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Hk=["get","getKey","getAll","getAllKeys","count"],Wk=["put","add","delete","clear"],tf=new Map;function Hg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(tf.get(e))return tf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Wk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Hk.includes(n)))return;const o=async function(s,...a){const l=this.transaction(s,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return tf.set(e,o),o}qk(t=>({...t,get:(e,n,r)=>Hg(e,n)||t.get(e,n,r),has:(e,n)=>!!Hg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Gk(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Gk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const dh="@firebase/app",Wg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or=new Mu("@firebase/app"),Qk="@firebase/app-compat",Yk="@firebase/analytics-compat",Xk="@firebase/analytics",Jk="@firebase/app-check-compat",Zk="@firebase/app-check",eA="@firebase/auth",tA="@firebase/auth-compat",nA="@firebase/database",rA="@firebase/data-connect",iA="@firebase/database-compat",oA="@firebase/functions",sA="@firebase/functions-compat",aA="@firebase/installations",lA="@firebase/installations-compat",uA="@firebase/messaging",cA="@firebase/messaging-compat",fA="@firebase/performance",hA="@firebase/performance-compat",dA="@firebase/remote-config",pA="@firebase/remote-config-compat",mA="@firebase/storage",gA="@firebase/storage-compat",yA="@firebase/firestore",vA="@firebase/vertexai-preview",_A="@firebase/firestore-compat",wA="firebase",EA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph="[DEFAULT]",TA={[dh]:"fire-core",[Qk]:"fire-core-compat",[Xk]:"fire-analytics",[Yk]:"fire-analytics-compat",[Zk]:"fire-app-check",[Jk]:"fire-app-check-compat",[eA]:"fire-auth",[tA]:"fire-auth-compat",[nA]:"fire-rtdb",[rA]:"fire-data-connect",[iA]:"fire-rtdb-compat",[oA]:"fire-fn",[sA]:"fire-fn-compat",[aA]:"fire-iid",[lA]:"fire-iid-compat",[uA]:"fire-fcm",[cA]:"fire-fcm-compat",[fA]:"fire-perf",[hA]:"fire-perf-compat",[dA]:"fire-rc",[pA]:"fire-rc-compat",[mA]:"fire-gcs",[gA]:"fire-gcs-compat",[yA]:"fire-fst",[_A]:"fire-fst-compat",[vA]:"fire-vertex","fire-js":"fire-js",[wA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl=new Map,bA=new Map,mh=new Map;function Kg(t,e){try{t.container.addComponent(e)}catch(n){or.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Mn(t){const e=t.name;if(mh.has(e))return or.debug(`There were multiple attempts to register component ${e}.`),!1;mh.set(e,t);for(const n of Yl.values())Kg(n,t);for(const n of bA.values())Kg(n,t);return!0}function Ai(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Gn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Lr=new ki("app","Firebase",SA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Lr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=EA;function g1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ph,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Lr.create("bad-app-name",{appName:String(i)});if(n||(n=l1()),!n)throw Lr.create("no-options");const o=Yl.get(i);if(o){if(Ys(n,o.options)&&Ys(r,o.config))return o;throw Lr.create("duplicate-app",{appName:i})}const s=new Nk(i);for(const l of mh.values())s.addComponent(l);const a=new kA(n,r,s);return Yl.set(i,a),a}function Md(t=ph){const e=Yl.get(t);if(!e&&t===ph&&l1())return g1();if(!e)throw Lr.create("no-app",{appName:t});return e}function an(t,e,n){var r;let i=(r=TA[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),or.warn(a.join(" "));return}Mn(new bn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA="firebase-heartbeat-database",IA=1,Xs="firebase-heartbeat-store";let nf=null;function y1(){return nf||(nf=m1(AA,IA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Xs)}catch(n){console.warn(n)}}}}).catch(t=>{throw Lr.create("idb-open",{originalErrorMessage:t.message})})),nf}async function xA(t){try{const n=(await y1()).transaction(Xs),r=await n.objectStore(Xs).get(v1(t));return await n.done,r}catch(e){if(e instanceof Sn)or.warn(e.message);else{const n=Lr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});or.warn(n.message)}}}async function Gg(t,e){try{const r=(await y1()).transaction(Xs,"readwrite");await r.objectStore(Xs).put(e,v1(t)),await r.done}catch(n){if(n instanceof Sn)or.warn(n.message);else{const r=Lr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});or.warn(r.message)}}}function v1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=1024,PA=30*24*60*60*1e3;class RA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new CA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Qg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const a=new Date(s.date).valueOf();return Date.now()-a<=PA}),this._storage.overwrite(this._heartbeatsCache))}catch(r){or.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Qg(),{heartbeatsToSend:r,unsentEntries:i}=NA(this._heartbeatsCache.heartbeats),o=Ql(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return or.warn(n),""}}}function Qg(){return new Date().toISOString().substring(0,10)}function NA(t,e=OA){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Yg(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Yg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class CA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return f1()?h1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await xA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Gg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Gg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Yg(t){return Ql(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(t){Mn(new bn("platform-logger",e=>new Kk(e),"PRIVATE")),Mn(new bn("heartbeat",e=>new RA(e),"PRIVATE")),an(dh,Wg,t),an(dh,Wg,"esm2017"),an("fire-js","")}DA("");var LA="firebase",MA="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an(LA,MA,"app");function jd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function _1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jA=_1,w1=new ki("auth","Firebase",_1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=new Mu("@firebase/auth");function VA(t,...e){Xl.logLevel<=Ie.WARN&&Xl.warn(`Auth (${Ao}): ${t}`,...e)}function yl(t,...e){Xl.logLevel<=Ie.ERROR&&Xl.error(`Auth (${Ao}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(t,...e){throw Fd(t,...e)}function En(t,...e){return Fd(t,...e)}function Vd(t,e,n){const r=Object.assign(Object.assign({},jA()),{[e]:n});return new ki("auth","Firebase",r).create(e,{appName:t.name})}function ai(t){return Vd(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function FA(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&jn(t,"argument-error"),Vd(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Fd(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return w1.create(t,...e)}function ye(t,e,...n){if(!t)throw Fd(e,...n)}function Qn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw yl(e),new Error(e)}function sr(t,e){t||Qn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function UA(){return Xg()==="http:"||Xg()==="https:"}function Xg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(UA()||c1()||"connection"in navigator)?navigator.onLine:!0}function qA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n){this.shortDelay=e,this.longDelay=n,sr(n>e,"Short delay should be less than long delay!"),this.isMobile=fk()||pk()}get(){return BA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(t,e){sr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=new ca(3e4,6e4);function Bd(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Io(t,e,n,r,i={}){return T1(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const a=ua(Object.assign({key:t.config.apiKey},s)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},o);return dk()||(c.referrerPolicy="no-referrer"),E1.fetch()(b1(t,t.config.apiHost,n,a),c)})}async function T1(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},$A),e);try{const i=new WA(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw Za(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Za(t,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw Za(t,"email-already-in-use",s);if(l==="USER_DISABLED")throw Za(t,"user-disabled",s);const p=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Vd(t,p,c);jn(t,p)}}catch(i){if(i instanceof Sn)throw i;jn(t,"network-request-failed",{message:String(i)})}}async function HA(t,e,n,r,i={}){const o=await Io(t,e,n,r,i);return"mfaPendingCredential"in o&&jn(t,"multi-factor-auth-required",{_serverResponse:o}),o}function b1(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Ud(t.config,i):`${t.config.apiScheme}://${i}`}class WA{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(En(this.auth,"network-request-failed")),zA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Za(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=En(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KA(t,e){return Io(t,"POST","/v1/accounts:delete",e)}async function S1(t,e){return Io(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function GA(t,e=!1){const n=Ct(t),r=await n.getIdToken(e),i=qd(r);ye(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:As(rf(i.auth_time)),issuedAtTime:As(rf(i.iat)),expirationTime:As(rf(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function rf(t){return Number(t)*1e3}function qd(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return yl("JWT malformed, contained fewer than 3 sections"),null;try{const i=s1(n);return i?JSON.parse(i):(yl("Failed to decode base64 JWT payload"),null)}catch(i){return yl("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Jg(t){const e=qd(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Js(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Sn&&QA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function QA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=As(this.lastLoginAt),this.creationTime=As(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jl(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Js(t,S1(n,{idToken:r}));ye(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?k1(o.providerUserInfo):[],a=JA(t.providerData,s),l=t.isAnonymous,c=!(t.email&&o.passwordHash)&&!(a!=null&&a.length),p=l?c:!1,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new yh(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(t,h)}async function XA(t){const e=Ct(t);await Jl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JA(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function k1(t){return t.map(e=>{var{providerId:n}=e,r=jd(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZA(t,e){const n=await T1(t,{},async()=>{const r=ua({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=b1(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",E1.fetch()(s,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function eI(t,e){return Io(t,"POST","/v2/accounts:revokeToken",Bd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Jg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=Jg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await ZA(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new no;return r&&(ye(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ye(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ye(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new no,this.toJSON())}_performRefresh(){return Qn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Yn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=jd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new YA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new yh(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Js(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return GA(this,e)}reload(){return XA(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Yn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Jl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gn(this.auth.app))return Promise.reject(ai(this.auth));const e=await this.getIdToken();return await Js(this,KA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,l,c,p;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,d=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,_=(s=n.photoURL)!==null&&s!==void 0?s:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,E=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,m=(c=n.createdAt)!==null&&c!==void 0?c:void 0,g=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:w,emailVerified:y,isAnonymous:I,providerData:C,stsTokenManager:S}=n;ye(w&&S,e,"internal-error");const T=no.fromJSON(this.name,S);ye(typeof w=="string",e,"internal-error"),mr(h,e.name),mr(f,e.name),ye(typeof y=="boolean",e,"internal-error"),ye(typeof I=="boolean",e,"internal-error"),mr(d,e.name),mr(_,e.name),mr(v,e.name),mr(E,e.name),mr(m,e.name),mr(g,e.name);const P=new Yn({uid:w,auth:e,email:f,emailVerified:y,displayName:h,isAnonymous:I,photoURL:_,phoneNumber:d,tenantId:v,stsTokenManager:T,createdAt:m,lastLoginAt:g});return C&&Array.isArray(C)&&(P.providerData=C.map(b=>Object.assign({},b))),E&&(P._redirectEventId=E),P}static async _fromIdTokenResponse(e,n,r=!1){const i=new no;i.updateFromServerResponse(n);const o=new Yn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Jl(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ye(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?k1(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),a=new no;a.updateFromIdToken(r);const l=new Yn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new yh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg=new Map;function Xn(t){sr(t instanceof Function,"Expected a class definition");let e=Zg.get(t);return e?(sr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Zg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}A1.type="NONE";const ey=A1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(t,e,n){return`firebase:${t}:${e}:${n}`}class ro{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=vl(this.userKey,i.apiKey,o),this.fullPersistenceKey=vl("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Yn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ro(Xn(ey),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let o=i[0]||Xn(ey);const s=vl(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const p=await c._get(s);if(p){const h=Yn._fromJSON(e,p);c!==o&&(a=h),o=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new ro(o,e,r):(o=l[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==o)try{await c._remove(s)}catch{}})),new ro(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(P1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(I1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(N1(e))return"Blackberry";if(C1(e))return"Webos";if(x1(e))return"Safari";if((e.includes("chrome/")||O1(e))&&!e.includes("edge/"))return"Chrome";if(R1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function I1(t=Nt()){return/firefox\//i.test(t)}function x1(t=Nt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function O1(t=Nt()){return/crios\//i.test(t)}function P1(t=Nt()){return/iemobile/i.test(t)}function R1(t=Nt()){return/android/i.test(t)}function N1(t=Nt()){return/blackberry/i.test(t)}function C1(t=Nt()){return/webos/i.test(t)}function $d(t=Nt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function tI(t=Nt()){var e;return $d(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function nI(){return mk()&&document.documentMode===10}function D1(t=Nt()){return $d(t)||R1(t)||C1(t)||N1(t)||/windows phone/i.test(t)||P1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(t,e=[]){let n;switch(t){case"Browser":n=ty(Nt());break;case"Worker":n=`${ty(Nt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ao}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,a)=>{try{const l=e(o);s(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iI(t,e={}){return Io(t,"GET","/v2/passwordPolicy",Bd(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=6;class sI{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:oI,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ny(this),this.idTokenSubscription=new ny(this),this.beforeStateQueue=new rI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=w1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await ro.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await S1(this,{idToken:e}),r=await Yn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Gn(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===a)&&(l!=null&&l.user)&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Jl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=qA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gn(this.app))return Promise.reject(ai(this));const n=e?Ct(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gn(this.app)?Promise.reject(ai(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gn(this.app)?Promise.reject(ai(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await iI(this),n=new sI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ki("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await eI(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Xn(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await ro.create(this,[Xn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{s=!0,l()}}else{const l=e.addObserver(n);return()=>{s=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=L1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&VA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ju(t){return Ct(t)}class ny{constructor(e){this.auth=e,this.observer=null,this.addObserver=Tk(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lI(t){zd=t}function uI(t){return zd.loadJS(t)}function cI(){return zd.gapiScript}function fI(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(t,e){const n=Ai(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(Ys(o,e??{}))return i;jn(i,"already-initialized")}return n.initialize({options:e})}function dI(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Xn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function pI(t,e,n){const r=ju(t);ye(r._canInitEmulator,r,"emulator-config-failed"),ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=M1(e),{host:s,port:a}=mI(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),gI()}function M1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function mI(t){const e=M1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:ry(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:ry(s)}}}function ry(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function gI(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qn("not implemented")}_getIdTokenResponse(e){return Qn("not implemented")}_linkToIdToken(e,n){return Qn("not implemented")}_getReauthenticationResolver(e){return Qn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function io(t,e){return HA(t,"POST","/v1/accounts:signInWithIdp",Bd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI="http://localhost";class pi extends j1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new pi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):jn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=jd(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new pi(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return io(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,io(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,io(e,n)}buildRequest(){const e={requestUri:yI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ua(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa extends Hd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends fa{constructor(){super("facebook.com")}static credential(e){return pi._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wr.credential(e.oauthAccessToken)}catch{return null}}}wr.FACEBOOK_SIGN_IN_METHOD="facebook.com";wr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn extends fa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return pi._fromParams({providerId:Hn.PROVIDER_ID,signInMethod:Hn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Hn.credentialFromTaggedObject(e)}static credentialFromError(e){return Hn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Hn.credential(n,r)}catch{return null}}}Hn.GOOGLE_SIGN_IN_METHOD="google.com";Hn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends fa{constructor(){super("github.com")}static credential(e){return pi._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Er.credential(e.oauthAccessToken)}catch{return null}}}Er.GITHUB_SIGN_IN_METHOD="github.com";Er.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends fa{constructor(){super("twitter.com")}static credential(e,n){return pi._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Tr.credential(n,r)}catch{return null}}}Tr.TWITTER_SIGN_IN_METHOD="twitter.com";Tr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await Yn._fromIdTokenResponse(e,r,i),s=iy(r);return new mo({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=iy(r);return new mo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function iy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl extends Sn{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Zl.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Zl(e,n,r,i)}}function V1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Zl._fromErrorAndOperation(t,o,e,r):o})}async function vI(t,e,n=!1){const r=await Js(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return mo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _I(t,e,n=!1){const{auth:r}=t;if(Gn(r.app))return Promise.reject(ai(r));const i="reauthenticate";try{const o=await Js(t,V1(r,i,e,t),n);ye(o.idToken,r,"internal-error");const s=qd(o.idToken);ye(s,r,"internal-error");const{sub:a}=s;return ye(t.uid===a,r,"user-mismatch"),mo._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&jn(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wI(t,e,n=!1){if(Gn(t.app))return Promise.reject(ai(t));const r="signIn",i=await V1(t,r,e),o=await mo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}function EI(t,e,n,r){return Ct(t).onIdTokenChanged(e,n,r)}function TI(t,e,n){return Ct(t).beforeAuthStateChanged(e,n)}function bI(t,e,n,r){return Ct(t).onAuthStateChanged(e,n,r)}function SI(t){return Ct(t).signOut()}const eu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(eu,"1"),this.storage.removeItem(eu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=1e3,AI=10;class U1 extends F1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=D1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,a,l)=>{this.notifyListeners(s,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);nI()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,AI):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},kI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}U1.type="LOCAL";const II=U1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1 extends F1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}B1.type="SESSION";const q1=B1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Vu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(s).map(async c=>c(n.origin,o)),l=await xI(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Vu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,l)=>{const c=Wd("",20);i.port1.start();const p=setTimeout(()=>{l(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(f.data.response);break;default:clearTimeout(p),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(){return window}function PI(t){Nn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(){return typeof Nn().WorkerGlobalScope<"u"&&typeof Nn().importScripts=="function"}async function RI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function NI(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function CI(){return $1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1="firebaseLocalStorageDb",DI=1,tu="firebaseLocalStorage",H1="fbase_key";class ha{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Fu(t,e){return t.transaction([tu],e?"readwrite":"readonly").objectStore(tu)}function LI(){const t=indexedDB.deleteDatabase(z1);return new ha(t).toPromise()}function vh(){const t=indexedDB.open(z1,DI);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(tu,{keyPath:H1})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(tu)?e(r):(r.close(),await LI(),e(await vh()))})})}async function oy(t,e,n){const r=Fu(t,!0).put({[H1]:e,value:n});return new ha(r).toPromise()}async function MI(t,e){const n=Fu(t,!1).get(e),r=await new ha(n).toPromise();return r===void 0?null:r.value}function sy(t,e){const n=Fu(t,!0).delete(e);return new ha(n).toPromise()}const jI=800,VI=3;class W1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>VI)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vu._getInstance(CI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await RI(),!this.activeServiceWorker)return;this.sender=new OI(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||NI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vh();return await oy(e,eu,"1"),await sy(e,eu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>oy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>MI(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>sy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Fu(i,!1).getAll();return new ha(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}W1.type="LOCAL";const FI=W1;new ca(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(t,e){return e?Xn(e):(ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd extends j1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return io(e,this._buildIdpRequest())}_linkToIdToken(e,n){return io(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return io(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function UI(t){return wI(t.auth,new Kd(t),t.bypassAuthState)}function BI(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),_I(n,new Kd(t),t.bypassAuthState)}async function qI(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),vI(n,new Kd(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UI;case"linkViaPopup":case"linkViaRedirect":return qI;case"reauthViaPopup":case"reauthViaRedirect":return BI;default:jn(this.auth,"internal-error")}}resolve(e){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=new ca(2e3,1e4);async function zI(t,e,n){if(Gn(t.app))return Promise.reject(En(t,"operation-not-supported-in-this-environment"));const r=ju(t);FA(t,e,Hd);const i=K1(r,n);return new ni(r,"signInViaPopup",e,i).executeNotNull()}class ni extends G1{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,ni.currentPopupAction&&ni.currentPopupAction.cancel(),ni.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){sr(this.filter.length===1,"Popup operations only handle one event");const e=Wd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(En(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(En(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ni.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(En(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$I.get())};e()}}ni.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI="pendingRedirect",_l=new Map;class WI extends G1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=_l.get(this.auth._key());if(!e){try{const r=await KI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}_l.set(this.auth._key(),e)}return this.bypassAuthState||_l.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function KI(t,e){const n=YI(e),r=QI(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function GI(t,e){_l.set(t._key(),e)}function QI(t){return Xn(t._redirectPersistence)}function YI(t){return vl(HI,t.config.apiKey,t.name)}async function XI(t,e,n=!1){if(Gn(t.app))return Promise.reject(ai(t));const r=ju(t),i=K1(r,e),s=await new WI(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=10*60*1e3;class ZI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ex(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Q1(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(En(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JI&&this.cachedEventUids.clear(),this.cachedEventUids.has(ay(e))}saveEventToCache(e){this.cachedEventUids.add(ay(e)),this.lastProcessedEventTime=Date.now()}}function ay(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Q1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ex(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Q1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tx(t,e={}){return Io(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rx=/^https?/;async function ix(t){if(t.config.emulator)return;const{authorizedDomains:e}=await tx(t);for(const n of e)try{if(ox(n))return}catch{}jn(t,"unauthorized-domain")}function ox(t){const e=gh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!rx.test(n))return!1;if(nx.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx=new ca(3e4,6e4);function ly(){const t=Nn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ax(t){return new Promise((e,n)=>{var r,i,o;function s(){ly(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ly(),n(En(t,"network-request-failed"))},timeout:sx.get()})}if(!((i=(r=Nn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Nn().gapi)===null||o===void 0)&&o.load)s();else{const a=fI("iframefcb");return Nn()[a]=()=>{gapi.load?s():n(En(t,"network-request-failed"))},uI(`${cI()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw wl=null,e})}let wl=null;function lx(t){return wl=wl||ax(t),wl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux=new ca(5e3,15e3),cx="__/auth/iframe",fx="emulator/auth/iframe",hx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function px(t){const e=t.config;ye(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ud(e,fx):`https://${t.config.authDomain}/${cx}`,r={apiKey:e.apiKey,appName:t.name,v:Ao},i=dx.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${ua(r).slice(1)}`}async function mx(t){const e=await lx(t),n=Nn().gapi;return ye(n,t,"internal-error"),e.open({where:document.body,url:px(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hx,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=En(t,"network-request-failed"),a=Nn().setTimeout(()=>{o(s)},ux.get());function l(){Nn().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yx=500,vx=600,_x="_blank",wx="http://localhost";class uy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ex(t,e,n,r=yx,i=vx){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},gx),{width:r.toString(),height:i.toString(),top:o,left:s}),c=Nt().toLowerCase();n&&(a=O1(c)?_x:n),I1(c)&&(e=e||wx,l.scrollbars="yes");const p=Object.entries(l).reduce((f,[d,_])=>`${f}${d}=${_},`,"");if(tI(c)&&a!=="_self")return Tx(e||"",a),new uy(null);const h=window.open(e||"",a,p);ye(h,t,"popup-blocked");try{h.focus()}catch{}return new uy(h)}function Tx(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="__/auth/handler",Sx="emulator/auth/handler",kx=encodeURIComponent("fac");async function cy(t,e,n,r,i,o){ye(t.config.authDomain,t,"auth-domain-config-required"),ye(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ao,eventId:i};if(e instanceof Hd){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",Ek(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,h]of Object.entries({}))s[p]=h}if(e instanceof fa){const p=e.getScopes().filter(h=>h!=="");p.length>0&&(s.scopes=p.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const p of Object.keys(a))a[p]===void 0&&delete a[p];const l=await t._getAppCheckToken(),c=l?`#${kx}=${encodeURIComponent(l)}`:"";return`${Ax(t)}?${ua(a).slice(1)}${c}`}function Ax({config:t}){return t.emulator?Ud(t,Sx):`https://${t.authDomain}/${bx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of="webStorageSupport";class Ix{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=q1,this._completeRedirectFn=XI,this._overrideRedirectResult=GI}async _openPopup(e,n,r,i){var o;sr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await cy(e,n,r,gh(),i);return Ex(e,s,Wd())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await cy(e,n,r,gh(),i);return PI(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(sr(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await mx(e),r=new ZI(e);return n.register("authEvent",i=>(ye(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(of,{type:of},i=>{var o;const s=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[of];s!==void 0&&n(!!s),jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ix(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return D1()||x1()||$d()}}const xx=Ix;var fy="@firebase/auth",hy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Rx(t){Mn(new bn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ye(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:L1(t)},c=new aI(r,i,o,l);return dI(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Mn(new bn("auth-internal",e=>{const n=ju(e.getProvider("auth").getImmediate());return(r=>new Ox(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),an(fy,hy,Px(t)),an(fy,hy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx=5*60,Cx=u1("authIdTokenMaxAge")||Nx;let dy=null;const Dx=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Cx)return;const i=n==null?void 0:n.token;dy!==i&&(dy=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Lx(t=Md()){const e=Ai(t,"auth");if(e.isInitialized())return e.getImmediate();const n=hI(t,{popupRedirectResolver:xx,persistence:[FI,II,q1]}),r=u1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=Dx(o.toString());TI(n,s,()=>s(n.currentUser)),EI(n,a=>s(a))}}const i=a1("auth");return i&&pI(n,`http://${i}`),n}function Mx(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}lI({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=En("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",Mx().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Rx("Browser");var py=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var li,Y1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function P(){}P.prototype=T.prototype,S.D=T.prototype,S.prototype=new P,S.prototype.constructor=S,S.C=function(b,k,x){for(var O=Array(arguments.length-2),M=2;M<arguments.length;M++)O[M-2]=arguments[M];return T.prototype[k].apply(b,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,T,P){P||(P=0);var b=Array(16);if(typeof T=="string")for(var k=0;16>k;++k)b[k]=T.charCodeAt(P++)|T.charCodeAt(P++)<<8|T.charCodeAt(P++)<<16|T.charCodeAt(P++)<<24;else for(k=0;16>k;++k)b[k]=T[P++]|T[P++]<<8|T[P++]<<16|T[P++]<<24;T=S.g[0],P=S.g[1],k=S.g[2];var x=S.g[3],O=T+(x^P&(k^x))+b[0]+3614090360&4294967295;T=P+(O<<7&4294967295|O>>>25),O=x+(k^T&(P^k))+b[1]+3905402710&4294967295,x=T+(O<<12&4294967295|O>>>20),O=k+(P^x&(T^P))+b[2]+606105819&4294967295,k=x+(O<<17&4294967295|O>>>15),O=P+(T^k&(x^T))+b[3]+3250441966&4294967295,P=k+(O<<22&4294967295|O>>>10),O=T+(x^P&(k^x))+b[4]+4118548399&4294967295,T=P+(O<<7&4294967295|O>>>25),O=x+(k^T&(P^k))+b[5]+1200080426&4294967295,x=T+(O<<12&4294967295|O>>>20),O=k+(P^x&(T^P))+b[6]+2821735955&4294967295,k=x+(O<<17&4294967295|O>>>15),O=P+(T^k&(x^T))+b[7]+4249261313&4294967295,P=k+(O<<22&4294967295|O>>>10),O=T+(x^P&(k^x))+b[8]+1770035416&4294967295,T=P+(O<<7&4294967295|O>>>25),O=x+(k^T&(P^k))+b[9]+2336552879&4294967295,x=T+(O<<12&4294967295|O>>>20),O=k+(P^x&(T^P))+b[10]+4294925233&4294967295,k=x+(O<<17&4294967295|O>>>15),O=P+(T^k&(x^T))+b[11]+2304563134&4294967295,P=k+(O<<22&4294967295|O>>>10),O=T+(x^P&(k^x))+b[12]+1804603682&4294967295,T=P+(O<<7&4294967295|O>>>25),O=x+(k^T&(P^k))+b[13]+4254626195&4294967295,x=T+(O<<12&4294967295|O>>>20),O=k+(P^x&(T^P))+b[14]+2792965006&4294967295,k=x+(O<<17&4294967295|O>>>15),O=P+(T^k&(x^T))+b[15]+1236535329&4294967295,P=k+(O<<22&4294967295|O>>>10),O=T+(k^x&(P^k))+b[1]+4129170786&4294967295,T=P+(O<<5&4294967295|O>>>27),O=x+(P^k&(T^P))+b[6]+3225465664&4294967295,x=T+(O<<9&4294967295|O>>>23),O=k+(T^P&(x^T))+b[11]+643717713&4294967295,k=x+(O<<14&4294967295|O>>>18),O=P+(x^T&(k^x))+b[0]+3921069994&4294967295,P=k+(O<<20&4294967295|O>>>12),O=T+(k^x&(P^k))+b[5]+3593408605&4294967295,T=P+(O<<5&4294967295|O>>>27),O=x+(P^k&(T^P))+b[10]+38016083&4294967295,x=T+(O<<9&4294967295|O>>>23),O=k+(T^P&(x^T))+b[15]+3634488961&4294967295,k=x+(O<<14&4294967295|O>>>18),O=P+(x^T&(k^x))+b[4]+3889429448&4294967295,P=k+(O<<20&4294967295|O>>>12),O=T+(k^x&(P^k))+b[9]+568446438&4294967295,T=P+(O<<5&4294967295|O>>>27),O=x+(P^k&(T^P))+b[14]+3275163606&4294967295,x=T+(O<<9&4294967295|O>>>23),O=k+(T^P&(x^T))+b[3]+4107603335&4294967295,k=x+(O<<14&4294967295|O>>>18),O=P+(x^T&(k^x))+b[8]+1163531501&4294967295,P=k+(O<<20&4294967295|O>>>12),O=T+(k^x&(P^k))+b[13]+2850285829&4294967295,T=P+(O<<5&4294967295|O>>>27),O=x+(P^k&(T^P))+b[2]+4243563512&4294967295,x=T+(O<<9&4294967295|O>>>23),O=k+(T^P&(x^T))+b[7]+1735328473&4294967295,k=x+(O<<14&4294967295|O>>>18),O=P+(x^T&(k^x))+b[12]+2368359562&4294967295,P=k+(O<<20&4294967295|O>>>12),O=T+(P^k^x)+b[5]+4294588738&4294967295,T=P+(O<<4&4294967295|O>>>28),O=x+(T^P^k)+b[8]+2272392833&4294967295,x=T+(O<<11&4294967295|O>>>21),O=k+(x^T^P)+b[11]+1839030562&4294967295,k=x+(O<<16&4294967295|O>>>16),O=P+(k^x^T)+b[14]+4259657740&4294967295,P=k+(O<<23&4294967295|O>>>9),O=T+(P^k^x)+b[1]+2763975236&4294967295,T=P+(O<<4&4294967295|O>>>28),O=x+(T^P^k)+b[4]+1272893353&4294967295,x=T+(O<<11&4294967295|O>>>21),O=k+(x^T^P)+b[7]+4139469664&4294967295,k=x+(O<<16&4294967295|O>>>16),O=P+(k^x^T)+b[10]+3200236656&4294967295,P=k+(O<<23&4294967295|O>>>9),O=T+(P^k^x)+b[13]+681279174&4294967295,T=P+(O<<4&4294967295|O>>>28),O=x+(T^P^k)+b[0]+3936430074&4294967295,x=T+(O<<11&4294967295|O>>>21),O=k+(x^T^P)+b[3]+3572445317&4294967295,k=x+(O<<16&4294967295|O>>>16),O=P+(k^x^T)+b[6]+76029189&4294967295,P=k+(O<<23&4294967295|O>>>9),O=T+(P^k^x)+b[9]+3654602809&4294967295,T=P+(O<<4&4294967295|O>>>28),O=x+(T^P^k)+b[12]+3873151461&4294967295,x=T+(O<<11&4294967295|O>>>21),O=k+(x^T^P)+b[15]+530742520&4294967295,k=x+(O<<16&4294967295|O>>>16),O=P+(k^x^T)+b[2]+3299628645&4294967295,P=k+(O<<23&4294967295|O>>>9),O=T+(k^(P|~x))+b[0]+4096336452&4294967295,T=P+(O<<6&4294967295|O>>>26),O=x+(P^(T|~k))+b[7]+1126891415&4294967295,x=T+(O<<10&4294967295|O>>>22),O=k+(T^(x|~P))+b[14]+2878612391&4294967295,k=x+(O<<15&4294967295|O>>>17),O=P+(x^(k|~T))+b[5]+4237533241&4294967295,P=k+(O<<21&4294967295|O>>>11),O=T+(k^(P|~x))+b[12]+1700485571&4294967295,T=P+(O<<6&4294967295|O>>>26),O=x+(P^(T|~k))+b[3]+2399980690&4294967295,x=T+(O<<10&4294967295|O>>>22),O=k+(T^(x|~P))+b[10]+4293915773&4294967295,k=x+(O<<15&4294967295|O>>>17),O=P+(x^(k|~T))+b[1]+2240044497&4294967295,P=k+(O<<21&4294967295|O>>>11),O=T+(k^(P|~x))+b[8]+1873313359&4294967295,T=P+(O<<6&4294967295|O>>>26),O=x+(P^(T|~k))+b[15]+4264355552&4294967295,x=T+(O<<10&4294967295|O>>>22),O=k+(T^(x|~P))+b[6]+2734768916&4294967295,k=x+(O<<15&4294967295|O>>>17),O=P+(x^(k|~T))+b[13]+1309151649&4294967295,P=k+(O<<21&4294967295|O>>>11),O=T+(k^(P|~x))+b[4]+4149444226&4294967295,T=P+(O<<6&4294967295|O>>>26),O=x+(P^(T|~k))+b[11]+3174756917&4294967295,x=T+(O<<10&4294967295|O>>>22),O=k+(T^(x|~P))+b[2]+718787259&4294967295,k=x+(O<<15&4294967295|O>>>17),O=P+(x^(k|~T))+b[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(k+(O<<21&4294967295|O>>>11))&4294967295,S.g[2]=S.g[2]+k&4294967295,S.g[3]=S.g[3]+x&4294967295}r.prototype.u=function(S,T){T===void 0&&(T=S.length);for(var P=T-this.blockSize,b=this.B,k=this.h,x=0;x<T;){if(k==0)for(;x<=P;)i(this,S,x),x+=this.blockSize;if(typeof S=="string"){for(;x<T;)if(b[k++]=S.charCodeAt(x++),k==this.blockSize){i(this,b),k=0;break}}else for(;x<T;)if(b[k++]=S[x++],k==this.blockSize){i(this,b),k=0;break}}this.h=k,this.o+=T},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;var P=8*this.o;for(T=S.length-8;T<S.length;++T)S[T]=P&255,P/=256;for(this.u(S),S=Array(16),T=P=0;4>T;++T)for(var b=0;32>b;b+=8)S[P++]=this.g[T]>>>b&255;return S};function o(S,T){var P=a;return Object.prototype.hasOwnProperty.call(P,S)?P[S]:P[S]=T(S)}function s(S,T){this.h=T;for(var P=[],b=!0,k=S.length-1;0<=k;k--){var x=S[k]|0;b&&x==T||(P[k]=x,b=!1)}this.g=P}var a={};function l(S){return-128<=S&&128>S?o(S,function(T){return new s([T|0],0>T?-1:0)}):new s([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return h;if(0>S)return E(c(-S));for(var T=[],P=1,b=0;S>=P;b++)T[b]=S/P|0,P*=4294967296;return new s(T,0)}function p(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return E(p(S.substring(1),T));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=c(Math.pow(T,8)),b=h,k=0;k<S.length;k+=8){var x=Math.min(8,S.length-k),O=parseInt(S.substring(k,k+x),T);8>x?(x=c(Math.pow(T,x)),b=b.j(x).add(c(O))):(b=b.j(P),b=b.add(c(O)))}return b}var h=l(0),f=l(1),d=l(16777216);t=s.prototype,t.m=function(){if(v(this))return-E(this).m();for(var S=0,T=1,P=0;P<this.g.length;P++){var b=this.i(P);S+=(0<=b?b:4294967296+b)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(_(this))return"0";if(v(this))return"-"+E(this).toString(S);for(var T=c(Math.pow(S,6)),P=this,b="";;){var k=y(P,T).g;P=m(P,k.j(T));var x=((0<P.g.length?P.g[0]:P.h)>>>0).toString(S);if(P=k,_(P))return x+b;for(;6>x.length;)x="0"+x;b=x+b}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function _(S){if(S.h!=0)return!1;for(var T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function v(S){return S.h==-1}t.l=function(S){return S=m(this,S),v(S)?-1:_(S)?0:1};function E(S){for(var T=S.g.length,P=[],b=0;b<T;b++)P[b]=~S.g[b];return new s(P,~S.h).add(f)}t.abs=function(){return v(this)?E(this):this},t.add=function(S){for(var T=Math.max(this.g.length,S.g.length),P=[],b=0,k=0;k<=T;k++){var x=b+(this.i(k)&65535)+(S.i(k)&65535),O=(x>>>16)+(this.i(k)>>>16)+(S.i(k)>>>16);b=O>>>16,x&=65535,O&=65535,P[k]=O<<16|x}return new s(P,P[P.length-1]&-2147483648?-1:0)};function m(S,T){return S.add(E(T))}t.j=function(S){if(_(this)||_(S))return h;if(v(this))return v(S)?E(this).j(E(S)):E(E(this).j(S));if(v(S))return E(this.j(E(S)));if(0>this.l(d)&&0>S.l(d))return c(this.m()*S.m());for(var T=this.g.length+S.g.length,P=[],b=0;b<2*T;b++)P[b]=0;for(b=0;b<this.g.length;b++)for(var k=0;k<S.g.length;k++){var x=this.i(b)>>>16,O=this.i(b)&65535,M=S.i(k)>>>16,U=S.i(k)&65535;P[2*b+2*k]+=O*U,g(P,2*b+2*k),P[2*b+2*k+1]+=x*U,g(P,2*b+2*k+1),P[2*b+2*k+1]+=O*M,g(P,2*b+2*k+1),P[2*b+2*k+2]+=x*M,g(P,2*b+2*k+2)}for(b=0;b<T;b++)P[b]=P[2*b+1]<<16|P[2*b];for(b=T;b<2*T;b++)P[b]=0;return new s(P,0)};function g(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function w(S,T){this.g=S,this.h=T}function y(S,T){if(_(T))throw Error("division by zero");if(_(S))return new w(h,h);if(v(S))return T=y(E(S),T),new w(E(T.g),E(T.h));if(v(T))return T=y(S,E(T)),new w(E(T.g),T.h);if(30<S.g.length){if(v(S)||v(T))throw Error("slowDivide_ only works with positive integers.");for(var P=f,b=T;0>=b.l(S);)P=I(P),b=I(b);var k=C(P,1),x=C(b,1);for(b=C(b,2),P=C(P,2);!_(b);){var O=x.add(b);0>=O.l(S)&&(k=k.add(P),x=O),b=C(b,1),P=C(P,1)}return T=m(S,k.j(T)),new w(k,T)}for(k=h;0<=S.l(T);){for(P=Math.max(1,Math.floor(S.m()/T.m())),b=Math.ceil(Math.log(P)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),x=c(P),O=x.j(T);v(O)||0<O.l(S);)P-=b,x=c(P),O=x.j(T);_(x)&&(x=f),k=k.add(x),S=m(S,O)}return new w(k,S)}t.A=function(S){return y(this,S).h},t.and=function(S){for(var T=Math.max(this.g.length,S.g.length),P=[],b=0;b<T;b++)P[b]=this.i(b)&S.i(b);return new s(P,this.h&S.h)},t.or=function(S){for(var T=Math.max(this.g.length,S.g.length),P=[],b=0;b<T;b++)P[b]=this.i(b)|S.i(b);return new s(P,this.h|S.h)},t.xor=function(S){for(var T=Math.max(this.g.length,S.g.length),P=[],b=0;b<T;b++)P[b]=this.i(b)^S.i(b);return new s(P,this.h^S.h)};function I(S){for(var T=S.g.length+1,P=[],b=0;b<T;b++)P[b]=S.i(b)<<1|S.i(b-1)>>>31;return new s(P,S.h)}function C(S,T){var P=T>>5;T%=32;for(var b=S.g.length-P,k=[],x=0;x<b;x++)k[x]=0<T?S.i(x+P)>>>T|S.i(x+P+1)<<32-T:S.i(x+P);return new s(k,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Y1=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=c,s.fromString=p,li=s}).apply(typeof py<"u"?py:typeof self<"u"?self:typeof window<"u"?window:{});var el=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var X1,ps,J1,El,_h,Z1,ew,tw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,A,R){return u==Array.prototype||u==Object.prototype||(u[A]=R.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof el=="object"&&el];for(var A=0;A<u.length;++A){var R=u[A];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var r=n(this);function i(u,A){if(A)e:{var R=r;u=u.split(".");for(var L=0;L<u.length-1;L++){var Q=u[L];if(!(Q in R))break e;R=R[Q]}u=u[u.length-1],L=R[u],A=A(L),A!=L&&A!=null&&e(R,u,{configurable:!0,writable:!0,value:A})}}function o(u,A){u instanceof String&&(u+="");var R=0,L=!1,Q={next:function(){if(!L&&R<u.length){var J=R++;return{value:A(J,u[J]),done:!1}}return L=!0,{done:!0,value:void 0}}};return Q[Symbol.iterator]=function(){return Q},Q}i("Array.prototype.values",function(u){return u||function(){return o(this,function(A,R){return R})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function l(u){var A=typeof u;return A=A!="object"?A:u?Array.isArray(u)?"array":A:"null",A=="array"||A=="object"&&typeof u.length=="number"}function c(u){var A=typeof u;return A=="object"&&u!=null||A=="function"}function p(u,A,R){return u.call.apply(u.bind,arguments)}function h(u,A,R){if(!u)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var Q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Q,L),u.apply(A,Q)}}return function(){return u.apply(A,arguments)}}function f(u,A,R){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:h,f.apply(null,arguments)}function d(u,A){var R=Array.prototype.slice.call(arguments,1);return function(){var L=R.slice();return L.push.apply(L,arguments),u.apply(this,L)}}function _(u,A){function R(){}R.prototype=A.prototype,u.aa=A.prototype,u.prototype=new R,u.prototype.constructor=u,u.Qb=function(L,Q,J){for(var se=Array(arguments.length-2),je=2;je<arguments.length;je++)se[je-2]=arguments[je];return A.prototype[Q].apply(L,se)}}function v(u){const A=u.length;if(0<A){const R=Array(A);for(let L=0;L<A;L++)R[L]=u[L];return R}return[]}function E(u,A){for(let R=1;R<arguments.length;R++){const L=arguments[R];if(l(L)){const Q=u.length||0,J=L.length||0;u.length=Q+J;for(let se=0;se<J;se++)u[Q+se]=L[se]}else u.push(L)}}class m{constructor(A,R){this.i=A,this.j=R,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function g(u){return/^[\s\xa0]*$/.test(u)}function w(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function y(u){return y[" "](u),u}y[" "]=function(){};var I=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function C(u,A,R){for(const L in u)A.call(R,u[L],L,u)}function S(u,A){for(const R in u)A.call(void 0,u[R],R,u)}function T(u){const A={};for(const R in u)A[R]=u[R];return A}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(u,A){let R,L;for(let Q=1;Q<arguments.length;Q++){L=arguments[Q];for(R in L)u[R]=L[R];for(let J=0;J<P.length;J++)R=P[J],Object.prototype.hasOwnProperty.call(L,R)&&(u[R]=L[R])}}function k(u){var A=1;u=u.split(":");const R=[];for(;0<A&&u.length;)R.push(u.shift()),A--;return u.length&&R.push(u.join(":")),R}function x(u){a.setTimeout(()=>{throw u},0)}function O(){var u=q;let A=null;return u.g&&(A=u.g,u.g=u.g.next,u.g||(u.h=null),A.next=null),A}class M{constructor(){this.h=this.g=null}add(A,R){const L=U.get();L.set(A,R),this.h?this.h.next=L:this.g=L,this.h=L}}var U=new m(()=>new K,u=>u.reset());class K{constructor(){this.next=this.g=this.h=null}set(A,R){this.h=A,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let G,H=!1,q=new M,F=()=>{const u=a.Promise.resolve(void 0);G=()=>{u.then(N)}};var N=()=>{for(var u;u=O();){try{u.h.call(u.g)}catch(R){x(R)}var A=U;A.j(u),100>A.h&&(A.h++,u.next=A.g,A.g=u)}H=!1};function D(){this.s=this.s,this.C=this.C}D.prototype.s=!1,D.prototype.ma=function(){this.s||(this.s=!0,this.N())},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(u,A){this.type=u,this.g=this.target=A,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var z=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,A=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const R=()=>{};a.addEventListener("test",R,A),a.removeEventListener("test",R,A)}catch{}return u}();function W(u,A){if(j.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var R=this.type=u.type,L=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=A,A=u.relatedTarget){if(I){e:{try{y(A.nodeName);var Q=!0;break e}catch{}Q=!1}Q||(A=null)}}else R=="mouseover"?A=u.fromElement:R=="mouseout"&&(A=u.toElement);this.relatedTarget=A,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:V[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&W.aa.h.call(this)}}_(W,j);var V={2:"touch",3:"pen",4:"mouse"};W.prototype.h=function(){W.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var $="closure_listenable_"+(1e6*Math.random()|0),Y=0;function X(u,A,R,L,Q){this.listener=u,this.proxy=null,this.src=A,this.type=R,this.capture=!!L,this.ha=Q,this.key=++Y,this.da=this.fa=!1}function te(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ce(u){this.src=u,this.g={},this.h=0}ce.prototype.add=function(u,A,R,L,Q){var J=u.toString();u=this.g[J],u||(u=this.g[J]=[],this.h++);var se=ge(u,A,L,Q);return-1<se?(A=u[se],R||(A.fa=!1)):(A=new X(A,this.src,J,!!L,Q),A.fa=R,u.push(A)),A};function me(u,A){var R=A.type;if(R in u.g){var L=u.g[R],Q=Array.prototype.indexOf.call(L,A,void 0),J;(J=0<=Q)&&Array.prototype.splice.call(L,Q,1),J&&(te(A),u.g[R].length==0&&(delete u.g[R],u.h--))}}function ge(u,A,R,L){for(var Q=0;Q<u.length;++Q){var J=u[Q];if(!J.da&&J.listener==A&&J.capture==!!R&&J.ha==L)return Q}return-1}var Se="closure_lm_"+(1e6*Math.random()|0),Oe={};function gt(u,A,R,L,Q){if(Array.isArray(A)){for(var J=0;J<A.length;J++)gt(u,A[J],R,L,Q);return null}return R=be(R),u&&u[$]?u.K(A,R,c(L)?!!L.capture:!1,Q):et(u,A,R,!1,L,Q)}function et(u,A,R,L,Q,J){if(!A)throw Error("Invalid event type");var se=c(Q)?!!Q.capture:!!Q,je=Ee(u);if(je||(u[Se]=je=new ce(u)),R=je.add(A,R,L,se,J),R.proxy)return R;if(L=Z(),R.proxy=L,L.src=u,L.listener=R,u.addEventListener)z||(Q=se),Q===void 0&&(Q=!1),u.addEventListener(A.toString(),L,Q);else if(u.attachEvent)u.attachEvent(ue(A.toString()),L);else if(u.addListener&&u.removeListener)u.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return R}function Z(){function u(R){return A.call(u.src,u.listener,R)}const A=ne;return u}function ee(u,A,R,L,Q){if(Array.isArray(A))for(var J=0;J<A.length;J++)ee(u,A[J],R,L,Q);else L=c(L)?!!L.capture:!!L,R=be(R),u&&u[$]?(u=u.i,A=String(A).toString(),A in u.g&&(J=u.g[A],R=ge(J,R,L,Q),-1<R&&(te(J[R]),Array.prototype.splice.call(J,R,1),J.length==0&&(delete u.g[A],u.h--)))):u&&(u=Ee(u))&&(A=u.g[A.toString()],u=-1,A&&(u=ge(A,R,L,Q)),(R=-1<u?A[u]:null)&&ae(R))}function ae(u){if(typeof u!="number"&&u&&!u.da){var A=u.src;if(A&&A[$])me(A.i,u);else{var R=u.type,L=u.proxy;A.removeEventListener?A.removeEventListener(R,L,u.capture):A.detachEvent?A.detachEvent(ue(R),L):A.addListener&&A.removeListener&&A.removeListener(L),(R=Ee(A))?(me(R,u),R.h==0&&(R.src=null,A[Se]=null)):te(u)}}}function ue(u){return u in Oe?Oe[u]:Oe[u]="on"+u}function ne(u,A){if(u.da)u=!0;else{A=new W(A,this);var R=u.listener,L=u.ha||u.src;u.fa&&ae(u),u=R.call(L,A)}return u}function Ee(u){return u=u[Se],u instanceof ce?u:null}var Te="__closure_events_fn_"+(1e9*Math.random()>>>0);function be(u){return typeof u=="function"?u:(u[Te]||(u[Te]=function(A){return u.handleEvent(A)}),u[Te])}function Ce(){D.call(this),this.i=new ce(this),this.M=this,this.F=null}_(Ce,D),Ce.prototype[$]=!0,Ce.prototype.removeEventListener=function(u,A,R,L){ee(this,u,A,R,L)};function Fe(u,A){var R,L=u.F;if(L)for(R=[];L;L=L.F)R.push(L);if(u=u.M,L=A.type||A,typeof A=="string")A=new j(A,u);else if(A instanceof j)A.target=A.target||u;else{var Q=A;A=new j(L,u),b(A,Q)}if(Q=!0,R)for(var J=R.length-1;0<=J;J--){var se=A.g=R[J];Q=Me(se,L,!0,A)&&Q}if(se=A.g=u,Q=Me(se,L,!0,A)&&Q,Q=Me(se,L,!1,A)&&Q,R)for(J=0;J<R.length;J++)se=A.g=R[J],Q=Me(se,L,!1,A)&&Q}Ce.prototype.N=function(){if(Ce.aa.N.call(this),this.i){var u=this.i,A;for(A in u.g){for(var R=u.g[A],L=0;L<R.length;L++)te(R[L]);delete u.g[A],u.h--}}this.F=null},Ce.prototype.K=function(u,A,R,L){return this.i.add(String(u),A,!1,R,L)},Ce.prototype.L=function(u,A,R,L){return this.i.add(String(u),A,!0,R,L)};function Me(u,A,R,L){if(A=u.i.g[String(A)],!A)return!0;A=A.concat();for(var Q=!0,J=0;J<A.length;++J){var se=A[J];if(se&&!se.da&&se.capture==R){var je=se.listener,yt=se.ha||se.src;se.fa&&me(u.i,se),Q=je.call(yt,L)!==!1&&Q}}return Q&&!L.defaultPrevented}function wa(u,A,R){if(typeof u=="function")R&&(u=f(u,R));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:a.setTimeout(u,A||0)}function We(u){u.g=wa(()=>{u.g=null,u.i&&(u.i=!1,We(u))},u.l);const A=u.h;u.h=null,u.m.apply(null,A)}class kn extends D{constructor(A,R){super(),this.m=A,this.l=R,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:We(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Uo(u){D.call(this),this.h=u,this.g={}}_(Uo,D);var Vp=[];function Fp(u){C(u.g,function(A,R){this.g.hasOwnProperty(R)&&ae(A)},u),u.g={}}Uo.prototype.N=function(){Uo.aa.N.call(this),Fp(this)},Uo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cc=a.JSON.stringify,oT=a.JSON.parse,sT=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function fc(){}fc.prototype.h=null;function Up(u){return u.h||(u.h=u.i())}function Bp(){}var Bo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hc(){j.call(this,"d")}_(hc,j);function dc(){j.call(this,"c")}_(dc,j);var Hr={},qp=null;function Ea(){return qp=qp||new Ce}Hr.La="serverreachability";function $p(u){j.call(this,Hr.La,u)}_($p,j);function qo(u){const A=Ea();Fe(A,new $p(A))}Hr.STAT_EVENT="statevent";function zp(u,A){j.call(this,Hr.STAT_EVENT,u),this.stat=A}_(zp,j);function Dt(u){const A=Ea();Fe(A,new zp(A,u))}Hr.Ma="timingevent";function Hp(u,A){j.call(this,Hr.Ma,u),this.size=A}_(Hp,j);function $o(u,A){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},A)}function zo(){this.g=!0}zo.prototype.xa=function(){this.g=!1};function aT(u,A,R,L,Q,J){u.info(function(){if(u.g)if(J)for(var se="",je=J.split("&"),yt=0;yt<je.length;yt++){var Re=je[yt].split("=");if(1<Re.length){var bt=Re[0];Re=Re[1];var St=bt.split("_");se=2<=St.length&&St[1]=="type"?se+(bt+"="+Re+"&"):se+(bt+"=redacted&")}}else se=null;else se=J;return"XMLHTTP REQ ("+L+") [attempt "+Q+"]: "+A+`
`+R+`
`+se})}function lT(u,A,R,L,Q,J,se){u.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+Q+"]: "+A+`
`+R+`
`+J+" "+se})}function Oi(u,A,R,L){u.info(function(){return"XMLHTTP TEXT ("+A+"): "+cT(u,R)+(L?" "+L:"")})}function uT(u,A){u.info(function(){return"TIMEOUT: "+A})}zo.prototype.info=function(){};function cT(u,A){if(!u.g)return A;if(!A)return null;try{var R=JSON.parse(A);if(R){for(u=0;u<R.length;u++)if(Array.isArray(R[u])){var L=R[u];if(!(2>L.length)){var Q=L[1];if(Array.isArray(Q)&&!(1>Q.length)){var J=Q[0];if(J!="noop"&&J!="stop"&&J!="close")for(var se=1;se<Q.length;se++)Q[se]=""}}}}return cc(R)}catch{return A}}var Ta={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Wp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pc;function ba(){}_(ba,fc),ba.prototype.g=function(){return new XMLHttpRequest},ba.prototype.i=function(){return{}},pc=new ba;function fr(u,A,R,L){this.j=u,this.i=A,this.l=R,this.R=L||1,this.U=new Uo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Kp}function Kp(){this.i=null,this.g="",this.h=!1}var Gp={},mc={};function gc(u,A,R){u.L=1,u.v=Ia(Un(A)),u.m=R,u.P=!0,Qp(u,null)}function Qp(u,A){u.F=Date.now(),Sa(u),u.A=Un(u.v);var R=u.A,L=u.R;Array.isArray(L)||(L=[String(L)]),um(R.i,"t",L),u.C=0,R=u.j.J,u.h=new Kp,u.g=Im(u.j,R?A:null,!u.m),0<u.O&&(u.M=new kn(f(u.Y,u,u.g),u.O)),A=u.U,R=u.g,L=u.ca;var Q="readystatechange";Array.isArray(Q)||(Q&&(Vp[0]=Q.toString()),Q=Vp);for(var J=0;J<Q.length;J++){var se=gt(R,Q[J],L||A.handleEvent,!1,A.h||A);if(!se)break;A.g[se.key]=se}A=u.H?T(u.H):{},u.m?(u.u||(u.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,A)):(u.u="GET",u.g.ea(u.A,u.u,null,A)),qo(),aT(u.i,u.u,u.A,u.l,u.R,u.m)}fr.prototype.ca=function(u){u=u.target;const A=this.M;A&&Bn(u)==3?A.j():this.Y(u)},fr.prototype.Y=function(u){try{if(u==this.g)e:{const St=Bn(this.g);var A=this.g.Ba();const Ni=this.g.Z();if(!(3>St)&&(St!=3||this.g&&(this.h.h||this.g.oa()||gm(this.g)))){this.J||St!=4||A==7||(A==8||0>=Ni?qo(3):qo(2)),yc(this);var R=this.g.Z();this.X=R;t:if(Yp(this)){var L=gm(this.g);u="";var Q=L.length,J=Bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wr(this),Ho(this);var se="";break t}this.h.i=new a.TextDecoder}for(A=0;A<Q;A++)this.h.h=!0,u+=this.h.i.decode(L[A],{stream:!(J&&A==Q-1)});L.length=0,this.h.g+=u,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=R==200,lT(this.i,this.u,this.A,this.l,this.R,St,R),this.o){if(this.T&&!this.K){t:{if(this.g){var je,yt=this.g;if((je=yt.g?yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!g(je)){var Re=je;break t}}Re=null}if(R=Re)Oi(this.i,this.l,R,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vc(this,R);else{this.o=!1,this.s=3,Dt(12),Wr(this),Ho(this);break e}}if(this.P){R=!0;let fn;for(;!this.J&&this.C<se.length;)if(fn=fT(this,se),fn==mc){St==4&&(this.s=4,Dt(14),R=!1),Oi(this.i,this.l,null,"[Incomplete Response]");break}else if(fn==Gp){this.s=4,Dt(15),Oi(this.i,this.l,se,"[Invalid Chunk]"),R=!1;break}else Oi(this.i,this.l,fn,null),vc(this,fn);if(Yp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),St!=4||se.length!=0||this.h.h||(this.s=1,Dt(16),R=!1),this.o=this.o&&R,!R)Oi(this.i,this.l,se,"[Invalid Chunked Response]"),Wr(this),Ho(this);else if(0<se.length&&!this.W){this.W=!0;var bt=this.j;bt.g==this&&bt.ba&&!bt.M&&(bt.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),Sc(bt),bt.M=!0,Dt(11))}}else Oi(this.i,this.l,se,null),vc(this,se);St==4&&Wr(this),this.o&&!this.J&&(St==4?bm(this.j,this):(this.o=!1,Sa(this)))}else xT(this.g),R==400&&0<se.indexOf("Unknown SID")?(this.s=3,Dt(12)):(this.s=0,Dt(13)),Wr(this),Ho(this)}}}catch{}finally{}};function Yp(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function fT(u,A){var R=u.C,L=A.indexOf(`
`,R);return L==-1?mc:(R=Number(A.substring(R,L)),isNaN(R)?Gp:(L+=1,L+R>A.length?mc:(A=A.slice(L,L+R),u.C=L+R,A)))}fr.prototype.cancel=function(){this.J=!0,Wr(this)};function Sa(u){u.S=Date.now()+u.I,Xp(u,u.I)}function Xp(u,A){if(u.B!=null)throw Error("WatchDog timer not null");u.B=$o(f(u.ba,u),A)}function yc(u){u.B&&(a.clearTimeout(u.B),u.B=null)}fr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(uT(this.i,this.A),this.L!=2&&(qo(),Dt(17)),Wr(this),this.s=2,Ho(this)):Xp(this,this.S-u)};function Ho(u){u.j.G==0||u.J||bm(u.j,u)}function Wr(u){yc(u);var A=u.M;A&&typeof A.ma=="function"&&A.ma(),u.M=null,Fp(u.U),u.g&&(A=u.g,u.g=null,A.abort(),A.ma())}function vc(u,A){try{var R=u.j;if(R.G!=0&&(R.g==u||_c(R.h,u))){if(!u.K&&_c(R.h,u)&&R.G==3){try{var L=R.Da.g.parse(A)}catch{L=null}if(Array.isArray(L)&&L.length==3){var Q=L;if(Q[0]==0){e:if(!R.u){if(R.g)if(R.g.F+3e3<u.F)Ca(R),Ra(R);else break e;bc(R),Dt(18)}}else R.za=Q[1],0<R.za-R.T&&37500>Q[2]&&R.F&&R.v==0&&!R.C&&(R.C=$o(f(R.Za,R),6e3));if(1>=em(R.h)&&R.ca){try{R.ca()}catch{}R.ca=void 0}}else Gr(R,11)}else if((u.K||R.g==u)&&Ca(R),!g(A))for(Q=R.Da.g.parse(A),A=0;A<Q.length;A++){let Re=Q[A];if(R.T=Re[0],Re=Re[1],R.G==2)if(Re[0]=="c"){R.K=Re[1],R.ia=Re[2];const bt=Re[3];bt!=null&&(R.la=bt,R.j.info("VER="+R.la));const St=Re[4];St!=null&&(R.Aa=St,R.j.info("SVER="+R.Aa));const Ni=Re[5];Ni!=null&&typeof Ni=="number"&&0<Ni&&(L=1.5*Ni,R.L=L,R.j.info("backChannelRequestTimeoutMs_="+L)),L=R;const fn=u.g;if(fn){const La=fn.g?fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(La){var J=L.h;J.g||La.indexOf("spdy")==-1&&La.indexOf("quic")==-1&&La.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(wc(J,J.h),J.h=null))}if(L.D){const kc=fn.g?fn.g.getResponseHeader("X-HTTP-Session-Id"):null;kc&&(L.ya=kc,Ue(L.I,L.D,kc))}}R.G=3,R.l&&R.l.ua(),R.ba&&(R.R=Date.now()-u.F,R.j.info("Handshake RTT: "+R.R+"ms")),L=R;var se=u;if(L.qa=Am(L,L.J?L.ia:null,L.W),se.K){tm(L.h,se);var je=se,yt=L.L;yt&&(je.I=yt),je.B&&(yc(je),Sa(je)),L.g=se}else Em(L);0<R.i.length&&Na(R)}else Re[0]!="stop"&&Re[0]!="close"||Gr(R,7);else R.G==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?Gr(R,7):Tc(R):Re[0]!="noop"&&R.l&&R.l.ta(Re),R.v=0)}}qo(4)}catch{}}var hT=class{constructor(u,A){this.g=u,this.map=A}};function Jp(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zp(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function em(u){return u.h?1:u.g?u.g.size:0}function _c(u,A){return u.h?u.h==A:u.g?u.g.has(A):!1}function wc(u,A){u.g?u.g.add(A):u.h=A}function tm(u,A){u.h&&u.h==A?u.h=null:u.g&&u.g.has(A)&&u.g.delete(A)}Jp.prototype.cancel=function(){if(this.i=nm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function nm(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let A=u.i;for(const R of u.g.values())A=A.concat(R.D);return A}return v(u.i)}function dT(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var A=[],R=u.length,L=0;L<R;L++)A.push(u[L]);return A}A=[],R=0;for(L in u)A[R++]=u[L];return A}function pT(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var A=[];u=u.length;for(var R=0;R<u;R++)A.push(R);return A}A=[],R=0;for(const L in u)A[R++]=L;return A}}}function rm(u,A){if(u.forEach&&typeof u.forEach=="function")u.forEach(A,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,A,void 0);else for(var R=pT(u),L=dT(u),Q=L.length,J=0;J<Q;J++)A.call(void 0,L[J],R&&R[J],u)}var im=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mT(u,A){if(u){u=u.split("&");for(var R=0;R<u.length;R++){var L=u[R].indexOf("="),Q=null;if(0<=L){var J=u[R].substring(0,L);Q=u[R].substring(L+1)}else J=u[R];A(J,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function Kr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Kr){this.h=u.h,ka(this,u.j),this.o=u.o,this.g=u.g,Aa(this,u.s),this.l=u.l;var A=u.i,R=new Go;R.i=A.i,A.g&&(R.g=new Map(A.g),R.h=A.h),om(this,R),this.m=u.m}else u&&(A=String(u).match(im))?(this.h=!1,ka(this,A[1]||"",!0),this.o=Wo(A[2]||""),this.g=Wo(A[3]||"",!0),Aa(this,A[4]),this.l=Wo(A[5]||"",!0),om(this,A[6]||"",!0),this.m=Wo(A[7]||"")):(this.h=!1,this.i=new Go(null,this.h))}Kr.prototype.toString=function(){var u=[],A=this.j;A&&u.push(Ko(A,sm,!0),":");var R=this.g;return(R||A=="file")&&(u.push("//"),(A=this.o)&&u.push(Ko(A,sm,!0),"@"),u.push(encodeURIComponent(String(R)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.s,R!=null&&u.push(":",String(R))),(R=this.l)&&(this.g&&R.charAt(0)!="/"&&u.push("/"),u.push(Ko(R,R.charAt(0)=="/"?vT:yT,!0))),(R=this.i.toString())&&u.push("?",R),(R=this.m)&&u.push("#",Ko(R,wT)),u.join("")};function Un(u){return new Kr(u)}function ka(u,A,R){u.j=R?Wo(A,!0):A,u.j&&(u.j=u.j.replace(/:$/,""))}function Aa(u,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);u.s=A}else u.s=null}function om(u,A,R){A instanceof Go?(u.i=A,ET(u.i,u.h)):(R||(A=Ko(A,_T)),u.i=new Go(A,u.h))}function Ue(u,A,R){u.i.set(A,R)}function Ia(u){return Ue(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Wo(u,A){return u?A?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ko(u,A,R){return typeof u=="string"?(u=encodeURI(u).replace(A,gT),R&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function gT(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var sm=/[#\/\?@]/g,yT=/[#\?:]/g,vT=/[#\?]/g,_T=/[#\?@]/g,wT=/#/g;function Go(u,A){this.h=this.g=null,this.i=u||null,this.j=!!A}function hr(u){u.g||(u.g=new Map,u.h=0,u.i&&mT(u.i,function(A,R){u.add(decodeURIComponent(A.replace(/\+/g," ")),R)}))}t=Go.prototype,t.add=function(u,A){hr(this),this.i=null,u=Pi(this,u);var R=this.g.get(u);return R||this.g.set(u,R=[]),R.push(A),this.h+=1,this};function am(u,A){hr(u),A=Pi(u,A),u.g.has(A)&&(u.i=null,u.h-=u.g.get(A).length,u.g.delete(A))}function lm(u,A){return hr(u),A=Pi(u,A),u.g.has(A)}t.forEach=function(u,A){hr(this),this.g.forEach(function(R,L){R.forEach(function(Q){u.call(A,Q,L,this)},this)},this)},t.na=function(){hr(this);const u=Array.from(this.g.values()),A=Array.from(this.g.keys()),R=[];for(let L=0;L<A.length;L++){const Q=u[L];for(let J=0;J<Q.length;J++)R.push(A[L])}return R},t.V=function(u){hr(this);let A=[];if(typeof u=="string")lm(this,u)&&(A=A.concat(this.g.get(Pi(this,u))));else{u=Array.from(this.g.values());for(let R=0;R<u.length;R++)A=A.concat(u[R])}return A},t.set=function(u,A){return hr(this),this.i=null,u=Pi(this,u),lm(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[A]),this.h+=1,this},t.get=function(u,A){return u?(u=this.V(u),0<u.length?String(u[0]):A):A};function um(u,A,R){am(u,A),0<R.length&&(u.i=null,u.g.set(Pi(u,A),v(R)),u.h+=R.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],A=Array.from(this.g.keys());for(var R=0;R<A.length;R++){var L=A[R];const J=encodeURIComponent(String(L)),se=this.V(L);for(L=0;L<se.length;L++){var Q=J;se[L]!==""&&(Q+="="+encodeURIComponent(String(se[L]))),u.push(Q)}}return this.i=u.join("&")};function Pi(u,A){return A=String(A),u.j&&(A=A.toLowerCase()),A}function ET(u,A){A&&!u.j&&(hr(u),u.i=null,u.g.forEach(function(R,L){var Q=L.toLowerCase();L!=Q&&(am(this,L),um(this,Q,R))},u)),u.j=A}function TT(u,A){const R=new zo;if(a.Image){const L=new Image;L.onload=d(dr,R,"TestLoadImage: loaded",!0,A,L),L.onerror=d(dr,R,"TestLoadImage: error",!1,A,L),L.onabort=d(dr,R,"TestLoadImage: abort",!1,A,L),L.ontimeout=d(dr,R,"TestLoadImage: timeout",!1,A,L),a.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=u}else A(!1)}function bT(u,A){const R=new zo,L=new AbortController,Q=setTimeout(()=>{L.abort(),dr(R,"TestPingServer: timeout",!1,A)},1e4);fetch(u,{signal:L.signal}).then(J=>{clearTimeout(Q),J.ok?dr(R,"TestPingServer: ok",!0,A):dr(R,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(Q),dr(R,"TestPingServer: error",!1,A)})}function dr(u,A,R,L,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),L(R)}catch{}}function ST(){this.g=new sT}function kT(u,A,R){const L=R||"";try{rm(u,function(Q,J){let se=Q;c(Q)&&(se=cc(Q)),A.push(L+J+"="+encodeURIComponent(se))})}catch(Q){throw A.push(L+"type="+encodeURIComponent("_badmap")),Q}}function xa(u){this.l=u.Ub||null,this.j=u.eb||!1}_(xa,fc),xa.prototype.g=function(){return new Oa(this.l,this.j)},xa.prototype.i=function(u){return function(){return u}}({});function Oa(u,A){Ce.call(this),this.D=u,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Oa,Ce),t=Oa.prototype,t.open=function(u,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=A,this.readyState=1,Yo(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(A.body=u),(this.D||a).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qo(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Yo(this)),this.g&&(this.readyState=3,Yo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;cm(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function cm(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var A=u.value?u.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!u.done}))&&(this.response=this.responseText+=A)}u.done?Qo(this):Yo(this),this.readyState==3&&cm(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Qo(this))},t.Qa=function(u){this.g&&(this.response=u,Qo(this))},t.ga=function(){this.g&&Qo(this)};function Qo(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Yo(u)}t.setRequestHeader=function(u,A){this.u.append(u,A)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],A=this.h.entries();for(var R=A.next();!R.done;)R=R.value,u.push(R[0]+": "+R[1]),R=A.next();return u.join(`\r
`)};function Yo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Oa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function fm(u){let A="";return C(u,function(R,L){A+=L,A+=":",A+=R,A+=`\r
`}),A}function Ec(u,A,R){e:{for(L in R){var L=!1;break e}L=!0}L||(R=fm(R),typeof u=="string"?R!=null&&encodeURIComponent(String(R)):Ue(u,A,R))}function Je(u){Ce.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Je,Ce);var AT=/^https?$/i,IT=["POST","PUT"];t=Je.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,A,R,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);A=A?A.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pc.g(),this.v=this.o?Up(this.o):Up(pc),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(A,String(u),!0),this.B=!1}catch(J){hm(this,J);return}if(u=R||"",R=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var Q in L)R.set(Q,L[Q]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const J of L.keys())R.set(J,L.get(J));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(R.keys()).find(J=>J.toLowerCase()=="content-type"),Q=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(IT,A,void 0))||L||Q||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,se]of R)this.g.setRequestHeader(J,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{mm(this),this.u=!0,this.g.send(u),this.u=!1}catch(J){hm(this,J)}};function hm(u,A){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=A,u.m=5,dm(u),Pa(u)}function dm(u){u.A||(u.A=!0,Fe(u,"complete"),Fe(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Fe(this,"complete"),Fe(this,"abort"),Pa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pa(this,!0)),Je.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?pm(this):this.bb())},t.bb=function(){pm(this)};function pm(u){if(u.h&&typeof s<"u"&&(!u.v[1]||Bn(u)!=4||u.Z()!=2)){if(u.u&&Bn(u)==4)wa(u.Ea,0,u);else if(Fe(u,"readystatechange"),Bn(u)==4){u.h=!1;try{const se=u.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var R;if(!(R=A)){var L;if(L=se===0){var Q=String(u.D).match(im)[1]||null;!Q&&a.self&&a.self.location&&(Q=a.self.location.protocol.slice(0,-1)),L=!AT.test(Q?Q.toLowerCase():"")}R=L}if(R)Fe(u,"complete"),Fe(u,"success");else{u.m=6;try{var J=2<Bn(u)?u.g.statusText:""}catch{J=""}u.l=J+" ["+u.Z()+"]",dm(u)}}finally{Pa(u)}}}}function Pa(u,A){if(u.g){mm(u);const R=u.g,L=u.v[0]?()=>{}:null;u.g=null,u.v=null,A||Fe(u,"ready");try{R.onreadystatechange=L}catch{}}}function mm(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Bn(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Bn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var A=this.g.responseText;return u&&A.indexOf(u)==0&&(A=A.substring(u.length)),oT(A)}};function gm(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function xT(u){const A={};u=(u.g&&2<=Bn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<u.length;L++){if(g(u[L]))continue;var R=k(u[L]);const Q=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const J=A[Q]||[];A[Q]=J,J.push(R)}S(A,function(L){return L.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xo(u,A,R){return R&&R.internalChannelParams&&R.internalChannelParams[u]||A}function ym(u){this.Aa=0,this.i=[],this.j=new zo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xo("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xo("baseRetryDelayMs",5e3,u),this.cb=Xo("retryDelaySeedMs",1e4,u),this.Wa=Xo("forwardChannelMaxRetries",2,u),this.wa=Xo("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Jp(u&&u.concurrentRequestLimit),this.Da=new ST,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ym.prototype,t.la=8,t.G=1,t.connect=function(u,A,R,L){Dt(0),this.W=u,this.H=A||{},R&&L!==void 0&&(this.H.OSID=R,this.H.OAID=L),this.F=this.X,this.I=Am(this,null,this.W),Na(this)};function Tc(u){if(vm(u),u.G==3){var A=u.U++,R=Un(u.I);if(Ue(R,"SID",u.K),Ue(R,"RID",A),Ue(R,"TYPE","terminate"),Jo(u,R),A=new fr(u,u.j,A),A.L=2,A.v=Ia(Un(R)),R=!1,a.navigator&&a.navigator.sendBeacon)try{R=a.navigator.sendBeacon(A.v.toString(),"")}catch{}!R&&a.Image&&(new Image().src=A.v,R=!0),R||(A.g=Im(A.j,null),A.g.ea(A.v)),A.F=Date.now(),Sa(A)}km(u)}function Ra(u){u.g&&(Sc(u),u.g.cancel(),u.g=null)}function vm(u){Ra(u),u.u&&(a.clearTimeout(u.u),u.u=null),Ca(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Na(u){if(!Zp(u.h)&&!u.s){u.s=!0;var A=u.Ga;G||F(),H||(G(),H=!0),q.add(A,u),u.B=0}}function OT(u,A){return em(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=A.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=$o(f(u.Ga,u,A),Sm(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const Q=new fr(this,this.j,u);let J=this.o;if(this.S&&(J?(J=T(J),b(J,this.S)):J=this.S),this.m!==null||this.O||(Q.H=J,J=null),this.P)e:{for(var A=0,R=0;R<this.i.length;R++){t:{var L=this.i[R];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(A+=L,4096<A){A=R;break e}if(A===4096||R===this.i.length-1){A=R+1;break e}}A=1e3}else A=1e3;A=wm(this,Q,A),R=Un(this.I),Ue(R,"RID",u),Ue(R,"CVER",22),this.D&&Ue(R,"X-HTTP-Session-Id",this.D),Jo(this,R),J&&(this.O?A="headers="+encodeURIComponent(String(fm(J)))+"&"+A:this.m&&Ec(R,this.m,J)),wc(this.h,Q),this.Ua&&Ue(R,"TYPE","init"),this.P?(Ue(R,"$req",A),Ue(R,"SID","null"),Q.T=!0,gc(Q,R,null)):gc(Q,R,A),this.G=2}}else this.G==3&&(u?_m(this,u):this.i.length==0||Zp(this.h)||_m(this))};function _m(u,A){var R;A?R=A.l:R=u.U++;const L=Un(u.I);Ue(L,"SID",u.K),Ue(L,"RID",R),Ue(L,"AID",u.T),Jo(u,L),u.m&&u.o&&Ec(L,u.m,u.o),R=new fr(u,u.j,R,u.B+1),u.m===null&&(R.H=u.o),A&&(u.i=A.D.concat(u.i)),A=wm(u,R,1e3),R.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),wc(u.h,R),gc(R,L,A)}function Jo(u,A){u.H&&C(u.H,function(R,L){Ue(A,L,R)}),u.l&&rm({},function(R,L){Ue(A,L,R)})}function wm(u,A,R){R=Math.min(u.i.length,R);var L=u.l?f(u.l.Na,u.l,u):null;e:{var Q=u.i;let J=-1;for(;;){const se=["count="+R];J==-1?0<R?(J=Q[0].g,se.push("ofs="+J)):J=0:se.push("ofs="+J);let je=!0;for(let yt=0;yt<R;yt++){let Re=Q[yt].g;const bt=Q[yt].map;if(Re-=J,0>Re)J=Math.max(0,Q[yt].g-100),je=!1;else try{kT(bt,se,"req"+Re+"_")}catch{L&&L(bt)}}if(je){L=se.join("&");break e}}}return u=u.i.splice(0,R),A.D=u,L}function Em(u){if(!u.g&&!u.u){u.Y=1;var A=u.Fa;G||F(),H||(G(),H=!0),q.add(A,u),u.v=0}}function bc(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=$o(f(u.Fa,u),Sm(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Tm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=$o(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Dt(10),Ra(this),Tm(this))};function Sc(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Tm(u){u.g=new fr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var A=Un(u.qa);Ue(A,"RID","rpc"),Ue(A,"SID",u.K),Ue(A,"AID",u.T),Ue(A,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ue(A,"TO",u.ja),Ue(A,"TYPE","xmlhttp"),Jo(u,A),u.m&&u.o&&Ec(A,u.m,u.o),u.L&&(u.g.I=u.L);var R=u.g;u=u.ia,R.L=1,R.v=Ia(Un(A)),R.m=null,R.P=!0,Qp(R,u)}t.Za=function(){this.C!=null&&(this.C=null,Ra(this),bc(this),Dt(19))};function Ca(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function bm(u,A){var R=null;if(u.g==A){Ca(u),Sc(u),u.g=null;var L=2}else if(_c(u.h,A))R=A.D,tm(u.h,A),L=1;else return;if(u.G!=0){if(A.o)if(L==1){R=A.m?A.m.length:0,A=Date.now()-A.F;var Q=u.B;L=Ea(),Fe(L,new Hp(L,R)),Na(u)}else Em(u);else if(Q=A.s,Q==3||Q==0&&0<A.X||!(L==1&&OT(u,A)||L==2&&bc(u)))switch(R&&0<R.length&&(A=u.h,A.i=A.i.concat(R)),Q){case 1:Gr(u,5);break;case 4:Gr(u,10);break;case 3:Gr(u,6);break;default:Gr(u,2)}}}function Sm(u,A){let R=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(R*=2),R*A}function Gr(u,A){if(u.j.info("Error code "+A),A==2){var R=f(u.fb,u),L=u.Xa;const Q=!L;L=new Kr(L||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ka(L,"https"),Ia(L),Q?TT(L.toString(),R):bT(L.toString(),R)}else Dt(2);u.G=0,u.l&&u.l.sa(A),km(u),vm(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function km(u){if(u.G=0,u.ka=[],u.l){const A=nm(u.h);(A.length!=0||u.i.length!=0)&&(E(u.ka,A),E(u.ka,u.i),u.h.i.length=0,v(u.i),u.i.length=0),u.l.ra()}}function Am(u,A,R){var L=R instanceof Kr?Un(R):new Kr(R);if(L.g!="")A&&(L.g=A+"."+L.g),Aa(L,L.s);else{var Q=a.location;L=Q.protocol,A=A?A+"."+Q.hostname:Q.hostname,Q=+Q.port;var J=new Kr(null);L&&ka(J,L),A&&(J.g=A),Q&&Aa(J,Q),R&&(J.l=R),L=J}return R=u.D,A=u.ya,R&&A&&Ue(L,R,A),Ue(L,"VER",u.la),Jo(u,L),L}function Im(u,A,R){if(A&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=u.Ca&&!u.pa?new Je(new xa({eb:R})):new Je(u.pa),A.Ha(u.J),A}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function xm(){}t=xm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Da(){}Da.prototype.g=function(u,A){return new Wt(u,A)};function Wt(u,A){Ce.call(this),this.g=new ym(A),this.l=u,this.h=A&&A.messageUrlParams||null,u=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(u?u["X-WebChannel-Content-Type"]=A.messageContentType:u={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(u?u["X-WebChannel-Client-Profile"]=A.va:u={"X-WebChannel-Client-Profile":A.va}),this.g.S=u,(u=A&&A.Sb)&&!g(u)&&(this.g.m=u),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!g(A)&&(this.g.D=A,u=this.h,u!==null&&A in u&&(u=this.h,A in u&&delete u[A])),this.j=new Ri(this)}_(Wt,Ce),Wt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Wt.prototype.close=function(){Tc(this.g)},Wt.prototype.o=function(u){var A=this.g;if(typeof u=="string"){var R={};R.__data__=u,u=R}else this.u&&(R={},R.__data__=cc(u),u=R);A.i.push(new hT(A.Ya++,u)),A.G==3&&Na(A)},Wt.prototype.N=function(){this.g.l=null,delete this.j,Tc(this.g),delete this.g,Wt.aa.N.call(this)};function Om(u){hc.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var A=u.__sm__;if(A){e:{for(const R in A){u=R;break e}u=void 0}(this.i=u)&&(u=this.i,A=A!==null&&u in A?A[u]:void 0),this.data=A}else this.data=u}_(Om,hc);function Pm(){dc.call(this),this.status=1}_(Pm,dc);function Ri(u){this.g=u}_(Ri,xm),Ri.prototype.ua=function(){Fe(this.g,"a")},Ri.prototype.ta=function(u){Fe(this.g,new Om(u))},Ri.prototype.sa=function(u){Fe(this.g,new Pm)},Ri.prototype.ra=function(){Fe(this.g,"b")},Da.prototype.createWebChannel=Da.prototype.g,Wt.prototype.send=Wt.prototype.o,Wt.prototype.open=Wt.prototype.m,Wt.prototype.close=Wt.prototype.close,tw=function(){return new Da},ew=function(){return Ea()},Z1=Hr,_h={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ta.NO_ERROR=0,Ta.TIMEOUT=8,Ta.HTTP_ERROR=6,El=Ta,Wp.COMPLETE="complete",J1=Wp,Bp.EventType=Bo,Bo.OPEN="a",Bo.CLOSE="b",Bo.ERROR="c",Bo.MESSAGE="d",Ce.prototype.listen=Ce.prototype.K,ps=Bp,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,X1=Je}).apply(typeof el<"u"?el:typeof self<"u"?self:typeof window<"u"?window:{});const my="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xt.UNAUTHENTICATED=new xt(null),xt.GOOGLE_CREDENTIALS=new xt("google-credentials-uid"),xt.FIRST_PARTY=new xt("first-party-uid"),xt.MOCK_USER=new xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi=new Mu("@firebase/firestore");function as(){return mi.logLevel}function he(t,...e){if(mi.logLevel<=Ie.DEBUG){const n=e.map(Gd);mi.debug(`Firestore (${xo}): ${t}`,...n)}}function ar(t,...e){if(mi.logLevel<=Ie.ERROR){const n=e.map(Gd);mi.error(`Firestore (${xo}): ${t}`,...n)}}function gi(t,...e){if(mi.logLevel<=Ie.WARN){const n=e.map(Gd);mi.warn(`Firestore (${xo}): ${t}`,...n)}}function Gd(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(t="Unexpected state"){const e=`FIRESTORE (${xo}) INTERNAL ASSERTION FAILED: `+t;throw ar(e),new Error(e)}function Le(t,e){t||ve()}function we(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Sn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(xt.UNAUTHENTICATED))}shutdown(){}}class jx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Vx{constructor(e){this.t=e,this.currentUser=xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Le(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let o=new Zn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Zn,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=o;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Zn)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Le(typeof r.accessToken=="string"),new nw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string"),new xt(e)}}class Fx{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=xt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ux{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Fx(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Bx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qx{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Le(this.o===void 0);const r=o=>{o.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,he("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Le(typeof n.token=="string"),this.R=n.token,new Bx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=$x(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function Ne(t,e){return t<e?-1:t>e?1:0}function go(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new de(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ot.fromMillis(Date.now())}static fromDate(e){return ot.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ot(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.timestamp=e}static fromTimestamp(e){return new _e(e)}static min(){return new _e(new ot(0,0))}static max(){return new _e(new ot(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,n,r){n===void 0?n=0:n>e.length&&ve(),r===void 0?r=e.length-n:r>e.length-n&&ve(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Zs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Zs?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class He extends Zs{construct(e,n,r){return new He(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new de(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new He(n)}static emptyPath(){return new He([])}}const zx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends Zs{construct(e,n,r){return new dt(e,n,r)}static isValidIdentifier(e){return zx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new dt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new de(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new de(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new de(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new de(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(n)}static emptyPath(){return new dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(He.fromString(e))}static fromName(e){return new pe(He.fromString(e).popFirst(5))}static empty(){return new pe(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new He(e.slice()))}}function Hx(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=_e.fromTimestamp(r===1e9?new ot(n+1,0):new ot(n,r));return new Vr(i,pe.empty(),e)}function Wx(t){return new Vr(t.readTime,t.key,-1)}class Vr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Vr(_e.min(),pe.empty(),-1)}static max(){return new Vr(_e.max(),pe.empty(),-1)}}function Kx(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=pe.comparator(t.documentKey,e.documentKey),n!==0?n:Ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Qx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function da(t){if(t.code!==re.FAILED_PRECONDITION||t.message!==Gx)throw t;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ie((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ie?n:ie.resolve(n)}catch(n){return ie.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ie.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ie.reject(n)}static resolve(e){return new ie((n,r)=>{n(e)})}static reject(e){return new ie((n,r)=>{r(e)})}static waitFor(e){return new ie((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},l=>r(l))}),s=!0,o===i&&n()})}static or(e){let n=ie.resolve(!1);for(const r of e)n=n.next(i=>i?ie.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new ie((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let l=0;l<o;l++){const c=l;n(e[c]).next(p=>{s[c]=p,++a,a===o&&r(s)},p=>i(p))}})}static doWhile(e,n){return new ie((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function Yx(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function pa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Yd.oe=-1;function Uu(t){return t==null}function nu(t){return t===0&&1/t==-1/0}function Xx(t){return typeof t=="number"&&Number.isInteger(t)&&!nu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Oo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function iw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){this.comparator=e,this.root=n||_t.EMPTY}insert(e,n){return new Xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_t.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tl(this.root,e,this.comparator,!1)}getReverseIterator(){return new tl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tl(this.root,e,this.comparator,!0)}}class tl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??_t.RED,this.left=i??_t.EMPTY,this.right=o??_t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new _t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return _t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return _t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ve();const e=this.left.check();if(e!==this.right.check())throw ve();return e+(this.isRed()?0:1)}}_t.EMPTY=null,_t.RED=!0,_t.BLACK=!1;_t.EMPTY=new class{constructor(){this.size=0}get key(){throw ve()}get value(){throw ve()}get color(){throw ve()}get left(){throw ve()}get right(){throw ve()}copy(e,n,r,i,o){return this}insert(e,n,r){return new _t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new yy(this.data.getIterator())}getIteratorFrom(e){return new yy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Et(this.comparator);return n.data=e,n}}class yy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new yn([])}unionWith(e){let n=new Et(dt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new yn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return go(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new ow("Invalid base64 string: "+o):o}}(e);return new mt(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new mt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mt.EMPTY_BYTE_STRING=new mt("");const Jx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fr(t){if(Le(!!t),typeof t=="string"){let e=0;const n=Jx.exec(t);if(Le(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tt(t.seconds),nanos:tt(t.nanos)}}function tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function yi(t){return typeof t=="string"?mt.fromBase64String(t):mt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Jd(t){const e=t.mapValue.fields.__previous_value__;return Xd(e)?Jd(e):e}function ea(t){const e=Fr(t.mapValue.fields.__local_write_time__.timestampValue);return new ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e,n,r,i,o,s,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class yo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new yo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof yo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl={mapValue:{}};function vi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Xd(t)?4:t2(t)?9007199254740991:e2(t)?10:11:ve()}function Vn(t,e){if(t===e)return!0;const n=vi(t);if(n!==vi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ea(t).isEqual(ea(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Fr(i.timestampValue),a=Fr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return yi(i.bytesValue).isEqual(yi(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return tt(i.geoPointValue.latitude)===tt(o.geoPointValue.latitude)&&tt(i.geoPointValue.longitude)===tt(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return tt(i.integerValue)===tt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=tt(i.doubleValue),a=tt(o.doubleValue);return s===a?nu(s)===nu(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return go(t.arrayValue.values||[],e.arrayValue.values||[],Vn);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(gy(s)!==gy(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!Vn(s[l],a[l])))return!1;return!0}(t,e);default:return ve()}}function ta(t,e){return(t.values||[]).find(n=>Vn(n,e))!==void 0}function vo(t,e){if(t===e)return 0;const n=vi(t),r=vi(e);if(n!==r)return Ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=tt(o.integerValue||o.doubleValue),l=tt(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return vy(t.timestampValue,e.timestampValue);case 4:return vy(ea(t),ea(e));case 5:return Ne(t.stringValue,e.stringValue);case 6:return function(o,s){const a=yi(o),l=yi(s);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),l=s.split("/");for(let c=0;c<a.length&&c<l.length;c++){const p=Ne(a[c],l[c]);if(p!==0)return p}return Ne(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=Ne(tt(o.latitude),tt(s.latitude));return a!==0?a:Ne(tt(o.longitude),tt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return _y(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,l,c,p;const h=o.fields||{},f=s.fields||{},d=(a=h.value)===null||a===void 0?void 0:a.arrayValue,_=(l=f.value)===null||l===void 0?void 0:l.arrayValue,v=Ne(((c=d==null?void 0:d.values)===null||c===void 0?void 0:c.length)||0,((p=_==null?void 0:_.values)===null||p===void 0?void 0:p.length)||0);return v!==0?v:_y(d,_)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===nl.mapValue&&s===nl.mapValue)return 0;if(o===nl.mapValue)return 1;if(s===nl.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),c=s.fields||{},p=Object.keys(c);l.sort(),p.sort();for(let h=0;h<l.length&&h<p.length;++h){const f=Ne(l[h],p[h]);if(f!==0)return f;const d=vo(a[l[h]],c[p[h]]);if(d!==0)return d}return Ne(l.length,p.length)}(t.mapValue,e.mapValue);default:throw ve()}}function vy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ne(t,e);const n=Fr(t),r=Fr(e),i=Ne(n.seconds,r.seconds);return i!==0?i:Ne(n.nanos,r.nanos)}function _y(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=vo(n[i],r[i]);if(o)return o}return Ne(n.length,r.length)}function _o(t){return wh(t)}function wh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Fr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return yi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return pe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=wh(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${wh(n.fields[s])}`;return i+"}"}(t.mapValue):ve()}function Eh(t){return!!t&&"integerValue"in t}function Zd(t){return!!t&&"arrayValue"in t}function wy(t){return!!t&&"nullValue"in t}function Ey(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Tl(t){return!!t&&"mapValue"in t}function e2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Is(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Oo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Is(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Is(t.arrayValue.values[n]);return e}return Object.assign({},t)}function t2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.value=e}static empty(){return new rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Tl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Is(n)}setAll(e){let n=dt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Is(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Tl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Tl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Oo(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new rn(Is(this.value))}}function sw(t){const e=[];return Oo(t.fields,(n,r)=>{const i=new dt([n]);if(Tl(r)){const o=sw(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Pt(e,0,_e.min(),_e.min(),_e.min(),rn.empty(),0)}static newFoundDocument(e,n,r,i){return new Pt(e,1,n,_e.min(),r,i,0)}static newNoDocument(e,n){return new Pt(e,2,n,_e.min(),_e.min(),rn.empty(),0)}static newUnknownDocument(e,n){return new Pt(e,3,n,_e.min(),_e.min(),rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n){this.position=e,this.inclusive=n}}function Ty(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=pe.comparator(pe.fromName(s.referenceValue),n.key):r=vo(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function by(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Vn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n="asc"){this.field=e,this.dir=n}}function n2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{}class lt extends aw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new i2(e,n,r):n==="array-contains"?new a2(e,r):n==="in"?new l2(e,r):n==="not-in"?new u2(e,r):n==="array-contains-any"?new c2(e,r):new lt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new o2(e,r):new s2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(vo(n,this.value)):n!==null&&vi(this.value)===vi(n)&&this.matchesComparison(vo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fn extends aw{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Fn(e,n)}matches(e){return lw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function lw(t){return t.op==="and"}function uw(t){return r2(t)&&lw(t)}function r2(t){for(const e of t.filters)if(e instanceof Fn)return!1;return!0}function Th(t){if(t instanceof lt)return t.field.canonicalString()+t.op.toString()+_o(t.value);if(uw(t))return t.filters.map(e=>Th(e)).join(",");{const e=t.filters.map(n=>Th(n)).join(",");return`${t.op}(${e})`}}function cw(t,e){return t instanceof lt?function(r,i){return i instanceof lt&&r.op===i.op&&r.field.isEqual(i.field)&&Vn(r.value,i.value)}(t,e):t instanceof Fn?function(r,i){return i instanceof Fn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&cw(s,i.filters[a]),!0):!1}(t,e):void ve()}function fw(t){return t instanceof lt?function(n){return`${n.field.canonicalString()} ${n.op} ${_o(n.value)}`}(t):t instanceof Fn?function(n){return n.op.toString()+" {"+n.getFilters().map(fw).join(" ,")+"}"}(t):"Filter"}class i2 extends lt{constructor(e,n,r){super(e,n,r),this.key=pe.fromName(r.referenceValue)}matches(e){const n=pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class o2 extends lt{constructor(e,n){super(e,"in",n),this.keys=hw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class s2 extends lt{constructor(e,n){super(e,"not-in",n),this.keys=hw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function hw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>pe.fromName(r.referenceValue))}class a2 extends lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Zd(n)&&ta(n.arrayValue,this.value)}}class l2 extends lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ta(this.value.arrayValue,n)}}class u2 extends lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ta(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ta(this.value.arrayValue,n)}}class c2 extends lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Zd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ta(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}}function Sy(t,e=null,n=[],r=[],i=null,o=null,s=null){return new f2(t,e,n,r,i,o,s)}function ep(t){const e=we(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Th(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Uu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>_o(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>_o(r)).join(",")),e.ue=n}return e.ue}function tp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!n2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!cw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!by(t.startAt,e.startAt)&&by(t.endAt,e.endAt)}function bh(t){return pe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function h2(t,e,n,r,i,o,s,a){return new Bu(t,e,n,r,i,o,s,a)}function qu(t){return new Bu(t)}function ky(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function d2(t){return t.collectionGroup!==null}function xs(t){const e=we(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Et(dt.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new iu(o,r))}),n.has(dt.keyField().canonicalString())||e.ce.push(new iu(dt.keyField(),r))}return e.ce}function Cn(t){const e=we(t);return e.le||(e.le=p2(e,xs(t))),e.le}function p2(t,e){if(t.limitType==="F")return Sy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new iu(i.field,o)});const n=t.endAt?new ru(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ru(t.startAt.position,t.startAt.inclusive):null;return Sy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Sh(t,e,n){return new Bu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $u(t,e){return tp(Cn(t),Cn(e))&&t.limitType===e.limitType}function dw(t){return`${ep(Cn(t))}|lt:${t.limitType}`}function Di(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>fw(i)).join(", ")}]`),Uu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>_o(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>_o(i)).join(",")),`Target(${r})`}(Cn(t))}; limitType=${t.limitType})`}function zu(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):pe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of xs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,l){const c=Ty(s,a,l);return s.inclusive?c<=0:c<0}(r.startAt,xs(r),i)||r.endAt&&!function(s,a,l){const c=Ty(s,a,l);return s.inclusive?c>=0:c>0}(r.endAt,xs(r),i))}(t,e)}function m2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function pw(t){return(e,n)=>{let r=!1;for(const i of xs(t)){const o=g2(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function g2(t,e,n){const r=t.field.isKeyField()?pe.comparator(e.key,n.key):function(o,s,a){const l=s.data.field(o),c=a.data.field(o);return l!==null&&c!==null?vo(l,c):ve()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Oo(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return iw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=new Xe(pe.comparator);function lr(){return y2}const mw=new Xe(pe.comparator);function ms(...t){let e=mw;for(const n of t)e=e.insert(n.key,n);return e}function gw(t){let e=mw;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ri(){return Os()}function yw(){return Os()}function Os(){return new Po(t=>t.toString(),(t,e)=>t.isEqual(e))}const v2=new Xe(pe.comparator),_2=new Et(pe.comparator);function Ae(...t){let e=_2;for(const n of t)e=e.add(n);return e}const w2=new Et(Ne);function E2(){return w2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nu(e)?"-0":e}}function vw(t){return{integerValue:""+t}}function T2(t,e){return Xx(e)?vw(e):np(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(){this._=void 0}}function b2(t,e,n){return t instanceof ou?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Xd(o)&&(o=Jd(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof na?ww(t,e):t instanceof ra?Ew(t,e):function(i,o){const s=_w(i,o),a=Ay(s)+Ay(i.Pe);return Eh(s)&&Eh(i.Pe)?vw(a):np(i.serializer,a)}(t,e)}function S2(t,e,n){return t instanceof na?ww(t,e):t instanceof ra?Ew(t,e):n}function _w(t,e){return t instanceof su?function(r){return Eh(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class ou extends Hu{}class na extends Hu{constructor(e){super(),this.elements=e}}function ww(t,e){const n=Tw(e);for(const r of t.elements)n.some(i=>Vn(i,r))||n.push(r);return{arrayValue:{values:n}}}class ra extends Hu{constructor(e){super(),this.elements=e}}function Ew(t,e){let n=Tw(e);for(const r of t.elements)n=n.filter(i=>!Vn(i,r));return{arrayValue:{values:n}}}class su extends Hu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Ay(t){return tt(t.integerValue||t.doubleValue)}function Tw(t){return Zd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function k2(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof na&&i instanceof na||r instanceof ra&&i instanceof ra?go(r.elements,i.elements,Vn):r instanceof su&&i instanceof su?Vn(r.Pe,i.Pe):r instanceof ou&&i instanceof ou}(t.transform,e.transform)}class A2{constructor(e,n){this.version=e,this.transformResults=n}}class Dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Dn}static exists(e){return new Dn(void 0,e)}static updateTime(e){return new Dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Wu{}function bw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new rp(t.key,Dn.none()):new ma(t.key,t.data,Dn.none());{const n=t.data,r=rn.empty();let i=new Et(dt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Ii(t.key,r,new yn(i.toArray()),Dn.none())}}function I2(t,e,n){t instanceof ma?function(i,o,s){const a=i.value.clone(),l=xy(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ii?function(i,o,s){if(!bl(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=xy(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(Sw(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Ps(t,e,n,r){return t instanceof ma?function(o,s,a,l){if(!bl(o.precondition,s))return a;const c=o.value.clone(),p=Oy(o.fieldTransforms,l,s);return c.setAll(p),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ii?function(o,s,a,l){if(!bl(o.precondition,s))return a;const c=Oy(o.fieldTransforms,l,s),p=s.data;return p.setAll(Sw(o)),p.setAll(c),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(o,s,a){return bl(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function x2(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=_w(r.transform,i||null);o!=null&&(n===null&&(n=rn.empty()),n.set(r.field,o))}return n||null}function Iy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&go(r,i,(o,s)=>k2(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ma extends Wu{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ii extends Wu{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Sw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function xy(t,e,n){const r=new Map;Le(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,S2(s,a,n[i]))}return r}function Oy(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,b2(o,s,e))}return r}class rp extends Wu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class O2 extends Wu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&I2(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ps(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ps(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=yw();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const l=bw(s,a);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(_e.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ae())}isEqual(e){return this.batchId===e.batchId&&go(this.mutations,e.mutations,(n,r)=>Iy(n,r))&&go(this.baseMutations,e.baseMutations,(n,r)=>Iy(n,r))}}class ip{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Le(e.mutations.length===r.length);let i=function(){return v2}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new ip(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt,xe;function C2(t){switch(t){default:return ve();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0}}function kw(t){if(t===void 0)return ar("GRPC error has no .code"),re.UNKNOWN;switch(t){case rt.OK:return re.OK;case rt.CANCELLED:return re.CANCELLED;case rt.UNKNOWN:return re.UNKNOWN;case rt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case rt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case rt.INTERNAL:return re.INTERNAL;case rt.UNAVAILABLE:return re.UNAVAILABLE;case rt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case rt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case rt.NOT_FOUND:return re.NOT_FOUND;case rt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case rt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case rt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case rt.ABORTED:return re.ABORTED;case rt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case rt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case rt.DATA_LOSS:return re.DATA_LOSS;default:return ve()}}(xe=rt||(rt={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=new li([4294967295,4294967295],0);function Py(t){const e=D2().encode(t),n=new Y1;return n.update(e),new Uint8Array(n.digest())}function Ry(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new li([n,r],0),new li([i,o],0)]}class op{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new gs(`Invalid padding: ${n}`);if(r<0)throw new gs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new gs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new gs(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=li.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(li.fromNumber(r)));return i.compare(L2)===1&&(i=new li([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Py(e),[r,i]=Ry(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new op(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;const n=Py(e),[r,i]=Ry(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class gs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ga.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ku(_e.min(),i,new Xe(Ne),lr(),Ae())}}class ga{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ga(r,n,Ae(),Ae(),Ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class Aw{constructor(e,n){this.targetId=e,this.me=n}}class Iw{constructor(e,n,r=mt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Ny{constructor(){this.fe=0,this.ge=Dy(),this.pe=mt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ae(),n=Ae(),r=Ae();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ve()}}),new ga(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Dy()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Le(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class M2{constructor(e){this.Le=e,this.Be=new Map,this.ke=lr(),this.qe=Cy(),this.Qe=new Xe(Ne)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ve()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const o=i.target;if(bh(o))if(r===0){const s=new pe(o.path);this.Ue(n,s,Pt.newNoDocument(s,_e.min()))}else Le(r===1);else{const s=this.Ye(n);if(s!==r){const a=this.Ze(e),l=a?this.Xe(a,e,s):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=yi(r).toUint8Array()}catch(l){if(l instanceof ow)return gi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new op(s,i,o)}catch(l){return gi(l instanceof gs?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((o,s)=>{const a=this.Je(s);if(a){if(o.current&&bh(a.target)){const l=new pe(a.target.path);this.ke.get(l)!==null||this.it(s,l)||this.Ue(s,l,Pt.newNoDocument(l,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=Ae();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new Ku(e,n,this.Qe,this.ke,r);return this.ke=lr(),this.qe=Cy(),this.Qe=new Xe(Ne),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Ny,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Et(Ne),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ny),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Cy(){return new Xe(pe.comparator)}function Dy(){return new Xe(pe.comparator)}const j2={asc:"ASCENDING",desc:"DESCENDING"},V2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},F2={and:"AND",or:"OR"};class U2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function kh(t,e){return t.useProto3Json||Uu(e)?e:{value:e}}function au(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function B2(t,e){return au(t,e.toTimestamp())}function Ln(t){return Le(!!t),_e.fromTimestamp(function(n){const r=Fr(n);return new ot(r.seconds,r.nanos)}(t))}function sp(t,e){return Ah(t,e).canonicalString()}function Ah(t,e){const n=function(i){return new He(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Ow(t){const e=He.fromString(t);return Le(Dw(e)),e}function Ih(t,e){return sp(t.databaseId,e.path)}function sf(t,e){const n=Ow(e);if(n.get(1)!==t.databaseId.projectId)throw new de(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new de(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new pe(Rw(n))}function Pw(t,e){return sp(t.databaseId,e)}function q2(t){const e=Ow(t);return e.length===4?He.emptyPath():Rw(e)}function xh(t){return new He(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Rw(t){return Le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Ly(t,e,n){return{name:Ih(t,e),fields:n.value.mapValue.fields}}function $2(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ve()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(c,p){return c.useProto3Json?(Le(p===void 0||typeof p=="string"),mt.fromBase64String(p||"")):(Le(p===void 0||p instanceof Buffer||p instanceof Uint8Array),mt.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){const p=c.code===void 0?re.UNKNOWN:kw(c.code);return new de(p,c.message||"")}(s);n=new Iw(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=sf(t,r.document.name),o=Ln(r.document.updateTime),s=r.document.createTime?Ln(r.document.createTime):_e.min(),a=new rn({mapValue:{fields:r.document.fields}}),l=Pt.newFoundDocument(i,o,s,a),c=r.targetIds||[],p=r.removedTargetIds||[];n=new Sl(c,p,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=sf(t,r.document),o=r.readTime?Ln(r.readTime):_e.min(),s=Pt.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Sl([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=sf(t,r.document),o=r.removedTargetIds||[];n=new Sl([],o,i,null)}else{if(!("filter"in e))return ve();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new N2(i,o),a=r.targetId;n=new Aw(a,s)}}return n}function z2(t,e){let n;if(e instanceof ma)n={update:Ly(t,e.key,e.value)};else if(e instanceof rp)n={delete:Ih(t,e.key)};else if(e instanceof Ii)n={update:Ly(t,e.key,e.data),updateMask:Z2(e.fieldMask)};else{if(!(e instanceof O2))return ve();n={verify:Ih(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof ou)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof na)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ra)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof su)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw ve()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:B2(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ve()}(t,e.precondition)),n}function H2(t,e){return t&&t.length>0?(Le(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Ln(i.updateTime):Ln(o);return s.isEqual(_e.min())&&(s=Ln(o)),new A2(s,i.transformResults||[])}(n,e))):[]}function W2(t,e){return{documents:[Pw(t,e.path)]}}function K2(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Pw(t,i);const o=function(c){if(c.length!==0)return Cw(Fn.create(c,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(c){if(c.length!==0)return c.map(p=>function(f){return{field:Li(f.field),direction:Y2(f.dir)}}(p))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=kh(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function G2(t){let e=q2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Le(r===1);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let o=[];n.where&&(o=function(h){const f=Nw(h);return f instanceof Fn&&uw(f)?f.getFilters():[f]}(n.where));let s=[];n.orderBy&&(s=function(h){return h.map(f=>function(_){return new iu(Mi(_.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Uu(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,d=h.values||[];return new ru(d,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,d=h.values||[];return new ru(d,f)}(n.endAt)),h2(e,i,s,o,a,"F",l,c)}function Q2(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Nw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Mi(n.unaryFilter.field);return lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Mi(n.unaryFilter.field);return lt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Mi(n.unaryFilter.field);return lt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Mi(n.unaryFilter.field);return lt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ve()}}(t):t.fieldFilter!==void 0?function(n){return lt.create(Mi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ve()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Fn.create(n.compositeFilter.filters.map(r=>Nw(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ve()}}(n.compositeFilter.op))}(t):ve()}function Y2(t){return j2[t]}function X2(t){return V2[t]}function J2(t){return F2[t]}function Li(t){return{fieldPath:t.canonicalString()}}function Mi(t){return dt.fromServerFormat(t.fieldPath)}function Cw(t){return t instanceof lt?function(n){if(n.op==="=="){if(Ey(n.value))return{unaryFilter:{field:Li(n.field),op:"IS_NAN"}};if(wy(n.value))return{unaryFilter:{field:Li(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ey(n.value))return{unaryFilter:{field:Li(n.field),op:"IS_NOT_NAN"}};if(wy(n.value))return{unaryFilter:{field:Li(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Li(n.field),op:X2(n.op),value:n.value}}}(t):t instanceof Fn?function(n){const r=n.getFilters().map(i=>Cw(i));return r.length===1?r[0]:{compositeFilter:{op:J2(n.op),filters:r}}}(t):ve()}function Z2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Dw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,n,r,i,o=_e.min(),s=_e.min(),a=mt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e){this.ct=e}}function tO(t){const e=G2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Sh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(){this.un=new rO}addToCollectionParentIndex(e,n){return this.un.add(n),ie.resolve()}getCollectionParents(e,n){return ie.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ie.resolve()}deleteFieldIndex(e,n){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,n){return ie.resolve()}getDocumentsMatchingTarget(e,n){return ie.resolve(null)}getIndexType(e,n){return ie.resolve(0)}getFieldIndexes(e,n){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,n){return ie.resolve(Vr.min())}getMinOffsetFromCollectionGroup(e,n){return ie.resolve(Vr.min())}updateCollectionGroup(e,n,r){return ie.resolve()}updateIndexEntries(e,n){return ie.resolve()}}class rO{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Et(He.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Et(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new wo(0)}static kn(){return new wo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(){this.changes=new Po(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Pt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ie.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ps(r.mutation,i,yn.empty(),ot.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ae()){const i=ri();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=ms();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=ri();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ae()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=lr();const s=Os(),a=function(){return Os()}();return n.forEach((l,c)=>{const p=r.get(c.key);i.has(c.key)&&(p===void 0||p.mutation instanceof Ii)?o=o.insert(c.key,c):p!==void 0?(s.set(c.key,p.mutation.getFieldMask()),Ps(p.mutation,c,p.mutation.getFieldMask(),ot.now())):s.set(c.key,yn.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((c,p)=>s.set(c,p)),n.forEach((c,p)=>{var h;return a.set(c,new oO(p,(h=s.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Os();let i=new Xe((s,a)=>s-a),o=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let p=r.get(l)||yn.empty();p=a.applyToLocalView(c,p),r.set(l,p);const h=(i.get(a.batchId)||Ae()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,p=l.value,h=yw();p.forEach(f=>{if(!o.has(f)){const d=bw(n.get(f),r.get(f));d!==null&&h.set(f,d),o=o.add(f)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,h))}return ie.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return pe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):d2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):ie.resolve(ri());let a=-1,l=o;return s.next(c=>ie.forEach(c,(p,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(p)?ie.resolve():this.remoteDocumentCache.getEntry(e,p).next(f=>{l=l.insert(p,f)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,l,c,Ae())).next(p=>({batchId:a,changes:gw(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new pe(n)).next(r=>{let i=ms();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=ms();return this.indexManager.getCollectionParents(e,o).next(a=>ie.forEach(a,l=>{const c=function(h,f){return new Bu(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(p=>{p.forEach((h,f)=>{s=s.insert(h,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((l,c)=>{const p=c.getKey();s.get(p)===null&&(s=s.insert(p,Pt.newInvalidDocument(p)))});let a=ms();return s.forEach((l,c)=>{const p=o.get(l);p!==void 0&&Ps(p.mutation,c,yn.empty(),ot.now()),zu(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ie.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ln(i.createTime)}}(n)),ie.resolve()}getNamedQuery(e,n){return ie.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:tO(i.bundledQuery),readTime:Ln(i.readTime)}}(n)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(){this.overlays=new Xe(pe.comparator),this.Ir=new Map}getOverlay(e,n){return ie.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ri();return ie.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),ie.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),ie.resolve()}getOverlaysForCollection(e,n,r){const i=ri(),o=n.length+1,s=new pe(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return ie.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Xe((c,p)=>c-p);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let p=o.get(c.largestBatchId);p===null&&(p=ri(),o=o.insert(c.largestBatchId,p)),p.set(c.getKey(),c)}}const a=ri(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,p)=>a.set(c,p)),!(a.size()>=i)););return ie.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new R2(n,r));let o=this.Ir.get(n);o===void 0&&(o=Ae(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(){this.sessionToken=mt.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(){this.Tr=new Et(ct.Er),this.dr=new Et(ct.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new ct(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ct(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new pe(new He([])),r=new ct(n,e),i=new ct(n,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new pe(new He([])),r=new ct(n,e),i=new ct(n,e+1);let o=Ae();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new ct(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ct{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return pe.comparator(e.key,n.key)||Ne(e.wr,n.wr)}static Ar(e,n){return Ne(e.wr,n.wr)||pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Et(ct.Er)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new P2(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.br=this.br.add(new ct(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ie.resolve(s)}lookupMutationBatch(e,n){return ie.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),o=i<0?0:i;return ie.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ct(n,0),i=new ct(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{const a=this.Dr(s.wr);o.push(a)}),ie.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Et(Ne);return n.forEach(i=>{const o=new ct(i,0),s=new ct(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),ie.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;pe.isDocumentKey(o)||(o=o.child(""));const s=new ct(new pe(o),0);let a=new Et(Ne);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},s),ie.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Le(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return ie.forEach(n.mutations,i=>{const o=new ct(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new ct(n,0),i=this.br.firstAfterOrEqual(r);return ie.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e){this.Mr=e,this.docs=function(){return new Xe(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ie.resolve(r?r.document.mutableCopy():Pt.newInvalidDocument(n))}getEntries(e,n){let r=lr();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Pt.newInvalidDocument(i))}),ie.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=lr();const s=n.path,a=new pe(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:p}}=l.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||Kx(Wx(p),r)<=0||(i.has(p.key)||zu(n,p))&&(o=o.insert(p.key,p.mutableCopy()))}return ie.resolve(o)}getAllFromCollectionGroup(e,n,r,i){ve()}Or(e,n){return ie.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new hO(this)}getSize(e){return ie.resolve(this.size)}}class hO extends iO{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),ie.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e){this.persistence=e,this.Nr=new Po(n=>ep(n),tp),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ap,this.targetCount=0,this.kr=wo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),ie.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new wo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ie.resolve()}updateTargetData(e,n){return this.Kn(n),ie.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),ie.waitFor(o).next(()=>i)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return ie.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),ie.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),ie.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ie.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return ie.resolve(r)}containsKey(e,n){return ie.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Yd(0),this.Kr=!1,this.Kr=!0,this.$r=new uO,this.referenceDelegate=e(this),this.Ur=new dO(this),this.indexManager=new nO,this.remoteDocumentCache=function(i){return new fO(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new eO(n),this.Gr=new aO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new lO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new cO(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){he("MemoryPersistence","Starting transaction:",e);const i=new mO(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return ie.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class mO extends Qx{constructor(e){super(),this.currentSequenceNumber=e}}class lp{constructor(e){this.persistence=e,this.Jr=new ap,this.Yr=null}static Zr(e){return new lp(e)}get Xr(){if(this.Yr)return this.Yr;throw ve()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),ie.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ie.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.Xr,r=>{const i=pe.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,_e.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return ie.or([()=>ie.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Ae(),i=Ae();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new up(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return gk()?8:Yx(Nt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new gO;return this.Xi(e,n,s).next(a=>{if(o.result=a,this.zi)return this.es(e,n,s,a.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(as()<=Ie.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Di(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ie.resolve()):(as()<=Ie.DEBUG&&he("QueryEngine","Query:",Di(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(as()<=Ie.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Di(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cn(n))):ie.resolve())}Yi(e,n){if(ky(n))return ie.resolve(null);let r=Cn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Sh(n,null,"F"),r=Cn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=Ae(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,s,l.readTime)?this.Yi(e,Sh(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return ky(n)||i.isEqual(_e.min())?ie.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const s=this.ts(n,o);return this.ns(n,s,r,i)?ie.resolve(null):(as()<=Ie.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Di(n)),this.rs(e,s,n,Hx(i,-1)).next(a=>a))})}ts(e,n){let r=new Et(pw(e));return n.forEach((i,o)=>{zu(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return as()<=Ie.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Di(n)),this.Ji.getDocumentsMatchingQuery(e,n,Vr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Xe(Ne),this._s=new Po(o=>ep(o),tp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sO(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function _O(t,e,n,r){return new vO(t,e,n,r)}async function Lw(t,e){const n=we(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let l=Ae();for(const c of i){s.push(c.batchId);for(const p of c.mutations)l=l.add(p.key)}for(const c of o){a.push(c.batchId);for(const p of c.mutations)l=l.add(p.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:s,addedBatchIds:a}))})})}function wO(t,e){const n=we(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,p){const h=c.batch,f=h.keys();let d=ie.resolve();return f.forEach(_=>{d=d.next(()=>p.getEntry(l,_)).next(v=>{const E=c.docVersions.get(_);Le(E!==null),v.version.compareTo(E)<0&&(h.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),p.addEntry(v)))})}),d.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ae();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Mw(t){const e=we(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function EO(t,e){const n=we(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((p,h)=>{const f=i.get(h);if(!f)return;a.push(n.Ur.removeMatchingKeys(o,p.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(o,p.addedDocuments,h)));let d=f.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(h)!==null?d=d.withResumeToken(mt.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):p.resumeToken.approximateByteSize()>0&&(d=d.withResumeToken(p.resumeToken,r)),i=i.insert(h,d),function(v,E,m){return v.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:m.addedDocuments.size+m.modifiedDocuments.size+m.removedDocuments.size>0}(f,d,p)&&a.push(n.Ur.updateTargetData(o,d))});let l=lr(),c=Ae();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,p))}),a.push(TO(o,s,e.documentUpdates).next(p=>{l=p.Ps,c=p.Is})),!r.isEqual(_e.min())){const p=n.Ur.getLastRemoteSnapshotVersion(o).next(h=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(p)}return ie.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,l,c)).next(()=>l)}).then(o=>(n.os=i,o))}function TO(t,e,n){let r=Ae(),i=Ae();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=lr();return n.forEach((a,l)=>{const c=o.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(_e.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):he("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:s,Is:i}})}function bO(t,e){const n=we(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function SO(t,e){const n=we(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,ie.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new kr(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Oh(t,e,n){const r=we(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!pa(s))throw s;he("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function My(t,e,n){const r=we(t);let i=_e.min(),o=Ae();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,c,p){const h=we(l),f=h._s.get(p);return f!==void 0?ie.resolve(h.os.get(f)):h.Ur.getTargetData(c,p)}(r,s,Cn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:_e.min(),n?o:Ae())).next(a=>(kO(r,m2(e),a),{documents:a,Ts:o})))}function kO(t,e,n){let r=t.us.get(e)||_e.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}class jy{constructor(){this.activeTargetIds=E2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class AO{constructor(){this.so=new jy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new jy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){he("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){he("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rl=null;function af(){return rl===null?rl=function(){return 268435456+Math.round(2147483648*Math.random())}():rl++,"0x"+rl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const It="WebChannelConnection";class PO extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,s){const a=af(),l=this.xo(n,r.toUriEncodedString());he("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,o,s),this.No(n,l,c,i).then(p=>(he("RestConnection",`Received RPC '${n}' ${a}: `,p),p),p=>{throw gi("RestConnection",`RPC '${n}' ${a} failed with error: `,p,"url: ",l,"request:",i),p})}Lo(n,r,i,o,s,a){return this.Mo(n,r,i,o,s)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}xo(n,r){const i=xO[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const o=af();return new Promise((s,a)=>{const l=new X1;l.setWithCredentials(!0),l.listenOnce(J1.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case El.NO_ERROR:const p=l.getResponseJson();he(It,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),s(p);break;case El.TIMEOUT:he(It,`RPC '${e}' ${o} timed out`),a(new de(re.DEADLINE_EXCEEDED,"Request time out"));break;case El.HTTP_ERROR:const h=l.getStatus();if(he(It,`RPC '${e}' ${o} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const d=f==null?void 0:f.error;if(d&&d.status&&d.message){const _=function(E){const m=E.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(m)>=0?m:re.UNKNOWN}(d.status);a(new de(_,d.message))}else a(new de(re.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new de(re.UNAVAILABLE,"Connection failed."));break;default:ve()}}finally{he(It,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);he(It,`RPC '${e}' ${o} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=af(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=tw(),a=ew(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const p=o.join("");he(It,`Creating RPC '${e}' stream ${i}: ${p}`,l);const h=s.createWebChannel(p,l);let f=!1,d=!1;const _=new OO({Io:E=>{d?he(It,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(f||(he(It,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),he(It,`RPC '${e}' stream ${i} sending:`,E),h.send(E))},To:()=>h.close()}),v=(E,m,g)=>{E.listen(m,w=>{try{g(w)}catch(y){setTimeout(()=>{throw y},0)}})};return v(h,ps.EventType.OPEN,()=>{d||(he(It,`RPC '${e}' stream ${i} transport opened.`),_.yo())}),v(h,ps.EventType.CLOSE,()=>{d||(d=!0,he(It,`RPC '${e}' stream ${i} transport closed`),_.So())}),v(h,ps.EventType.ERROR,E=>{d||(d=!0,gi(It,`RPC '${e}' stream ${i} transport errored:`,E),_.So(new de(re.UNAVAILABLE,"The operation could not be completed")))}),v(h,ps.EventType.MESSAGE,E=>{var m;if(!d){const g=E.data[0];Le(!!g);const w=g,y=w.error||((m=w[0])===null||m===void 0?void 0:m.error);if(y){he(It,`RPC '${e}' stream ${i} received error:`,y);const I=y.status;let C=function(P){const b=rt[P];if(b!==void 0)return kw(b)}(I),S=y.message;C===void 0&&(C=re.INTERNAL,S="Unknown error status: "+I+" with message "+y.message),d=!0,_.So(new de(C,S)),h.close()}else he(It,`RPC '${e}' stream ${i} received:`,g),_.bo(g)}}),v(a,Z1.STAT_EVENT,E=>{E.stat===_h.PROXY?he(It,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===_h.NOPROXY&&he(It,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}}function lf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(t){return new U2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&he("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e,n,r,i,o,s,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new jw(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===re.RESOURCE_EXHAUSTED?(ar(n.toString()),ar("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new de(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return he("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(he("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RO extends Vw{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=$2(this.serializer,e),r=function(o){if(!("targetChange"in o))return _e.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?_e.min():s.readTime?Ln(s.readTime):_e.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=xh(this.serializer),n.addTarget=function(o,s){let a;const l=s.target;if(a=bh(l)?{documents:W2(o,l)}:{query:K2(o,l)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=xw(o,s.resumeToken);const c=kh(o,s.expectedCount);c!==null&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(_e.min())>0){a.readTime=au(o,s.snapshotVersion.toTimestamp());const c=kh(o,s.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Q2(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=xh(this.serializer),n.removeTarget=e,this.a_(n)}}class NO extends Vw{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Le(!!e.streamToken),this.lastStreamToken=e.streamToken,Le(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=H2(e.writeResults,e.commitTime),r=Ln(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=xh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>z2(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new de(re.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,Ah(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new de(re.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,Ah(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new de(re.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class DO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ar(n),this.D_=!1):he("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(async()=>{xi(this)&&(he("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=we(l);c.L_.add(4),await ya(c),c.q_.set("Unknown"),c.L_.delete(4),await Qu(c)}(this))})}),this.q_=new DO(r,i)}}async function Qu(t){if(xi(t))for(const e of t.B_)await e(!0)}async function ya(t){for(const e of t.B_)await e(!1)}function Fw(t,e){const n=we(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),dp(n)?hp(n):Ro(n).r_()&&fp(n,e))}function cp(t,e){const n=we(t),r=Ro(n);n.N_.delete(e),r.r_()&&Uw(n,e),n.N_.size===0&&(r.r_()?r.o_():xi(n)&&n.q_.set("Unknown"))}function fp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ro(t).A_(e)}function Uw(t,e){t.Q_.xe(e),Ro(t).R_(e)}function hp(t){t.Q_=new M2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ro(t).start(),t.q_.v_()}function dp(t){return xi(t)&&!Ro(t).n_()&&t.N_.size>0}function xi(t){return we(t).L_.size===0}function Bw(t){t.Q_=void 0}async function MO(t){t.q_.set("Online")}async function jO(t){t.N_.forEach((e,n)=>{fp(t,e)})}async function VO(t,e){Bw(t),dp(t)?(t.q_.M_(e),hp(t)):t.q_.set("Unknown")}async function FO(t,e,n){if(t.q_.set("Online"),e instanceof Iw&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const a of o.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){he("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await lu(t,r)}else if(e instanceof Sl?t.Q_.Ke(e):e instanceof Aw?t.Q_.He(e):t.Q_.We(e),!n.isEqual(_e.min()))try{const r=await Mw(t.localStore);n.compareTo(r)>=0&&await function(o,s){const a=o.Q_.rt(s);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const p=o.N_.get(c);p&&o.N_.set(c,p.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,c)=>{const p=o.N_.get(l);if(!p)return;o.N_.set(l,p.withResumeToken(mt.EMPTY_BYTE_STRING,p.snapshotVersion)),Uw(o,l);const h=new kr(p.target,l,c,p.sequenceNumber);fp(o,h)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){he("RemoteStore","Failed to raise snapshot:",r),await lu(t,r)}}async function lu(t,e,n){if(!pa(e))throw e;t.L_.add(1),await ya(t),t.q_.set("Offline"),n||(n=()=>Mw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{he("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Qu(t)})}function qw(t,e){return e().catch(n=>lu(t,n,e))}async function Yu(t){const e=we(t),n=Ur(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;UO(e);)try{const i=await bO(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,BO(e,i)}catch(i){await lu(e,i)}$w(e)&&zw(e)}function UO(t){return xi(t)&&t.O_.length<10}function BO(t,e){t.O_.push(e);const n=Ur(t);n.r_()&&n.V_&&n.m_(e.mutations)}function $w(t){return xi(t)&&!Ur(t).n_()&&t.O_.length>0}function zw(t){Ur(t).start()}async function qO(t){Ur(t).p_()}async function $O(t){const e=Ur(t);for(const n of t.O_)e.m_(n.mutations)}async function zO(t,e,n){const r=t.O_.shift(),i=ip.from(r,e,n);await qw(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Yu(t)}async function HO(t,e){e&&Ur(t).V_&&await async function(r,i){if(function(s){return C2(s)&&s!==re.ABORTED}(i.code)){const o=r.O_.shift();Ur(r).s_(),await qw(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Yu(r)}}(t,e),$w(t)&&zw(t)}async function Fy(t,e){const n=we(t);n.asyncQueue.verifyOperationInProgress(),he("RemoteStore","RemoteStore received new credentials");const r=xi(n);n.L_.add(3),await ya(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Qu(n)}async function WO(t,e){const n=we(t);e?(n.L_.delete(2),await Qu(n)):e||(n.L_.add(2),await ya(n),n.q_.set("Unknown"))}function Ro(t){return t.K_||(t.K_=function(n,r,i){const o=we(n);return o.w_(),new RO(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:MO.bind(null,t),Ro:jO.bind(null,t),mo:VO.bind(null,t),d_:FO.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),dp(t)?hp(t):t.q_.set("Unknown")):(await t.K_.stop(),Bw(t))})),t.K_}function Ur(t){return t.U_||(t.U_=function(n,r,i){const o=we(n);return o.w_(),new NO(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:qO.bind(null,t),mo:HO.bind(null,t),f_:$O.bind(null,t),g_:zO.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Yu(t)):(await t.U_.stop(),t.O_.length>0&&(he("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new pp(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mp(t,e){if(ar("AsyncQueue",`${e}: ${t}`),pa(t))return new de(re.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||pe.comparator(n.key,r.key):(n,r)=>pe.comparator(n.key,r.key),this.keyedMap=ms(),this.sortedSet=new Xe(this.comparator)}static emptySet(e){return new oo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof oo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new oo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(){this.W_=new Xe(pe.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ve():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Eo{constructor(e,n,r,i,o,s,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new Eo(e,n,oo.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$u(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class GO{constructor(){this.queries=By(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=we(n),o=i.queries;i.queries=By(),o.forEach((s,a)=>{for(const l of a.j_)l.onError(r)})})(this,new de(re.ABORTED,"Firestore shutting down"))}}function By(){return new Po(t=>dw(t),$u)}async function gp(t,e){const n=we(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new KO,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await n.onListen(i,!0);break;case 1:o.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const a=mp(s,`Initialization of query '${Di(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&vp(n)}async function yp(t,e){const n=we(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function QO(t,e){const n=we(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&vp(n)}function YO(t,e,n){const r=we(t),i=r.queries.get(e);if(i)for(const o of i.j_)o.onError(n);r.queries.delete(e)}function vp(t){t.Y_.forEach(e=>{e.next()})}var Ph,qy;(qy=Ph||(Ph={})).ea="default",qy.Cache="cache";class _p{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Eo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Eo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ph.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e){this.key=e}}class Ww{constructor(e){this.key=e}}class XO{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ae(),this.mutatedKeys=Ae(),this.Aa=pw(e),this.Ra=new oo(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Uy,i=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,h)=>{const f=i.get(p),d=zu(this.query,h)?h:null,_=!!f&&this.mutatedKeys.has(f.key),v=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations);let E=!1;f&&d?f.data.isEqual(d.data)?_!==v&&(r.track({type:3,doc:d}),E=!0):this.ga(f,d)||(r.track({type:2,doc:d}),E=!0,(l&&this.Aa(d,l)>0||c&&this.Aa(d,c)<0)&&(a=!0)):!f&&d?(r.track({type:0,doc:d}),E=!0):f&&!d&&(r.track({type:1,doc:f}),E=!0,(l||c)&&(a=!0)),E&&(d?(s=s.add(d),o=v?o.add(p):o.delete(p)):(s=s.delete(p),o=o.delete(p)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const p=this.query.limitType==="F"?s.last():s.first();s=s.delete(p.key),o=o.delete(p.key),r.track({type:1,doc:p})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((p,h)=>function(d,_){const v=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve()}};return v(d)-v(_)}(p.type,h.type)||this.Aa(p.doc,h.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,s.length!==0||c?{snapshot:new Eo(this.query,e.Ra,o,s,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Uy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ae(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Ww(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Hw(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ae();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Eo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class JO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class ZO{constructor(e){this.key=e,this.va=!1}}class eP{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Po(a=>dw(a),$u),this.Ma=new Map,this.xa=new Set,this.Oa=new Xe(pe.comparator),this.Na=new Map,this.La=new ap,this.Ba={},this.ka=new Map,this.qa=wo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function tP(t,e,n=!0){const r=Jw(t);let i;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await Kw(r,e,n,!0),i}async function nP(t,e){const n=Jw(t);await Kw(n,e,!0,!1)}async function Kw(t,e,n,r){const i=await SO(t.localStore,Cn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=await rP(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&Fw(t.remoteStore,i),a}async function rP(t,e,n,r,i){t.Ka=(h,f,d)=>async function(v,E,m,g){let w=E.view.ma(m);w.ns&&(w=await My(v.localStore,E.query,!1).then(({documents:S})=>E.view.ma(S,w)));const y=g&&g.targetChanges.get(E.targetId),I=g&&g.targetMismatches.get(E.targetId)!=null,C=E.view.applyChanges(w,v.isPrimaryClient,y,I);return zy(v,E.targetId,C.wa),C.snapshot}(t,h,f,d);const o=await My(t.localStore,e,!0),s=new XO(e,o.Ts),a=s.ma(o.documents),l=ga.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=s.applyChanges(a,t.isPrimaryClient,l);zy(t,n,c.wa);const p=new JO(e,n,s);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function iP(t,e,n){const r=we(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!$u(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Oh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&cp(r.remoteStore,i.targetId),Rh(r,i.targetId)}).catch(da)):(Rh(r,i.targetId),await Oh(r.localStore,i.targetId,!0))}async function oP(t,e){const n=we(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),cp(n.remoteStore,r.targetId))}async function sP(t,e,n){const r=dP(t);try{const i=await function(s,a){const l=we(s),c=ot.now(),p=a.reduce((d,_)=>d.add(_.key),Ae());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",d=>{let _=lr(),v=Ae();return l.cs.getEntries(d,p).next(E=>{_=E,_.forEach((m,g)=>{g.isValidDocument()||(v=v.add(m))})}).next(()=>l.localDocuments.getOverlayedDocuments(d,_)).next(E=>{h=E;const m=[];for(const g of a){const w=x2(g,h.get(g.key).overlayedDocument);w!=null&&m.push(new Ii(g.key,w,sw(w.value.mapValue),Dn.exists(!0)))}return l.mutationQueue.addMutationBatch(d,c,m,a)}).next(E=>{f=E;const m=E.applyToLocalDocumentSet(h,v);return l.documentOverlayCache.saveOverlays(d,E.batchId,m)})}).then(()=>({batchId:f.batchId,changes:gw(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let c=s.Ba[s.currentUser.toKey()];c||(c=new Xe(Ne)),c=c.insert(a,l),s.Ba[s.currentUser.toKey()]=c}(r,i.batchId,n),await va(r,i.changes),await Yu(r.remoteStore)}catch(i){const o=mp(i,"Failed to persist write");n.reject(o)}}async function Gw(t,e){const n=we(t);try{const r=await EO(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Na.get(o);s&&(Le(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Le(s.va):i.removedDocuments.size>0&&(Le(s.va),s.va=!1))}),await va(n,r,e)}catch(r){await da(r)}}function $y(t,e,n){const r=we(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((o,s)=>{const a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const l=we(s);l.onlineState=a;let c=!1;l.queries.forEach((p,h)=>{for(const f of h.j_)f.Z_(a)&&(c=!0)}),c&&vp(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function aP(t,e,n){const r=we(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),o=i&&i.key;if(o){let s=new Xe(pe.comparator);s=s.insert(o,Pt.newNoDocument(o,_e.min()));const a=Ae().add(o),l=new Ku(_e.min(),new Map,new Xe(Ne),s,a);await Gw(r,l),r.Oa=r.Oa.remove(o),r.Na.delete(e),wp(r)}else await Oh(r.localStore,e,!1).then(()=>Rh(r,e,n)).catch(da)}async function lP(t,e){const n=we(t),r=e.batch.batchId;try{const i=await wO(n.localStore,e);Yw(n,r,null),Qw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await va(n,i)}catch(i){await da(i)}}async function uP(t,e,n){const r=we(t);try{const i=await function(s,a){const l=we(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let p;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Le(h!==null),p=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,p,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,p)).next(()=>l.localDocuments.getDocuments(c,p))})}(r.localStore,e);Yw(r,e,n),Qw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await va(r,i)}catch(i){await da(i)}}function Qw(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Yw(t,e,n){const r=we(t);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Rh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Xw(t,r)})}function Xw(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(cp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),wp(t))}function zy(t,e,n){for(const r of n)r instanceof Hw?(t.La.addReference(r.key,e),cP(t,r)):r instanceof Ww?(he("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Xw(t,r.key)):ve()}function cP(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(he("SyncEngine","New document in limbo: "+n),t.xa.add(r),wp(t))}function wp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new pe(He.fromString(e)),r=t.qa.next();t.Na.set(r,new ZO(n)),t.Oa=t.Oa.insert(n,r),Fw(t.remoteStore,new kr(Cn(qu(n.path)),r,"TargetPurposeLimboResolution",Yd.oe))}}async function va(t,e,n){const r=we(t),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{s.push(r.Ka(l,e,n).then(c=>{var p;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(p=n==null?void 0:n.targetChanges.get(l.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=up.Wi(l.targetId,c);o.push(h)}}))}),await Promise.all(s),r.Ca.d_(i),await async function(l,c){const p=we(l);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>ie.forEach(c,f=>ie.forEach(f.$i,d=>p.persistence.referenceDelegate.addReference(h,f.targetId,d)).next(()=>ie.forEach(f.Ui,d=>p.persistence.referenceDelegate.removeReference(h,f.targetId,d)))))}catch(h){if(!pa(h))throw h;he("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const d=p.os.get(f),_=d.snapshotVersion,v=d.withLastLimboFreeSnapshotVersion(_);p.os=p.os.insert(f,v)}}}(r.localStore,o))}async function fP(t,e){const n=we(t);if(!n.currentUser.isEqual(e)){he("SyncEngine","User change. New user:",e.toKey());const r=await Lw(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(l=>{l.reject(new de(re.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await va(n,r.hs)}}function hP(t,e){const n=we(t),r=n.Na.get(e);if(r&&r.va)return Ae().add(r.key);{let i=Ae();const o=n.Ma.get(e);if(!o)return i;for(const s of o){const a=n.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function Jw(t){const e=we(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Gw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aP.bind(null,e),e.Ca.d_=QO.bind(null,e.eventManager),e.Ca.$a=YO.bind(null,e.eventManager),e}function dP(t){const e=we(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uP.bind(null,e),e}class uu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return _O(this.persistence,new yO,e.initialUser,this.serializer)}Ga(e){return new pO(lp.Zr,this.serializer)}Wa(e){return new AO}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uu.provider={build:()=>new uu};class Nh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>$y(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=fP.bind(null,this.syncEngine),await WO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new GO}()}createDatastore(e){const n=Gu(e.databaseInfo.databaseId),r=function(o){return new PO(o)}(e.databaseInfo);return function(o,s,a,l){return new CO(o,s,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new LO(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>$y(this.syncEngine,n,0),function(){return Vy.D()?new Vy:new IO}())}createSyncEngine(e,n){return function(i,o,s,a,l,c,p){const h=new eP(i,o,s,a,l,c);return p&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=we(i);he("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await ya(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Nh.provider={build:()=>new Nh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ar("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=xt.UNAUTHENTICATED,this.clientId=Qd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{he("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(he("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=mp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function uf(t,e){t.asyncQueue.verifyOperationInProgress(),he("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Lw(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Hy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await mP(t);he("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Fy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Fy(e.remoteStore,i)),t._onlineComponents=e}async function mP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){he("FirestoreClient","Using user provided OfflineComponentProvider");try{await uf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===re.FAILED_PRECONDITION||i.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;gi("Error using user provided cache. Falling back to memory cache: "+n),await uf(t,new uu)}}else he("FirestoreClient","Using default OfflineComponentProvider"),await uf(t,new uu);return t._offlineComponents}async function Zw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(he("FirestoreClient","Using user provided OnlineComponentProvider"),await Hy(t,t._uninitializedComponentsProvider._online)):(he("FirestoreClient","Using default OnlineComponentProvider"),await Hy(t,new Nh))),t._onlineComponents}function gP(t){return Zw(t).then(e=>e.syncEngine)}async function cu(t){const e=await Zw(t),n=e.eventManager;return n.onListen=tP.bind(null,e.syncEngine),n.onUnlisten=iP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=nP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=oP.bind(null,e.syncEngine),n}function yP(t,e,n={}){const r=new Zn;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,l,c){const p=new Ep({next:f=>{p.Za(),s.enqueueAndForget(()=>yp(o,h));const d=f.docs.has(a);!d&&f.fromCache?c.reject(new de(re.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&f.fromCache&&l&&l.source==="server"?c.reject(new de(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new _p(qu(a.path),p,{includeMetadataChanges:!0,_a:!0});return gp(o,h)}(await cu(t),t.asyncQueue,e,n,r)),r.promise}function vP(t,e,n={}){const r=new Zn;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,l,c){const p=new Ep({next:f=>{p.Za(),s.enqueueAndForget(()=>yp(o,h)),f.fromCache&&l.source==="server"?c.reject(new de(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new _p(a,p,{includeMetadataChanges:!0,_a:!0});return gp(o,h)}(await cu(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(t,e,n){if(!n)throw new de(re.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function nE(t,e,n,r){if(e===!0&&r===!0)throw new de(re.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ky(t){if(!pe.isDocumentKey(t))throw new de(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Gy(t){if(pe.isDocumentKey(t))throw new de(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Tp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ve()}function ln(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new de(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Tp(t);throw new de(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new de(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new de(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new de(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new de(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new de(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xu{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qy(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new rw;switch(r.type){case"firstParty":return new Ux(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new de(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Wy.get(n);r&&(he("ComponentProvider","Removing Datastore"),Wy.delete(n),r.terminate())}(this),Promise.resolve()}}function rE(t,e,n,r={}){var i;const o=(t=ln(t,Xu))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&gi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=xt.MOCK_USER;else{a=ck(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new de(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new xt(c)}t._authCredentials=new jx(new nw(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new No(this.firestore,e,this._query)}}class jt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new er(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}}class er extends No{constructor(e,n,r){super(e,n,qu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new pe(e))}withConverter(e){return new er(this.firestore,e,this._path)}}function To(t,e,...n){if(t=Ct(t),tE("collection","path",e),t instanceof Xu){const r=He.fromString(e,...n);return Gy(r),new er(t,null,r)}{if(!(t instanceof jt||t instanceof er))throw new de(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(He.fromString(e,...n));return Gy(r),new er(t.firestore,null,r)}}function ht(t,e,...n){if(t=Ct(t),arguments.length===1&&(e=Qd.newId()),tE("doc","path",e),t instanceof Xu){const r=He.fromString(e,...n);return Ky(r),new jt(t,null,new pe(r))}{if(!(t instanceof jt||t instanceof er))throw new de(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(He.fromString(e,...n));return Ky(r),new jt(t.firestore,t instanceof er?t.converter:null,new pe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new jw(this,"async_queue_retry"),this.Vu=()=>{const r=lf();r&&he("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=lf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=lf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Zn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!pa(e))throw e;he("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw ar("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=pp.createAndSchedule(this,e,n,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&ve()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Xy(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Br extends Xu{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Yy,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Yy(e),this._firestoreClient=void 0,await e}}}function iE(t,e){const n=typeof t=="object"?t:Md(),r=typeof t=="string"?t:"(default)",i=Ai(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=lk("firestore");o&&rE(i,...o)}return i}function _a(t){if(t._terminated)throw new de(re.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||_P(t),t._firestoreClient}function _P(t){var e,n,r;const i=t._freezeSettings(),o=function(a,l,c,p){return new Zx(a,l,c,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,eE(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new pP(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _i(mt.fromBase64String(e))}catch(n){throw new de(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new _i(mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=/^__.*__$/;class EP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ii(e,this.data,this.fieldMask,n,this.fieldTransforms):new ma(e,this.data,n,this.fieldTransforms)}}function oE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve()}}class Sp{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Sp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return fu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(oE(this.Cu)&&wP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class TP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Gu(e)}Qu(e,n,r,i=!1){return new Sp({Cu:e,methodName:n,qu:r,path:dt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bP(t){const e=t._freezeSettings(),n=Gu(t._databaseId);return new TP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function SP(t,e,n,r,i,o={}){const s=t.Qu(o.merge||o.mergeFields?2:0,e,n,i);uE("Data must be an object, but it was:",s,r);const a=aE(r,s);let l,c;if(o.merge)l=new yn(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const p=[];for(const h of o.mergeFields){const f=kP(e,h,n);if(!s.contains(f))throw new de(re.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);IP(p,f)||p.push(f)}l=new yn(p),c=s.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=s.fieldTransforms;return new EP(new rn(a),l,c)}function sE(t,e){if(lE(t=Ct(t)))return uE("Unsupported field value:",e,t),aE(t,e);if(t instanceof bp)return function(r,i){if(!oE(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let l=sE(a,i.Lu(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return T2(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=ot.fromDate(r);return{timestampValue:au(i.serializer,o)}}if(r instanceof ot){const o=new ot(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:au(i.serializer,o)}}if(r instanceof Zu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _i)return{bytesValue:xw(i.serializer,r._byteString)};if(r instanceof jt){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:sp(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ec)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return np(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Tp(r)}`)}(t,e)}function aE(t,e){const n={};return iw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oo(t,(r,i)=>{const o=sE(i,e.Mu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function lE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ot||t instanceof Zu||t instanceof _i||t instanceof jt||t instanceof bp||t instanceof ec)}function uE(t,e,n){if(!lE(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Tp(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function kP(t,e,n){if((e=Ct(e))instanceof Ju)return e._internalPath;if(typeof e=="string")return cE(t,e);throw fu("Field path arguments must be of type string or ",t,!1,void 0,n)}const AP=new RegExp("[~\\*/\\[\\]]");function cE(t,e,n){if(e.search(AP)>=0)throw fu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ju(...e.split("."))._internalPath}catch{throw fu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function fu(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new de(re.INVALID_ARGUMENT,a+t+l)}function IP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(hE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class xP extends fE{data(){return super.data()}}function hE(t,e){return typeof e=="string"?cE(t,e):e instanceof Ju?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new de(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pE{convertValue(e,n="none"){switch(vi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ve()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Oo(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>tt(s.doubleValue));return new ec(o)}convertGeoPoint(e){return new Zu(tt(e.latitude),tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Jd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ea(e));default:return null}}convertTimestamp(e){const n=Fr(e);return new ot(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=He.fromString(e);Le(Dw(r));const i=new yo(r.get(1),r.get(3)),o=new pe(r.popFirst(5));return i.isEqual(n)||ar(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kp extends fE{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Rs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(hE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Rs extends kp{data(e={}){return super.data(e)}}class Ap{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Qi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Rs(this._firestore,this._userDataWriter,r.key,r,new Qi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{const l=new Rs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Qi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{const l=new Rs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Qi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,p=-1;return a.type!==0&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),p=s.indexOf(a.doc.key)),{type:PP(a.type),doc:l,oldIndex:c,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function PP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(t){t=ln(t,jt);const e=ln(t.firestore,Br);return yP(_a(e),t._key).then(n=>gE(e,t,n))}class Ip extends pE{constructor(e){super(),this.firestore=e}convertBytes(e){return new _i(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,n)}}function RP(t){t=ln(t,No);const e=ln(t.firestore,Br),n=_a(e),r=new Ip(e);return dE(t._query),vP(n,t._query).then(i=>new Ap(e,r,t,i))}function vn(t,e,n){t=ln(t,jt);const r=ln(t.firestore,Br),i=OP(t.converter,e);return xp(r,[SP(bP(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Dn.none())])}function so(t){return xp(ln(t.firestore,Br),[new rp(t._key,Dn.none())])}function wi(t,...e){var n,r,i;t=Ct(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Xy(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Xy(e[s])){const h=e[s];e[s]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[s+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[s+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,c,p;if(t instanceof jt)c=ln(t.firestore,Br),p=qu(t._key.path),l={next:h=>{e[s]&&e[s](gE(c,t,h))},error:e[s+1],complete:e[s+2]};else{const h=ln(t,No);c=ln(h.firestore,Br),p=h._query;const f=new Ip(c);l={next:d=>{e[s]&&e[s](new Ap(c,f,h,d))},error:e[s+1],complete:e[s+2]},dE(t._query)}return function(f,d,_,v){const E=new Ep(v),m=new _p(d,E,_);return f.asyncQueue.enqueueAndForget(async()=>gp(await cu(f),m)),()=>{E.Za(),f.asyncQueue.enqueueAndForget(async()=>yp(await cu(f),m))}}(_a(c),p,a,l)}function xp(t,e){return function(r,i){const o=new Zn;return r.asyncQueue.enqueueAndForget(async()=>sP(await gP(r),i,o)),o.promise}(_a(t),e)}function gE(t,e,n){const r=n.docs.get(e._key),i=new Ip(t);return new kp(t,i,e._key,r,new Qi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){xo=i})(Ao),Mn(new bn("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new Br(new Vx(r.getProvider("auth-internal")),new qx(r.getProvider("app-check-internal")),function(c,p){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new de(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yo(c.options.projectId,p)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),an(my,"4.7.3",e),an(my,"4.7.3","esm2017")})();const NP=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:pE,Bytes:_i,CollectionReference:er,DocumentReference:jt,DocumentSnapshot:kp,FieldPath:Ju,FieldValue:bp,Firestore:Br,FirestoreError:de,GeoPoint:Zu,Query:No,QueryDocumentSnapshot:Rs,QuerySnapshot:Ap,SnapshotMetadata:Qi,Timestamp:ot,VectorValue:ec,_AutoId:Qd,_ByteString:mt,_DatabaseId:yo,_DocumentKey:pe,_EmptyAuthCredentialsProvider:rw,_FieldPath:dt,_cast:ln,_logWarn:gi,_validateIsNotUsedTogether:nE,collection:To,connectFirestoreEmulator:rE,deleteDoc:so,doc:ht,ensureFirestoreConfigured:_a,executeWrite:xp,getDoc:mE,getDocs:RP,getFirestore:iE,onSnapshot:wi,setDoc:vn},Symbol.toStringTag,{value:"Module"})),yE="@firebase/installations",Op="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE=1e4,_E=`w:${Op}`,wE="FIS_v2",CP="https://firebaseinstallations.googleapis.com/v1",DP=60*60*1e3,LP="installations",MP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ei=new ki(LP,MP,jP);function EE(t){return t instanceof Sn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE({projectId:t}){return`${CP}/projects/${t}/installations`}function bE(t){return{token:t.token,requestStatus:2,expiresIn:FP(t.expiresIn),creationTime:Date.now()}}async function SE(t,e){const r=(await e.json()).error;return Ei.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function kE({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function VP(t,{refreshToken:e}){const n=kE(t);return n.append("Authorization",UP(e)),n}async function AE(t){const e=await t();return e.status>=500&&e.status<600?t():e}function FP(t){return Number(t.replace("s","000"))}function UP(t){return`${wE} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BP({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=TE(t),i=kE(t),o=e.getImmediate({optional:!0});if(o){const c=await o.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const s={fid:n,authVersion:wE,appId:t.appId,sdkVersion:_E},a={method:"POST",headers:i,body:JSON.stringify(s)},l=await AE(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:bE(c.authToken)}}else throw await SE("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P=/^[cdef][\w-]{21}$/,Ch="";function zP(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=HP(t);return $P.test(n)?n:Ch}catch{return Ch}}function HP(t){return qP(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE=new Map;function OE(t,e){const n=tc(t);PE(n,e),WP(n,e)}function PE(t,e){const n=xE.get(t);if(n)for(const r of n)r(e)}function WP(t,e){const n=KP();n&&n.postMessage({key:t,fid:e}),GP()}let ii=null;function KP(){return!ii&&"BroadcastChannel"in self&&(ii=new BroadcastChannel("[Firebase] FID Change"),ii.onmessage=t=>{PE(t.data.key,t.data.fid)}),ii}function GP(){xE.size===0&&ii&&(ii.close(),ii=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP="firebase-installations-database",YP=1,Ti="firebase-installations-store";let cf=null;function Pp(){return cf||(cf=m1(QP,YP,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ti)}}})),cf}async function hu(t,e){const n=tc(t),i=(await Pp()).transaction(Ti,"readwrite"),o=i.objectStore(Ti),s=await o.get(n);return await o.put(e,n),await i.done,(!s||s.fid!==e.fid)&&OE(t,e.fid),e}async function RE(t){const e=tc(t),r=(await Pp()).transaction(Ti,"readwrite");await r.objectStore(Ti).delete(e),await r.done}async function nc(t,e){const n=tc(t),i=(await Pp()).transaction(Ti,"readwrite"),o=i.objectStore(Ti),s=await o.get(n),a=e(s);return a===void 0?await o.delete(n):await o.put(a,n),await i.done,a&&(!s||s.fid!==a.fid)&&OE(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rp(t){let e;const n=await nc(t.appConfig,r=>{const i=XP(r),o=JP(t,i);return e=o.registrationPromise,o.installationEntry});return n.fid===Ch?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function XP(t){const e=t||{fid:zP(),registrationStatus:0};return NE(e)}function JP(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Ei.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=ZP(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:eR(t)}:{installationEntry:e}}async function ZP(t,e){try{const n=await BP(t,e);return hu(t.appConfig,n)}catch(n){throw EE(n)&&n.customData.serverCode===409?await RE(t.appConfig):await hu(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function eR(t){let e=await Jy(t.appConfig);for(;e.registrationStatus===1;)await IE(100),e=await Jy(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Rp(t);return r||n}return e}function Jy(t){return nc(t,e=>{if(!e)throw Ei.create("installation-not-found");return NE(e)})}function NE(t){return tR(t)?{fid:t.fid,registrationStatus:0}:t}function tR(t){return t.registrationStatus===1&&t.registrationTime+vE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nR({appConfig:t,heartbeatServiceProvider:e},n){const r=rR(t,n),i=VP(t,n),o=e.getImmediate({optional:!0});if(o){const c=await o.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const s={installation:{sdkVersion:_E,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(s)},l=await AE(()=>fetch(r,a));if(l.ok){const c=await l.json();return bE(c)}else throw await SE("Generate Auth Token",l)}function rR(t,{fid:e}){return`${TE(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Np(t,e=!1){let n;const r=await nc(t.appConfig,o=>{if(!CE(o))throw Ei.create("not-registered");const s=o.authToken;if(!e&&sR(s))return o;if(s.requestStatus===1)return n=iR(t,e),o;{if(!navigator.onLine)throw Ei.create("app-offline");const a=lR(o);return n=oR(t,a),a}});return n?await n:r.authToken}async function iR(t,e){let n=await Zy(t.appConfig);for(;n.authToken.requestStatus===1;)await IE(100),n=await Zy(t.appConfig);const r=n.authToken;return r.requestStatus===0?Np(t,e):r}function Zy(t){return nc(t,e=>{if(!CE(e))throw Ei.create("not-registered");const n=e.authToken;return uR(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function oR(t,e){try{const n=await nR(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await hu(t.appConfig,r),n}catch(n){if(EE(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await RE(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await hu(t.appConfig,r)}throw n}}function CE(t){return t!==void 0&&t.registrationStatus===2}function sR(t){return t.requestStatus===2&&!aR(t)}function aR(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+DP}function lR(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function uR(t){return t.requestStatus===1&&t.requestTime+vE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cR(t){const e=t,{installationEntry:n,registrationPromise:r}=await Rp(e);return r?r.catch(console.error):Np(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fR(t,e=!1){const n=t;return await hR(n),(await Np(n,e)).token}async function hR(t){const{registrationPromise:e}=await Rp(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(t){if(!t||!t.options)throw ff("App Configuration");if(!t.name)throw ff("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw ff(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function ff(t){return Ei.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="installations",pR="installations-internal",mR=t=>{const e=t.getProvider("app").getImmediate(),n=dR(e),r=Ai(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},gR=t=>{const e=t.getProvider("app").getImmediate(),n=Ai(e,DE).getImmediate();return{getId:()=>cR(n),getToken:i=>fR(n,i)}};function yR(){Mn(new bn(DE,mR,"PUBLIC")),Mn(new bn(pR,gR,"PRIVATE"))}yR();an(yE,Op);an(yE,Op,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du="analytics",vR="firebase_id",_R="origin",wR=60*1e3,ER="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Cp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ht=new Mu("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Xt=new ki("analytics","Analytics",TR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(t){if(!t.startsWith(Cp)){const e=Xt.create("invalid-gtag-resource",{gtagURL:t});return Ht.warn(e.message),""}return t}function LE(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function SR(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function kR(t,e){const n=SR("firebase-js-sdk-policy",{createScriptURL:bR}),r=document.createElement("script"),i=`${Cp}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function AR(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function IR(t,e,n,r,i,o){const s=r[i];try{if(s)await e[s];else{const l=(await LE(n)).find(c=>c.measurementId===i);l&&await e[l.appId]}}catch(a){Ht.error(a)}t("config",i,o)}async function xR(t,e,n,r,i){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);const a=await LE(n);for(const l of s){const c=a.find(h=>h.measurementId===l),p=c&&e[c.appId];if(p)o.push(p);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",r,i||{})}catch(o){Ht.error(o)}}function OR(t,e,n,r){async function i(o,...s){try{if(o==="event"){const[a,l]=s;await xR(t,e,n,a,l)}else if(o==="config"){const[a,l]=s;await IR(t,e,n,r,a,l)}else if(o==="consent"){const[a,l]=s;t("consent",a,l)}else if(o==="get"){const[a,l,c]=s;t("get",a,l,c)}else if(o==="set"){const[a]=s;t("set",a)}else t(o,...s)}catch(a){Ht.error(a)}}return i}function PR(t,e,n,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=OR(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}function RR(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Cp)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=30,CR=1e3;class DR{constructor(e={},n=CR){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const ME=new DR;function LR(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function MR(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:LR(r)},o=ER.replace("{app-id}",n),s=await fetch(o,i);if(s.status!==200&&s.status!==304){let a="";try{const l=await s.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Xt.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()}async function jR(t,e=ME,n){const{appId:r,apiKey:i,measurementId:o}=t.options;if(!r)throw Xt.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw Xt.create("no-api-key")}const s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new UR;return setTimeout(async()=>{a.abort()},wR),jE({appId:r,apiKey:i,measurementId:o},s,a,e)}async function jE(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=ME){var o;const{appId:s,measurementId:a}=t;try{await VR(r,e)}catch(l){if(a)return Ht.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:s,measurementId:a};throw l}try{const l=await MR(t);return i.deleteThrottleMetadata(s),l}catch(l){const c=l;if(!FR(c)){if(i.deleteThrottleMetadata(s),a)return Ht.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:s,measurementId:a};throw l}const p=Number((o=c==null?void 0:c.customData)===null||o===void 0?void 0:o.httpStatus)===503?qg(n,i.intervalMillis,NR):qg(n,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+p,backoffCount:n+1};return i.setThrottleMetadata(s,h),Ht.debug(`Calling attemptFetch again in ${p} millis`),jE(t,h,r,i)}}function VR(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(o),r(Xt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function FR(t){if(!(t instanceof Sn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class UR{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function BR(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const o=await e,s=Object.assign(Object.assign({},r),{send_to:o});t("event",n,s)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qR(){if(f1())try{await h1()}catch(t){return Ht.warn(Xt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ht.warn(Xt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function $R(t,e,n,r,i,o,s){var a;const l=jR(t);l.then(d=>{n[d.measurementId]=d.appId,t.options.measurementId&&d.measurementId!==t.options.measurementId&&Ht.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${d.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(d=>Ht.error(d)),e.push(l);const c=qR().then(d=>{if(d)return r.getId()}),[p,h]=await Promise.all([l,c]);RR(o)||kR(o,p.measurementId),i("js",new Date);const f=(a=s==null?void 0:s.config)!==null&&a!==void 0?a:{};return f[_R]="firebase",f.update=!0,h!=null&&(f[vR]=h),i("config",p.measurementId,f),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.app=e}_delete(){return delete Ns[this.app.options.appId],Promise.resolve()}}let Ns={},ev=[];const tv={};let hf="dataLayer",HR="gtag",nv,VE,rv=!1;function WR(){const t=[];if(c1()&&t.push("This is a browser extension environment."),yk()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Xt.create("invalid-analytics-context",{errorInfo:e});Ht.warn(n.message)}}function KR(t,e,n){WR();const r=t.options.appId;if(!r)throw Xt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ht.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Xt.create("no-api-key");if(Ns[r]!=null)throw Xt.create("already-exists",{id:r});if(!rv){AR(hf);const{wrappedGtag:o,gtagCore:s}=PR(Ns,ev,tv,hf,HR);VE=o,nv=s,rv=!0}return Ns[r]=$R(t,ev,tv,e,nv,hf,n),new zR(t)}function GR(t=Md()){t=Ct(t);const e=Ai(t,du);return e.isInitialized()?e.getImmediate():QR(t)}function QR(t,e={}){const n=Ai(t,du);if(n.isInitialized()){const i=n.getImmediate();if(Ys(e,n.getOptions()))return i;throw Xt.create("already-initialized")}return n.initialize({options:e})}function YR(t,e,n,r){t=Ct(t),BR(VE,Ns[t.app.options.appId],e,n,r).catch(i=>Ht.error(i))}const iv="@firebase/analytics",ov="0.10.8";function XR(){Mn(new bn(du,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return KR(r,i,n)},"PUBLIC")),Mn(new bn("analytics-internal",t,"PRIVATE")),an(iv,ov),an(iv,ov,"esm2017");function t(e){try{const n=e.getProvider(du).getImmediate();return{logEvent:(r,i,o)=>YR(n,r,i,o)}}catch(n){throw Xt.create("interop-component-reg-failed",{reason:n})}}}XR();const JR={apiKey:"AIzaSyCbV3H_HhwK39sgj4A8UghvgK1W1TY1bpw",authDomain:"sadhana-prasad.firebaseapp.com",projectId:"sadhana-prasad",storageBucket:"sadhana-prasad.appspot.com",messagingSenderId:"654502924214",appId:"1:654502924214:web:ba5a346ce6b75ab07abb17",measurementId:"G-HR010HP0RC"},Dp=g1(JR);GR(Dp);const df=Lx(Dp),ZR=new Hn,Ke=iE(Dp),FE=le.createContext(void 0),eN=({children:t})=>{const[e,n]=le.useState(null),[r,i]=le.useState(!0);le.useEffect(()=>{const a=bI(df,l=>{n(l),i(!1)});return()=>a()},[]);const o=async()=>{await zI(df,ZR)},s=async()=>{await SI(df)};return B.jsx(FE.Provider,{value:{user:e,loading:r,signInWithGoogle:o,signOutUser:s},children:t})},Co=()=>{const t=le.useContext(FE);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},tN=()=>{const[t,e]=le.useState(()=>window.matchMedia("(prefers-color-scheme: dark)").matches);return le.useEffect(()=>{t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]),B.jsx("button",{"aria-label":"Toggle dark mode",className:"rounded-full p-2 bg-sky-300 dark:bg-gray-700 hover:bg-sky-400 dark:hover:bg-gray-600 transition",onClick:()=>e(n=>!n),children:t?"🌙":"☀️"})},nN=()=>{const{user:t,signInWithGoogle:e,signOutUser:n}=Co();return B.jsxs("nav",{className:"w-full flex items-center justify-between px-4 py-2 bg-sky-200 dark:bg-gray-800 shadow",children:[B.jsx("div",{className:"flex items-center gap-2",children:B.jsx("span",{className:"text-2xl font-bold text-sky-700 dark:text-sky-200",children:"🌟 SADHANA"})}),B.jsxs("div",{className:"flex items-center gap-4",children:[B.jsx(tN,{}),t?B.jsxs(B.Fragment,{children:[B.jsx("span",{className:"text-sky-900 dark:text-sky-100 font-medium",children:t.displayName}),B.jsx("button",{className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded transition",onClick:n,children:"Sign Out"})]}):B.jsx("button",{className:"bg-sky-500 hover:bg-sky-600 text-white px-3 py-1 rounded transition",onClick:e,children:"Sign In with Google"})]})]})},rN=({children:t})=>B.jsxs("div",{className:"min-h-screen flex flex-col bg-sky-50 dark:bg-gray-900 transition-colors",children:[B.jsx(nN,{}),B.jsx("main",{className:"flex-1 flex flex-col items-center justify-center p-4",children:t})]}),iN=({appDate:t})=>{const e=aj(),{user:n}=Co(),[r,i]=le.useState(""),[o,s]=le.useState(null),[a,l]=le.useState({hour:20,minute:0,message:"",sound:!1,vibrate:!1}),c=e.habits,p=e.reminders,h=async()=>{if(r.trim()&&n){const N={id:Date.now(),name:r.trim(),doneToday:!1,streak:0,lastCompleted:null,history:[]};await vn(ht(Ke,"users",n.uid,"habits",N.id.toString()),N),i("")}},f=async(N,D)=>{const j=c.find(z=>z.id===N);j&&await U({...j,name:D})},d=async N=>{const D=c.find(j=>j.id===N);D&&window.confirm(`Are you sure you want to delete the habit "${D.name}"?`)&&await K(N)},_=async N=>{const D=q(),j=c.find(z=>z.id===N);if(j&&!j.doneToday){let z=j.streak;j.lastCompleted===F()?z+=1:z=1,await U({...j,doneToday:!0,streak:z,lastCompleted:D,history:[...j.history,D]})}},v=c.filter(N=>N.doneToday).length,E=c.length>0?Math.round(v/c.length*100):0,[m,g]=le.useState("all"),w=c.filter(N=>m==="completed"?N.doneToday:m==="incomplete"?!N.doneToday:!0);le.useEffect(()=>{if(typeof window>"u"||Notification.permission==="denied")return;Notification.permission==="default"&&Notification.requestPermission();const N=new Date,D=[];return p.forEach(j=>{const z=new Date;z.setHours(j.hour,j.minute,0,0);let W=z.getTime()-N.getTime();W<0&&(W+=24*60*60*1e3),D.push(setTimeout(()=>{if(c.some(V=>!V.doneToday)){const V=new Notification("SADHANA Reminder",{body:j.message||"You have unfinished habits today! Keep your streak going! 🌟"});j.sound&&new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg").play(),j.vibrate&&navigator.vibrate&&navigator.vibrate([200,100,200]),V.onclick=()=>{window.confirm("Snooze this reminder for 10 minutes?")&&setTimeout(()=>{new Notification("SADHANA Snoozed Reminder",{body:j.message||"You have unfinished habits today! (Snoozed)"}),j.sound&&new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg").play(),j.vibrate&&navigator.vibrate&&navigator.vibrate([200,100,200])},10*60*1e3)}}},W))}),()=>D.forEach(j=>clearTimeout(j))},[c,p]);const y=async()=>{if(!n)return;const N={id:Date.now()+Math.floor(Math.random()*1e4),hour:a.hour,minute:a.minute,message:a.message,sound:a.sound,vibrate:a.vibrate};await vn(ht(Ke,"users",n.uid,"reminders",N.id.toString()),N),l({hour:20,minute:0,message:"",sound:!1,vibrate:!1})},I=async N=>{await H(N)},C=async(N,D)=>{const j=p.find(z=>z.id===N);j&&await G({...j,...D})},S=["Small steps every day lead to big results.","Discipline is the bridge between goals and accomplishment.","Consistency is more important than perfection.","You don’t have to be extreme, just consistent.","Success is the sum of small efforts repeated day in and day out.","The secret of your future is hidden in your daily routine.","Motivation gets you going, but discipline keeps you growing."],T=new Date().getDate()%S.length,P=S[T],b=c.length>0&&c.every(N=>N.doneToday),[k,x]=le.useState(!0),[O,M]=le.useState(null);le.useEffect(()=>{if(!n)return;x(!0),M(null);const N=To(Ke,"users",n.uid,"habits"),D=wi(N,()=>{x(!1)}),j=To(Ke,"users",n.uid,"reminders"),z=wi(j,()=>{});return()=>{D(),z()}},[n]);const U=async N=>{if(!n)return;const D=ht(Ke,"users",n.uid,"habits",N.id.toString());await vn(D,N)},K=async N=>{if(!n)return;const D=ht(Ke,"users",n.uid,"habits",N.toString());await so(D)},G=async N=>{if(!n)return;const D=ht(Ke,"users",n.uid,"reminders",N.id.toString());await vn(D,N)},H=async N=>{if(!n)return;const D=ht(Ke,"users",n.uid,"reminders",N.toString());await so(D)};le.useEffect(()=>{if(!n||c.length===0)return;const N=q();c.forEach(D=>{D.doneToday&&D.lastCompleted!==N&&U({...D,doneToday:!1})})},[c,n,t]);const q=zn.useCallback(()=>t||new Date().toISOString().slice(0,10),[t]),F=zn.useCallback(()=>{const N=t?new Date(t):new Date;return N.setDate(N.getDate()-1),N.toISOString().slice(0,10)},[t]);return B.jsxs("div",{className:"w-full max-w-md sm:max-w-lg md:max-w-2xl lg:max-w-3xl mx-auto bg-white dark:bg-gray-800 rounded-lg shadow p-4 sm:p-6 mt-4 sm:mt-6 transition-all text-gray-900 dark:text-gray-100",children:[k&&B.jsx("div",{className:"mb-4 text-center text-sky-500 dark:text-sky-300 font-semibold",children:"Loading..."}),O&&B.jsx("div",{className:"mb-4 text-center text-red-500 dark:text-red-400 font-semibold",children:O}),B.jsx("div",{className:"mb-4 text-center",children:B.jsx("span",{className:"italic text-sky-600 dark:text-sky-300 text-sm",children:P})}),b&&B.jsx("div",{className:"mb-4 flex justify-center",children:B.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-green-500 text-white text-xs font-bold shadow",children:"🌟 Perfect Day! All habits completed! 🌟"})}),B.jsx("h2",{className:"text-2xl font-bold mb-4 text-center text-gray-900 dark:text-gray-100",children:"Your Habits"}),B.jsxs("div",{className:"mb-4",children:[B.jsxs("div",{className:"flex justify-between items-center mb-1",children:[B.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-200",children:"Progress"}),B.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-300",children:[E,"%"]})]}),B.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:B.jsx("div",{className:"bg-sky-400 h-2.5 rounded-full transition-all",style:{width:`${E}%`}})})]}),B.jsxs("div",{className:"flex flex-wrap justify-center gap-2 mb-4",children:[B.jsx("button",{className:`px-2 py-1 rounded text-xs font-semibold ${m==="all"?"bg-sky-400 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100"}`,onClick:()=>g("all"),children:"All"}),B.jsx("button",{className:`px-2 py-1 rounded text-xs font-semibold ${m==="completed"?"bg-green-400 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100"}`,onClick:()=>g("completed"),children:"Completed"}),B.jsx("button",{className:`px-2 py-1 rounded text-xs font-semibold ${m==="incomplete"?"bg-red-400 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100"}`,onClick:()=>g("incomplete"),children:"Incomplete"})]}),B.jsxs("div",{className:"flex flex-col sm:flex-row mb-4 gap-2",children:[B.jsx("input",{className:"flex-1 rounded-l sm:rounded-l px-3 py-2 border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none min-w-0",type:"text",placeholder:"Add a new habit...",value:r,onChange:N=>i(N.target.value),onKeyDown:N=>N.key==="Enter"&&h()}),B.jsx("button",{className:"rounded-r sm:rounded-r bg-sky-400 hover:bg-sky-500 text-white px-4 py-2 font-semibold w-full sm:w-auto",onClick:h,children:"Add"})]}),B.jsxs("div",{className:"mb-4",children:[B.jsx("h3",{className:"text-sm font-bold mb-2 text-center",children:"Reminders"}),B.jsx("ul",{className:"mb-2",children:p.map(N=>B.jsxs("li",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 mb-1",children:[B.jsx("input",{type:"time",value:`${N.hour.toString().padStart(2,"0")}:${N.minute.toString().padStart(2,"0")}`,onChange:D=>{const[j,z]=D.target.value.split(":").map(Number);C(N.id,{hour:j,minute:z})},className:"rounded px-2 py-1 text-xs border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none w-full sm:w-20"}),B.jsx("input",{type:"text",placeholder:"Message",value:N.message,onChange:D=>C(N.id,{message:D.target.value}),className:"rounded px-2 py-1 text-xs border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none flex-1 min-w-0"}),B.jsxs("div",{className:"flex gap-2",children:[B.jsxs("label",{className:"flex items-center text-xs gap-1 text-gray-900 dark:text-gray-100",children:[B.jsx("input",{type:"checkbox",checked:N.sound,onChange:D=>C(N.id,{sound:D.target.checked})}),"Sound"]}),B.jsxs("label",{className:"flex items-center text-xs gap-1 text-gray-900 dark:text-gray-100",children:[B.jsx("input",{type:"checkbox",checked:N.vibrate,onChange:D=>C(N.id,{vibrate:D.target.checked})}),"Vibrate"]})]}),B.jsx("button",{className:"px-2 py-1 rounded bg-red-400 hover:bg-red-500 text-white text-xs font-semibold w-full md:w-auto",onClick:()=>I(N.id),title:"Delete reminder",children:"×"})]},N.id))}),B.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 p-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 shadow-sm",children:[B.jsx("input",{type:"time",value:`${a.hour.toString().padStart(2,"0")}:${a.minute.toString().padStart(2,"0")}`,onChange:N=>{const[D,j]=N.target.value.split(":").map(Number);l(z=>({...z,hour:D,minute:j}))},className:"rounded px-2 py-2 text-xs border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-sky-400 transition w-full sm:w-20"}),B.jsx("input",{type:"text",placeholder:"Message",value:a.message,onChange:N=>l(D=>({...D,message:String(N.target.value)})),className:"rounded px-2 py-2 text-xs border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-sky-400 transition flex-1 min-w-0"}),B.jsxs("div",{className:"flex gap-3 items-center px-1",children:[B.jsxs("label",{className:"flex items-center text-xs gap-1 cursor-pointer select-none text-gray-900 dark:text-gray-100",children:[B.jsx("input",{type:"checkbox",checked:a.sound,onChange:N=>l(D=>({...D,sound:N.target.checked})),className:"accent-sky-400 focus:ring-2 focus:ring-sky-400"}),B.jsx("span",{children:"Sound"})]}),B.jsxs("label",{className:"flex items-center text-xs gap-1 cursor-pointer select-none text-gray-900 dark:text-gray-100",children:[B.jsx("input",{type:"checkbox",checked:a.vibrate,onChange:N=>l(D=>({...D,vibrate:N.target.checked})),className:"accent-sky-400 focus:ring-2 focus:ring-sky-400"}),B.jsx("span",{children:"Vibrate"})]})]}),B.jsx("button",{className:"px-3 py-2 rounded bg-sky-400 hover:bg-sky-500 focus:ring-2 focus:ring-sky-400 text-white text-xs font-semibold w-full sm:w-auto transition shadow",onClick:y,title:"Add reminder",children:"+"})]})]}),B.jsxs("ul",{children:[w.length===0&&B.jsx("li",{className:"text-center text-gray-500 dark:text-gray-300",children:"No habits to show."}),w.map(N=>B.jsxs("li",{className:"flex flex-col md:flex-row items-stretch md:items-center justify-between py-2 border-b border-gray-200 dark:border-gray-700 last:border-b-0 gap-2 md:gap-0",children:[B.jsxs("span",{className:N.doneToday?"line-through text-gray-400 dark:text-gray-400":"text-gray-900 dark:text-gray-100",children:[B.jsx("input",{className:"bg-transparent border-none outline-none font-semibold text-base w-auto max-w-xs dark:bg-transparent",value:N.name,onChange:D=>f(N.id,D.target.value),disabled:N.doneToday,"aria-label":"Edit habit name"}),B.jsxs("span",{className:"ml-2 text-xs text-sky-500 dark:text-sky-300 font-semibold",children:["Streak: ",N.streak]})]}),B.jsxs("div",{className:"flex flex-wrap gap-2 md:gap-2 items-center justify-end",children:[B.jsx("button",{className:`px-3 py-1 rounded font-semibold transition-colors w-full md:w-auto ${N.doneToday?"bg-green-400 text-white cursor-not-allowed opacity-60":"bg-gray-200 hover:bg-sky-400 hover:text-white dark:bg-gray-700 dark:hover:bg-sky-500 dark:text-gray-100"}`,onClick:()=>_(N.id),disabled:N.doneToday,children:N.doneToday?"Done!":"Mark as Done"}),B.jsx("button",{className:"px-2 py-1 rounded bg-red-400 hover:bg-red-500 text-white text-xs font-semibold w-full md:w-auto",onClick:()=>d(N.id),title:"Delete habit",children:"Delete"}),B.jsx("button",{className:"px-2 py-1 rounded bg-indigo-400 hover:bg-indigo-500 text-white text-xs font-semibold w-full md:w-auto",onClick:()=>s(N.id),title:"View history",children:"History"})]})]},N.id))]}),o!==null&&B.jsx(oN,{habit:c.find(N=>N.id===o),onClose:()=>s(null),appDate:t,getToday:q})]})},oN=({habit:t,onClose:e,appDate:n,getToday:r})=>{const i=new Set(t.history),o=Array.from({length:30},(s,a)=>{const l=n?new Date(n):new Date;return l.setDate(l.getDate()-(29-a)),l});return B.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 p-2 sm:p-0 overflow-y-auto",children:B.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-6 w-full max-w-sm relative max-h-[90vh] overflow-y-auto",children:[B.jsx("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-gray-900 dark:hover:text-white",onClick:e,"aria-label":"Close",children:"×"}),B.jsxs("h3",{className:"text-lg font-bold mb-4 text-center",children:[t.name," - Last 30 Days"]}),B.jsx("div",{className:"grid grid-cols-7 gap-2",children:o.map(s=>{const a=s.toISOString().slice(0,10),l=r?a===r():!1;return B.jsx("div",{className:`w-8 h-8 flex items-center justify-center rounded-full text-xs font-semibold border transition-colors
                  ${i.has(a)?"bg-green-400 text-white border-green-500":"bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400 border-gray-300 dark:border-gray-600"}
                  ${l?"ring-2 ring-sky-400":""}
                `,title:a,children:s.getDate()},a)})}),B.jsx("div",{className:"mt-4 text-center text-xs text-gray-500 dark:text-gray-400",children:"Green = completed, Gray = not completed, Blue ring = today"})]})})},sN=({block:t,onEdit:e,onDelete:n,onToggleComplete:r})=>B.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg shadow mb-2",style:{backgroundColor:t.color},children:[B.jsx("span",{className:"text-2xl mr-2",children:t.icon}),B.jsxs("div",{className:"flex-1",children:[B.jsx("div",{className:"font-bold text-base",children:t.title}),B.jsxs("div",{className:"text-xs text-gray-700",children:[t.startTime," - ",t.endTime]}),t.notes&&B.jsx("div",{className:"text-xs text-gray-600 italic",children:t.notes})]}),B.jsx("button",{className:`px-2 py-1 rounded text-xs font-semibold ${t.completed?"bg-green-600 text-white":"bg-gray-200 text-gray-800"}`,onClick:()=>r(t.id),title:"Mark as done",children:t.completed?"✓":"Mark"}),B.jsx("button",{className:"px-2 py-1 rounded bg-yellow-300 text-xs font-semibold",onClick:()=>e(t),title:"Edit",children:"✎"}),B.jsx("button",{className:"px-2 py-1 rounded bg-red-400 text-white text-xs font-semibold",onClick:()=>n(t.id),title:"Delete",children:"×"})]}),sv=["#FFD700","#87CEEB","#90EE90","#FFB6C1","#FFA07A"],av=["🌅","📘","💪","🧘","📝","🍎","🌙"],aN=({open:t,initial:e={},onSave:n,onClose:r})=>{const[i,o]=le.useState(e.title||""),[s,a]=le.useState(e.startTime||"06:00"),[l,c]=le.useState(e.endTime||"07:00"),[p,h]=le.useState(e.color||sv[0]),[f,d]=le.useState(e.icon||av[0]),[_,v]=le.useState(e.notes||""),[E,m]=le.useState(e.type||"routine"),[g,w]=le.useState(e.repeat||"none");if(!t)return null;const y=()=>{i.trim()&&(n({id:e.id||Date.now().toString(),title:i,startTime:s,endTime:l,color:p,icon:f,notes:_,type:E,completed:e.completed||!1,repeat:g}),r())};return B.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:B.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 w-full max-w-sm relative",children:[B.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-red-500 dark:hover:text-red-400 text-2xl font-bold transition-colors","aria-label":"Close",onClick:r,children:"×"}),B.jsx("h3",{className:"text-2xl font-extrabold mb-6 text-center text-sky-500 dark:text-sky-300 tracking-tight drop-shadow",children:"Add Time Block"}),B.jsxs("div",{className:"mb-4",children:[B.jsx("label",{className:"block text-xs font-semibold mb-1 text-gray-700 dark:text-gray-200",children:"Title"}),B.jsx("input",{className:"w-full rounded-lg px-3 py-2 border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-sky-400 text-base shadow-sm transition",placeholder:"e.g. Morning Ritual",value:i,onChange:I=>o(I.target.value),autoFocus:!0})]}),B.jsxs("div",{className:"flex gap-3 mb-4",children:[B.jsxs("div",{className:"flex-1",children:[B.jsx("label",{className:"block text-xs font-semibold mb-1 text-gray-700 dark:text-gray-200",children:"Start"}),B.jsx("input",{type:"time",className:"w-full rounded-lg px-3 py-2 border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-sky-400 shadow-sm transition",value:s,onChange:I=>a(I.target.value)})]}),B.jsxs("div",{className:"flex-1",children:[B.jsx("label",{className:"block text-xs font-semibold mb-1 text-gray-700 dark:text-gray-200",children:"End"}),B.jsx("input",{type:"time",className:"w-full rounded-lg px-3 py-2 border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-sky-400 shadow-sm transition",value:l,onChange:I=>c(I.target.value)})]})]}),B.jsxs("div",{className:"mb-4 flex gap-3 items-center",children:[B.jsx("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-200",children:"Color"}),B.jsx("select",{value:p,onChange:I=>h(I.target.value),className:"rounded-lg px-2 py-2 border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-sky-400 shadow-sm transition",children:sv.map(I=>B.jsx("option",{value:I,style:{backgroundColor:I},children:I},I))}),B.jsx("label",{className:"block text-xs font-semibold ml-2 text-gray-700 dark:text-gray-200",children:"Icon"}),B.jsx("select",{value:f,onChange:I=>d(I.target.value),className:"rounded-lg px-2 py-2 border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-sky-400 shadow-sm transition",children:av.map(I=>B.jsx("option",{value:I,children:I},I))})]}),B.jsxs("div",{className:"mb-4",children:[B.jsx("label",{className:"block text-xs font-semibold mb-1 text-gray-700 dark:text-gray-200",children:"Notes"}),B.jsx("input",{className:"w-full rounded-lg px-3 py-2 border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-sky-400 text-base shadow-sm transition",placeholder:"e.g. Gratitude, water, light",value:_,onChange:I=>v(I.target.value)})]}),B.jsxs("div",{className:"mb-4 flex gap-3 items-center",children:[B.jsx("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-200",children:"Type"}),B.jsxs("select",{value:E,onChange:I=>m(I.target.value),className:"rounded-lg px-2 py-2 border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-sky-400 shadow-sm transition",children:[B.jsx("option",{value:"routine",children:"Routine"}),B.jsx("option",{value:"study",children:"Study"}),B.jsx("option",{value:"work",children:"Work"}),B.jsx("option",{value:"health",children:"Health"}),B.jsx("option",{value:"reflection",children:"Reflection"}),B.jsx("option",{value:"other",children:"Other"})]}),B.jsx("label",{className:"block text-xs font-semibold ml-2 text-gray-700 dark:text-gray-200",children:"Repeat"}),B.jsxs("select",{value:g,onChange:I=>w(I.target.value),className:"rounded-lg px-2 py-2 border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-sky-400 shadow-sm transition",children:[B.jsx("option",{value:"none",children:"None"}),B.jsx("option",{value:"daily",children:"Daily"}),B.jsx("option",{value:"weekly",children:"Weekly"})]})]}),B.jsx("button",{className:"w-full mt-4 px-3 py-3 rounded-lg bg-gradient-to-r from-sky-400 to-blue-500 hover:from-sky-500 hover:to-blue-600 text-white text-base font-bold shadow-lg transition-all duration-200",onClick:y,children:"Save"})]})})},lN=()=>{const{user:t}=Co(),[e,n]=le.useState([]),[r,i]=le.useState(()=>new Date().toISOString().slice(0,10)),[o,s]=le.useState(!1),[a,l]=le.useState(null),[c,p]=le.useState(!1),[h,f]=le.useState(null),[d,_]=le.useState(null);le.useEffect(()=>{if(!t)return;p(!0),f(null);const b=ht(Ke,"users",t.uid,"schedule",r),k=wi(b,x=>{const O=x.data();n((O==null?void 0:O.blocks)||[]),p(!1)},()=>{f("Failed to load schedule."),p(!1)});return()=>k()},[t,r]);const v=async b=>{if(t)try{f(null);const k=ht(Ke,"users",t.uid,"schedule",r);await vn(k,{userId:t.uid,date:r,blocks:b})}catch{f("Failed to save schedule.")}};function E(b,k){const x=U=>{const[K,G]=U.split(":").map(Number);return K*60+G},O=x(b.startTime),M=x(b.endTime);return e.some(U=>{if(k&&U.id===k)return!1;const K=x(U.startTime),G=x(U.endTime);return O<G&&M>K})}const m=async b=>{if(_(null),E(b)){_("Block overlaps with another.");return}const k=[...e,b];n(k),await v(k)},g=async b=>{if(_(null),E(b,b.id)){_("Block overlaps with another.");return}const k=e.map(x=>x.id===b.id?b:x);n(k),await v(k)},w=async b=>{_(null);const k=e.filter(x=>x.id!==b);n(k),await v(k)},y=async b=>{_(null);const k=e.map(x=>x.id===b?{...x,completed:!x.completed}:x);n(k),await v(k)},I=b=>{l(b),s(!0)},C=e.filter(b=>b.completed).length,S=e.length>0?Math.round(C/e.length*100):0,T=new Date,P=T.getHours()*60+T.getMinutes();return B.jsxs("div",{className:"w-full max-w-2xl mx-auto p-4",children:[B.jsxs("div",{className:"flex items-center justify-between mb-4",children:[B.jsxs("div",{className:"flex items-center gap-2",children:[B.jsx("span",{className:"text-lg font-bold",children:"🗓️"}),B.jsx("input",{type:"date",value:r,onChange:b=>i(b.target.value),className:"rounded px-2 py-1 border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none"})]}),B.jsx("button",{className:"px-3 py-2 rounded bg-sky-400 hover:bg-sky-500 text-white text-xs font-semibold",onClick:()=>{l(null),s(!0)},children:"➕ Add Block"})]}),B.jsxs("div",{className:"mb-4",children:[B.jsxs("div",{className:"flex justify-between items-center mb-1",children:[B.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-200",children:"Progress"}),B.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-300",children:[S,"%"]})]}),B.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:B.jsx("div",{className:"bg-sky-400 h-2.5 rounded-full transition-all",style:{width:`${S}%`}})})]}),c&&B.jsx("div",{className:"mb-4 text-center text-sky-500 dark:text-sky-300 font-semibold",children:"Loading..."}),h&&B.jsx("div",{className:"mb-4 text-center text-red-500 dark:text-red-400 font-semibold",children:h}),d&&B.jsx("div",{className:"mb-4 text-center text-red-500 dark:text-red-400 font-semibold",children:d}),B.jsxs("div",{className:"relative min-h-[600px] bg-gray-50 dark:bg-gray-900 rounded-lg p-4 overflow-y-auto",children:[B.jsx("div",{className:"absolute left-0 right-0 h-0.5 bg-sky-500 animate-pulse",style:{top:`${(P-300)/840*100}%`}}),e.sort((b,k)=>b.startTime.localeCompare(k.startTime)).map(b=>B.jsx(sN,{block:b,onEdit:I,onDelete:w,onToggleComplete:y},b.id)),e.length===0&&!c&&B.jsx("div",{className:"text-center text-gray-400 mt-8",children:"No blocks for this day."})]}),B.jsx(aN,{open:o,initial:a||{},onSave:a?g:m,onClose:()=>{s(!1),l(null)}})]})},uN=()=>{const{user:t}=Co(),[e,n]=le.useState([]),[r,i]=le.useState(!0);le.useEffect(()=>{if(!t)return;i(!0);const p=To(Ke,"users",t.uid,"habits"),h=wi(p,f=>{n(f.docs.map(d=>{const _=d.data();return{id:typeof d.id=="string"?parseInt(d.id):d.id,name:_.name,doneToday:_.doneToday,streak:_.streak,lastCompleted:_.lastCompleted,history:_.history||[]}})),i(!1)});return()=>h()},[t]);const o=e.length,s=e.reduce((p,h)=>p+h.history.length,0),a=e.length>0?Math.round(e.reduce((p,h)=>p+h.streak,0)/e.length):0,l=Math.max(0,...e.map(p=>p.streak)),c=(()=>{const p=e.flatMap(f=>f.history);return Array.from(new Set(p)).filter(f=>e.every(d=>d.history.includes(f))).length})();return B.jsxs("div",{className:"w-full max-w-2xl mx-auto p-4",children:[B.jsx("h2",{className:"text-2xl font-bold mb-4 text-center text-sky-600 dark:text-sky-300",children:"📊 Habit Analytics"}),r?B.jsx("div",{className:"text-center text-sky-400 font-semibold",children:"Loading..."}):B.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[B.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 flex flex-col items-center",children:[B.jsx("span",{className:"text-3xl font-bold text-sky-500",children:o}),B.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Total Habits"})]}),B.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 flex flex-col items-center",children:[B.jsx("span",{className:"text-3xl font-bold text-green-500",children:s}),B.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Total Completions"})]}),B.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 flex flex-col items-center",children:[B.jsx("span",{className:"text-3xl font-bold text-indigo-500",children:a}),B.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Average Streak"})]}),B.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 flex flex-col items-center",children:[B.jsx("span",{className:"text-3xl font-bold text-yellow-500",children:l}),B.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Best Streak"})]}),B.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 flex flex-col items-center",children:[B.jsx("span",{className:"text-3xl font-bold text-pink-500",children:c}),B.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Perfect Days"})]})]})]})},cN=({habitsCount:t,remindersCount:e,onResetHabits:n,onMarkAllDone:r,onClearReminders:i,onAddTestHabit:o,onAddTestReminder:s,appDate:a,setAppDate:l,onDeleteAllData:c})=>{const[p,h]=le.useState(!1),[f,d]=le.useState(a||new Date().toISOString().slice(0,10));return B.jsxs("div",{className:"fixed bottom-4 right-4 z-50 max-w-full",children:[B.jsx("button",{className:"bg-gray-800 text-white rounded-full p-3 shadow-lg hover:bg-sky-500 transition",onClick:()=>h(_=>!_),title:"Developer Cheat Menu",children:"🛠️"}),p&&B.jsxs("div",{className:"mt-2 bg-white dark:bg-gray-900 rounded-lg shadow-lg p-4 w-72 max-w-xs border border-gray-300 dark:border-gray-700",children:[B.jsx("div",{className:"font-bold mb-2 text-sky-600 dark:text-sky-300",children:"Developer Cheat Menu"}),B.jsx("div",{className:"mb-2 text-xs text-gray-500",children:"Quick test/dev actions"}),B.jsx("button",{className:"w-full mb-1 px-2 py-1 rounded bg-sky-400 hover:bg-sky-500 text-white text-xs font-semibold",onClick:n,children:"Reset All Habits"}),B.jsx("button",{className:"w-full mb-1 px-2 py-1 rounded bg-green-400 hover:bg-green-500 text-white text-xs font-semibold",onClick:r,children:"Mark All Done"}),B.jsx("button",{className:"w-full mb-1 px-2 py-1 rounded bg-indigo-400 hover:bg-indigo-500 text-white text-xs font-semibold",onClick:o,children:"Add Test Habit"}),B.jsx("button",{className:"w-full mb-1 px-2 py-1 rounded bg-yellow-400 hover:bg-yellow-500 text-white text-xs font-semibold",onClick:s,children:"Add Test Reminder"}),B.jsx("button",{className:"w-full mb-1 px-2 py-1 rounded bg-red-400 hover:bg-red-500 text-white text-xs font-semibold",onClick:i,children:"Clear All Reminders"}),B.jsx("button",{className:"w-full mb-1 px-2 py-1 rounded bg-red-600 hover:bg-red-700 text-white text-xs font-bold border-2 border-red-800 shadow",onClick:c,style:{marginTop:8},disabled:!c,title:"Delete ALL data (irreversible)",children:"Delete ALL Data"}),B.jsxs("div",{className:"mt-2 text-xs text-gray-700 dark:text-gray-300",children:[B.jsxs("div",{children:["Habits: ",t]}),B.jsxs("div",{children:["Reminders: ",e]})]}),B.jsxs("div",{className:"mt-4",children:[B.jsx("label",{className:"block text-xs font-semibold mb-1 text-gray-700 dark:text-gray-200",children:"Set App Date (for testing):"}),B.jsx("input",{type:"date",value:f,onChange:_=>d(_.target.value),className:"rounded px-2 py-1 border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none w-full"}),B.jsx("button",{className:"mt-2 w-full px-2 py-1 rounded bg-sky-500 hover:bg-sky-600 text-white text-xs font-semibold",onClick:()=>l(f),children:"Set App Date"}),B.jsx("button",{className:"mt-1 w-full px-2 py-1 rounded bg-gray-300 hover:bg-gray-400 text-gray-800 text-xs font-semibold",onClick:()=>{l(""),d(new Date().toISOString().slice(0,10))},children:"Reset to Today"})]})]})]})},fN="modulepreload",hN=function(t){return"/"+t},lv={},dN=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=hN(l),l in lv)return;lv[l]=!0;const c=l.endsWith(".css"),p=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${p}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":fN,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((f,d)=>{h.addEventListener("load",f),h.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return i.then(s=>{for(const a of s||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})};function pN(){this.__data__=[],this.size=0}var mN=pN;function gN(t,e){return t===e||t!==t&&e!==e}var UE=gN,yN=UE;function vN(t,e){for(var n=t.length;n--;)if(yN(t[n][0],e))return n;return-1}var rc=vN,_N=rc,wN=Array.prototype,EN=wN.splice;function TN(t){var e=this.__data__,n=_N(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():EN.call(e,n,1),--this.size,!0}var bN=TN,SN=rc;function kN(t){var e=this.__data__,n=SN(e,t);return n<0?void 0:e[n][1]}var AN=kN,IN=rc;function xN(t){return IN(this.__data__,t)>-1}var ON=xN,PN=rc;function RN(t,e){var n=this.__data__,r=PN(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var NN=RN,CN=mN,DN=bN,LN=AN,MN=ON,jN=NN;function Do(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Do.prototype.clear=CN;Do.prototype.delete=DN;Do.prototype.get=LN;Do.prototype.has=MN;Do.prototype.set=jN;var ic=Do,VN=ic;function FN(){this.__data__=new VN,this.size=0}var UN=FN;function BN(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var qN=BN;function $N(t){return this.__data__.get(t)}var zN=$N;function HN(t){return this.__data__.has(t)}var WN=HN,KN=typeof Gt=="object"&&Gt&&Gt.Object===Object&&Gt,BE=KN,GN=BE,QN=typeof self=="object"&&self&&self.Object===Object&&self,YN=GN||QN||Function("return this")(),cr=YN,XN=cr,JN=XN.Symbol,Lp=JN,uv=Lp,qE=Object.prototype,ZN=qE.hasOwnProperty,eC=qE.toString,ls=uv?uv.toStringTag:void 0;function tC(t){var e=ZN.call(t,ls),n=t[ls];try{t[ls]=void 0;var r=!0}catch{}var i=eC.call(t);return r&&(e?t[ls]=n:delete t[ls]),i}var nC=tC,rC=Object.prototype,iC=rC.toString;function oC(t){return iC.call(t)}var sC=oC,cv=Lp,aC=nC,lC=sC,uC="[object Null]",cC="[object Undefined]",fv=cv?cv.toStringTag:void 0;function fC(t){return t==null?t===void 0?cC:uC:fv&&fv in Object(t)?aC(t):lC(t)}var oc=fC;function hC(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var $E=hC,dC=oc,pC=$E,mC="[object AsyncFunction]",gC="[object Function]",yC="[object GeneratorFunction]",vC="[object Proxy]";function _C(t){if(!pC(t))return!1;var e=dC(t);return e==gC||e==yC||e==mC||e==vC}var zE=_C,wC=cr,EC=wC["__core-js_shared__"],TC=EC,pf=TC,hv=function(){var t=/[^.]+$/.exec(pf&&pf.keys&&pf.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function bC(t){return!!hv&&hv in t}var SC=bC,kC=Function.prototype,AC=kC.toString;function IC(t){if(t!=null){try{return AC.call(t)}catch{}try{return t+""}catch{}}return""}var HE=IC,xC=zE,OC=SC,PC=$E,RC=HE,NC=/[\\^$.*+?()[\]{}|]/g,CC=/^\[object .+?Constructor\]$/,DC=Function.prototype,LC=Object.prototype,MC=DC.toString,jC=LC.hasOwnProperty,VC=RegExp("^"+MC.call(jC).replace(NC,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function FC(t){if(!PC(t)||OC(t))return!1;var e=xC(t)?VC:CC;return e.test(RC(t))}var UC=FC;function BC(t,e){return t==null?void 0:t[e]}var qC=BC,$C=UC,zC=qC;function HC(t,e){var n=zC(t,e);return $C(n)?n:void 0}var Lo=HC,WC=Lo,KC=cr,GC=WC(KC,"Map"),Mp=GC,QC=Lo,YC=QC(Object,"create"),sc=YC,dv=sc;function XC(){this.__data__=dv?dv(null):{},this.size=0}var JC=XC;function ZC(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var eD=ZC,tD=sc,nD="__lodash_hash_undefined__",rD=Object.prototype,iD=rD.hasOwnProperty;function oD(t){var e=this.__data__;if(tD){var n=e[t];return n===nD?void 0:n}return iD.call(e,t)?e[t]:void 0}var sD=oD,aD=sc,lD=Object.prototype,uD=lD.hasOwnProperty;function cD(t){var e=this.__data__;return aD?e[t]!==void 0:uD.call(e,t)}var fD=cD,hD=sc,dD="__lodash_hash_undefined__";function pD(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=hD&&e===void 0?dD:e,this}var mD=pD,gD=JC,yD=eD,vD=sD,_D=fD,wD=mD;function Mo(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Mo.prototype.clear=gD;Mo.prototype.delete=yD;Mo.prototype.get=vD;Mo.prototype.has=_D;Mo.prototype.set=wD;var ED=Mo,pv=ED,TD=ic,bD=Mp;function SD(){this.size=0,this.__data__={hash:new pv,map:new(bD||TD),string:new pv}}var kD=SD;function AD(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var ID=AD,xD=ID;function OD(t,e){var n=t.__data__;return xD(e)?n[typeof e=="string"?"string":"hash"]:n.map}var ac=OD,PD=ac;function RD(t){var e=PD(this,t).delete(t);return this.size-=e?1:0,e}var ND=RD,CD=ac;function DD(t){return CD(this,t).get(t)}var LD=DD,MD=ac;function jD(t){return MD(this,t).has(t)}var VD=jD,FD=ac;function UD(t,e){var n=FD(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var BD=UD,qD=kD,$D=ND,zD=LD,HD=VD,WD=BD;function jo(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}jo.prototype.clear=qD;jo.prototype.delete=$D;jo.prototype.get=zD;jo.prototype.has=HD;jo.prototype.set=WD;var WE=jo,KD=ic,GD=Mp,QD=WE,YD=200;function XD(t,e){var n=this.__data__;if(n instanceof KD){var r=n.__data__;if(!GD||r.length<YD-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new QD(r)}return n.set(t,e),this.size=n.size,this}var JD=XD,ZD=ic,eL=UN,tL=qN,nL=zN,rL=WN,iL=JD;function Vo(t){var e=this.__data__=new ZD(t);this.size=e.size}Vo.prototype.clear=eL;Vo.prototype.delete=tL;Vo.prototype.get=nL;Vo.prototype.has=rL;Vo.prototype.set=iL;var oL=Vo,sL="__lodash_hash_undefined__";function aL(t){return this.__data__.set(t,sL),this}var lL=aL;function uL(t){return this.__data__.has(t)}var cL=uL,fL=WE,hL=lL,dL=cL;function pu(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new fL;++e<n;)this.add(t[e])}pu.prototype.add=pu.prototype.push=hL;pu.prototype.has=dL;var pL=pu;function mL(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var gL=mL;function yL(t,e){return t.has(e)}var vL=yL,_L=pL,wL=gL,EL=vL,TL=1,bL=2;function SL(t,e,n,r,i,o){var s=n&TL,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(t),p=o.get(e);if(c&&p)return c==e&&p==t;var h=-1,f=!0,d=n&bL?new _L:void 0;for(o.set(t,e),o.set(e,t);++h<a;){var _=t[h],v=e[h];if(r)var E=s?r(v,_,h,e,t,o):r(_,v,h,t,e,o);if(E!==void 0){if(E)continue;f=!1;break}if(d){if(!wL(e,function(m,g){if(!EL(d,g)&&(_===m||i(_,m,n,r,o)))return d.push(g)})){f=!1;break}}else if(!(_===v||i(_,v,n,r,o))){f=!1;break}}return o.delete(t),o.delete(e),f}var KE=SL,kL=cr,AL=kL.Uint8Array,IL=AL;function xL(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var OL=xL;function PL(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var RL=PL,mv=Lp,gv=IL,NL=UE,CL=KE,DL=OL,LL=RL,ML=1,jL=2,VL="[object Boolean]",FL="[object Date]",UL="[object Error]",BL="[object Map]",qL="[object Number]",$L="[object RegExp]",zL="[object Set]",HL="[object String]",WL="[object Symbol]",KL="[object ArrayBuffer]",GL="[object DataView]",yv=mv?mv.prototype:void 0,mf=yv?yv.valueOf:void 0;function QL(t,e,n,r,i,o,s){switch(n){case GL:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case KL:return!(t.byteLength!=e.byteLength||!o(new gv(t),new gv(e)));case VL:case FL:case qL:return NL(+t,+e);case UL:return t.name==e.name&&t.message==e.message;case $L:case HL:return t==e+"";case BL:var a=DL;case zL:var l=r&ML;if(a||(a=LL),t.size!=e.size&&!l)return!1;var c=s.get(t);if(c)return c==e;r|=jL,s.set(t,e);var p=CL(a(t),a(e),r,i,o,s);return s.delete(t),p;case WL:if(mf)return mf.call(t)==mf.call(e)}return!1}var YL=QL;function XL(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var JL=XL,ZL=Array.isArray,jp=ZL,e4=JL,t4=jp;function n4(t,e,n){var r=e(t);return t4(t)?r:e4(r,n(t))}var r4=n4;function i4(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}var o4=i4;function s4(){return[]}var a4=s4,l4=o4,u4=a4,c4=Object.prototype,f4=c4.propertyIsEnumerable,vv=Object.getOwnPropertySymbols,h4=vv?function(t){return t==null?[]:(t=Object(t),l4(vv(t),function(e){return f4.call(t,e)}))}:u4,d4=h4;function p4(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var m4=p4;function g4(t){return t!=null&&typeof t=="object"}var lc=g4,y4=oc,v4=lc,_4="[object Arguments]";function w4(t){return v4(t)&&y4(t)==_4}var E4=w4,_v=E4,T4=lc,GE=Object.prototype,b4=GE.hasOwnProperty,S4=GE.propertyIsEnumerable,k4=_v(function(){return arguments}())?_v:function(t){return T4(t)&&b4.call(t,"callee")&&!S4.call(t,"callee")},A4=k4,mu={exports:{}};function I4(){return!1}var x4=I4;mu.exports;(function(t,e){var n=cr,r=x4,i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,s=o&&o.exports===i,a=s?n.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||r;t.exports=c})(mu,mu.exports);var QE=mu.exports,O4=9007199254740991,P4=/^(?:0|[1-9]\d*)$/;function R4(t,e){var n=typeof t;return e=e??O4,!!e&&(n=="number"||n!="symbol"&&P4.test(t))&&t>-1&&t%1==0&&t<e}var N4=R4,C4=9007199254740991;function D4(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=C4}var YE=D4,L4=oc,M4=YE,j4=lc,V4="[object Arguments]",F4="[object Array]",U4="[object Boolean]",B4="[object Date]",q4="[object Error]",$4="[object Function]",z4="[object Map]",H4="[object Number]",W4="[object Object]",K4="[object RegExp]",G4="[object Set]",Q4="[object String]",Y4="[object WeakMap]",X4="[object ArrayBuffer]",J4="[object DataView]",Z4="[object Float32Array]",eM="[object Float64Array]",tM="[object Int8Array]",nM="[object Int16Array]",rM="[object Int32Array]",iM="[object Uint8Array]",oM="[object Uint8ClampedArray]",sM="[object Uint16Array]",aM="[object Uint32Array]",qe={};qe[Z4]=qe[eM]=qe[tM]=qe[nM]=qe[rM]=qe[iM]=qe[oM]=qe[sM]=qe[aM]=!0;qe[V4]=qe[F4]=qe[X4]=qe[U4]=qe[J4]=qe[B4]=qe[q4]=qe[$4]=qe[z4]=qe[H4]=qe[W4]=qe[K4]=qe[G4]=qe[Q4]=qe[Y4]=!1;function lM(t){return j4(t)&&M4(t.length)&&!!qe[L4(t)]}var uM=lM;function cM(t){return function(e){return t(e)}}var fM=cM,gu={exports:{}};gu.exports;(function(t,e){var n=BE,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,s=o&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();t.exports=a})(gu,gu.exports);var hM=gu.exports,dM=uM,pM=fM,wv=hM,Ev=wv&&wv.isTypedArray,mM=Ev?pM(Ev):dM,XE=mM,gM=m4,yM=A4,vM=jp,_M=QE,wM=N4,EM=XE,TM=Object.prototype,bM=TM.hasOwnProperty;function SM(t,e){var n=vM(t),r=!n&&yM(t),i=!n&&!r&&_M(t),o=!n&&!r&&!i&&EM(t),s=n||r||i||o,a=s?gM(t.length,String):[],l=a.length;for(var c in t)(e||bM.call(t,c))&&!(s&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||wM(c,l)))&&a.push(c);return a}var kM=SM,AM=Object.prototype;function IM(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||AM;return t===n}var xM=IM;function OM(t,e){return function(n){return t(e(n))}}var PM=OM,RM=PM,NM=RM(Object.keys,Object),CM=NM,DM=xM,LM=CM,MM=Object.prototype,jM=MM.hasOwnProperty;function VM(t){if(!DM(t))return LM(t);var e=[];for(var n in Object(t))jM.call(t,n)&&n!="constructor"&&e.push(n);return e}var FM=VM,UM=zE,BM=YE;function qM(t){return t!=null&&BM(t.length)&&!UM(t)}var $M=qM,zM=kM,HM=FM,WM=$M;function KM(t){return WM(t)?zM(t):HM(t)}var GM=KM,QM=r4,YM=d4,XM=GM;function JM(t){return QM(t,XM,YM)}var ZM=JM,Tv=ZM,e3=1,t3=Object.prototype,n3=t3.hasOwnProperty;function r3(t,e,n,r,i,o){var s=n&e3,a=Tv(t),l=a.length,c=Tv(e),p=c.length;if(l!=p&&!s)return!1;for(var h=l;h--;){var f=a[h];if(!(s?f in e:n3.call(e,f)))return!1}var d=o.get(t),_=o.get(e);if(d&&_)return d==e&&_==t;var v=!0;o.set(t,e),o.set(e,t);for(var E=s;++h<l;){f=a[h];var m=t[f],g=e[f];if(r)var w=s?r(g,m,f,e,t,o):r(m,g,f,t,e,o);if(!(w===void 0?m===g||i(m,g,n,r,o):w)){v=!1;break}E||(E=f=="constructor")}if(v&&!E){var y=t.constructor,I=e.constructor;y!=I&&"constructor"in t&&"constructor"in e&&!(typeof y=="function"&&y instanceof y&&typeof I=="function"&&I instanceof I)&&(v=!1)}return o.delete(t),o.delete(e),v}var i3=r3,o3=Lo,s3=cr,a3=o3(s3,"DataView"),l3=a3,u3=Lo,c3=cr,f3=u3(c3,"Promise"),h3=f3,d3=Lo,p3=cr,m3=d3(p3,"Set"),g3=m3,y3=Lo,v3=cr,_3=y3(v3,"WeakMap"),w3=_3,Dh=l3,Lh=Mp,Mh=h3,jh=g3,Vh=w3,JE=oc,Fo=HE,bv="[object Map]",E3="[object Object]",Sv="[object Promise]",kv="[object Set]",Av="[object WeakMap]",Iv="[object DataView]",T3=Fo(Dh),b3=Fo(Lh),S3=Fo(Mh),k3=Fo(jh),A3=Fo(Vh),Jr=JE;(Dh&&Jr(new Dh(new ArrayBuffer(1)))!=Iv||Lh&&Jr(new Lh)!=bv||Mh&&Jr(Mh.resolve())!=Sv||jh&&Jr(new jh)!=kv||Vh&&Jr(new Vh)!=Av)&&(Jr=function(t){var e=JE(t),n=e==E3?t.constructor:void 0,r=n?Fo(n):"";if(r)switch(r){case T3:return Iv;case b3:return bv;case S3:return Sv;case k3:return kv;case A3:return Av}return e});var I3=Jr,gf=oL,x3=KE,O3=YL,P3=i3,xv=I3,Ov=jp,Pv=QE,R3=XE,N3=1,Rv="[object Arguments]",Nv="[object Array]",il="[object Object]",C3=Object.prototype,Cv=C3.hasOwnProperty;function D3(t,e,n,r,i,o){var s=Ov(t),a=Ov(e),l=s?Nv:xv(t),c=a?Nv:xv(e);l=l==Rv?il:l,c=c==Rv?il:c;var p=l==il,h=c==il,f=l==c;if(f&&Pv(t)){if(!Pv(e))return!1;s=!0,p=!1}if(f&&!p)return o||(o=new gf),s||R3(t)?x3(t,e,n,r,i,o):O3(t,e,l,n,r,i,o);if(!(n&N3)){var d=p&&Cv.call(t,"__wrapped__"),_=h&&Cv.call(e,"__wrapped__");if(d||_){var v=d?t.value():t,E=_?e.value():e;return o||(o=new gf),i(v,E,n,r,o)}}return f?(o||(o=new gf),P3(t,e,n,r,i,o)):!1}var L3=D3,M3=L3,Dv=lc;function ZE(t,e,n,r,i){return t===e?!0:t==null||e==null||!Dv(t)&&!Dv(e)?t!==t&&e!==e:M3(t,e,n,r,ZE,i)}var j3=ZE,V3=j3;function F3(t,e){return V3(t,e)}var U3=F3,eT={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(t,e){(function(r,i){t.exports=i()})(typeof self<"u"?self:Gt,function(){return function(n){var r={};function i(o){if(r[o])return r[o].exports;var s=r[o]={i:o,l:!1,exports:{}};return n[o].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=n,i.c=r,i.d=function(o,s,a){i.o(o,s)||Object.defineProperty(o,s,{configurable:!1,enumerable:!0,get:a})},i.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(s,"a",s),s},i.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},i.p="",i(i.s=109)}([function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(17),s=i(18),a=i(19),l=i(45),c=i(46),p=i(47),h=i(48),f=i(49),d=i(12),_=i(32),v=i(33),E=i(31),m=i(1),g={Scope:m.Scope,create:m.create,find:m.find,query:m.query,register:m.register,Container:o.default,Format:s.default,Leaf:a.default,Embed:h.default,Scroll:l.default,Block:p.default,Inline:c.default,Text:f.default,Attributor:{Attribute:d.default,Class:_.default,Style:v.default,Store:E.default}};r.default=g},function(n,r,i){var o=this&&this.__extends||function(){var E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var w in g)g.hasOwnProperty(w)&&(m[w]=g[w])};return function(m,g){E(m,g);function w(){this.constructor=m}m.prototype=g===null?Object.create(g):(w.prototype=g.prototype,new w)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=function(E){o(m,E);function m(g){var w=this;return g="[Parchment] "+g,w=E.call(this,g)||this,w.message=g,w.name=w.constructor.name,w}return m}(Error);r.ParchmentError=s;var a={},l={},c={},p={};r.DATA_KEY="__blot";var h;(function(E){E[E.TYPE=3]="TYPE",E[E.LEVEL=12]="LEVEL",E[E.ATTRIBUTE=13]="ATTRIBUTE",E[E.BLOT=14]="BLOT",E[E.INLINE=7]="INLINE",E[E.BLOCK=11]="BLOCK",E[E.BLOCK_BLOT=10]="BLOCK_BLOT",E[E.INLINE_BLOT=6]="INLINE_BLOT",E[E.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",E[E.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",E[E.ANY=15]="ANY"})(h=r.Scope||(r.Scope={}));function f(E,m){var g=_(E);if(g==null)throw new s("Unable to create "+E+" blot");var w=g,y=E instanceof Node||E.nodeType===Node.TEXT_NODE?E:w.create(m);return new w(y,m)}r.create=f;function d(E,m){return m===void 0&&(m=!1),E==null?null:E[r.DATA_KEY]!=null?E[r.DATA_KEY].blot:m?d(E.parentNode,m):null}r.find=d;function _(E,m){m===void 0&&(m=h.ANY);var g;if(typeof E=="string")g=p[E]||a[E];else if(E instanceof Text||E.nodeType===Node.TEXT_NODE)g=p.text;else if(typeof E=="number")E&h.LEVEL&h.BLOCK?g=p.block:E&h.LEVEL&h.INLINE&&(g=p.inline);else if(E instanceof HTMLElement){var w=(E.getAttribute("class")||"").split(/\s+/);for(var y in w)if(g=l[w[y]],g)break;g=g||c[E.tagName]}return g==null?null:m&h.LEVEL&g.scope&&m&h.TYPE&g.scope?g:null}r.query=_;function v(){for(var E=[],m=0;m<arguments.length;m++)E[m]=arguments[m];if(E.length>1)return E.map(function(y){return v(y)});var g=E[0];if(typeof g.blotName!="string"&&typeof g.attrName!="string")throw new s("Invalid definition");if(g.blotName==="abstract")throw new s("Cannot register abstract class");if(p[g.blotName||g.attrName]=g,typeof g.keyName=="string")a[g.keyName]=g;else if(g.className!=null&&(l[g.className]=g),g.tagName!=null){Array.isArray(g.tagName)?g.tagName=g.tagName.map(function(y){return y.toUpperCase()}):g.tagName=g.tagName.toUpperCase();var w=Array.isArray(g.tagName)?g.tagName:[g.tagName];w.forEach(function(y){(c[y]==null||g.className==null)&&(c[y]=g)})}return g}r.register=v},function(n,r,i){var o=i(51),s=i(11),a=i(3),l=i(20),c="\0",p=function(h){Array.isArray(h)?this.ops=h:h!=null&&Array.isArray(h.ops)?this.ops=h.ops:this.ops=[]};p.prototype.insert=function(h,f){var d={};return h.length===0?this:(d.insert=h,f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(d.attributes=f),this.push(d))},p.prototype.delete=function(h){return h<=0?this:this.push({delete:h})},p.prototype.retain=function(h,f){if(h<=0)return this;var d={retain:h};return f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(d.attributes=f),this.push(d)},p.prototype.push=function(h){var f=this.ops.length,d=this.ops[f-1];if(h=a(!0,{},h),typeof d=="object"){if(typeof h.delete=="number"&&typeof d.delete=="number")return this.ops[f-1]={delete:d.delete+h.delete},this;if(typeof d.delete=="number"&&h.insert!=null&&(f-=1,d=this.ops[f-1],typeof d!="object"))return this.ops.unshift(h),this;if(s(h.attributes,d.attributes)){if(typeof h.insert=="string"&&typeof d.insert=="string")return this.ops[f-1]={insert:d.insert+h.insert},typeof h.attributes=="object"&&(this.ops[f-1].attributes=h.attributes),this;if(typeof h.retain=="number"&&typeof d.retain=="number")return this.ops[f-1]={retain:d.retain+h.retain},typeof h.attributes=="object"&&(this.ops[f-1].attributes=h.attributes),this}}return f===this.ops.length?this.ops.push(h):this.ops.splice(f,0,h),this},p.prototype.chop=function(){var h=this.ops[this.ops.length-1];return h&&h.retain&&!h.attributes&&this.ops.pop(),this},p.prototype.filter=function(h){return this.ops.filter(h)},p.prototype.forEach=function(h){this.ops.forEach(h)},p.prototype.map=function(h){return this.ops.map(h)},p.prototype.partition=function(h){var f=[],d=[];return this.forEach(function(_){var v=h(_)?f:d;v.push(_)}),[f,d]},p.prototype.reduce=function(h,f){return this.ops.reduce(h,f)},p.prototype.changeLength=function(){return this.reduce(function(h,f){return f.insert?h+l.length(f):f.delete?h-f.delete:h},0)},p.prototype.length=function(){return this.reduce(function(h,f){return h+l.length(f)},0)},p.prototype.slice=function(h,f){h=h||0,typeof f!="number"&&(f=1/0);for(var d=[],_=l.iterator(this.ops),v=0;v<f&&_.hasNext();){var E;v<h?E=_.next(h-v):(E=_.next(f-v),d.push(E)),v+=l.length(E)}return new p(d)},p.prototype.compose=function(h){var f=l.iterator(this.ops),d=l.iterator(h.ops),_=[],v=d.peek();if(v!=null&&typeof v.retain=="number"&&v.attributes==null){for(var E=v.retain;f.peekType()==="insert"&&f.peekLength()<=E;)E-=f.peekLength(),_.push(f.next());v.retain-E>0&&d.next(v.retain-E)}for(var m=new p(_);f.hasNext()||d.hasNext();)if(d.peekType()==="insert")m.push(d.next());else if(f.peekType()==="delete")m.push(f.next());else{var g=Math.min(f.peekLength(),d.peekLength()),w=f.next(g),y=d.next(g);if(typeof y.retain=="number"){var I={};typeof w.retain=="number"?I.retain=g:I.insert=w.insert;var C=l.attributes.compose(w.attributes,y.attributes,typeof w.retain=="number");if(C&&(I.attributes=C),m.push(I),!d.hasNext()&&s(m.ops[m.ops.length-1],I)){var S=new p(f.rest());return m.concat(S).chop()}}else typeof y.delete=="number"&&typeof w.retain=="number"&&m.push(y)}return m.chop()},p.prototype.concat=function(h){var f=new p(this.ops.slice());return h.ops.length>0&&(f.push(h.ops[0]),f.ops=f.ops.concat(h.ops.slice(1))),f},p.prototype.diff=function(h,f){if(this.ops===h.ops)return new p;var d=[this,h].map(function(g){return g.map(function(w){if(w.insert!=null)return typeof w.insert=="string"?w.insert:c;var y=g===h?"on":"with";throw new Error("diff() called "+y+" non-document")}).join("")}),_=new p,v=o(d[0],d[1],f),E=l.iterator(this.ops),m=l.iterator(h.ops);return v.forEach(function(g){for(var w=g[1].length;w>0;){var y=0;switch(g[0]){case o.INSERT:y=Math.min(m.peekLength(),w),_.push(m.next(y));break;case o.DELETE:y=Math.min(w,E.peekLength()),E.next(y),_.delete(y);break;case o.EQUAL:y=Math.min(E.peekLength(),m.peekLength(),w);var I=E.next(y),C=m.next(y);s(I.insert,C.insert)?_.retain(y,l.attributes.diff(I.attributes,C.attributes)):_.push(C).delete(y);break}w-=y}}),_.chop()},p.prototype.eachLine=function(h,f){f=f||`
`;for(var d=l.iterator(this.ops),_=new p,v=0;d.hasNext();){if(d.peekType()!=="insert")return;var E=d.peek(),m=l.length(E)-d.peekLength(),g=typeof E.insert=="string"?E.insert.indexOf(f,m)-m:-1;if(g<0)_.push(d.next());else if(g>0)_.push(d.next(g));else{if(h(_,d.next(1).attributes||{},v)===!1)return;v+=1,_=new p}}_.length()>0&&h(_,{},v)},p.prototype.transform=function(h,f){if(f=!!f,typeof h=="number")return this.transformPosition(h,f);for(var d=l.iterator(this.ops),_=l.iterator(h.ops),v=new p;d.hasNext()||_.hasNext();)if(d.peekType()==="insert"&&(f||_.peekType()!=="insert"))v.retain(l.length(d.next()));else if(_.peekType()==="insert")v.push(_.next());else{var E=Math.min(d.peekLength(),_.peekLength()),m=d.next(E),g=_.next(E);if(m.delete)continue;g.delete?v.push(g):v.retain(E,l.attributes.transform(m.attributes,g.attributes,f))}return v.chop()},p.prototype.transformPosition=function(h,f){f=!!f;for(var d=l.iterator(this.ops),_=0;d.hasNext()&&_<=h;){var v=d.peekLength(),E=d.peekType();if(d.next(),E==="delete"){h-=Math.min(v,h-_);continue}else E==="insert"&&(_<h||!f)&&(h+=v);_+=v}return h},n.exports=p},function(n,r){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=function(d){return typeof Array.isArray=="function"?Array.isArray(d):o.call(d)==="[object Array]"},c=function(d){if(!d||o.call(d)!=="[object Object]")return!1;var _=i.call(d,"constructor"),v=d.constructor&&d.constructor.prototype&&i.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!_&&!v)return!1;var E;for(E in d);return typeof E>"u"||i.call(d,E)},p=function(d,_){s&&_.name==="__proto__"?s(d,_.name,{enumerable:!0,configurable:!0,value:_.newValue,writable:!0}):d[_.name]=_.newValue},h=function(d,_){if(_==="__proto__")if(i.call(d,_)){if(a)return a(d,_).value}else return;return d[_]};n.exports=function f(){var d,_,v,E,m,g,w=arguments[0],y=1,I=arguments.length,C=!1;for(typeof w=="boolean"&&(C=w,w=arguments[1]||{},y=2),(w==null||typeof w!="object"&&typeof w!="function")&&(w={});y<I;++y)if(d=arguments[y],d!=null)for(_ in d)v=h(w,_),E=h(d,_),w!==E&&(C&&E&&(c(E)||(m=l(E)))?(m?(m=!1,g=v&&l(v)?v:[]):g=v&&c(v)?v:{},p(w,{name:_,newValue:f(C,g,E)})):typeof E<"u"&&p(w,{name:_,newValue:E}));return w}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var o=function(){function k(x,O){for(var M=0;M<O.length;M++){var U=O[M];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(x,U.key,U)}}return function(x,O,M){return O&&k(x.prototype,O),M&&k(x,M),x}}(),s=function k(x,O,M){x===null&&(x=Function.prototype);var U=Object.getOwnPropertyDescriptor(x,O);if(U===void 0){var K=Object.getPrototypeOf(x);return K===null?void 0:k(K,O,M)}else{if("value"in U)return U.value;var G=U.get;return G===void 0?void 0:G.call(M)}},a=i(3),l=w(a),c=i(2),p=w(c),h=i(0),f=w(h),d=i(16),_=w(d),v=i(6),E=w(v),m=i(7),g=w(m);function w(k){return k&&k.__esModule?k:{default:k}}function y(k,x){if(!(k instanceof x))throw new TypeError("Cannot call a class as a function")}function I(k,x){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:k}function C(k,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);k.prototype=Object.create(x&&x.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(k,x):k.__proto__=x)}var S=1,T=function(k){C(x,k);function x(){return y(this,x),I(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return o(x,[{key:"attach",value:function(){s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"attach",this).call(this),this.attributes=new f.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new p.default().insert(this.value(),(0,l.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(M,U){var K=f.default.query(M,f.default.Scope.BLOCK_ATTRIBUTE);K!=null&&this.attributes.attribute(K,U)}},{key:"formatAt",value:function(M,U,K,G){this.format(K,G)}},{key:"insertAt",value:function(M,U,K){if(typeof U=="string"&&U.endsWith(`
`)){var G=f.default.create(P.blotName);this.parent.insertBefore(G,M===0?this:this.next),G.insertAt(0,U.slice(0,-1))}else s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertAt",this).call(this,M,U,K)}}]),x}(f.default.Embed);T.scope=f.default.Scope.BLOCK_BLOT;var P=function(k){C(x,k);function x(O){y(this,x);var M=I(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,O));return M.cache={},M}return o(x,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(f.default.Leaf).reduce(function(M,U){return U.length()===0?M:M.insert(U.value(),b(U))},new p.default).insert(`
`,b(this))),this.cache.delta}},{key:"deleteAt",value:function(M,U){s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"deleteAt",this).call(this,M,U),this.cache={}}},{key:"formatAt",value:function(M,U,K,G){U<=0||(f.default.query(K,f.default.Scope.BLOCK)?M+U===this.length()&&this.format(K,G):s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"formatAt",this).call(this,M,Math.min(U,this.length()-M-1),K,G),this.cache={})}},{key:"insertAt",value:function(M,U,K){if(K!=null)return s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertAt",this).call(this,M,U,K);if(U.length!==0){var G=U.split(`
`),H=G.shift();H.length>0&&(M<this.length()-1||this.children.tail==null?s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertAt",this).call(this,Math.min(M,this.length()-1),H):this.children.tail.insertAt(this.children.tail.length(),H),this.cache={});var q=this;G.reduce(function(F,N){return q=q.split(F,!0),q.insertAt(0,N),N.length},M+H.length)}}},{key:"insertBefore",value:function(M,U){var K=this.children.head;s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertBefore",this).call(this,M,U),K instanceof _.default&&K.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"length",this).call(this)+S),this.cache.length}},{key:"moveChildren",value:function(M,U){s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"moveChildren",this).call(this,M,U),this.cache={}}},{key:"optimize",value:function(M){s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"optimize",this).call(this,M),this.cache={}}},{key:"path",value:function(M){return s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"path",this).call(this,M,!0)}},{key:"removeChild",value:function(M){s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"removeChild",this).call(this,M),this.cache={}}},{key:"split",value:function(M){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(U&&(M===0||M>=this.length()-S)){var K=this.clone();return M===0?(this.parent.insertBefore(K,this),this):(this.parent.insertBefore(K,this.next),K)}else{var G=s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"split",this).call(this,M,U);return this.cache={},G}}}]),x}(f.default.Block);P.blotName="block",P.tagName="P",P.defaultChild="break",P.allowedChildren=[E.default,f.default.Embed,g.default];function b(k){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return k==null||(typeof k.formats=="function"&&(x=(0,l.default)(x,k.formats())),k.parent==null||k.parent.blotName=="scroll"||k.parent.statics.scope!==k.statics.scope)?x:b(k.parent,x)}r.bubbleFormats=b,r.BlockEmbed=T,r.default=P},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},s=function(){function q(F,N){var D=[],j=!0,z=!1,W=void 0;try{for(var V=F[Symbol.iterator](),$;!(j=($=V.next()).done)&&(D.push($.value),!(N&&D.length===N));j=!0);}catch(Y){z=!0,W=Y}finally{try{!j&&V.return&&V.return()}finally{if(z)throw W}}return D}return function(F,N){if(Array.isArray(F))return F;if(Symbol.iterator in Object(F))return q(F,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function q(F,N){for(var D=0;D<N.length;D++){var j=N[D];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(F,j.key,j)}}return function(F,N,D){return N&&q(F.prototype,N),D&&q(F,D),F}}();i(50);var l=i(2),c=b(l),p=i(14),h=b(p),f=i(8),d=b(f),_=i(9),v=b(_),E=i(0),m=b(E),g=i(15),w=b(g),y=i(3),I=b(y),C=i(10),S=b(C),T=i(34),P=b(T);function b(q){return q&&q.__esModule?q:{default:q}}function k(q,F,N){return F in q?Object.defineProperty(q,F,{value:N,enumerable:!0,configurable:!0,writable:!0}):q[F]=N,q}function x(q,F){if(!(q instanceof F))throw new TypeError("Cannot call a class as a function")}var O=(0,S.default)("quill"),M=function(){a(q,null,[{key:"debug",value:function(N){N===!0&&(N="log"),S.default.level(N)}},{key:"find",value:function(N){return N.__quill||m.default.find(N)}},{key:"import",value:function(N){return this.imports[N]==null&&O.error("Cannot import "+N+". Are you sure it was registered?"),this.imports[N]}},{key:"register",value:function(N,D){var j=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof N!="string"){var W=N.attrName||N.blotName;typeof W=="string"?this.register("formats/"+W,N,D):Object.keys(N).forEach(function(V){j.register(V,N[V],D)})}else this.imports[N]!=null&&!z&&O.warn("Overwriting "+N+" with",D),this.imports[N]=D,(N.startsWith("blots/")||N.startsWith("formats/"))&&D.blotName!=="abstract"?m.default.register(D):N.startsWith("modules")&&typeof D.register=="function"&&D.register()}}]);function q(F){var N=this,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(x(this,q),this.options=U(F,D),this.container=this.options.container,this.container==null)return O.error("Invalid Quill container",F);this.options.debug&&q.debug(this.options.debug);var j=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new d.default,this.scroll=m.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new h.default(this.scroll),this.selection=new w.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(d.default.events.EDITOR_CHANGE,function(W){W===d.default.events.TEXT_CHANGE&&N.root.classList.toggle("ql-blank",N.editor.isBlank())}),this.emitter.on(d.default.events.SCROLL_UPDATE,function(W,V){var $=N.selection.lastRange,Y=$&&$.length===0?$.index:void 0;K.call(N,function(){return N.editor.update(null,V,Y)},W)});var z=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+j+"<p><br></p></div>");this.setContents(z),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return a(q,[{key:"addContainer",value:function(N){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof N=="string"){var j=N;N=document.createElement("div"),N.classList.add(j)}return this.container.insertBefore(N,D),N}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(N,D,j){var z=this,W=G(N,D,j),V=s(W,4);return N=V[0],D=V[1],j=V[3],K.call(this,function(){return z.editor.deleteText(N,D)},j,N,-1*D)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(N),this.container.classList.toggle("ql-disabled",!N)}},{key:"focus",value:function(){var N=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=N,this.scrollIntoView()}},{key:"format",value:function(N,D){var j=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:d.default.sources.API;return K.call(this,function(){var W=j.getSelection(!0),V=new c.default;if(W==null)return V;if(m.default.query(N,m.default.Scope.BLOCK))V=j.editor.formatLine(W.index,W.length,k({},N,D));else{if(W.length===0)return j.selection.format(N,D),V;V=j.editor.formatText(W.index,W.length,k({},N,D))}return j.setSelection(W,d.default.sources.SILENT),V},z)}},{key:"formatLine",value:function(N,D,j,z,W){var V=this,$=void 0,Y=G(N,D,j,z,W),X=s(Y,4);return N=X[0],D=X[1],$=X[2],W=X[3],K.call(this,function(){return V.editor.formatLine(N,D,$)},W,N,0)}},{key:"formatText",value:function(N,D,j,z,W){var V=this,$=void 0,Y=G(N,D,j,z,W),X=s(Y,4);return N=X[0],D=X[1],$=X[2],W=X[3],K.call(this,function(){return V.editor.formatText(N,D,$)},W,N,0)}},{key:"getBounds",value:function(N){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,j=void 0;typeof N=="number"?j=this.selection.getBounds(N,D):j=this.selection.getBounds(N.index,N.length);var z=this.container.getBoundingClientRect();return{bottom:j.bottom-z.top,height:j.height,left:j.left-z.left,right:j.right-z.left,top:j.top-z.top,width:j.width}}},{key:"getContents",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-N,j=G(N,D),z=s(j,2);return N=z[0],D=z[1],this.editor.getContents(N,D)}},{key:"getFormat",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof N=="number"?this.editor.getFormat(N,D):this.editor.getFormat(N.index,N.length)}},{key:"getIndex",value:function(N){return N.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(N){return this.scroll.leaf(N)}},{key:"getLine",value:function(N){return this.scroll.line(N)}},{key:"getLines",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof N!="number"?this.scroll.lines(N.index,N.length):this.scroll.lines(N,D)}},{key:"getModule",value:function(N){return this.theme.modules[N]}},{key:"getSelection",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return N&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-N,j=G(N,D),z=s(j,2);return N=z[0],D=z[1],this.editor.getText(N,D)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(N,D,j){var z=this,W=arguments.length>3&&arguments[3]!==void 0?arguments[3]:q.sources.API;return K.call(this,function(){return z.editor.insertEmbed(N,D,j)},W,N)}},{key:"insertText",value:function(N,D,j,z,W){var V=this,$=void 0,Y=G(N,0,j,z,W),X=s(Y,4);return N=X[0],$=X[2],W=X[3],K.call(this,function(){return V.editor.insertText(N,D,$)},W,N,D.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(N,D,j){this.clipboard.dangerouslyPasteHTML(N,D,j)}},{key:"removeFormat",value:function(N,D,j){var z=this,W=G(N,D,j),V=s(W,4);return N=V[0],D=V[1],j=V[3],K.call(this,function(){return z.editor.removeFormat(N,D)},j,N)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(N){var D=this,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.default.sources.API;return K.call(this,function(){N=new c.default(N);var z=D.getLength(),W=D.editor.deleteText(0,z),V=D.editor.applyDelta(N),$=V.ops[V.ops.length-1];$!=null&&typeof $.insert=="string"&&$.insert[$.insert.length-1]===`
`&&(D.editor.deleteText(D.getLength()-1,1),V.delete(1));var Y=W.compose(V);return Y},j)}},{key:"setSelection",value:function(N,D,j){if(N==null)this.selection.setRange(null,D||q.sources.API);else{var z=G(N,D,j),W=s(z,4);N=W[0],D=W[1],j=W[3],this.selection.setRange(new g.Range(N,D),j),j!==d.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(N){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.default.sources.API,j=new c.default().insert(N);return this.setContents(j,D)}},{key:"update",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d.default.sources.USER,D=this.scroll.update(N);return this.selection.update(N),D}},{key:"updateContents",value:function(N){var D=this,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.default.sources.API;return K.call(this,function(){return N=new c.default(N),D.editor.applyDelta(N,j)},j,!0)}}]),q}();M.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},M.events=d.default.events,M.sources=d.default.sources,M.version="1.3.7",M.imports={delta:c.default,parchment:m.default,"core/module":v.default,"core/theme":P.default};function U(q,F){if(F=(0,I.default)(!0,{container:q,modules:{clipboard:!0,keyboard:!0,history:!0}},F),!F.theme||F.theme===M.DEFAULTS.theme)F.theme=P.default;else if(F.theme=M.import("themes/"+F.theme),F.theme==null)throw new Error("Invalid theme "+F.theme+". Did you register it?");var N=(0,I.default)(!0,{},F.theme.DEFAULTS);[N,F].forEach(function(z){z.modules=z.modules||{},Object.keys(z.modules).forEach(function(W){z.modules[W]===!0&&(z.modules[W]={})})});var D=Object.keys(N.modules).concat(Object.keys(F.modules)),j=D.reduce(function(z,W){var V=M.import("modules/"+W);return V==null?O.error("Cannot load "+W+" module. Are you sure you registered it?"):z[W]=V.DEFAULTS||{},z},{});return F.modules!=null&&F.modules.toolbar&&F.modules.toolbar.constructor!==Object&&(F.modules.toolbar={container:F.modules.toolbar}),F=(0,I.default)(!0,{},M.DEFAULTS,{modules:j},N,F),["bounds","container","scrollingContainer"].forEach(function(z){typeof F[z]=="string"&&(F[z]=document.querySelector(F[z]))}),F.modules=Object.keys(F.modules).reduce(function(z,W){return F.modules[W]&&(z[W]=F.modules[W]),z},{}),F}function K(q,F,N,D){if(this.options.strict&&!this.isEnabled()&&F===d.default.sources.USER)return new c.default;var j=N==null?null:this.getSelection(),z=this.editor.delta,W=q();if(j!=null&&(N===!0&&(N=j.index),D==null?j=H(j,W,F):D!==0&&(j=H(j,N,D,F)),this.setSelection(j,d.default.sources.SILENT)),W.length()>0){var V,$=[d.default.events.TEXT_CHANGE,W,z,F];if((V=this.emitter).emit.apply(V,[d.default.events.EDITOR_CHANGE].concat($)),F!==d.default.sources.SILENT){var Y;(Y=this.emitter).emit.apply(Y,$)}}return W}function G(q,F,N,D,j){var z={};return typeof q.index=="number"&&typeof q.length=="number"?typeof F!="number"?(j=D,D=N,N=F,F=q.length,q=q.index):(F=q.length,q=q.index):typeof F!="number"&&(j=D,D=N,N=F,F=0),(typeof N>"u"?"undefined":o(N))==="object"?(z=N,j=D):typeof N=="string"&&(D!=null?z[N]=D:j=N),j=j||d.default.sources.API,[q,F,z,j]}function H(q,F,N,D){if(q==null)return null;var j=void 0,z=void 0;if(F instanceof c.default){var W=[q.index,q.index+q.length].map(function(X){return F.transformPosition(X,D!==d.default.sources.USER)}),V=s(W,2);j=V[0],z=V[1]}else{var $=[q.index,q.index+q.length].map(function(X){return X<F||X===F&&D===d.default.sources.USER?X:N>=0?X+N:Math.max(F,X+N)}),Y=s($,2);j=Y[0],z=Y[1]}return new g.Range(j,z-j)}r.expandConfig=U,r.overload=G,r.default=M},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function E(m,g){for(var w=0;w<g.length;w++){var y=g[w];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(m,y.key,y)}}return function(m,g,w){return g&&E(m.prototype,g),w&&E(m,w),m}}(),s=function E(m,g,w){m===null&&(m=Function.prototype);var y=Object.getOwnPropertyDescriptor(m,g);if(y===void 0){var I=Object.getPrototypeOf(m);return I===null?void 0:E(I,g,w)}else{if("value"in y)return y.value;var C=y.get;return C===void 0?void 0:C.call(w)}},a=i(7),l=h(a),c=i(0),p=h(c);function h(E){return E&&E.__esModule?E:{default:E}}function f(E,m){if(!(E instanceof m))throw new TypeError("Cannot call a class as a function")}function d(E,m){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:E}function _(E,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);E.prototype=Object.create(m&&m.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(E,m):E.__proto__=m)}var v=function(E){_(m,E);function m(){return f(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,[{key:"formatAt",value:function(w,y,I,C){if(m.compare(this.statics.blotName,I)<0&&p.default.query(I,p.default.Scope.BLOT)){var S=this.isolate(w,y);C&&S.wrap(I,C)}else s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"formatAt",this).call(this,w,y,I,C)}},{key:"optimize",value:function(w){if(s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"optimize",this).call(this,w),this.parent instanceof m&&m.compare(this.statics.blotName,this.parent.statics.blotName)>0){var y=this.parent.isolate(this.offset(),this.length());this.moveChildren(y),y.wrap(this)}}}],[{key:"compare",value:function(w,y){var I=m.order.indexOf(w),C=m.order.indexOf(y);return I>=0||C>=0?I-C:w===y?0:w<y?-1:1}}]),m}(p.default.Inline);v.allowedChildren=[v,p.default.Embed,l.default],v.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),s=a(o);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function c(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function p(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var h=function(f){p(d,f);function d(){return l(this,d),c(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(s.default.Text);r.default=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function g(w,y){for(var I=0;I<y.length;I++){var C=y[I];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(w,C.key,C)}}return function(w,y,I){return y&&g(w.prototype,y),I&&g(w,I),w}}(),s=function g(w,y,I){w===null&&(w=Function.prototype);var C=Object.getOwnPropertyDescriptor(w,y);if(C===void 0){var S=Object.getPrototypeOf(w);return S===null?void 0:g(S,y,I)}else{if("value"in C)return C.value;var T=C.get;return T===void 0?void 0:T.call(I)}},a=i(54),l=h(a),c=i(10),p=h(c);function h(g){return g&&g.__esModule?g:{default:g}}function f(g,w){if(!(g instanceof w))throw new TypeError("Cannot call a class as a function")}function d(g,w){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:g}function _(g,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);g.prototype=Object.create(w&&w.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(g,w):g.__proto__=w)}var v=(0,p.default)("quill:events"),E=["selectionchange","mousedown","mouseup","click"];E.forEach(function(g){document.addEventListener(g,function(){for(var w=arguments.length,y=Array(w),I=0;I<w;I++)y[I]=arguments[I];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(C){if(C.__quill&&C.__quill.emitter){var S;(S=C.__quill.emitter).handleDOM.apply(S,y)}})})});var m=function(g){_(w,g);function w(){f(this,w);var y=d(this,(w.__proto__||Object.getPrototypeOf(w)).call(this));return y.listeners={},y.on("error",v.error),y}return o(w,[{key:"emit",value:function(){v.log.apply(v,arguments),s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(I){for(var C=arguments.length,S=Array(C>1?C-1:0),T=1;T<C;T++)S[T-1]=arguments[T];(this.listeners[I.type]||[]).forEach(function(P){var b=P.node,k=P.handler;(I.target===b||b.contains(I.target))&&k.apply(void 0,[I].concat(S))})}},{key:"listenDOM",value:function(I,C,S){this.listeners[I]||(this.listeners[I]=[]),this.listeners[I].push({node:C,handler:S})}}]),w}(l.default);m.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},m.sources={API:"api",SILENT:"silent",USER:"user"},r.default=m},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});function o(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}var s=function a(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o(this,a),this.quill=l,this.options=c};s.DEFAULTS={},r.default=s},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=["error","warn","log","info"],s="warn";function a(c){if(o.indexOf(c)<=o.indexOf(s)){for(var p,h=arguments.length,f=Array(h>1?h-1:0),d=1;d<h;d++)f[d-1]=arguments[d];(p=console)[c].apply(p,f)}}function l(c){return o.reduce(function(p,h){return p[h]=a.bind(console,h,c),p},{})}a.level=l.level=function(c){s=c},r.default=l},function(n,r,i){var o=Array.prototype.slice,s=i(52),a=i(53),l=n.exports=function(f,d,_){return _||(_={}),f===d?!0:f instanceof Date&&d instanceof Date?f.getTime()===d.getTime():!f||!d||typeof f!="object"&&typeof d!="object"?_.strict?f===d:f==d:h(f,d,_)};function c(f){return f==null}function p(f){return!(!f||typeof f!="object"||typeof f.length!="number"||typeof f.copy!="function"||typeof f.slice!="function"||f.length>0&&typeof f[0]!="number")}function h(f,d,_){var v,E;if(c(f)||c(d)||f.prototype!==d.prototype)return!1;if(a(f))return a(d)?(f=o.call(f),d=o.call(d),l(f,d,_)):!1;if(p(f)){if(!p(d)||f.length!==d.length)return!1;for(v=0;v<f.length;v++)if(f[v]!==d[v])return!1;return!0}try{var m=s(f),g=s(d)}catch{return!1}if(m.length!=g.length)return!1;for(m.sort(),g.sort(),v=m.length-1;v>=0;v--)if(m[v]!=g[v])return!1;for(v=m.length-1;v>=0;v--)if(E=m[v],!l(f[E],d[E],_))return!1;return typeof f==typeof d}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(1),s=function(){function a(l,c,p){p===void 0&&(p={}),this.attrName=l,this.keyName=c;var h=o.Scope.TYPE&o.Scope.ATTRIBUTE;p.scope!=null?this.scope=p.scope&o.Scope.LEVEL|h:this.scope=o.Scope.ATTRIBUTE,p.whitelist!=null&&(this.whitelist=p.whitelist)}return a.keys=function(l){return[].map.call(l.attributes,function(c){return c.name})},a.prototype.add=function(l,c){return this.canAdd(l,c)?(l.setAttribute(this.keyName,c),!0):!1},a.prototype.canAdd=function(l,c){var p=o.query(l,o.Scope.BLOT&(this.scope|o.Scope.TYPE));return p==null?!1:this.whitelist==null?!0:typeof c=="string"?this.whitelist.indexOf(c.replace(/["']/g,""))>-1:this.whitelist.indexOf(c)>-1},a.prototype.remove=function(l){l.removeAttribute(this.keyName)},a.prototype.value=function(l){var c=l.getAttribute(this.keyName);return this.canAdd(l,c)&&c?c:""},a}();r.default=s},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var o=function(){function T(P,b){var k=[],x=!0,O=!1,M=void 0;try{for(var U=P[Symbol.iterator](),K;!(x=(K=U.next()).done)&&(k.push(K.value),!(b&&k.length===b));x=!0);}catch(G){O=!0,M=G}finally{try{!x&&U.return&&U.return()}finally{if(O)throw M}}return k}return function(P,b){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return T(P,b);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function T(P,b){for(var k=0;k<b.length;k++){var x=b[k];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(P,x.key,x)}}return function(P,b,k){return b&&T(P.prototype,b),k&&T(P,k),P}}(),a=function T(P,b,k){P===null&&(P=Function.prototype);var x=Object.getOwnPropertyDescriptor(P,b);if(x===void 0){var O=Object.getPrototypeOf(P);return O===null?void 0:T(O,b,k)}else{if("value"in x)return x.value;var M=x.get;return M===void 0?void 0:M.call(k)}},l=i(2),c=g(l),p=i(0),h=g(p),f=i(4),d=g(f),_=i(6),v=g(_),E=i(7),m=g(E);function g(T){return T&&T.__esModule?T:{default:T}}function w(T,P){if(!(T instanceof P))throw new TypeError("Cannot call a class as a function")}function y(T,P){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:T}function I(T,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);T.prototype=Object.create(P&&P.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(T,P):T.__proto__=P)}var C=function(T){I(P,T);function P(){return w(this,P),y(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}return P}(v.default);C.blotName="code",C.tagName="CODE";var S=function(T){I(P,T);function P(){return w(this,P),y(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}return s(P,[{key:"delta",value:function(){var k=this,x=this.domNode.textContent;return x.endsWith(`
`)&&(x=x.slice(0,-1)),x.split(`
`).reduce(function(O,M){return O.insert(M).insert(`
`,k.formats())},new c.default)}},{key:"format",value:function(k,x){if(!(k===this.statics.blotName&&x)){var O=this.descendant(m.default,this.length()-1),M=o(O,1),U=M[0];U!=null&&U.deleteAt(U.length()-1,1),a(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"format",this).call(this,k,x)}}},{key:"formatAt",value:function(k,x,O,M){if(x!==0&&!(h.default.query(O,h.default.Scope.BLOCK)==null||O===this.statics.blotName&&M===this.statics.formats(this.domNode))){var U=this.newlineIndex(k);if(!(U<0||U>=k+x)){var K=this.newlineIndex(k,!0)+1,G=U-K+1,H=this.isolate(K,G),q=H.next;H.format(O,M),q instanceof P&&q.formatAt(0,k-K+x-G,O,M)}}}},{key:"insertAt",value:function(k,x,O){if(O==null){var M=this.descendant(m.default,k),U=o(M,2),K=U[0],G=U[1];K.insertAt(G,x)}}},{key:"length",value:function(){var k=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?k:k+1}},{key:"newlineIndex",value:function(k){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(x)return this.domNode.textContent.slice(0,k).lastIndexOf(`
`);var O=this.domNode.textContent.slice(k).indexOf(`
`);return O>-1?k+O:-1}},{key:"optimize",value:function(k){this.domNode.textContent.endsWith(`
`)||this.appendChild(h.default.create("text",`
`)),a(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"optimize",this).call(this,k);var x=this.next;x!=null&&x.prev===this&&x.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===x.statics.formats(x.domNode)&&(x.optimize(k),x.moveChildren(this),x.remove())}},{key:"replace",value:function(k){a(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"replace",this).call(this,k),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(x){var O=h.default.find(x);O==null?x.parentNode.removeChild(x):O instanceof h.default.Embed?O.remove():O.unwrap()})}}],[{key:"create",value:function(k){var x=a(P.__proto__||Object.getPrototypeOf(P),"create",this).call(this,k);return x.setAttribute("spellcheck",!1),x}},{key:"formats",value:function(){return!0}}]),P}(d.default);S.blotName="code-block",S.tagName="PRE",S.TAB="  ",r.Code=C,r.default=S},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},s=function(){function q(F,N){var D=[],j=!0,z=!1,W=void 0;try{for(var V=F[Symbol.iterator](),$;!(j=($=V.next()).done)&&(D.push($.value),!(N&&D.length===N));j=!0);}catch(Y){z=!0,W=Y}finally{try{!j&&V.return&&V.return()}finally{if(z)throw W}}return D}return function(F,N){if(Array.isArray(F))return F;if(Symbol.iterator in Object(F))return q(F,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function q(F,N){for(var D=0;D<N.length;D++){var j=N[D];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(F,j.key,j)}}return function(F,N,D){return N&&q(F.prototype,N),D&&q(F,D),F}}(),l=i(2),c=x(l),p=i(20),h=x(p),f=i(0),d=x(f),_=i(13),v=x(_),E=i(24),m=x(E),g=i(4),w=x(g),y=i(16),I=x(y),C=i(21),S=x(C),T=i(11),P=x(T),b=i(3),k=x(b);function x(q){return q&&q.__esModule?q:{default:q}}function O(q,F,N){return F in q?Object.defineProperty(q,F,{value:N,enumerable:!0,configurable:!0,writable:!0}):q[F]=N,q}function M(q,F){if(!(q instanceof F))throw new TypeError("Cannot call a class as a function")}var U=/^[ -~]*$/,K=function(){function q(F){M(this,q),this.scroll=F,this.delta=this.getDelta()}return a(q,[{key:"applyDelta",value:function(N){var D=this,j=!1;this.scroll.update();var z=this.scroll.length();return this.scroll.batchStart(),N=H(N),N.reduce(function(W,V){var $=V.retain||V.delete||V.insert.length||1,Y=V.attributes||{};if(V.insert!=null){if(typeof V.insert=="string"){var X=V.insert;X.endsWith(`
`)&&j&&(j=!1,X=X.slice(0,-1)),W>=z&&!X.endsWith(`
`)&&(j=!0),D.scroll.insertAt(W,X);var te=D.scroll.line(W),ce=s(te,2),me=ce[0],ge=ce[1],Se=(0,k.default)({},(0,g.bubbleFormats)(me));if(me instanceof w.default){var Oe=me.descendant(d.default.Leaf,ge),gt=s(Oe,1),et=gt[0];Se=(0,k.default)(Se,(0,g.bubbleFormats)(et))}Y=h.default.attributes.diff(Se,Y)||{}}else if(o(V.insert)==="object"){var Z=Object.keys(V.insert)[0];if(Z==null)return W;D.scroll.insertAt(W,Z,V.insert[Z])}z+=$}return Object.keys(Y).forEach(function(ee){D.scroll.formatAt(W,$,ee,Y[ee])}),W+$},0),N.reduce(function(W,V){return typeof V.delete=="number"?(D.scroll.deleteAt(W,V.delete),W):W+(V.retain||V.insert.length||1)},0),this.scroll.batchEnd(),this.update(N)}},{key:"deleteText",value:function(N,D){return this.scroll.deleteAt(N,D),this.update(new c.default().retain(N).delete(D))}},{key:"formatLine",value:function(N,D){var j=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(z).forEach(function(W){if(!(j.scroll.whitelist!=null&&!j.scroll.whitelist[W])){var V=j.scroll.lines(N,Math.max(D,1)),$=D;V.forEach(function(Y){var X=Y.length();if(!(Y instanceof v.default))Y.format(W,z[W]);else{var te=N-Y.offset(j.scroll),ce=Y.newlineIndex(te+$)-te+1;Y.formatAt(te,ce,W,z[W])}$-=X})}}),this.scroll.optimize(),this.update(new c.default().retain(N).retain(D,(0,S.default)(z)))}},{key:"formatText",value:function(N,D){var j=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(z).forEach(function(W){j.scroll.formatAt(N,D,W,z[W])}),this.update(new c.default().retain(N).retain(D,(0,S.default)(z)))}},{key:"getContents",value:function(N,D){return this.delta.slice(N,N+D)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(N,D){return N.concat(D.delta())},new c.default)}},{key:"getFormat",value:function(N){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,j=[],z=[];D===0?this.scroll.path(N).forEach(function(V){var $=s(V,1),Y=$[0];Y instanceof w.default?j.push(Y):Y instanceof d.default.Leaf&&z.push(Y)}):(j=this.scroll.lines(N,D),z=this.scroll.descendants(d.default.Leaf,N,D));var W=[j,z].map(function(V){if(V.length===0)return{};for(var $=(0,g.bubbleFormats)(V.shift());Object.keys($).length>0;){var Y=V.shift();if(Y==null)return $;$=G((0,g.bubbleFormats)(Y),$)}return $});return k.default.apply(k.default,W)}},{key:"getText",value:function(N,D){return this.getContents(N,D).filter(function(j){return typeof j.insert=="string"}).map(function(j){return j.insert}).join("")}},{key:"insertEmbed",value:function(N,D,j){return this.scroll.insertAt(N,D,j),this.update(new c.default().retain(N).insert(O({},D,j)))}},{key:"insertText",value:function(N,D){var j=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return D=D.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(N,D),Object.keys(z).forEach(function(W){j.scroll.formatAt(N,D.length,W,z[W])}),this.update(new c.default().retain(N).insert(D,(0,S.default)(z)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var N=this.scroll.children.head;return N.statics.blotName!==w.default.blotName||N.children.length>1?!1:N.children.head instanceof I.default}},{key:"removeFormat",value:function(N,D){var j=this.getText(N,D),z=this.scroll.line(N+D),W=s(z,2),V=W[0],$=W[1],Y=0,X=new c.default;V!=null&&(V instanceof v.default?Y=V.newlineIndex($)-$+1:Y=V.length()-$,X=V.delta().slice($,$+Y-1).insert(`
`));var te=this.getContents(N,D+Y),ce=te.diff(new c.default().insert(j).concat(X)),me=new c.default().retain(N).concat(ce);return this.applyDelta(me)}},{key:"update",value:function(N){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,z=this.delta;if(D.length===1&&D[0].type==="characterData"&&D[0].target.data.match(U)&&d.default.find(D[0].target)){var W=d.default.find(D[0].target),V=(0,g.bubbleFormats)(W),$=W.offset(this.scroll),Y=D[0].oldValue.replace(m.default.CONTENTS,""),X=new c.default().insert(Y),te=new c.default().insert(W.value()),ce=new c.default().retain($).concat(X.diff(te,j));N=ce.reduce(function(me,ge){return ge.insert?me.insert(ge.insert,V):me.push(ge)},new c.default),this.delta=z.compose(N)}else this.delta=this.getDelta(),(!N||!(0,P.default)(z.compose(N),this.delta))&&(N=z.diff(this.delta,j));return N}}]),q}();function G(q,F){return Object.keys(F).reduce(function(N,D){return q[D]==null||(F[D]===q[D]?N[D]=F[D]:Array.isArray(F[D])?F[D].indexOf(q[D])<0&&(N[D]=F[D].concat([q[D]])):N[D]=[F[D],q[D]]),N},{})}function H(q){return q.reduce(function(F,N){if(N.insert===1){var D=(0,S.default)(N.attributes);return delete D.image,F.insert({image:N.attributes.image},D)}if(N.attributes!=null&&(N.attributes.list===!0||N.attributes.bullet===!0)&&(N=(0,S.default)(N),N.attributes.list?N.attributes.list="ordered":(N.attributes.list="bullet",delete N.attributes.bullet)),typeof N.insert=="string"){var j=N.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return F.insert(j,N.attributes)}return F.push(N)},new c.default)}r.default=K},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var o=function(){function T(P,b){var k=[],x=!0,O=!1,M=void 0;try{for(var U=P[Symbol.iterator](),K;!(x=(K=U.next()).done)&&(k.push(K.value),!(b&&k.length===b));x=!0);}catch(G){O=!0,M=G}finally{try{!x&&U.return&&U.return()}finally{if(O)throw M}}return k}return function(P,b){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return T(P,b);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function T(P,b){for(var k=0;k<b.length;k++){var x=b[k];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(P,x.key,x)}}return function(P,b,k){return b&&T(P.prototype,b),k&&T(P,k),P}}(),a=i(0),l=m(a),c=i(21),p=m(c),h=i(11),f=m(h),d=i(8),_=m(d),v=i(10),E=m(v);function m(T){return T&&T.__esModule?T:{default:T}}function g(T){if(Array.isArray(T)){for(var P=0,b=Array(T.length);P<T.length;P++)b[P]=T[P];return b}else return Array.from(T)}function w(T,P){if(!(T instanceof P))throw new TypeError("Cannot call a class as a function")}var y=(0,E.default)("quill:selection"),I=function T(P){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;w(this,T),this.index=P,this.length=b},C=function(){function T(P,b){var k=this;w(this,T),this.emitter=b,this.scroll=P,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=l.default.create("cursor",this),this.lastRange=this.savedRange=new I(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){k.mouseDown||setTimeout(k.update.bind(k,_.default.sources.USER),1)}),this.emitter.on(_.default.events.EDITOR_CHANGE,function(x,O){x===_.default.events.TEXT_CHANGE&&O.length()>0&&k.update(_.default.sources.SILENT)}),this.emitter.on(_.default.events.SCROLL_BEFORE_UPDATE,function(){if(k.hasFocus()){var x=k.getNativeRange();x!=null&&x.start.node!==k.cursor.textNode&&k.emitter.once(_.default.events.SCROLL_UPDATE,function(){try{k.setNativeRange(x.start.node,x.start.offset,x.end.node,x.end.offset)}catch{}})}}),this.emitter.on(_.default.events.SCROLL_OPTIMIZE,function(x,O){if(O.range){var M=O.range,U=M.startNode,K=M.startOffset,G=M.endNode,H=M.endOffset;k.setNativeRange(U,K,G,H)}}),this.update(_.default.sources.SILENT)}return s(T,[{key:"handleComposition",value:function(){var b=this;this.root.addEventListener("compositionstart",function(){b.composing=!0}),this.root.addEventListener("compositionend",function(){if(b.composing=!1,b.cursor.parent){var k=b.cursor.restore();if(!k)return;setTimeout(function(){b.setNativeRange(k.startNode,k.startOffset,k.endNode,k.endOffset)},1)}})}},{key:"handleDragging",value:function(){var b=this;this.emitter.listenDOM("mousedown",document.body,function(){b.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){b.mouseDown=!1,b.update(_.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(b,k){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[b])){this.scroll.update();var x=this.getNativeRange();if(!(x==null||!x.native.collapsed||l.default.query(b,l.default.Scope.BLOCK))){if(x.start.node!==this.cursor.textNode){var O=l.default.find(x.start.node,!1);if(O==null)return;if(O instanceof l.default.Leaf){var M=O.split(x.start.offset);O.parent.insertBefore(this.cursor,M)}else O.insertBefore(this.cursor,x.start.node);this.cursor.attach()}this.cursor.format(b,k),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(b){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,x=this.scroll.length();b=Math.min(b,x-1),k=Math.min(b+k,x-1)-b;var O=void 0,M=this.scroll.leaf(b),U=o(M,2),K=U[0],G=U[1];if(K==null)return null;var H=K.position(G,!0),q=o(H,2);O=q[0],G=q[1];var F=document.createRange();if(k>0){F.setStart(O,G);var N=this.scroll.leaf(b+k),D=o(N,2);if(K=D[0],G=D[1],K==null)return null;var j=K.position(G,!0),z=o(j,2);return O=z[0],G=z[1],F.setEnd(O,G),F.getBoundingClientRect()}else{var W="left",V=void 0;return O instanceof Text?(G<O.data.length?(F.setStart(O,G),F.setEnd(O,G+1)):(F.setStart(O,G-1),F.setEnd(O,G),W="right"),V=F.getBoundingClientRect()):(V=K.domNode.getBoundingClientRect(),G>0&&(W="right")),{bottom:V.top+V.height,height:V.height,left:V[W],right:V[W],top:V.top,width:0}}}},{key:"getNativeRange",value:function(){var b=document.getSelection();if(b==null||b.rangeCount<=0)return null;var k=b.getRangeAt(0);if(k==null)return null;var x=this.normalizeNative(k);return y.info("getNativeRange",x),x}},{key:"getRange",value:function(){var b=this.getNativeRange();if(b==null)return[null,null];var k=this.normalizedToRange(b);return[k,b]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(b){var k=this,x=[[b.start.node,b.start.offset]];b.native.collapsed||x.push([b.end.node,b.end.offset]);var O=x.map(function(K){var G=o(K,2),H=G[0],q=G[1],F=l.default.find(H,!0),N=F.offset(k.scroll);return q===0?N:F instanceof l.default.Container?N+F.length():N+F.index(H,q)}),M=Math.min(Math.max.apply(Math,g(O)),this.scroll.length()-1),U=Math.min.apply(Math,[M].concat(g(O)));return new I(U,M-U)}},{key:"normalizeNative",value:function(b){if(!S(this.root,b.startContainer)||!b.collapsed&&!S(this.root,b.endContainer))return null;var k={start:{node:b.startContainer,offset:b.startOffset},end:{node:b.endContainer,offset:b.endOffset},native:b};return[k.start,k.end].forEach(function(x){for(var O=x.node,M=x.offset;!(O instanceof Text)&&O.childNodes.length>0;)if(O.childNodes.length>M)O=O.childNodes[M],M=0;else if(O.childNodes.length===M)O=O.lastChild,M=O instanceof Text?O.data.length:O.childNodes.length+1;else break;x.node=O,x.offset=M}),k}},{key:"rangeToNative",value:function(b){var k=this,x=b.collapsed?[b.index]:[b.index,b.index+b.length],O=[],M=this.scroll.length();return x.forEach(function(U,K){U=Math.min(M-1,U);var G=void 0,H=k.scroll.leaf(U),q=o(H,2),F=q[0],N=q[1],D=F.position(N,K!==0),j=o(D,2);G=j[0],N=j[1],O.push(G,N)}),O.length<2&&(O=O.concat(O)),O}},{key:"scrollIntoView",value:function(b){var k=this.lastRange;if(k!=null){var x=this.getBounds(k.index,k.length);if(x!=null){var O=this.scroll.length()-1,M=this.scroll.line(Math.min(k.index,O)),U=o(M,1),K=U[0],G=K;if(k.length>0){var H=this.scroll.line(Math.min(k.index+k.length,O)),q=o(H,1);G=q[0]}if(!(K==null||G==null)){var F=b.getBoundingClientRect();x.top<F.top?b.scrollTop-=F.top-x.top:x.bottom>F.bottom&&(b.scrollTop+=x.bottom-F.bottom)}}}}},{key:"setNativeRange",value:function(b,k){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b,O=arguments.length>3&&arguments[3]!==void 0?arguments[3]:k,M=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(y.info("setNativeRange",b,k,x,O),!(b!=null&&(this.root.parentNode==null||b.parentNode==null||x.parentNode==null))){var U=document.getSelection();if(U!=null)if(b!=null){this.hasFocus()||this.root.focus();var K=(this.getNativeRange()||{}).native;if(K==null||M||b!==K.startContainer||k!==K.startOffset||x!==K.endContainer||O!==K.endOffset){b.tagName=="BR"&&(k=[].indexOf.call(b.parentNode.childNodes,b),b=b.parentNode),x.tagName=="BR"&&(O=[].indexOf.call(x.parentNode.childNodes,x),x=x.parentNode);var G=document.createRange();G.setStart(b,k),G.setEnd(x,O),U.removeAllRanges(),U.addRange(G)}}else U.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(b){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_.default.sources.API;if(typeof k=="string"&&(x=k,k=!1),y.info("setRange",b),b!=null){var O=this.rangeToNative(b);this.setNativeRange.apply(this,g(O).concat([k]))}else this.setNativeRange(null);this.update(x)}},{key:"update",value:function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_.default.sources.USER,k=this.lastRange,x=this.getRange(),O=o(x,2),M=O[0],U=O[1];if(this.lastRange=M,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,f.default)(k,this.lastRange)){var K;!this.composing&&U!=null&&U.native.collapsed&&U.start.node!==this.cursor.textNode&&this.cursor.restore();var G=[_.default.events.SELECTION_CHANGE,(0,p.default)(this.lastRange),(0,p.default)(k),b];if((K=this.emitter).emit.apply(K,[_.default.events.EDITOR_CHANGE].concat(G)),b!==_.default.sources.SILENT){var H;(H=this.emitter).emit.apply(H,G)}}}}]),T}();function S(T,P){try{P.parentNode}catch{return!1}return P instanceof Text&&(P=P.parentNode),T.contains(P)}r.Range=I,r.default=C},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function _(v,E){for(var m=0;m<E.length;m++){var g=E[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,g.key,g)}}return function(v,E,m){return E&&_(v.prototype,E),m&&_(v,m),v}}(),s=function _(v,E,m){v===null&&(v=Function.prototype);var g=Object.getOwnPropertyDescriptor(v,E);if(g===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:_(w,E,m)}else{if("value"in g)return g.value;var y=g.get;return y===void 0?void 0:y.call(m)}},a=i(0),l=c(a);function c(_){return _&&_.__esModule?_:{default:_}}function p(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function h(_,v){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:_}function f(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(_,v):_.__proto__=v)}var d=function(_){f(v,_);function v(){return p(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return o(v,[{key:"insertInto",value:function(m,g){m.children.length===0?s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"insertInto",this).call(this,m,g):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),v}(l.default.Embed);d.blotName="break",d.tagName="BR",r.default=d},function(n,r,i){var o=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var _ in d)d.hasOwnProperty(_)&&(f[_]=d[_])};return function(f,d){h(f,d);function _(){this.constructor=f}f.prototype=d===null?Object.create(d):(_.prototype=d.prototype,new _)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(44),a=i(30),l=i(1),c=function(h){o(f,h);function f(d){var _=h.call(this,d)||this;return _.build(),_}return f.prototype.appendChild=function(d){this.insertBefore(d)},f.prototype.attach=function(){h.prototype.attach.call(this),this.children.forEach(function(d){d.attach()})},f.prototype.build=function(){var d=this;this.children=new s.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(_){try{var v=p(_);d.insertBefore(v,d.children.head||void 0)}catch(E){if(E instanceof l.ParchmentError)return;throw E}})},f.prototype.deleteAt=function(d,_){if(d===0&&_===this.length())return this.remove();this.children.forEachAt(d,_,function(v,E,m){v.deleteAt(E,m)})},f.prototype.descendant=function(d,_){var v=this.children.find(_),E=v[0],m=v[1];return d.blotName==null&&d(E)||d.blotName!=null&&E instanceof d?[E,m]:E instanceof f?E.descendant(d,m):[null,-1]},f.prototype.descendants=function(d,_,v){_===void 0&&(_=0),v===void 0&&(v=Number.MAX_VALUE);var E=[],m=v;return this.children.forEachAt(_,v,function(g,w,y){(d.blotName==null&&d(g)||d.blotName!=null&&g instanceof d)&&E.push(g),g instanceof f&&(E=E.concat(g.descendants(d,w,m))),m-=y}),E},f.prototype.detach=function(){this.children.forEach(function(d){d.detach()}),h.prototype.detach.call(this)},f.prototype.formatAt=function(d,_,v,E){this.children.forEachAt(d,_,function(m,g,w){m.formatAt(g,w,v,E)})},f.prototype.insertAt=function(d,_,v){var E=this.children.find(d),m=E[0],g=E[1];if(m)m.insertAt(g,_,v);else{var w=v==null?l.create("text",_):l.create(_,v);this.appendChild(w)}},f.prototype.insertBefore=function(d,_){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(v){return d instanceof v}))throw new l.ParchmentError("Cannot insert "+d.statics.blotName+" into "+this.statics.blotName);d.insertInto(this,_)},f.prototype.length=function(){return this.children.reduce(function(d,_){return d+_.length()},0)},f.prototype.moveChildren=function(d,_){this.children.forEach(function(v){d.insertBefore(v,_)})},f.prototype.optimize=function(d){if(h.prototype.optimize.call(this,d),this.children.length===0)if(this.statics.defaultChild!=null){var _=l.create(this.statics.defaultChild);this.appendChild(_),_.optimize(d)}else this.remove()},f.prototype.path=function(d,_){_===void 0&&(_=!1);var v=this.children.find(d,_),E=v[0],m=v[1],g=[[this,d]];return E instanceof f?g.concat(E.path(m,_)):(E!=null&&g.push([E,m]),g)},f.prototype.removeChild=function(d){this.children.remove(d)},f.prototype.replace=function(d){d instanceof f&&d.moveChildren(this),h.prototype.replace.call(this,d)},f.prototype.split=function(d,_){if(_===void 0&&(_=!1),!_){if(d===0)return this;if(d===this.length())return this.next}var v=this.clone();return this.parent.insertBefore(v,this.next),this.children.forEachAt(d,this.length(),function(E,m,g){E=E.split(m,_),v.appendChild(E)}),v},f.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},f.prototype.update=function(d,_){var v=this,E=[],m=[];d.forEach(function(g){g.target===v.domNode&&g.type==="childList"&&(E.push.apply(E,g.addedNodes),m.push.apply(m,g.removedNodes))}),m.forEach(function(g){if(!(g.parentNode!=null&&g.tagName!=="IFRAME"&&document.body.compareDocumentPosition(g)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var w=l.find(g);w!=null&&(w.domNode.parentNode==null||w.domNode.parentNode===v.domNode)&&w.detach()}}),E.filter(function(g){return g.parentNode==v.domNode}).sort(function(g,w){return g===w?0:g.compareDocumentPosition(w)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(g){var w=null;g.nextSibling!=null&&(w=l.find(g.nextSibling));var y=p(g);(y.next!=w||y.next==null)&&(y.parent!=null&&y.parent.removeChild(v),v.insertBefore(y,w||void 0))})},f}(a.default);function p(h){var f=l.find(h);if(f==null)try{f=l.create(h)}catch{f=l.create(l.Scope.INLINE),[].slice.call(h.childNodes).forEach(function(_){f.domNode.appendChild(_)}),h.parentNode&&h.parentNode.replaceChild(f.domNode,h),f.attach()}return f}r.default=c},function(n,r,i){var o=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var _ in d)d.hasOwnProperty(_)&&(f[_]=d[_])};return function(f,d){h(f,d);function _(){this.constructor=f}f.prototype=d===null?Object.create(d):(_.prototype=d.prototype,new _)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(12),a=i(31),l=i(17),c=i(1),p=function(h){o(f,h);function f(d){var _=h.call(this,d)||this;return _.attributes=new a.default(_.domNode),_}return f.formats=function(d){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return d.tagName.toLowerCase()},f.prototype.format=function(d,_){var v=c.query(d);v instanceof s.default?this.attributes.attribute(v,_):_&&v!=null&&(d!==this.statics.blotName||this.formats()[d]!==_)&&this.replaceWith(d,_)},f.prototype.formats=function(){var d=this.attributes.values(),_=this.statics.formats(this.domNode);return _!=null&&(d[this.statics.blotName]=_),d},f.prototype.replaceWith=function(d,_){var v=h.prototype.replaceWith.call(this,d,_);return this.attributes.copy(v),v},f.prototype.update=function(d,_){var v=this;h.prototype.update.call(this,d,_),d.some(function(E){return E.target===v.domNode&&E.type==="attributes"})&&this.attributes.build()},f.prototype.wrap=function(d,_){var v=h.prototype.wrap.call(this,d,_);return v instanceof f&&v.statics.scope===this.statics.scope&&this.attributes.move(v),v},f}(l.default);r.default=p},function(n,r,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var f in h)h.hasOwnProperty(f)&&(p[f]=h[f])};return function(p,h){c(p,h);function f(){this.constructor=p}p.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(30),a=i(1),l=function(c){o(p,c);function p(){return c!==null&&c.apply(this,arguments)||this}return p.value=function(h){return!0},p.prototype.index=function(h,f){return this.domNode===h||this.domNode.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(f,1):-1},p.prototype.position=function(h,f){var d=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return h>0&&(d+=1),[this.parent.domNode,d]},p.prototype.value=function(){var h;return h={},h[this.statics.blotName]=this.statics.value(this.domNode)||!0,h},p.scope=a.Scope.INLINE_BLOT,p}(s.default);r.default=l},function(n,r,i){var o=i(11),s=i(3),a={attributes:{compose:function(c,p,h){typeof c!="object"&&(c={}),typeof p!="object"&&(p={});var f=s(!0,{},p);h||(f=Object.keys(f).reduce(function(_,v){return f[v]!=null&&(_[v]=f[v]),_},{}));for(var d in c)c[d]!==void 0&&p[d]===void 0&&(f[d]=c[d]);return Object.keys(f).length>0?f:void 0},diff:function(c,p){typeof c!="object"&&(c={}),typeof p!="object"&&(p={});var h=Object.keys(c).concat(Object.keys(p)).reduce(function(f,d){return o(c[d],p[d])||(f[d]=p[d]===void 0?null:p[d]),f},{});return Object.keys(h).length>0?h:void 0},transform:function(c,p,h){if(typeof c!="object")return p;if(typeof p=="object"){if(!h)return p;var f=Object.keys(p).reduce(function(d,_){return c[_]===void 0&&(d[_]=p[_]),d},{});return Object.keys(f).length>0?f:void 0}}},iterator:function(c){return new l(c)},length:function(c){return typeof c.delete=="number"?c.delete:typeof c.retain=="number"?c.retain:typeof c.insert=="string"?c.insert.length:1}};function l(c){this.ops=c,this.index=0,this.offset=0}l.prototype.hasNext=function(){return this.peekLength()<1/0},l.prototype.next=function(c){c||(c=1/0);var p=this.ops[this.index];if(p){var h=this.offset,f=a.length(p);if(c>=f-h?(c=f-h,this.index+=1,this.offset=0):this.offset+=c,typeof p.delete=="number")return{delete:c};var d={};return p.attributes&&(d.attributes=p.attributes),typeof p.retain=="number"?d.retain=c:typeof p.insert=="string"?d.insert=p.insert.substr(h,c):d.insert=p.insert,d}else return{retain:1/0}},l.prototype.peek=function(){return this.ops[this.index]},l.prototype.peekLength=function(){return this.ops[this.index]?a.length(this.ops[this.index])-this.offset:1/0},l.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},l.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var c=this.offset,p=this.index,h=this.next(),f=this.ops.slice(this.index);return this.offset=c,this.index=p,[h].concat(f)}else return[]},n.exports=a},function(n,r){var i=function(){function o(v,E){return E!=null&&v instanceof E}var s;try{s=Map}catch{s=function(){}}var a;try{a=Set}catch{a=function(){}}var l;try{l=Promise}catch{l=function(){}}function c(v,E,m,g,w){typeof E=="object"&&(m=E.depth,g=E.prototype,w=E.includeNonEnumerable,E=E.circular);var y=[],I=[],C=typeof Buffer<"u";typeof E>"u"&&(E=!0),typeof m>"u"&&(m=1/0);function S(T,P){if(T===null)return null;if(P===0)return T;var b,k;if(typeof T!="object")return T;if(o(T,s))b=new s;else if(o(T,a))b=new a;else if(o(T,l))b=new l(function(F,N){T.then(function(D){F(S(D,P-1))},function(D){N(S(D,P-1))})});else if(c.__isArray(T))b=[];else if(c.__isRegExp(T))b=new RegExp(T.source,_(T)),T.lastIndex&&(b.lastIndex=T.lastIndex);else if(c.__isDate(T))b=new Date(T.getTime());else{if(C&&Buffer.isBuffer(T))return Buffer.allocUnsafe?b=Buffer.allocUnsafe(T.length):b=new Buffer(T.length),T.copy(b),b;o(T,Error)?b=Object.create(T):typeof g>"u"?(k=Object.getPrototypeOf(T),b=Object.create(k)):(b=Object.create(g),k=g)}if(E){var x=y.indexOf(T);if(x!=-1)return I[x];y.push(T),I.push(b)}o(T,s)&&T.forEach(function(F,N){var D=S(N,P-1),j=S(F,P-1);b.set(D,j)}),o(T,a)&&T.forEach(function(F){var N=S(F,P-1);b.add(N)});for(var O in T){var M;k&&(M=Object.getOwnPropertyDescriptor(k,O)),!(M&&M.set==null)&&(b[O]=S(T[O],P-1))}if(Object.getOwnPropertySymbols)for(var U=Object.getOwnPropertySymbols(T),O=0;O<U.length;O++){var K=U[O],G=Object.getOwnPropertyDescriptor(T,K);G&&!G.enumerable&&!w||(b[K]=S(T[K],P-1),G.enumerable||Object.defineProperty(b,K,{enumerable:!1}))}if(w)for(var H=Object.getOwnPropertyNames(T),O=0;O<H.length;O++){var q=H[O],G=Object.getOwnPropertyDescriptor(T,q);G&&G.enumerable||(b[q]=S(T[q],P-1),Object.defineProperty(b,q,{enumerable:!1}))}return b}return S(v,m)}c.clonePrototype=function(E){if(E===null)return null;var m=function(){};return m.prototype=E,new m};function p(v){return Object.prototype.toString.call(v)}c.__objToStr=p;function h(v){return typeof v=="object"&&p(v)==="[object Date]"}c.__isDate=h;function f(v){return typeof v=="object"&&p(v)==="[object Array]"}c.__isArray=f;function d(v){return typeof v=="object"&&p(v)==="[object RegExp]"}c.__isRegExp=d;function _(v){var E="";return v.global&&(E+="g"),v.ignoreCase&&(E+="i"),v.multiline&&(E+="m"),E}return c.__getRegExpFlags=_,c}();typeof n=="object"&&n.exports&&(n.exports=i)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function b(k,x){var O=[],M=!0,U=!1,K=void 0;try{for(var G=k[Symbol.iterator](),H;!(M=(H=G.next()).done)&&(O.push(H.value),!(x&&O.length===x));M=!0);}catch(q){U=!0,K=q}finally{try{!M&&G.return&&G.return()}finally{if(U)throw K}}return O}return function(k,x){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return b(k,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function b(k,x){for(var O=0;O<x.length;O++){var M=x[O];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(k,M.key,M)}}return function(k,x,O){return x&&b(k.prototype,x),O&&b(k,O),k}}(),a=function b(k,x,O){k===null&&(k=Function.prototype);var M=Object.getOwnPropertyDescriptor(k,x);if(M===void 0){var U=Object.getPrototypeOf(k);return U===null?void 0:b(U,x,O)}else{if("value"in M)return M.value;var K=M.get;return K===void 0?void 0:K.call(O)}},l=i(0),c=y(l),p=i(8),h=y(p),f=i(4),d=y(f),_=i(16),v=y(_),E=i(13),m=y(E),g=i(25),w=y(g);function y(b){return b&&b.__esModule?b:{default:b}}function I(b,k){if(!(b instanceof k))throw new TypeError("Cannot call a class as a function")}function C(b,k){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:b}function S(b,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);b.prototype=Object.create(k&&k.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(b,k):b.__proto__=k)}function T(b){return b instanceof d.default||b instanceof f.BlockEmbed}var P=function(b){S(k,b);function k(x,O){I(this,k);var M=C(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,x));return M.emitter=O.emitter,Array.isArray(O.whitelist)&&(M.whitelist=O.whitelist.reduce(function(U,K){return U[K]=!0,U},{})),M.domNode.addEventListener("DOMNodeInserted",function(){}),M.optimize(),M.enable(),M}return s(k,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(O,M){var U=this.line(O),K=o(U,2),G=K[0],H=K[1],q=this.line(O+M),F=o(q,1),N=F[0];if(a(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"deleteAt",this).call(this,O,M),N!=null&&G!==N&&H>0){if(G instanceof f.BlockEmbed||N instanceof f.BlockEmbed){this.optimize();return}if(G instanceof m.default){var D=G.newlineIndex(G.length(),!0);if(D>-1&&(G=G.split(D+1),G===N)){this.optimize();return}}else if(N instanceof m.default){var j=N.newlineIndex(0);j>-1&&N.split(j+1)}var z=N.children.head instanceof v.default?null:N.children.head;G.moveChildren(N,z),G.remove()}this.optimize()}},{key:"enable",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",O)}},{key:"formatAt",value:function(O,M,U,K){this.whitelist!=null&&!this.whitelist[U]||(a(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"formatAt",this).call(this,O,M,U,K),this.optimize())}},{key:"insertAt",value:function(O,M,U){if(!(U!=null&&this.whitelist!=null&&!this.whitelist[M])){if(O>=this.length())if(U==null||c.default.query(M,c.default.Scope.BLOCK)==null){var K=c.default.create(this.statics.defaultChild);this.appendChild(K),U==null&&M.endsWith(`
`)&&(M=M.slice(0,-1)),K.insertAt(0,M,U)}else{var G=c.default.create(M,U);this.appendChild(G)}else a(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertAt",this).call(this,O,M,U);this.optimize()}}},{key:"insertBefore",value:function(O,M){if(O.statics.scope===c.default.Scope.INLINE_BLOT){var U=c.default.create(this.statics.defaultChild);U.appendChild(O),O=U}a(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertBefore",this).call(this,O,M)}},{key:"leaf",value:function(O){return this.path(O).pop()||[null,-1]}},{key:"line",value:function(O){return O===this.length()?this.line(O-1):this.descendant(T,O)}},{key:"lines",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,U=function K(G,H,q){var F=[],N=q;return G.children.forEachAt(H,q,function(D,j,z){T(D)?F.push(D):D instanceof c.default.Container&&(F=F.concat(K(D,j,N))),N-=z}),F};return U(this,O,M)}},{key:"optimize",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(a(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"optimize",this).call(this,O,M),O.length>0&&this.emitter.emit(h.default.events.SCROLL_OPTIMIZE,O,M))}},{key:"path",value:function(O){return a(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"path",this).call(this,O).slice(1)}},{key:"update",value:function(O){if(this.batch!==!0){var M=h.default.sources.USER;typeof O=="string"&&(M=O),Array.isArray(O)||(O=this.observer.takeRecords()),O.length>0&&this.emitter.emit(h.default.events.SCROLL_BEFORE_UPDATE,M,O),a(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"update",this).call(this,O.concat([])),O.length>0&&this.emitter.emit(h.default.events.SCROLL_UPDATE,M,O)}}}]),k}(c.default.Scroll);P.blotName="scroll",P.className="ql-editor",P.tagName="DIV",P.defaultChild="block",P.allowedChildren=[d.default,f.BlockEmbed,w.default],r.default=P},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},s=function(){function V($,Y){var X=[],te=!0,ce=!1,me=void 0;try{for(var ge=$[Symbol.iterator](),Se;!(te=(Se=ge.next()).done)&&(X.push(Se.value),!(Y&&X.length===Y));te=!0);}catch(Oe){ce=!0,me=Oe}finally{try{!te&&ge.return&&ge.return()}finally{if(ce)throw me}}return X}return function($,Y){if(Array.isArray($))return $;if(Symbol.iterator in Object($))return V($,Y);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function V($,Y){for(var X=0;X<Y.length;X++){var te=Y[X];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty($,te.key,te)}}return function($,Y,X){return Y&&V($.prototype,Y),X&&V($,X),$}}(),l=i(21),c=b(l),p=i(11),h=b(p),f=i(3),d=b(f),_=i(2),v=b(_),E=i(20),m=b(E),g=i(0),w=b(g),y=i(5),I=b(y),C=i(10),S=b(C),T=i(9),P=b(T);function b(V){return V&&V.__esModule?V:{default:V}}function k(V,$,Y){return $ in V?Object.defineProperty(V,$,{value:Y,enumerable:!0,configurable:!0,writable:!0}):V[$]=Y,V}function x(V,$){if(!(V instanceof $))throw new TypeError("Cannot call a class as a function")}function O(V,$){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $&&(typeof $=="object"||typeof $=="function")?$:V}function M(V,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $);V.prototype=Object.create($&&$.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),$&&(Object.setPrototypeOf?Object.setPrototypeOf(V,$):V.__proto__=$)}var U=(0,S.default)("quill:keyboard"),K=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",G=function(V){M($,V),a($,null,[{key:"match",value:function(X,te){return te=W(te),["altKey","ctrlKey","metaKey","shiftKey"].some(function(ce){return!!te[ce]!==X[ce]&&te[ce]!==null})?!1:te.key===(X.which||X.keyCode)}}]);function $(Y,X){x(this,$);var te=O(this,($.__proto__||Object.getPrototypeOf($)).call(this,Y,X));return te.bindings={},Object.keys(te.options.bindings).forEach(function(ce){ce==="list autofill"&&Y.scroll.whitelist!=null&&!Y.scroll.whitelist.list||te.options.bindings[ce]&&te.addBinding(te.options.bindings[ce])}),te.addBinding({key:$.keys.ENTER,shiftKey:null},D),te.addBinding({key:$.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(te.addBinding({key:$.keys.BACKSPACE},{collapsed:!0},q),te.addBinding({key:$.keys.DELETE},{collapsed:!0},F)):(te.addBinding({key:$.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},q),te.addBinding({key:$.keys.DELETE},{collapsed:!0,suffix:/^.?$/},F)),te.addBinding({key:$.keys.BACKSPACE},{collapsed:!1},N),te.addBinding({key:$.keys.DELETE},{collapsed:!1},N),te.addBinding({key:$.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},q),te.listen(),te}return a($,[{key:"addBinding",value:function(X){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},me=W(X);if(me==null||me.key==null)return U.warn("Attempted to add invalid keyboard binding",me);typeof te=="function"&&(te={handler:te}),typeof ce=="function"&&(ce={handler:ce}),me=(0,d.default)(me,te,ce),this.bindings[me.key]=this.bindings[me.key]||[],this.bindings[me.key].push(me)}},{key:"listen",value:function(){var X=this;this.quill.root.addEventListener("keydown",function(te){if(!te.defaultPrevented){var ce=te.which||te.keyCode,me=(X.bindings[ce]||[]).filter(function(We){return $.match(te,We)});if(me.length!==0){var ge=X.quill.getSelection();if(!(ge==null||!X.quill.hasFocus())){var Se=X.quill.getLine(ge.index),Oe=s(Se,2),gt=Oe[0],et=Oe[1],Z=X.quill.getLeaf(ge.index),ee=s(Z,2),ae=ee[0],ue=ee[1],ne=ge.length===0?[ae,ue]:X.quill.getLeaf(ge.index+ge.length),Ee=s(ne,2),Te=Ee[0],be=Ee[1],Ce=ae instanceof w.default.Text?ae.value().slice(0,ue):"",Fe=Te instanceof w.default.Text?Te.value().slice(be):"",Me={collapsed:ge.length===0,empty:ge.length===0&&gt.length()<=1,format:X.quill.getFormat(ge),offset:et,prefix:Ce,suffix:Fe},wa=me.some(function(We){if(We.collapsed!=null&&We.collapsed!==Me.collapsed||We.empty!=null&&We.empty!==Me.empty||We.offset!=null&&We.offset!==Me.offset)return!1;if(Array.isArray(We.format)){if(We.format.every(function(kn){return Me.format[kn]==null}))return!1}else if(o(We.format)==="object"&&!Object.keys(We.format).every(function(kn){return We.format[kn]===!0?Me.format[kn]!=null:We.format[kn]===!1?Me.format[kn]==null:(0,h.default)(We.format[kn],Me.format[kn])}))return!1;return We.prefix!=null&&!We.prefix.test(Me.prefix)||We.suffix!=null&&!We.suffix.test(Me.suffix)?!1:We.handler.call(X,ge,Me)!==!0});wa&&te.preventDefault()}}}})}}]),$}(P.default);G.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},G.DEFAULTS={bindings:{bold:z("bold"),italic:z("italic"),underline:z("underline"),indent:{key:G.keys.TAB,format:["blockquote","indent","list"],handler:function($,Y){if(Y.collapsed&&Y.offset!==0)return!0;this.quill.format("indent","+1",I.default.sources.USER)}},outdent:{key:G.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function($,Y){if(Y.collapsed&&Y.offset!==0)return!0;this.quill.format("indent","-1",I.default.sources.USER)}},"outdent backspace":{key:G.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function($,Y){Y.format.indent!=null?this.quill.format("indent","-1",I.default.sources.USER):Y.format.list!=null&&this.quill.format("list",!1,I.default.sources.USER)}},"indent code-block":j(!0),"outdent code-block":j(!1),"remove tab":{key:G.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function($){this.quill.deleteText($.index-1,1,I.default.sources.USER)}},tab:{key:G.keys.TAB,handler:function($){this.quill.history.cutoff();var Y=new v.default().retain($.index).delete($.length).insert("	");this.quill.updateContents(Y,I.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection($.index+1,I.default.sources.SILENT)}},"list empty enter":{key:G.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function($,Y){this.quill.format("list",!1,I.default.sources.USER),Y.format.indent&&this.quill.format("indent",!1,I.default.sources.USER)}},"checklist enter":{key:G.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function($){var Y=this.quill.getLine($.index),X=s(Y,2),te=X[0],ce=X[1],me=(0,d.default)({},te.formats(),{list:"checked"}),ge=new v.default().retain($.index).insert(`
`,me).retain(te.length()-ce-1).retain(1,{list:"unchecked"});this.quill.updateContents(ge,I.default.sources.USER),this.quill.setSelection($.index+1,I.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:G.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function($,Y){var X=this.quill.getLine($.index),te=s(X,2),ce=te[0],me=te[1],ge=new v.default().retain($.index).insert(`
`,Y.format).retain(ce.length()-me-1).retain(1,{header:null});this.quill.updateContents(ge,I.default.sources.USER),this.quill.setSelection($.index+1,I.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function($,Y){var X=Y.prefix.length,te=this.quill.getLine($.index),ce=s(te,2),me=ce[0],ge=ce[1];if(ge>X)return!0;var Se=void 0;switch(Y.prefix.trim()){case"[]":case"[ ]":Se="unchecked";break;case"[x]":Se="checked";break;case"-":case"*":Se="bullet";break;default:Se="ordered"}this.quill.insertText($.index," ",I.default.sources.USER),this.quill.history.cutoff();var Oe=new v.default().retain($.index-ge).delete(X+1).retain(me.length()-2-ge).retain(1,{list:Se});this.quill.updateContents(Oe,I.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection($.index-X,I.default.sources.SILENT)}},"code exit":{key:G.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function($){var Y=this.quill.getLine($.index),X=s(Y,2),te=X[0],ce=X[1],me=new v.default().retain($.index+te.length()-ce-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(me,I.default.sources.USER)}},"embed left":H(G.keys.LEFT,!1),"embed left shift":H(G.keys.LEFT,!0),"embed right":H(G.keys.RIGHT,!1),"embed right shift":H(G.keys.RIGHT,!0)}};function H(V,$){var Y,X=V===G.keys.LEFT?"prefix":"suffix";return Y={key:V,shiftKey:$,altKey:null},k(Y,X,/^$/),k(Y,"handler",function(ce){var me=ce.index;V===G.keys.RIGHT&&(me+=ce.length+1);var ge=this.quill.getLeaf(me),Se=s(ge,1),Oe=Se[0];return Oe instanceof w.default.Embed?(V===G.keys.LEFT?$?this.quill.setSelection(ce.index-1,ce.length+1,I.default.sources.USER):this.quill.setSelection(ce.index-1,I.default.sources.USER):$?this.quill.setSelection(ce.index,ce.length+1,I.default.sources.USER):this.quill.setSelection(ce.index+ce.length+1,I.default.sources.USER),!1):!0}),Y}function q(V,$){if(!(V.index===0||this.quill.getLength()<=1)){var Y=this.quill.getLine(V.index),X=s(Y,1),te=X[0],ce={};if($.offset===0){var me=this.quill.getLine(V.index-1),ge=s(me,1),Se=ge[0];if(Se!=null&&Se.length()>1){var Oe=te.formats(),gt=this.quill.getFormat(V.index-1,1);ce=m.default.attributes.diff(Oe,gt)||{}}}var et=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test($.prefix)?2:1;this.quill.deleteText(V.index-et,et,I.default.sources.USER),Object.keys(ce).length>0&&this.quill.formatLine(V.index-et,et,ce,I.default.sources.USER),this.quill.focus()}}function F(V,$){var Y=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test($.suffix)?2:1;if(!(V.index>=this.quill.getLength()-Y)){var X={},te=0,ce=this.quill.getLine(V.index),me=s(ce,1),ge=me[0];if($.offset>=ge.length()-1){var Se=this.quill.getLine(V.index+1),Oe=s(Se,1),gt=Oe[0];if(gt){var et=ge.formats(),Z=this.quill.getFormat(V.index,1);X=m.default.attributes.diff(et,Z)||{},te=gt.length()}}this.quill.deleteText(V.index,Y,I.default.sources.USER),Object.keys(X).length>0&&this.quill.formatLine(V.index+te-1,Y,X,I.default.sources.USER)}}function N(V){var $=this.quill.getLines(V),Y={};if($.length>1){var X=$[0].formats(),te=$[$.length-1].formats();Y=m.default.attributes.diff(te,X)||{}}this.quill.deleteText(V,I.default.sources.USER),Object.keys(Y).length>0&&this.quill.formatLine(V.index,1,Y,I.default.sources.USER),this.quill.setSelection(V.index,I.default.sources.SILENT),this.quill.focus()}function D(V,$){var Y=this;V.length>0&&this.quill.scroll.deleteAt(V.index,V.length);var X=Object.keys($.format).reduce(function(te,ce){return w.default.query(ce,w.default.Scope.BLOCK)&&!Array.isArray($.format[ce])&&(te[ce]=$.format[ce]),te},{});this.quill.insertText(V.index,`
`,X,I.default.sources.USER),this.quill.setSelection(V.index+1,I.default.sources.SILENT),this.quill.focus(),Object.keys($.format).forEach(function(te){X[te]==null&&(Array.isArray($.format[te])||te!=="link"&&Y.quill.format(te,$.format[te],I.default.sources.USER))})}function j(V){return{key:G.keys.TAB,shiftKey:!V,format:{"code-block":!0},handler:function(Y){var X=w.default.query("code-block"),te=Y.index,ce=Y.length,me=this.quill.scroll.descendant(X,te),ge=s(me,2),Se=ge[0],Oe=ge[1];if(Se!=null){var gt=this.quill.getIndex(Se),et=Se.newlineIndex(Oe,!0)+1,Z=Se.newlineIndex(gt+Oe+ce),ee=Se.domNode.textContent.slice(et,Z).split(`
`);Oe=0,ee.forEach(function(ae,ue){V?(Se.insertAt(et+Oe,X.TAB),Oe+=X.TAB.length,ue===0?te+=X.TAB.length:ce+=X.TAB.length):ae.startsWith(X.TAB)&&(Se.deleteAt(et+Oe,X.TAB.length),Oe-=X.TAB.length,ue===0?te-=X.TAB.length:ce-=X.TAB.length),Oe+=ae.length+1}),this.quill.update(I.default.sources.USER),this.quill.setSelection(te,ce,I.default.sources.SILENT)}}}}function z(V){return{key:V[0].toUpperCase(),shortKey:!0,handler:function(Y,X){this.quill.format(V,!X.format[V],I.default.sources.USER)}}}function W(V){if(typeof V=="string"||typeof V=="number")return W({key:V});if((typeof V>"u"?"undefined":o(V))==="object"&&(V=(0,c.default)(V,!1)),typeof V.key=="string")if(G.keys[V.key.toUpperCase()]!=null)V.key=G.keys[V.key.toUpperCase()];else if(V.key.length===1)V.key=V.key.toUpperCase().charCodeAt(0);else return null;return V.shortKey&&(V[K]=V.shortKey,delete V.shortKey),V}r.default=G,r.SHORTKEY=K},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function m(g,w){var y=[],I=!0,C=!1,S=void 0;try{for(var T=g[Symbol.iterator](),P;!(I=(P=T.next()).done)&&(y.push(P.value),!(w&&y.length===w));I=!0);}catch(b){C=!0,S=b}finally{try{!I&&T.return&&T.return()}finally{if(C)throw S}}return y}return function(g,w){if(Array.isArray(g))return g;if(Symbol.iterator in Object(g))return m(g,w);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function m(g,w,y){g===null&&(g=Function.prototype);var I=Object.getOwnPropertyDescriptor(g,w);if(I===void 0){var C=Object.getPrototypeOf(g);return C===null?void 0:m(C,w,y)}else{if("value"in I)return I.value;var S=I.get;return S===void 0?void 0:S.call(y)}},a=function(){function m(g,w){for(var y=0;y<w.length;y++){var I=w[y];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(g,I.key,I)}}return function(g,w,y){return w&&m(g.prototype,w),y&&m(g,y),g}}(),l=i(0),c=f(l),p=i(7),h=f(p);function f(m){return m&&m.__esModule?m:{default:m}}function d(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function _(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function v(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var E=function(m){v(g,m),a(g,null,[{key:"value",value:function(){}}]);function g(w,y){d(this,g);var I=_(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,w));return I.selection=y,I.textNode=document.createTextNode(g.CONTENTS),I.domNode.appendChild(I.textNode),I._length=0,I}return a(g,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(y,I){if(this._length!==0)return s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,y,I);for(var C=this,S=0;C!=null&&C.statics.scope!==c.default.Scope.BLOCK_BLOT;)S+=C.offset(C.parent),C=C.parent;C!=null&&(this._length=g.CONTENTS.length,C.optimize(),C.formatAt(S,g.CONTENTS.length,y,I),this._length=0)}},{key:"index",value:function(y,I){return y===this.textNode?0:s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"index",this).call(this,y,I)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var y=this.textNode,I=this.selection.getNativeRange(),C=void 0,S=void 0,T=void 0;if(I!=null&&I.start.node===y&&I.end.node===y){var P=[y,I.start.offset,I.end.offset];C=P[0],S=P[1],T=P[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==g.CONTENTS){var b=this.textNode.data.split(g.CONTENTS).join("");this.next instanceof h.default?(C=this.next.domNode,this.next.insertAt(0,b),this.textNode.data=g.CONTENTS):(this.textNode.data=b,this.parent.insertBefore(c.default.create(this.textNode),this),this.textNode=document.createTextNode(g.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),S!=null){var k=[S,T].map(function(O){return Math.max(0,Math.min(C.data.length,O-1))}),x=o(k,2);return S=x[0],T=x[1],{startNode:C,startOffset:S,endNode:C,endOffset:T}}}}},{key:"update",value:function(y,I){var C=this;if(y.some(function(T){return T.type==="characterData"&&T.target===C.textNode})){var S=this.restore();S&&(I.range=S)}}},{key:"value",value:function(){return""}}]),g}(c.default.Embed);E.blotName="cursor",E.className="ql-cursor",E.tagName="span",E.CONTENTS="\uFEFF",r.default=E},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),s=c(o),a=i(4),l=c(a);function c(_){return _&&_.__esModule?_:{default:_}}function p(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function h(_,v){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:_}function f(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(_,v):_.__proto__=v)}var d=function(_){f(v,_);function v(){return p(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return v}(s.default.Container);d.allowedChildren=[l.default,a.BlockEmbed,d],r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var o=function(){function E(m,g){for(var w=0;w<g.length;w++){var y=g[w];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(m,y.key,y)}}return function(m,g,w){return g&&E(m.prototype,g),w&&E(m,w),m}}(),s=function E(m,g,w){m===null&&(m=Function.prototype);var y=Object.getOwnPropertyDescriptor(m,g);if(y===void 0){var I=Object.getPrototypeOf(m);return I===null?void 0:E(I,g,w)}else{if("value"in y)return y.value;var C=y.get;return C===void 0?void 0:C.call(w)}},a=i(0),l=c(a);function c(E){return E&&E.__esModule?E:{default:E}}function p(E,m){if(!(E instanceof m))throw new TypeError("Cannot call a class as a function")}function h(E,m){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:E}function f(E,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);E.prototype=Object.create(m&&m.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(E,m):E.__proto__=m)}var d=function(E){f(m,E);function m(){return p(this,m),h(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,[{key:"value",value:function(w){var y=s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"value",this).call(this,w);return y.startsWith("rgb(")?(y=y.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+y.split(",").map(function(I){return("00"+parseInt(I).toString(16)).slice(-2)}).join("")):y}}]),m}(l.default.Attributor.Style),_=new l.default.Attributor.Class("color","ql-color",{scope:l.default.Scope.INLINE}),v=new d("color","color",{scope:l.default.Scope.INLINE});r.ColorAttributor=d,r.ColorClass=_,r.ColorStyle=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var o=function(){function v(E,m){for(var g=0;g<m.length;g++){var w=m[g];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(E,w.key,w)}}return function(E,m,g){return m&&v(E.prototype,m),g&&v(E,g),E}}(),s=function v(E,m,g){E===null&&(E=Function.prototype);var w=Object.getOwnPropertyDescriptor(E,m);if(w===void 0){var y=Object.getPrototypeOf(E);return y===null?void 0:v(y,m,g)}else{if("value"in w)return w.value;var I=w.get;return I===void 0?void 0:I.call(g)}},a=i(6),l=c(a);function c(v){return v&&v.__esModule?v:{default:v}}function p(v,E){if(!(v instanceof E))throw new TypeError("Cannot call a class as a function")}function h(v,E){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:v}function f(v,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);v.prototype=Object.create(E&&E.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(v,E):v.__proto__=E)}var d=function(v){f(E,v);function E(){return p(this,E),h(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return o(E,[{key:"format",value:function(g,w){if(g!==this.statics.blotName||!w)return s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"format",this).call(this,g,w);w=this.constructor.sanitize(w),this.domNode.setAttribute("href",w)}}],[{key:"create",value:function(g){var w=s(E.__proto__||Object.getPrototypeOf(E),"create",this).call(this,g);return g=this.sanitize(g),w.setAttribute("href",g),w.setAttribute("rel","noopener noreferrer"),w.setAttribute("target","_blank"),w}},{key:"formats",value:function(g){return g.getAttribute("href")}},{key:"sanitize",value:function(g){return _(g,this.PROTOCOL_WHITELIST)?g:this.SANITIZED_URL}}]),E}(l.default);d.blotName="link",d.tagName="A",d.SANITIZED_URL="about:blank",d.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function _(v,E){var m=document.createElement("a");m.href=v;var g=m.href.slice(0,m.href.indexOf(":"));return E.indexOf(g)>-1}r.default=d,r.sanitize=_},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},s=function(){function E(m,g){for(var w=0;w<g.length;w++){var y=g[w];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(m,y.key,y)}}return function(m,g,w){return g&&E(m.prototype,g),w&&E(m,w),m}}(),a=i(23),l=h(a),c=i(107),p=h(c);function h(E){return E&&E.__esModule?E:{default:E}}function f(E,m){if(!(E instanceof m))throw new TypeError("Cannot call a class as a function")}var d=0;function _(E,m){E.setAttribute(m,E.getAttribute(m)!=="true")}var v=function(){function E(m){var g=this;f(this,E),this.select=m,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){g.togglePicker()}),this.label.addEventListener("keydown",function(w){switch(w.keyCode){case l.default.keys.ENTER:g.togglePicker();break;case l.default.keys.ESCAPE:g.escape(),w.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return s(E,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),_(this.label,"aria-expanded"),_(this.options,"aria-hidden")}},{key:"buildItem",value:function(g){var w=this,y=document.createElement("span");return y.tabIndex="0",y.setAttribute("role","button"),y.classList.add("ql-picker-item"),g.hasAttribute("value")&&y.setAttribute("data-value",g.getAttribute("value")),g.textContent&&y.setAttribute("data-label",g.textContent),y.addEventListener("click",function(){w.selectItem(y,!0)}),y.addEventListener("keydown",function(I){switch(I.keyCode){case l.default.keys.ENTER:w.selectItem(y,!0),I.preventDefault();break;case l.default.keys.ESCAPE:w.escape(),I.preventDefault();break}}),y}},{key:"buildLabel",value:function(){var g=document.createElement("span");return g.classList.add("ql-picker-label"),g.innerHTML=p.default,g.tabIndex="0",g.setAttribute("role","button"),g.setAttribute("aria-expanded","false"),this.container.appendChild(g),g}},{key:"buildOptions",value:function(){var g=this,w=document.createElement("span");w.classList.add("ql-picker-options"),w.setAttribute("aria-hidden","true"),w.tabIndex="-1",w.id="ql-picker-options-"+d,d+=1,this.label.setAttribute("aria-controls",w.id),this.options=w,[].slice.call(this.select.options).forEach(function(y){var I=g.buildItem(y);w.appendChild(I),y.selected===!0&&g.selectItem(I)}),this.container.appendChild(w)}},{key:"buildPicker",value:function(){var g=this;[].slice.call(this.select.attributes).forEach(function(w){g.container.setAttribute(w.name,w.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var g=this;this.close(),setTimeout(function(){return g.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(g){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y=this.container.querySelector(".ql-selected");if(g!==y&&(y!=null&&y.classList.remove("ql-selected"),g!=null&&(g.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(g.parentNode.children,g),g.hasAttribute("data-value")?this.label.setAttribute("data-value",g.getAttribute("data-value")):this.label.removeAttribute("data-value"),g.hasAttribute("data-label")?this.label.setAttribute("data-label",g.getAttribute("data-label")):this.label.removeAttribute("data-label"),w))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":o(Event))==="object"){var I=document.createEvent("Event");I.initEvent("change",!0,!0),this.select.dispatchEvent(I)}this.close()}}},{key:"update",value:function(){var g=void 0;if(this.select.selectedIndex>-1){var w=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];g=this.select.options[this.select.selectedIndex],this.selectItem(w)}else this.selectItem(null);var y=g!=null&&g!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",y)}}]),E}();r.default=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),s=U(o),a=i(5),l=U(a),c=i(4),p=U(c),h=i(16),f=U(h),d=i(25),_=U(d),v=i(24),E=U(v),m=i(35),g=U(m),w=i(6),y=U(w),I=i(22),C=U(I),S=i(7),T=U(S),P=i(55),b=U(P),k=i(42),x=U(k),O=i(23),M=U(O);function U(K){return K&&K.__esModule?K:{default:K}}l.default.register({"blots/block":p.default,"blots/block/embed":c.BlockEmbed,"blots/break":f.default,"blots/container":_.default,"blots/cursor":E.default,"blots/embed":g.default,"blots/inline":y.default,"blots/scroll":C.default,"blots/text":T.default,"modules/clipboard":b.default,"modules/history":x.default,"modules/keyboard":M.default}),s.default.register(p.default,f.default,E.default,y.default,C.default,T.default),r.default=l.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(1),s=function(){function a(l){this.domNode=l,this.domNode[o.DATA_KEY]={blot:this}}return Object.defineProperty(a.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),a.create=function(l){if(this.tagName==null)throw new o.ParchmentError("Blot definition missing tagName");var c;return Array.isArray(this.tagName)?(typeof l=="string"&&(l=l.toUpperCase(),parseInt(l).toString()===l&&(l=parseInt(l))),typeof l=="number"?c=document.createElement(this.tagName[l-1]):this.tagName.indexOf(l)>-1?c=document.createElement(l):c=document.createElement(this.tagName[0])):c=document.createElement(this.tagName),this.className&&c.classList.add(this.className),c},a.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},a.prototype.clone=function(){var l=this.domNode.cloneNode(!1);return o.create(l)},a.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[o.DATA_KEY]},a.prototype.deleteAt=function(l,c){var p=this.isolate(l,c);p.remove()},a.prototype.formatAt=function(l,c,p,h){var f=this.isolate(l,c);if(o.query(p,o.Scope.BLOT)!=null&&h)f.wrap(p,h);else if(o.query(p,o.Scope.ATTRIBUTE)!=null){var d=o.create(this.statics.scope);f.wrap(d),d.format(p,h)}},a.prototype.insertAt=function(l,c,p){var h=p==null?o.create("text",c):o.create(c,p),f=this.split(l);this.parent.insertBefore(h,f)},a.prototype.insertInto=function(l,c){c===void 0&&(c=null),this.parent!=null&&this.parent.children.remove(this);var p=null;l.children.insertBefore(this,c),c!=null&&(p=c.domNode),(this.domNode.parentNode!=l.domNode||this.domNode.nextSibling!=p)&&l.domNode.insertBefore(this.domNode,p),this.parent=l,this.attach()},a.prototype.isolate=function(l,c){var p=this.split(l);return p.split(c),p},a.prototype.length=function(){return 1},a.prototype.offset=function(l){return l===void 0&&(l=this.parent),this.parent==null||this==l?0:this.parent.children.offset(this)+this.parent.offset(l)},a.prototype.optimize=function(l){this.domNode[o.DATA_KEY]!=null&&delete this.domNode[o.DATA_KEY].mutations},a.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},a.prototype.replace=function(l){l.parent!=null&&(l.parent.insertBefore(this,l.next),l.remove())},a.prototype.replaceWith=function(l,c){var p=typeof l=="string"?o.create(l,c):l;return p.replace(this),p},a.prototype.split=function(l,c){return l===0?this:this.next},a.prototype.update=function(l,c){},a.prototype.wrap=function(l,c){var p=typeof l=="string"?o.create(l,c):l;return this.parent!=null&&this.parent.insertBefore(p,this.next),p.appendChild(this),p},a.blotName="abstract",a}();r.default=s},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(12),s=i(32),a=i(33),l=i(1),c=function(){function p(h){this.attributes={},this.domNode=h,this.build()}return p.prototype.attribute=function(h,f){f?h.add(this.domNode,f)&&(h.value(this.domNode)!=null?this.attributes[h.attrName]=h:delete this.attributes[h.attrName]):(h.remove(this.domNode),delete this.attributes[h.attrName])},p.prototype.build=function(){var h=this;this.attributes={};var f=o.default.keys(this.domNode),d=s.default.keys(this.domNode),_=a.default.keys(this.domNode);f.concat(d).concat(_).forEach(function(v){var E=l.query(v,l.Scope.ATTRIBUTE);E instanceof o.default&&(h.attributes[E.attrName]=E)})},p.prototype.copy=function(h){var f=this;Object.keys(this.attributes).forEach(function(d){var _=f.attributes[d].value(f.domNode);h.format(d,_)})},p.prototype.move=function(h){var f=this;this.copy(h),Object.keys(this.attributes).forEach(function(d){f.attributes[d].remove(f.domNode)}),this.attributes={}},p.prototype.values=function(){var h=this;return Object.keys(this.attributes).reduce(function(f,d){return f[d]=h.attributes[d].value(h.domNode),f},{})},p}();r.default=c},function(n,r,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var f in h)h.hasOwnProperty(f)&&(p[f]=h[f])};return function(p,h){c(p,h);function f(){this.constructor=p}p.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(12);function a(c,p){var h=c.getAttribute("class")||"";return h.split(/\s+/).filter(function(f){return f.indexOf(p+"-")===0})}var l=function(c){o(p,c);function p(){return c!==null&&c.apply(this,arguments)||this}return p.keys=function(h){return(h.getAttribute("class")||"").split(/\s+/).map(function(f){return f.split("-").slice(0,-1).join("-")})},p.prototype.add=function(h,f){return this.canAdd(h,f)?(this.remove(h),h.classList.add(this.keyName+"-"+f),!0):!1},p.prototype.remove=function(h){var f=a(h,this.keyName);f.forEach(function(d){h.classList.remove(d)}),h.classList.length===0&&h.removeAttribute("class")},p.prototype.value=function(h){var f=a(h,this.keyName)[0]||"",d=f.slice(this.keyName.length+1);return this.canAdd(h,d)?d:""},p}(s.default);r.default=l},function(n,r,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var f in h)h.hasOwnProperty(f)&&(p[f]=h[f])};return function(p,h){c(p,h);function f(){this.constructor=p}p.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(12);function a(c){var p=c.split("-"),h=p.slice(1).map(function(f){return f[0].toUpperCase()+f.slice(1)}).join("");return p[0]+h}var l=function(c){o(p,c);function p(){return c!==null&&c.apply(this,arguments)||this}return p.keys=function(h){return(h.getAttribute("style")||"").split(";").map(function(f){var d=f.split(":");return d[0].trim()})},p.prototype.add=function(h,f){return this.canAdd(h,f)?(h.style[a(this.keyName)]=f,!0):!1},p.prototype.remove=function(h){h.style[a(this.keyName)]="",h.getAttribute("style")||h.removeAttribute("style")},p.prototype.value=function(h){var f=h.style[a(this.keyName)];return this.canAdd(h,f)?f:""},p}(s.default);r.default=l},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function l(c,p){for(var h=0;h<p.length;h++){var f=p[h];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}return function(c,p,h){return p&&l(c.prototype,p),h&&l(c,h),c}}();function s(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var a=function(){function l(c,p){s(this,l),this.quill=c,this.options=p,this.modules={}}return o(l,[{key:"init",value:function(){var p=this;Object.keys(this.options.modules).forEach(function(h){p.modules[h]==null&&p.addModule(h)})}},{key:"addModule",value:function(p){var h=this.quill.constructor.import("modules/"+p);return this.modules[p]=new h(this.quill,this.options.modules[p]||{}),this.modules[p]}}]),l}();a.DEFAULTS={modules:{}},a.themes={default:a},r.default=a},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function m(g,w){for(var y=0;y<w.length;y++){var I=w[y];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(g,I.key,I)}}return function(g,w,y){return w&&m(g.prototype,w),y&&m(g,y),g}}(),s=function m(g,w,y){g===null&&(g=Function.prototype);var I=Object.getOwnPropertyDescriptor(g,w);if(I===void 0){var C=Object.getPrototypeOf(g);return C===null?void 0:m(C,w,y)}else{if("value"in I)return I.value;var S=I.get;return S===void 0?void 0:S.call(y)}},a=i(0),l=h(a),c=i(7),p=h(c);function h(m){return m&&m.__esModule?m:{default:m}}function f(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function d(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function _(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var v="\uFEFF",E=function(m){_(g,m);function g(w){f(this,g);var y=d(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,w));return y.contentNode=document.createElement("span"),y.contentNode.setAttribute("contenteditable",!1),[].slice.call(y.domNode.childNodes).forEach(function(I){y.contentNode.appendChild(I)}),y.leftGuard=document.createTextNode(v),y.rightGuard=document.createTextNode(v),y.domNode.appendChild(y.leftGuard),y.domNode.appendChild(y.contentNode),y.domNode.appendChild(y.rightGuard),y}return o(g,[{key:"index",value:function(y,I){return y===this.leftGuard?0:y===this.rightGuard?1:s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"index",this).call(this,y,I)}},{key:"restore",value:function(y){var I=void 0,C=void 0,S=y.data.split(v).join("");if(y===this.leftGuard)if(this.prev instanceof p.default){var T=this.prev.length();this.prev.insertAt(T,S),I={startNode:this.prev.domNode,startOffset:T+S.length}}else C=document.createTextNode(S),this.parent.insertBefore(l.default.create(C),this),I={startNode:C,startOffset:S.length};else y===this.rightGuard&&(this.next instanceof p.default?(this.next.insertAt(0,S),I={startNode:this.next.domNode,startOffset:S.length}):(C=document.createTextNode(S),this.parent.insertBefore(l.default.create(C),this.next),I={startNode:C,startOffset:S.length}));return y.data=v,I}},{key:"update",value:function(y,I){var C=this;y.forEach(function(S){if(S.type==="characterData"&&(S.target===C.leftGuard||S.target===C.rightGuard)){var T=C.restore(S.target);T&&(I.range=T)}})}}]),g}(l.default.Embed);r.default=E},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var o=i(0),s=a(o);function a(f){return f&&f.__esModule?f:{default:f}}var l={scope:s.default.Scope.BLOCK,whitelist:["right","center","justify"]},c=new s.default.Attributor.Attribute("align","align",l),p=new s.default.Attributor.Class("align","ql-align",l),h=new s.default.Attributor.Style("align","text-align",l);r.AlignAttribute=c,r.AlignClass=p,r.AlignStyle=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var o=i(0),s=l(o),a=i(26);function l(h){return h&&h.__esModule?h:{default:h}}var c=new s.default.Attributor.Class("background","ql-bg",{scope:s.default.Scope.INLINE}),p=new a.ColorAttributor("background","background-color",{scope:s.default.Scope.INLINE});r.BackgroundClass=c,r.BackgroundStyle=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var o=i(0),s=a(o);function a(f){return f&&f.__esModule?f:{default:f}}var l={scope:s.default.Scope.BLOCK,whitelist:["rtl"]},c=new s.default.Attributor.Attribute("direction","dir",l),p=new s.default.Attributor.Class("direction","ql-direction",l),h=new s.default.Attributor.Style("direction","direction",l);r.DirectionAttribute=c,r.DirectionClass=p,r.DirectionStyle=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var o=function(){function m(g,w){for(var y=0;y<w.length;y++){var I=w[y];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(g,I.key,I)}}return function(g,w,y){return w&&m(g.prototype,w),y&&m(g,y),g}}(),s=function m(g,w,y){g===null&&(g=Function.prototype);var I=Object.getOwnPropertyDescriptor(g,w);if(I===void 0){var C=Object.getPrototypeOf(g);return C===null?void 0:m(C,w,y)}else{if("value"in I)return I.value;var S=I.get;return S===void 0?void 0:S.call(y)}},a=i(0),l=c(a);function c(m){return m&&m.__esModule?m:{default:m}}function p(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function h(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function f(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var d={scope:l.default.Scope.INLINE,whitelist:["serif","monospace"]},_=new l.default.Attributor.Class("font","ql-font",d),v=function(m){f(g,m);function g(){return p(this,g),h(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,[{key:"value",value:function(y){return s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"value",this).call(this,y).replace(/["']/g,"")}}]),g}(l.default.Attributor.Style),E=new v("font","font-family",d);r.FontStyle=E,r.FontClass=_},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var o=i(0),s=a(o);function a(p){return p&&p.__esModule?p:{default:p}}var l=new s.default.Attributor.Class("size","ql-size",{scope:s.default.Scope.INLINE,whitelist:["small","large","huge"]}),c=new s.default.Attributor.Style("size","font-size",{scope:s.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=l,r.SizeStyle=c},function(n,r,i){n.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var o=function(){function w(y,I){for(var C=0;C<I.length;C++){var S=I[C];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(y,S.key,S)}}return function(y,I,C){return I&&w(y.prototype,I),C&&w(y,C),y}}(),s=i(0),a=f(s),l=i(5),c=f(l),p=i(9),h=f(p);function f(w){return w&&w.__esModule?w:{default:w}}function d(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function _(w,y){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:w}function v(w,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);w.prototype=Object.create(y&&y.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(w,y):w.__proto__=y)}var E=function(w){v(y,w);function y(I,C){d(this,y);var S=_(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,I,C));return S.lastRecorded=0,S.ignoreChange=!1,S.clear(),S.quill.on(c.default.events.EDITOR_CHANGE,function(T,P,b,k){T!==c.default.events.TEXT_CHANGE||S.ignoreChange||(!S.options.userOnly||k===c.default.sources.USER?S.record(P,b):S.transform(P))}),S.quill.keyboard.addBinding({key:"Z",shortKey:!0},S.undo.bind(S)),S.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},S.redo.bind(S)),/Win/i.test(navigator.platform)&&S.quill.keyboard.addBinding({key:"Y",shortKey:!0},S.redo.bind(S)),S}return o(y,[{key:"change",value:function(C,S){if(this.stack[C].length!==0){var T=this.stack[C].pop();this.stack[S].push(T),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(T[C],c.default.sources.USER),this.ignoreChange=!1;var P=g(T[C]);this.quill.setSelection(P)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(C,S){if(C.ops.length!==0){this.stack.redo=[];var T=this.quill.getContents().diff(S),P=Date.now();if(this.lastRecorded+this.options.delay>P&&this.stack.undo.length>0){var b=this.stack.undo.pop();T=T.compose(b.undo),C=b.redo.compose(C)}else this.lastRecorded=P;this.stack.undo.push({redo:C,undo:T}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(C){this.stack.undo.forEach(function(S){S.undo=C.transform(S.undo,!0),S.redo=C.transform(S.redo,!0)}),this.stack.redo.forEach(function(S){S.undo=C.transform(S.undo,!0),S.redo=C.transform(S.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),y}(h.default);E.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function m(w){var y=w.ops[w.ops.length-1];return y==null?!1:y.insert!=null?typeof y.insert=="string"&&y.insert.endsWith(`
`):y.attributes!=null?Object.keys(y.attributes).some(function(I){return a.default.query(I,a.default.Scope.BLOCK)!=null}):!1}function g(w){var y=w.reduce(function(C,S){return C+=S.delete||0,C},0),I=w.length()-y;return m(w)&&(I-=1),I}r.default=E,r.getLastChangeIndex=g},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var o=function(){function D(j,z){for(var W=0;W<z.length;W++){var V=z[W];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(j,V.key,V)}}return function(j,z,W){return z&&D(j.prototype,z),W&&D(j,W),j}}(),s=function D(j,z,W){j===null&&(j=Function.prototype);var V=Object.getOwnPropertyDescriptor(j,z);if(V===void 0){var $=Object.getPrototypeOf(j);return $===null?void 0:D($,z,W)}else{if("value"in V)return V.value;var Y=V.get;return Y===void 0?void 0:Y.call(W)}},a=i(3),l=P(a),c=i(2),p=P(c),h=i(8),f=P(h),d=i(23),_=P(d),v=i(34),E=P(v),m=i(59),g=P(m),w=i(60),y=P(w),I=i(28),C=P(I),S=i(61),T=P(S);function P(D){return D&&D.__esModule?D:{default:D}}function b(D,j){if(!(D instanceof j))throw new TypeError("Cannot call a class as a function")}function k(D,j){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:D}function x(D,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);D.prototype=Object.create(j&&j.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(D,j):D.__proto__=j)}var O=[!1,"center","right","justify"],M=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],U=[!1,"serif","monospace"],K=["1","2","3",!1],G=["small",!1,"large","huge"],H=function(D){x(j,D);function j(z,W){b(this,j);var V=k(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,z,W)),$=function Y(X){if(!document.body.contains(z.root))return document.body.removeEventListener("click",Y);V.tooltip!=null&&!V.tooltip.root.contains(X.target)&&document.activeElement!==V.tooltip.textbox&&!V.quill.hasFocus()&&V.tooltip.hide(),V.pickers!=null&&V.pickers.forEach(function(te){te.container.contains(X.target)||te.close()})};return z.emitter.listenDOM("click",document.body,$),V}return o(j,[{key:"addModule",value:function(W){var V=s(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"addModule",this).call(this,W);return W==="toolbar"&&this.extendToolbar(V),V}},{key:"buildButtons",value:function(W,V){W.forEach(function($){var Y=$.getAttribute("class")||"";Y.split(/\s+/).forEach(function(X){if(X.startsWith("ql-")&&(X=X.slice(3),V[X]!=null))if(X==="direction")$.innerHTML=V[X][""]+V[X].rtl;else if(typeof V[X]=="string")$.innerHTML=V[X];else{var te=$.value||"";te!=null&&V[X][te]&&($.innerHTML=V[X][te])}})})}},{key:"buildPickers",value:function(W,V){var $=this;this.pickers=W.map(function(X){if(X.classList.contains("ql-align"))return X.querySelector("option")==null&&N(X,O),new y.default(X,V.align);if(X.classList.contains("ql-background")||X.classList.contains("ql-color")){var te=X.classList.contains("ql-background")?"background":"color";return X.querySelector("option")==null&&N(X,M,te==="background"?"#ffffff":"#000000"),new g.default(X,V[te])}else return X.querySelector("option")==null&&(X.classList.contains("ql-font")?N(X,U):X.classList.contains("ql-header")?N(X,K):X.classList.contains("ql-size")&&N(X,G)),new C.default(X)});var Y=function(){$.pickers.forEach(function(te){te.update()})};this.quill.on(f.default.events.EDITOR_CHANGE,Y)}}]),j}(E.default);H.DEFAULTS=(0,l.default)(!0,{},E.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var j=this,z=this.container.querySelector("input.ql-image[type=file]");z==null&&(z=document.createElement("input"),z.setAttribute("type","file"),z.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),z.classList.add("ql-image"),z.addEventListener("change",function(){if(z.files!=null&&z.files[0]!=null){var W=new FileReader;W.onload=function(V){var $=j.quill.getSelection(!0);j.quill.updateContents(new p.default().retain($.index).delete($.length).insert({image:V.target.result}),f.default.sources.USER),j.quill.setSelection($.index+1,f.default.sources.SILENT),z.value=""},W.readAsDataURL(z.files[0])}}),this.container.appendChild(z)),z.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var q=function(D){x(j,D);function j(z,W){b(this,j);var V=k(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,z,W));return V.textbox=V.root.querySelector('input[type="text"]'),V.listen(),V}return o(j,[{key:"listen",value:function(){var W=this;this.textbox.addEventListener("keydown",function(V){_.default.match(V,"enter")?(W.save(),V.preventDefault()):_.default.match(V,"escape")&&(W.cancel(),V.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),V!=null?this.textbox.value=V:W!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+W)||""),this.root.setAttribute("data-mode",W)}},{key:"restoreFocus",value:function(){var W=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=W}},{key:"save",value:function(){var W=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var V=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",W,f.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",W,f.default.sources.USER)),this.quill.root.scrollTop=V;break}case"video":W=F(W);case"formula":{if(!W)break;var $=this.quill.getSelection(!0);if($!=null){var Y=$.index+$.length;this.quill.insertEmbed(Y,this.root.getAttribute("data-mode"),W,f.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(Y+1," ",f.default.sources.USER),this.quill.setSelection(Y+2,f.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),j}(T.default);function F(D){var j=D.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||D.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return j?(j[1]||"https")+"://www.youtube.com/embed/"+j[2]+"?showinfo=0":(j=D.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(j[1]||"https")+"://player.vimeo.com/video/"+j[2]+"/":D}function N(D,j){var z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;j.forEach(function(W){var V=document.createElement("option");W===z?V.setAttribute("selected","selected"):V.setAttribute("value",W),D.appendChild(V)})}r.BaseTooltip=q,r.default=H},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function s(){this.head=this.tail=null,this.length=0}return s.prototype.append=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];this.insertBefore(a[0],null),a.length>1&&this.append.apply(this,a.slice(1))},s.prototype.contains=function(a){for(var l,c=this.iterator();l=c();)if(l===a)return!0;return!1},s.prototype.insertBefore=function(a,l){a&&(a.next=l,l!=null?(a.prev=l.prev,l.prev!=null&&(l.prev.next=a),l.prev=a,l===this.head&&(this.head=a)):this.tail!=null?(this.tail.next=a,a.prev=this.tail,this.tail=a):(a.prev=null,this.head=this.tail=a),this.length+=1)},s.prototype.offset=function(a){for(var l=0,c=this.head;c!=null;){if(c===a)return l;l+=c.length(),c=c.next}return-1},s.prototype.remove=function(a){this.contains(a)&&(a.prev!=null&&(a.prev.next=a.next),a.next!=null&&(a.next.prev=a.prev),a===this.head&&(this.head=a.next),a===this.tail&&(this.tail=a.prev),this.length-=1)},s.prototype.iterator=function(a){return a===void 0&&(a=this.head),function(){var l=a;return a!=null&&(a=a.next),l}},s.prototype.find=function(a,l){l===void 0&&(l=!1);for(var c,p=this.iterator();c=p();){var h=c.length();if(a<h||l&&a===h&&(c.next==null||c.next.length()!==0))return[c,a];a-=h}return[null,0]},s.prototype.forEach=function(a){for(var l,c=this.iterator();l=c();)a(l)},s.prototype.forEachAt=function(a,l,c){if(!(l<=0))for(var p=this.find(a),h=p[0],f=p[1],d,_=a-f,v=this.iterator(h);(d=v())&&_<a+l;){var E=d.length();a>_?c(d,a-_,Math.min(l,_+E-a)):c(d,0,Math.min(E,a+l-_)),_+=E}},s.prototype.map=function(a){return this.reduce(function(l,c){return l.push(a(c)),l},[])},s.prototype.reduce=function(a,l){for(var c,p=this.iterator();c=p();)l=a(l,c);return l},s}();r.default=o},function(n,r,i){var o=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var _ in d)d.hasOwnProperty(_)&&(f[_]=d[_])};return function(f,d){h(f,d);function _(){this.constructor=f}f.prototype=d===null?Object.create(d):(_.prototype=d.prototype,new _)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(17),a=i(1),l={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},c=100,p=function(h){o(f,h);function f(d){var _=h.call(this,d)||this;return _.scroll=_,_.observer=new MutationObserver(function(v){_.update(v)}),_.observer.observe(_.domNode,l),_.attach(),_}return f.prototype.detach=function(){h.prototype.detach.call(this),this.observer.disconnect()},f.prototype.deleteAt=function(d,_){this.update(),d===0&&_===this.length()?this.children.forEach(function(v){v.remove()}):h.prototype.deleteAt.call(this,d,_)},f.prototype.formatAt=function(d,_,v,E){this.update(),h.prototype.formatAt.call(this,d,_,v,E)},f.prototype.insertAt=function(d,_,v){this.update(),h.prototype.insertAt.call(this,d,_,v)},f.prototype.optimize=function(d,_){var v=this;d===void 0&&(d=[]),_===void 0&&(_={}),h.prototype.optimize.call(this,_);for(var E=[].slice.call(this.observer.takeRecords());E.length>0;)d.push(E.pop());for(var m=function(I,C){C===void 0&&(C=!0),!(I==null||I===v)&&I.domNode.parentNode!=null&&(I.domNode[a.DATA_KEY].mutations==null&&(I.domNode[a.DATA_KEY].mutations=[]),C&&m(I.parent))},g=function(I){I.domNode[a.DATA_KEY]==null||I.domNode[a.DATA_KEY].mutations==null||(I instanceof s.default&&I.children.forEach(g),I.optimize(_))},w=d,y=0;w.length>0;y+=1){if(y>=c)throw new Error("[Parchment] Maximum optimize iterations reached");for(w.forEach(function(I){var C=a.find(I.target,!0);C!=null&&(C.domNode===I.target&&(I.type==="childList"?(m(a.find(I.previousSibling,!1)),[].forEach.call(I.addedNodes,function(S){var T=a.find(S,!1);m(T,!1),T instanceof s.default&&T.children.forEach(function(P){m(P,!1)})})):I.type==="attributes"&&m(C.prev)),m(C))}),this.children.forEach(g),w=[].slice.call(this.observer.takeRecords()),E=w.slice();E.length>0;)d.push(E.pop())}},f.prototype.update=function(d,_){var v=this;_===void 0&&(_={}),d=d||this.observer.takeRecords(),d.map(function(E){var m=a.find(E.target,!0);return m==null?null:m.domNode[a.DATA_KEY].mutations==null?(m.domNode[a.DATA_KEY].mutations=[E],m):(m.domNode[a.DATA_KEY].mutations.push(E),null)}).forEach(function(E){E==null||E===v||E.domNode[a.DATA_KEY]==null||E.update(E.domNode[a.DATA_KEY].mutations||[],_)}),this.domNode[a.DATA_KEY].mutations!=null&&h.prototype.update.call(this,this.domNode[a.DATA_KEY].mutations,_),this.optimize(d,_)},f.blotName="scroll",f.defaultChild="block",f.scope=a.Scope.BLOCK_BLOT,f.tagName="DIV",f}(s.default);r.default=p},function(n,r,i){var o=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var d in f)f.hasOwnProperty(d)&&(h[d]=f[d])};return function(h,f){p(h,f);function d(){this.constructor=h}h.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(18),a=i(1);function l(p,h){if(Object.keys(p).length!==Object.keys(h).length)return!1;for(var f in p)if(p[f]!==h[f])return!1;return!0}var c=function(p){o(h,p);function h(){return p!==null&&p.apply(this,arguments)||this}return h.formats=function(f){if(f.tagName!==h.tagName)return p.formats.call(this,f)},h.prototype.format=function(f,d){var _=this;f===this.statics.blotName&&!d?(this.children.forEach(function(v){v instanceof s.default||(v=v.wrap(h.blotName,!0)),_.attributes.copy(v)}),this.unwrap()):p.prototype.format.call(this,f,d)},h.prototype.formatAt=function(f,d,_,v){if(this.formats()[_]!=null||a.query(_,a.Scope.ATTRIBUTE)){var E=this.isolate(f,d);E.format(_,v)}else p.prototype.formatAt.call(this,f,d,_,v)},h.prototype.optimize=function(f){p.prototype.optimize.call(this,f);var d=this.formats();if(Object.keys(d).length===0)return this.unwrap();var _=this.next;_ instanceof h&&_.prev===this&&l(d,_.formats())&&(_.moveChildren(this),_.remove())},h.blotName="inline",h.scope=a.Scope.INLINE_BLOT,h.tagName="SPAN",h}(s.default);r.default=c},function(n,r,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var f in h)h.hasOwnProperty(f)&&(p[f]=h[f])};return function(p,h){c(p,h);function f(){this.constructor=p}p.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(18),a=i(1),l=function(c){o(p,c);function p(){return c!==null&&c.apply(this,arguments)||this}return p.formats=function(h){var f=a.query(p.blotName).tagName;if(h.tagName!==f)return c.formats.call(this,h)},p.prototype.format=function(h,f){a.query(h,a.Scope.BLOCK)!=null&&(h===this.statics.blotName&&!f?this.replaceWith(p.blotName):c.prototype.format.call(this,h,f))},p.prototype.formatAt=function(h,f,d,_){a.query(d,a.Scope.BLOCK)!=null?this.format(d,_):c.prototype.formatAt.call(this,h,f,d,_)},p.prototype.insertAt=function(h,f,d){if(d==null||a.query(f,a.Scope.INLINE)!=null)c.prototype.insertAt.call(this,h,f,d);else{var _=this.split(h),v=a.create(f,d);_.parent.insertBefore(v,_)}},p.prototype.update=function(h,f){navigator.userAgent.match(/Trident/)?this.build():c.prototype.update.call(this,h,f)},p.blotName="block",p.scope=a.Scope.BLOCK_BLOT,p.tagName="P",p}(s.default);r.default=l},function(n,r,i){var o=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,p){c.__proto__=p}||function(c,p){for(var h in p)p.hasOwnProperty(h)&&(c[h]=p[h])};return function(c,p){l(c,p);function h(){this.constructor=c}c.prototype=p===null?Object.create(p):(h.prototype=p.prototype,new h)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(19),a=function(l){o(c,l);function c(){return l!==null&&l.apply(this,arguments)||this}return c.formats=function(p){},c.prototype.format=function(p,h){l.prototype.formatAt.call(this,0,this.length(),p,h)},c.prototype.formatAt=function(p,h,f,d){p===0&&h===this.length()?this.format(f,d):l.prototype.formatAt.call(this,p,h,f,d)},c.prototype.formats=function(){return this.statics.formats(this.domNode)},c}(s.default);r.default=a},function(n,r,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var f in h)h.hasOwnProperty(f)&&(p[f]=h[f])};return function(p,h){c(p,h);function f(){this.constructor=p}p.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(19),a=i(1),l=function(c){o(p,c);function p(h){var f=c.call(this,h)||this;return f.text=f.statics.value(f.domNode),f}return p.create=function(h){return document.createTextNode(h)},p.value=function(h){var f=h.data;return f.normalize&&(f=f.normalize()),f},p.prototype.deleteAt=function(h,f){this.domNode.data=this.text=this.text.slice(0,h)+this.text.slice(h+f)},p.prototype.index=function(h,f){return this.domNode===h?f:-1},p.prototype.insertAt=function(h,f,d){d==null?(this.text=this.text.slice(0,h)+f+this.text.slice(h),this.domNode.data=this.text):c.prototype.insertAt.call(this,h,f,d)},p.prototype.length=function(){return this.text.length},p.prototype.optimize=function(h){c.prototype.optimize.call(this,h),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof p&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},p.prototype.position=function(h,f){return[this.domNode,h]},p.prototype.split=function(h,f){if(f===void 0&&(f=!1),!f){if(h===0)return this;if(h===this.length())return this.next}var d=a.create(this.domNode.splitText(h));return this.parent.insertBefore(d,this.next),this.text=this.statics.value(this.domNode),d},p.prototype.update=function(h,f){var d=this;h.some(function(_){return _.type==="characterData"&&_.target===d.domNode})&&(this.text=this.statics.value(this.domNode))},p.prototype.value=function(){return this.text},p.blotName="text",p.scope=a.Scope.INLINE_BLOT,p}(s.default);r.default=l},function(n,r,i){var o=document.createElement("div");if(o.classList.toggle("test-class",!1),o.classList.contains("test-class")){var s=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(a,l){return arguments.length>1&&!this.contains(a)==!l?l:s.call(this,a)}}String.prototype.startsWith||(String.prototype.startsWith=function(a,l){return l=l||0,this.substr(l,a.length)===a}),String.prototype.endsWith||(String.prototype.endsWith=function(a,l){var c=this.toString();(typeof l!="number"||!isFinite(l)||Math.floor(l)!==l||l>c.length)&&(l=c.length),l-=a.length;var p=c.indexOf(a,l);return p!==-1&&p===l}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(l){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof l!="function")throw new TypeError("predicate must be a function");for(var c=Object(this),p=c.length>>>0,h=arguments[1],f,d=0;d<p;d++)if(f=c[d],l.call(h,f,d,c))return f}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(n,r){var i=-1,o=1,s=0;function a(y,I,C){if(y==I)return y?[[s,y]]:[];(C<0||y.length<C)&&(C=null);var S=h(y,I),T=y.substring(0,S);y=y.substring(S),I=I.substring(S),S=f(y,I);var P=y.substring(y.length-S);y=y.substring(0,y.length-S),I=I.substring(0,I.length-S);var b=l(y,I);return T&&b.unshift([s,T]),P&&b.push([s,P]),_(b),C!=null&&(b=m(b,C)),b=g(b),b}function l(y,I){var C;if(!y)return[[o,I]];if(!I)return[[i,y]];var S=y.length>I.length?y:I,T=y.length>I.length?I:y,P=S.indexOf(T);if(P!=-1)return C=[[o,S.substring(0,P)],[s,T],[o,S.substring(P+T.length)]],y.length>I.length&&(C[0][0]=C[2][0]=i),C;if(T.length==1)return[[i,y],[o,I]];var b=d(y,I);if(b){var k=b[0],x=b[1],O=b[2],M=b[3],U=b[4],K=a(k,O),G=a(x,M);return K.concat([[s,U]],G)}return c(y,I)}function c(y,I){for(var C=y.length,S=I.length,T=Math.ceil((C+S)/2),P=T,b=2*T,k=new Array(b),x=new Array(b),O=0;O<b;O++)k[O]=-1,x[O]=-1;k[P+1]=0,x[P+1]=0;for(var M=C-S,U=M%2!=0,K=0,G=0,H=0,q=0,F=0;F<T;F++){for(var N=-F+K;N<=F-G;N+=2){var D=P+N,j;N==-F||N!=F&&k[D-1]<k[D+1]?j=k[D+1]:j=k[D-1]+1;for(var z=j-N;j<C&&z<S&&y.charAt(j)==I.charAt(z);)j++,z++;if(k[D]=j,j>C)G+=2;else if(z>S)K+=2;else if(U){var W=P+M-N;if(W>=0&&W<b&&x[W]!=-1){var V=C-x[W];if(j>=V)return p(y,I,j,z)}}}for(var $=-F+H;$<=F-q;$+=2){var W=P+$,V;$==-F||$!=F&&x[W-1]<x[W+1]?V=x[W+1]:V=x[W-1]+1;for(var Y=V-$;V<C&&Y<S&&y.charAt(C-V-1)==I.charAt(S-Y-1);)V++,Y++;if(x[W]=V,V>C)q+=2;else if(Y>S)H+=2;else if(!U){var D=P+M-$;if(D>=0&&D<b&&k[D]!=-1){var j=k[D],z=P+j-D;if(V=C-V,j>=V)return p(y,I,j,z)}}}}return[[i,y],[o,I]]}function p(y,I,C,S){var T=y.substring(0,C),P=I.substring(0,S),b=y.substring(C),k=I.substring(S),x=a(T,P),O=a(b,k);return x.concat(O)}function h(y,I){if(!y||!I||y.charAt(0)!=I.charAt(0))return 0;for(var C=0,S=Math.min(y.length,I.length),T=S,P=0;C<T;)y.substring(P,T)==I.substring(P,T)?(C=T,P=C):S=T,T=Math.floor((S-C)/2+C);return T}function f(y,I){if(!y||!I||y.charAt(y.length-1)!=I.charAt(I.length-1))return 0;for(var C=0,S=Math.min(y.length,I.length),T=S,P=0;C<T;)y.substring(y.length-T,y.length-P)==I.substring(I.length-T,I.length-P)?(C=T,P=C):S=T,T=Math.floor((S-C)/2+C);return T}function d(y,I){var C=y.length>I.length?y:I,S=y.length>I.length?I:y;if(C.length<4||S.length*2<C.length)return null;function T(G,H,q){for(var F=G.substring(q,q+Math.floor(G.length/4)),N=-1,D="",j,z,W,V;(N=H.indexOf(F,N+1))!=-1;){var $=h(G.substring(q),H.substring(N)),Y=f(G.substring(0,q),H.substring(0,N));D.length<Y+$&&(D=H.substring(N-Y,N)+H.substring(N,N+$),j=G.substring(0,q-Y),z=G.substring(q+$),W=H.substring(0,N-Y),V=H.substring(N+$))}return D.length*2>=G.length?[j,z,W,V,D]:null}var P=T(C,S,Math.ceil(C.length/4)),b=T(C,S,Math.ceil(C.length/2)),k;if(!P&&!b)return null;b?P?k=P[4].length>b[4].length?P:b:k=b:k=P;var x,O,M,U;y.length>I.length?(x=k[0],O=k[1],M=k[2],U=k[3]):(M=k[0],U=k[1],x=k[2],O=k[3]);var K=k[4];return[x,O,M,U,K]}function _(y){y.push([s,""]);for(var I=0,C=0,S=0,T="",P="",b;I<y.length;)switch(y[I][0]){case o:S++,P+=y[I][1],I++;break;case i:C++,T+=y[I][1],I++;break;case s:C+S>1?(C!==0&&S!==0&&(b=h(P,T),b!==0&&(I-C-S>0&&y[I-C-S-1][0]==s?y[I-C-S-1][1]+=P.substring(0,b):(y.splice(0,0,[s,P.substring(0,b)]),I++),P=P.substring(b),T=T.substring(b)),b=f(P,T),b!==0&&(y[I][1]=P.substring(P.length-b)+y[I][1],P=P.substring(0,P.length-b),T=T.substring(0,T.length-b))),C===0?y.splice(I-S,C+S,[o,P]):S===0?y.splice(I-C,C+S,[i,T]):y.splice(I-C-S,C+S,[i,T],[o,P]),I=I-C-S+(C?1:0)+(S?1:0)+1):I!==0&&y[I-1][0]==s?(y[I-1][1]+=y[I][1],y.splice(I,1)):I++,S=0,C=0,T="",P="";break}y[y.length-1][1]===""&&y.pop();var k=!1;for(I=1;I<y.length-1;)y[I-1][0]==s&&y[I+1][0]==s&&(y[I][1].substring(y[I][1].length-y[I-1][1].length)==y[I-1][1]?(y[I][1]=y[I-1][1]+y[I][1].substring(0,y[I][1].length-y[I-1][1].length),y[I+1][1]=y[I-1][1]+y[I+1][1],y.splice(I-1,1),k=!0):y[I][1].substring(0,y[I+1][1].length)==y[I+1][1]&&(y[I-1][1]+=y[I+1][1],y[I][1]=y[I][1].substring(y[I+1][1].length)+y[I+1][1],y.splice(I+1,1),k=!0)),I++;k&&_(y)}var v=a;v.INSERT=o,v.DELETE=i,v.EQUAL=s,n.exports=v;function E(y,I){if(I===0)return[s,y];for(var C=0,S=0;S<y.length;S++){var T=y[S];if(T[0]===i||T[0]===s){var P=C+T[1].length;if(I===P)return[S+1,y];if(I<P){y=y.slice();var b=I-C,k=[T[0],T[1].slice(0,b)],x=[T[0],T[1].slice(b)];return y.splice(S,1,k,x),[S+1,y]}else C=P}}throw new Error("cursor_pos is out of bounds!")}function m(y,I){var C=E(y,I),S=C[1],T=C[0],P=S[T],b=S[T+1];if(P==null)return y;if(P[0]!==s)return y;if(b!=null&&P[1]+b[1]===b[1]+P[1])return S.splice(T,2,b,P),w(S,T,2);if(b!=null&&b[1].indexOf(P[1])===0){S.splice(T,2,[b[0],P[1]],[0,P[1]]);var k=b[1].slice(P[1].length);return k.length>0&&S.splice(T+2,0,[b[0],k]),w(S,T,3)}else return y}function g(y){for(var I=!1,C=function(b){return b.charCodeAt(0)>=56320&&b.charCodeAt(0)<=57343},S=function(b){return b.charCodeAt(b.length-1)>=55296&&b.charCodeAt(b.length-1)<=56319},T=2;T<y.length;T+=1)y[T-2][0]===s&&S(y[T-2][1])&&y[T-1][0]===i&&C(y[T-1][1])&&y[T][0]===o&&C(y[T][1])&&(I=!0,y[T-1][1]=y[T-2][1].slice(-1)+y[T-1][1],y[T][1]=y[T-2][1].slice(-1)+y[T][1],y[T-2][1]=y[T-2][1].slice(0,-1));if(!I)return y;for(var P=[],T=0;T<y.length;T+=1)y[T][1].length>0&&P.push(y[T]);return P}function w(y,I,C){for(var S=I+C-1;S>=0&&S>=I-1;S--)if(S+1<y.length){var T=y[S],P=y[S+1];T[0]===P[1]&&y.splice(S,2,[T[0],T[1]+P[1]])}return y}},function(n,r){r=n.exports=typeof Object.keys=="function"?Object.keys:i,r.shim=i;function i(o){var s=[];for(var a in o)s.push(a);return s}},function(n,r){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";r=n.exports=i?o:s,r.supported=o;function o(a){return Object.prototype.toString.call(a)=="[object Arguments]"}r.unsupported=s;function s(a){return a&&typeof a=="object"&&typeof a.length=="number"&&Object.prototype.hasOwnProperty.call(a,"callee")&&!Object.prototype.propertyIsEnumerable.call(a,"callee")||!1}},function(n,r){var i=Object.prototype.hasOwnProperty,o="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(o=!1));function a(c,p,h){this.fn=c,this.context=p,this.once=h||!1}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var p=[],h,f;if(this._eventsCount===0)return p;for(f in h=this._events)i.call(h,f)&&p.push(o?f.slice(1):f);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(h)):p},l.prototype.listeners=function(p,h){var f=o?o+p:p,d=this._events[f];if(h)return!!d;if(!d)return[];if(d.fn)return[d.fn];for(var _=0,v=d.length,E=new Array(v);_<v;_++)E[_]=d[_].fn;return E},l.prototype.emit=function(p,h,f,d,_,v){var E=o?o+p:p;if(!this._events[E])return!1;var m=this._events[E],g=arguments.length,w,y;if(m.fn){switch(m.once&&this.removeListener(p,m.fn,void 0,!0),g){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,h),!0;case 3:return m.fn.call(m.context,h,f),!0;case 4:return m.fn.call(m.context,h,f,d),!0;case 5:return m.fn.call(m.context,h,f,d,_),!0;case 6:return m.fn.call(m.context,h,f,d,_,v),!0}for(y=1,w=new Array(g-1);y<g;y++)w[y-1]=arguments[y];m.fn.apply(m.context,w)}else{var I=m.length,C;for(y=0;y<I;y++)switch(m[y].once&&this.removeListener(p,m[y].fn,void 0,!0),g){case 1:m[y].fn.call(m[y].context);break;case 2:m[y].fn.call(m[y].context,h);break;case 3:m[y].fn.call(m[y].context,h,f);break;case 4:m[y].fn.call(m[y].context,h,f,d);break;default:if(!w)for(C=1,w=new Array(g-1);C<g;C++)w[C-1]=arguments[C];m[y].fn.apply(m[y].context,w)}}return!0},l.prototype.on=function(p,h,f){var d=new a(h,f||this),_=o?o+p:p;return this._events[_]?this._events[_].fn?this._events[_]=[this._events[_],d]:this._events[_].push(d):(this._events[_]=d,this._eventsCount++),this},l.prototype.once=function(p,h,f){var d=new a(h,f||this,!0),_=o?o+p:p;return this._events[_]?this._events[_].fn?this._events[_]=[this._events[_],d]:this._events[_].push(d):(this._events[_]=d,this._eventsCount++),this},l.prototype.removeListener=function(p,h,f,d){var _=o?o+p:p;if(!this._events[_])return this;if(!h)return--this._eventsCount===0?this._events=new s:delete this._events[_],this;var v=this._events[_];if(v.fn)v.fn===h&&(!d||v.once)&&(!f||v.context===f)&&(--this._eventsCount===0?this._events=new s:delete this._events[_]);else{for(var E=0,m=[],g=v.length;E<g;E++)(v[E].fn!==h||d&&!v[E].once||f&&v[E].context!==f)&&m.push(v[E]);m.length?this._events[_]=m.length===1?m[0]:m:--this._eventsCount===0?this._events=new s:delete this._events[_]}return this},l.prototype.removeAllListeners=function(p){var h;return p?(h=o?o+p:p,this._events[h]&&(--this._eventsCount===0?this._events=new s:delete this._events[h])):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prototype.setMaxListeners=function(){return this},l.prefixed=o,l.EventEmitter=l,typeof n<"u"&&(n.exports=l)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},s=function(){function Z(ee,ae){var ue=[],ne=!0,Ee=!1,Te=void 0;try{for(var be=ee[Symbol.iterator](),Ce;!(ne=(Ce=be.next()).done)&&(ue.push(Ce.value),!(ae&&ue.length===ae));ne=!0);}catch(Fe){Ee=!0,Te=Fe}finally{try{!ne&&be.return&&be.return()}finally{if(Ee)throw Te}}return ue}return function(ee,ae){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return Z(ee,ae);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function Z(ee,ae){for(var ue=0;ue<ae.length;ue++){var ne=ae[ue];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(ee,ne.key,ne)}}return function(ee,ae,ue){return ae&&Z(ee.prototype,ae),ue&&Z(ee,ue),ee}}(),l=i(3),c=x(l),p=i(2),h=x(p),f=i(0),d=x(f),_=i(5),v=x(_),E=i(10),m=x(E),g=i(9),w=x(g),y=i(36),I=i(37),C=i(13),S=x(C),T=i(26),P=i(38),b=i(39),k=i(40);function x(Z){return Z&&Z.__esModule?Z:{default:Z}}function O(Z,ee,ae){return ee in Z?Object.defineProperty(Z,ee,{value:ae,enumerable:!0,configurable:!0,writable:!0}):Z[ee]=ae,Z}function M(Z,ee){if(!(Z instanceof ee))throw new TypeError("Cannot call a class as a function")}function U(Z,ee){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ee&&(typeof ee=="object"||typeof ee=="function")?ee:Z}function K(Z,ee){if(typeof ee!="function"&&ee!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ee);Z.prototype=Object.create(ee&&ee.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),ee&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,ee):Z.__proto__=ee)}var G=(0,m.default)("quill:clipboard"),H="__ql-matcher",q=[[Node.TEXT_NODE,et],[Node.TEXT_NODE,Se],["br",ce],[Node.ELEMENT_NODE,Se],[Node.ELEMENT_NODE,te],[Node.ELEMENT_NODE,Oe],[Node.ELEMENT_NODE,X],[Node.ELEMENT_NODE,gt],["li",ge],["b",Y.bind(Y,"bold")],["i",Y.bind(Y,"italic")],["style",me]],F=[y.AlignAttribute,P.DirectionAttribute].reduce(function(Z,ee){return Z[ee.keyName]=ee,Z},{}),N=[y.AlignStyle,I.BackgroundStyle,T.ColorStyle,P.DirectionStyle,b.FontStyle,k.SizeStyle].reduce(function(Z,ee){return Z[ee.keyName]=ee,Z},{}),D=function(Z){K(ee,Z);function ee(ae,ue){M(this,ee);var ne=U(this,(ee.__proto__||Object.getPrototypeOf(ee)).call(this,ae,ue));return ne.quill.root.addEventListener("paste",ne.onPaste.bind(ne)),ne.container=ne.quill.addContainer("ql-clipboard"),ne.container.setAttribute("contenteditable",!0),ne.container.setAttribute("tabindex",-1),ne.matchers=[],q.concat(ne.options.matchers).forEach(function(Ee){var Te=s(Ee,2),be=Te[0],Ce=Te[1];!ue.matchVisual&&Ce===Oe||ne.addMatcher(be,Ce)}),ne}return a(ee,[{key:"addMatcher",value:function(ue,ne){this.matchers.push([ue,ne])}},{key:"convert",value:function(ue){if(typeof ue=="string")return this.container.innerHTML=ue.replace(/\>\r?\n +\</g,"><"),this.convert();var ne=this.quill.getFormat(this.quill.selection.savedRange.index);if(ne[S.default.blotName]){var Ee=this.container.innerText;return this.container.innerHTML="",new h.default().insert(Ee,O({},S.default.blotName,ne[S.default.blotName]))}var Te=this.prepareMatching(),be=s(Te,2),Ce=be[0],Fe=be[1],Me=$(this.container,Ce,Fe);return W(Me,`
`)&&Me.ops[Me.ops.length-1].attributes==null&&(Me=Me.compose(new h.default().retain(Me.length()-1).delete(1))),G.log("convert",this.container.innerHTML,Me),this.container.innerHTML="",Me}},{key:"dangerouslyPasteHTML",value:function(ue,ne){var Ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.default.sources.API;if(typeof ue=="string")this.quill.setContents(this.convert(ue),ne),this.quill.setSelection(0,v.default.sources.SILENT);else{var Te=this.convert(ne);this.quill.updateContents(new h.default().retain(ue).concat(Te),Ee),this.quill.setSelection(ue+Te.length(),v.default.sources.SILENT)}}},{key:"onPaste",value:function(ue){var ne=this;if(!(ue.defaultPrevented||!this.quill.isEnabled())){var Ee=this.quill.getSelection(),Te=new h.default().retain(Ee.index),be=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(v.default.sources.SILENT),setTimeout(function(){Te=Te.concat(ne.convert()).delete(Ee.length),ne.quill.updateContents(Te,v.default.sources.USER),ne.quill.setSelection(Te.length()-Ee.length,v.default.sources.SILENT),ne.quill.scrollingContainer.scrollTop=be,ne.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var ue=this,ne=[],Ee=[];return this.matchers.forEach(function(Te){var be=s(Te,2),Ce=be[0],Fe=be[1];switch(Ce){case Node.TEXT_NODE:Ee.push(Fe);break;case Node.ELEMENT_NODE:ne.push(Fe);break;default:[].forEach.call(ue.container.querySelectorAll(Ce),function(Me){Me[H]=Me[H]||[],Me[H].push(Fe)});break}}),[ne,Ee]}}]),ee}(w.default);D.DEFAULTS={matchers:[],matchVisual:!0};function j(Z,ee,ae){return(typeof ee>"u"?"undefined":o(ee))==="object"?Object.keys(ee).reduce(function(ue,ne){return j(ue,ne,ee[ne])},Z):Z.reduce(function(ue,ne){return ne.attributes&&ne.attributes[ee]?ue.push(ne):ue.insert(ne.insert,(0,c.default)({},O({},ee,ae),ne.attributes))},new h.default)}function z(Z){if(Z.nodeType!==Node.ELEMENT_NODE)return{};var ee="__ql-computed-style";return Z[ee]||(Z[ee]=window.getComputedStyle(Z))}function W(Z,ee){for(var ae="",ue=Z.ops.length-1;ue>=0&&ae.length<ee.length;--ue){var ne=Z.ops[ue];if(typeof ne.insert!="string")break;ae=ne.insert+ae}return ae.slice(-1*ee.length)===ee}function V(Z){if(Z.childNodes.length===0)return!1;var ee=z(Z);return["block","list-item"].indexOf(ee.display)>-1}function $(Z,ee,ae){return Z.nodeType===Z.TEXT_NODE?ae.reduce(function(ue,ne){return ne(Z,ue)},new h.default):Z.nodeType===Z.ELEMENT_NODE?[].reduce.call(Z.childNodes||[],function(ue,ne){var Ee=$(ne,ee,ae);return ne.nodeType===Z.ELEMENT_NODE&&(Ee=ee.reduce(function(Te,be){return be(ne,Te)},Ee),Ee=(ne[H]||[]).reduce(function(Te,be){return be(ne,Te)},Ee)),ue.concat(Ee)},new h.default):new h.default}function Y(Z,ee,ae){return j(ae,Z,!0)}function X(Z,ee){var ae=d.default.Attributor.Attribute.keys(Z),ue=d.default.Attributor.Class.keys(Z),ne=d.default.Attributor.Style.keys(Z),Ee={};return ae.concat(ue).concat(ne).forEach(function(Te){var be=d.default.query(Te,d.default.Scope.ATTRIBUTE);be!=null&&(Ee[be.attrName]=be.value(Z),Ee[be.attrName])||(be=F[Te],be!=null&&(be.attrName===Te||be.keyName===Te)&&(Ee[be.attrName]=be.value(Z)||void 0),be=N[Te],be!=null&&(be.attrName===Te||be.keyName===Te)&&(be=N[Te],Ee[be.attrName]=be.value(Z)||void 0))}),Object.keys(Ee).length>0&&(ee=j(ee,Ee)),ee}function te(Z,ee){var ae=d.default.query(Z);if(ae==null)return ee;if(ae.prototype instanceof d.default.Embed){var ue={},ne=ae.value(Z);ne!=null&&(ue[ae.blotName]=ne,ee=new h.default().insert(ue,ae.formats(Z)))}else typeof ae.formats=="function"&&(ee=j(ee,ae.blotName,ae.formats(Z)));return ee}function ce(Z,ee){return W(ee,`
`)||ee.insert(`
`),ee}function me(){return new h.default}function ge(Z,ee){var ae=d.default.query(Z);if(ae==null||ae.blotName!=="list-item"||!W(ee,`
`))return ee;for(var ue=-1,ne=Z.parentNode;!ne.classList.contains("ql-clipboard");)(d.default.query(ne)||{}).blotName==="list"&&(ue+=1),ne=ne.parentNode;return ue<=0?ee:ee.compose(new h.default().retain(ee.length()-1).retain(1,{indent:ue}))}function Se(Z,ee){return W(ee,`
`)||(V(Z)||ee.length()>0&&Z.nextSibling&&V(Z.nextSibling))&&ee.insert(`
`),ee}function Oe(Z,ee){if(V(Z)&&Z.nextElementSibling!=null&&!W(ee,`

`)){var ae=Z.offsetHeight+parseFloat(z(Z).marginTop)+parseFloat(z(Z).marginBottom);Z.nextElementSibling.offsetTop>Z.offsetTop+ae*1.5&&ee.insert(`
`)}return ee}function gt(Z,ee){var ae={},ue=Z.style||{};return ue.fontStyle&&z(Z).fontStyle==="italic"&&(ae.italic=!0),ue.fontWeight&&(z(Z).fontWeight.startsWith("bold")||parseInt(z(Z).fontWeight)>=700)&&(ae.bold=!0),Object.keys(ae).length>0&&(ee=j(ee,ae)),parseFloat(ue.textIndent||0)>0&&(ee=new h.default().insert("	").concat(ee)),ee}function et(Z,ee){var ae=Z.data;if(Z.parentNode.tagName==="O:P")return ee.insert(ae.trim());if(ae.trim().length===0&&Z.parentNode.classList.contains("ql-clipboard"))return ee;if(!z(Z.parentNode).whiteSpace.startsWith("pre")){var ue=function(Ee,Te){return Te=Te.replace(/[^\u00a0]/g,""),Te.length<1&&Ee?" ":Te};ae=ae.replace(/\r\n/g," ").replace(/\n/g," "),ae=ae.replace(/\s\s+/g,ue.bind(ue,!0)),(Z.previousSibling==null&&V(Z.parentNode)||Z.previousSibling!=null&&V(Z.previousSibling))&&(ae=ae.replace(/^\s+/,ue.bind(ue,!1))),(Z.nextSibling==null&&V(Z.parentNode)||Z.nextSibling!=null&&V(Z.nextSibling))&&(ae=ae.replace(/\s+$/,ue.bind(ue,!1)))}return ee.insert(ae)}r.default=D,r.matchAttributor=X,r.matchBlot=te,r.matchNewline=Se,r.matchSpacing=Oe,r.matchText=et},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function _(v,E){for(var m=0;m<E.length;m++){var g=E[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,g.key,g)}}return function(v,E,m){return E&&_(v.prototype,E),m&&_(v,m),v}}(),s=function _(v,E,m){v===null&&(v=Function.prototype);var g=Object.getOwnPropertyDescriptor(v,E);if(g===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:_(w,E,m)}else{if("value"in g)return g.value;var y=g.get;return y===void 0?void 0:y.call(m)}},a=i(6),l=c(a);function c(_){return _&&_.__esModule?_:{default:_}}function p(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function h(_,v){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:_}function f(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(_,v):_.__proto__=v)}var d=function(_){f(v,_);function v(){return p(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return o(v,[{key:"optimize",value:function(m){s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,m),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return s(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),v}(l.default);d.blotName="bold",d.tagName=["STRONG","B"],r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var o=function(){function k(x,O){var M=[],U=!0,K=!1,G=void 0;try{for(var H=x[Symbol.iterator](),q;!(U=(q=H.next()).done)&&(M.push(q.value),!(O&&M.length===O));U=!0);}catch(F){K=!0,G=F}finally{try{!U&&H.return&&H.return()}finally{if(K)throw G}}return M}return function(x,O){if(Array.isArray(x))return x;if(Symbol.iterator in Object(x))return k(x,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function k(x,O){for(var M=0;M<O.length;M++){var U=O[M];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(x,U.key,U)}}return function(x,O,M){return O&&k(x.prototype,O),M&&k(x,M),x}}(),a=i(2),l=m(a),c=i(0),p=m(c),h=i(5),f=m(h),d=i(10),_=m(d),v=i(9),E=m(v);function m(k){return k&&k.__esModule?k:{default:k}}function g(k,x,O){return x in k?Object.defineProperty(k,x,{value:O,enumerable:!0,configurable:!0,writable:!0}):k[x]=O,k}function w(k,x){if(!(k instanceof x))throw new TypeError("Cannot call a class as a function")}function y(k,x){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:k}function I(k,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);k.prototype=Object.create(x&&x.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(k,x):k.__proto__=x)}var C=(0,_.default)("quill:toolbar"),S=function(k){I(x,k);function x(O,M){w(this,x);var U=y(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,O,M));if(Array.isArray(U.options.container)){var K=document.createElement("div");P(K,U.options.container),O.container.parentNode.insertBefore(K,O.container),U.container=K}else typeof U.options.container=="string"?U.container=document.querySelector(U.options.container):U.container=U.options.container;if(!(U.container instanceof HTMLElement)){var G;return G=C.error("Container required for toolbar",U.options),y(U,G)}return U.container.classList.add("ql-toolbar"),U.controls=[],U.handlers={},Object.keys(U.options.handlers).forEach(function(H){U.addHandler(H,U.options.handlers[H])}),[].forEach.call(U.container.querySelectorAll("button, select"),function(H){U.attach(H)}),U.quill.on(f.default.events.EDITOR_CHANGE,function(H,q){H===f.default.events.SELECTION_CHANGE&&U.update(q)}),U.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){var H=U.quill.selection.getRange(),q=o(H,1),F=q[0];U.update(F)}),U}return s(x,[{key:"addHandler",value:function(M,U){this.handlers[M]=U}},{key:"attach",value:function(M){var U=this,K=[].find.call(M.classList,function(H){return H.indexOf("ql-")===0});if(K){if(K=K.slice(3),M.tagName==="BUTTON"&&M.setAttribute("type","button"),this.handlers[K]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[K]==null){C.warn("ignoring attaching to disabled format",K,M);return}if(p.default.query(K)==null){C.warn("ignoring attaching to nonexistent format",K,M);return}}var G=M.tagName==="SELECT"?"change":"click";M.addEventListener(G,function(H){var q=void 0;if(M.tagName==="SELECT"){if(M.selectedIndex<0)return;var F=M.options[M.selectedIndex];F.hasAttribute("selected")?q=!1:q=F.value||!1}else M.classList.contains("ql-active")?q=!1:q=M.value||!M.hasAttribute("value"),H.preventDefault();U.quill.focus();var N=U.quill.selection.getRange(),D=o(N,1),j=D[0];if(U.handlers[K]!=null)U.handlers[K].call(U,q);else if(p.default.query(K).prototype instanceof p.default.Embed){if(q=prompt("Enter "+K),!q)return;U.quill.updateContents(new l.default().retain(j.index).delete(j.length).insert(g({},K,q)),f.default.sources.USER)}else U.quill.format(K,q,f.default.sources.USER);U.update(j)}),this.controls.push([K,M])}}},{key:"update",value:function(M){var U=M==null?{}:this.quill.getFormat(M);this.controls.forEach(function(K){var G=o(K,2),H=G[0],q=G[1];if(q.tagName==="SELECT"){var F=void 0;if(M==null)F=null;else if(U[H]==null)F=q.querySelector("option[selected]");else if(!Array.isArray(U[H])){var N=U[H];typeof N=="string"&&(N=N.replace(/\"/g,'\\"')),F=q.querySelector('option[value="'+N+'"]')}F==null?(q.value="",q.selectedIndex=-1):F.selected=!0}else if(M==null)q.classList.remove("ql-active");else if(q.hasAttribute("value")){var D=U[H]===q.getAttribute("value")||U[H]!=null&&U[H].toString()===q.getAttribute("value")||U[H]==null&&!q.getAttribute("value");q.classList.toggle("ql-active",D)}else q.classList.toggle("ql-active",U[H]!=null)})}}]),x}(E.default);S.DEFAULTS={};function T(k,x,O){var M=document.createElement("button");M.setAttribute("type","button"),M.classList.add("ql-"+x),O!=null&&(M.value=O),k.appendChild(M)}function P(k,x){Array.isArray(x[0])||(x=[x]),x.forEach(function(O){var M=document.createElement("span");M.classList.add("ql-formats"),O.forEach(function(U){if(typeof U=="string")T(M,U);else{var K=Object.keys(U)[0],G=U[K];Array.isArray(G)?b(M,K,G):T(M,K,G)}}),k.appendChild(M)})}function b(k,x,O){var M=document.createElement("select");M.classList.add("ql-"+x),O.forEach(function(U){var K=document.createElement("option");U!==!1?K.setAttribute("value",U):K.setAttribute("selected","selected"),M.appendChild(K)}),k.appendChild(M)}S.DEFAULTS={container:null,handlers:{clean:function(){var x=this,O=this.quill.getSelection();if(O!=null)if(O.length==0){var M=this.quill.getFormat();Object.keys(M).forEach(function(U){p.default.query(U,p.default.Scope.INLINE)!=null&&x.quill.format(U,!1)})}else this.quill.removeFormat(O,f.default.sources.USER)},direction:function(x){var O=this.quill.getFormat().align;x==="rtl"&&O==null?this.quill.format("align","right",f.default.sources.USER):!x&&O==="right"&&this.quill.format("align",!1,f.default.sources.USER),this.quill.format("direction",x,f.default.sources.USER)},indent:function(x){var O=this.quill.getSelection(),M=this.quill.getFormat(O),U=parseInt(M.indent||0);if(x==="+1"||x==="-1"){var K=x==="+1"?1:-1;M.direction==="rtl"&&(K*=-1),this.quill.format("indent",U+K,f.default.sources.USER)}},link:function(x){x===!0&&(x=prompt("Enter link URL:")),this.quill.format("link",x,f.default.sources.USER)},list:function(x){var O=this.quill.getSelection(),M=this.quill.getFormat(O);x==="check"?M.list==="checked"||M.list==="unchecked"?this.quill.format("list",!1,f.default.sources.USER):this.quill.format("list","unchecked",f.default.sources.USER):this.quill.format("list",x,f.default.sources.USER)}}},r.default=S,r.addControls=P},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function _(v,E){for(var m=0;m<E.length;m++){var g=E[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,g.key,g)}}return function(v,E,m){return E&&_(v.prototype,E),m&&_(v,m),v}}(),s=function _(v,E,m){v===null&&(v=Function.prototype);var g=Object.getOwnPropertyDescriptor(v,E);if(g===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:_(w,E,m)}else{if("value"in g)return g.value;var y=g.get;return y===void 0?void 0:y.call(m)}},a=i(28),l=c(a);function c(_){return _&&_.__esModule?_:{default:_}}function p(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function h(_,v){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:_}function f(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(_,v):_.__proto__=v)}var d=function(_){f(v,_);function v(E,m){p(this,v);var g=h(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,E));return g.label.innerHTML=m,g.container.classList.add("ql-color-picker"),[].slice.call(g.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(w){w.classList.add("ql-primary")}),g}return o(v,[{key:"buildItem",value:function(m){var g=s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"buildItem",this).call(this,m);return g.style.backgroundColor=m.getAttribute("value")||"",g}},{key:"selectItem",value:function(m,g){s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,m,g);var w=this.label.querySelector(".ql-color-label"),y=m&&m.getAttribute("data-value")||"";w&&(w.tagName==="line"?w.style.stroke=y:w.style.fill=y)}}]),v}(l.default);r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function _(v,E){for(var m=0;m<E.length;m++){var g=E[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,g.key,g)}}return function(v,E,m){return E&&_(v.prototype,E),m&&_(v,m),v}}(),s=function _(v,E,m){v===null&&(v=Function.prototype);var g=Object.getOwnPropertyDescriptor(v,E);if(g===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:_(w,E,m)}else{if("value"in g)return g.value;var y=g.get;return y===void 0?void 0:y.call(m)}},a=i(28),l=c(a);function c(_){return _&&_.__esModule?_:{default:_}}function p(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function h(_,v){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:_}function f(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(_,v):_.__proto__=v)}var d=function(_){f(v,_);function v(E,m){p(this,v);var g=h(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,E));return g.container.classList.add("ql-icon-picker"),[].forEach.call(g.container.querySelectorAll(".ql-picker-item"),function(w){w.innerHTML=m[w.getAttribute("data-value")||""]}),g.defaultItem=g.container.querySelector(".ql-selected"),g.selectItem(g.defaultItem),g}return o(v,[{key:"selectItem",value:function(m,g){s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,m,g),m=m||this.defaultItem,this.label.innerHTML=m.innerHTML}}]),v}(l.default);r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function l(c,p){for(var h=0;h<p.length;h++){var f=p[h];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}return function(c,p,h){return p&&l(c.prototype,p),h&&l(c,h),c}}();function s(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var a=function(){function l(c,p){var h=this;s(this,l),this.quill=c,this.boundsContainer=p||document.body,this.root=c.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){h.root.style.marginTop=-1*h.quill.root.scrollTop+"px"}),this.hide()}return o(l,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(p){var h=p.left+p.width/2-this.root.offsetWidth/2,f=p.bottom+this.quill.root.scrollTop;this.root.style.left=h+"px",this.root.style.top=f+"px",this.root.classList.remove("ql-flip");var d=this.boundsContainer.getBoundingClientRect(),_=this.root.getBoundingClientRect(),v=0;if(_.right>d.right&&(v=d.right-_.right,this.root.style.left=h+v+"px"),_.left<d.left&&(v=d.left-_.left,this.root.style.left=h+v+"px"),_.bottom>d.bottom){var E=_.bottom-_.top,m=p.bottom-p.top+E;this.root.style.top=f-m+"px",this.root.classList.add("ql-flip")}return v}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),l}();r.default=a},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function b(k,x){var O=[],M=!0,U=!1,K=void 0;try{for(var G=k[Symbol.iterator](),H;!(M=(H=G.next()).done)&&(O.push(H.value),!(x&&O.length===x));M=!0);}catch(q){U=!0,K=q}finally{try{!M&&G.return&&G.return()}finally{if(U)throw K}}return O}return function(k,x){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return b(k,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function b(k,x,O){k===null&&(k=Function.prototype);var M=Object.getOwnPropertyDescriptor(k,x);if(M===void 0){var U=Object.getPrototypeOf(k);return U===null?void 0:b(U,x,O)}else{if("value"in M)return M.value;var K=M.get;return K===void 0?void 0:K.call(O)}},a=function(){function b(k,x){for(var O=0;O<x.length;O++){var M=x[O];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(k,M.key,M)}}return function(k,x,O){return x&&b(k.prototype,x),O&&b(k,O),k}}(),l=i(3),c=w(l),p=i(8),h=w(p),f=i(43),d=w(f),_=i(27),v=w(_),E=i(15),m=i(41),g=w(m);function w(b){return b&&b.__esModule?b:{default:b}}function y(b,k){if(!(b instanceof k))throw new TypeError("Cannot call a class as a function")}function I(b,k){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:b}function C(b,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);b.prototype=Object.create(k&&k.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(b,k):b.__proto__=k)}var S=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],T=function(b){C(k,b);function k(x,O){y(this,k),O.modules.toolbar!=null&&O.modules.toolbar.container==null&&(O.modules.toolbar.container=S);var M=I(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,x,O));return M.quill.container.classList.add("ql-snow"),M}return a(k,[{key:"extendToolbar",value:function(O){O.container.classList.add("ql-snow"),this.buildButtons([].slice.call(O.container.querySelectorAll("button")),g.default),this.buildPickers([].slice.call(O.container.querySelectorAll("select")),g.default),this.tooltip=new P(this.quill,this.options.bounds),O.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(M,U){O.handlers.link.call(O,!U.format.link)})}}]),k}(d.default);T.DEFAULTS=(0,c.default)(!0,{},d.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(k){if(k){var x=this.quill.getSelection();if(x==null||x.length==0)return;var O=this.quill.getText(x);/^\S+@\S+\.\S+$/.test(O)&&O.indexOf("mailto:")!==0&&(O="mailto:"+O);var M=this.quill.theme.tooltip;M.edit("link",O)}else this.quill.format("link",!1)}}}}});var P=function(b){C(k,b);function k(x,O){y(this,k);var M=I(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,x,O));return M.preview=M.root.querySelector("a.ql-preview"),M}return a(k,[{key:"listen",value:function(){var O=this;s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(M){O.root.classList.contains("ql-editing")?O.save():O.edit("link",O.preview.textContent),M.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(M){if(O.linkRange!=null){var U=O.linkRange;O.restoreFocus(),O.quill.formatText(U,"link",!1,h.default.sources.USER),delete O.linkRange}M.preventDefault(),O.hide()}),this.quill.on(h.default.events.SELECTION_CHANGE,function(M,U,K){if(M!=null){if(M.length===0&&K===h.default.sources.USER){var G=O.quill.scroll.descendant(v.default,M.index),H=o(G,2),q=H[0],F=H[1];if(q!=null){O.linkRange=new E.Range(M.index-F,q.length());var N=v.default.formats(q.domNode);O.preview.textContent=N,O.preview.setAttribute("href",N),O.show(),O.position(O.quill.getBounds(O.linkRange));return}}else delete O.linkRange;O.hide()}})}},{key:"show",value:function(){s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),k}(f.BaseTooltip);P.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=T},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(29),s=ne(o),a=i(36),l=i(38),c=i(64),p=i(65),h=ne(p),f=i(66),d=ne(f),_=i(67),v=ne(_),E=i(37),m=i(26),g=i(39),w=i(40),y=i(56),I=ne(y),C=i(68),S=ne(C),T=i(27),P=ne(T),b=i(69),k=ne(b),x=i(70),O=ne(x),M=i(71),U=ne(M),K=i(72),G=ne(K),H=i(73),q=ne(H),F=i(13),N=ne(F),D=i(74),j=ne(D),z=i(75),W=ne(z),V=i(57),$=ne(V),Y=i(41),X=ne(Y),te=i(28),ce=ne(te),me=i(59),ge=ne(me),Se=i(60),Oe=ne(Se),gt=i(61),et=ne(gt),Z=i(108),ee=ne(Z),ae=i(62),ue=ne(ae);function ne(Ee){return Ee&&Ee.__esModule?Ee:{default:Ee}}s.default.register({"attributors/attribute/direction":l.DirectionAttribute,"attributors/class/align":a.AlignClass,"attributors/class/background":E.BackgroundClass,"attributors/class/color":m.ColorClass,"attributors/class/direction":l.DirectionClass,"attributors/class/font":g.FontClass,"attributors/class/size":w.SizeClass,"attributors/style/align":a.AlignStyle,"attributors/style/background":E.BackgroundStyle,"attributors/style/color":m.ColorStyle,"attributors/style/direction":l.DirectionStyle,"attributors/style/font":g.FontStyle,"attributors/style/size":w.SizeStyle},!0),s.default.register({"formats/align":a.AlignClass,"formats/direction":l.DirectionClass,"formats/indent":c.IndentClass,"formats/background":E.BackgroundStyle,"formats/color":m.ColorStyle,"formats/font":g.FontClass,"formats/size":w.SizeClass,"formats/blockquote":h.default,"formats/code-block":N.default,"formats/header":d.default,"formats/list":v.default,"formats/bold":I.default,"formats/code":F.Code,"formats/italic":S.default,"formats/link":P.default,"formats/script":k.default,"formats/strike":O.default,"formats/underline":U.default,"formats/image":G.default,"formats/video":q.default,"formats/list/item":_.ListItem,"modules/formula":j.default,"modules/syntax":W.default,"modules/toolbar":$.default,"themes/bubble":ee.default,"themes/snow":ue.default,"ui/icons":X.default,"ui/picker":ce.default,"ui/icon-picker":Oe.default,"ui/color-picker":ge.default,"ui/tooltip":et.default},!0),r.default=s.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var o=function(){function v(E,m){for(var g=0;g<m.length;g++){var w=m[g];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(E,w.key,w)}}return function(E,m,g){return m&&v(E.prototype,m),g&&v(E,g),E}}(),s=function v(E,m,g){E===null&&(E=Function.prototype);var w=Object.getOwnPropertyDescriptor(E,m);if(w===void 0){var y=Object.getPrototypeOf(E);return y===null?void 0:v(y,m,g)}else{if("value"in w)return w.value;var I=w.get;return I===void 0?void 0:I.call(g)}},a=i(0),l=c(a);function c(v){return v&&v.__esModule?v:{default:v}}function p(v,E){if(!(v instanceof E))throw new TypeError("Cannot call a class as a function")}function h(v,E){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:v}function f(v,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);v.prototype=Object.create(E&&E.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(v,E):v.__proto__=E)}var d=function(v){f(E,v);function E(){return p(this,E),h(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return o(E,[{key:"add",value:function(g,w){if(w==="+1"||w==="-1"){var y=this.value(g)||0;w=w==="+1"?y+1:y-1}return w===0?(this.remove(g),!0):s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"add",this).call(this,g,w)}},{key:"canAdd",value:function(g,w){return s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"canAdd",this).call(this,g,w)||s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"canAdd",this).call(this,g,parseInt(w))}},{key:"value",value:function(g){return parseInt(s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"value",this).call(this,g))||void 0}}]),E}(l.default.Attributor.Class),_=new d("indent","ql-indent",{scope:l.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=_},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(4),s=a(o);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function c(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function p(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var h=function(f){p(d,f);function d(){return l(this,d),c(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(s.default);h.blotName="blockquote",h.tagName="blockquote",r.default=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function d(_,v){for(var E=0;E<v.length;E++){var m=v[E];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(_,m.key,m)}}return function(_,v,E){return v&&d(_.prototype,v),E&&d(_,E),_}}(),s=i(4),a=l(s);function l(d){return d&&d.__esModule?d:{default:d}}function c(d,_){if(!(d instanceof _))throw new TypeError("Cannot call a class as a function")}function p(d,_){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:d}function h(d,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);d.prototype=Object.create(_&&_.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(d,_):d.__proto__=_)}var f=function(d){h(_,d);function _(){return c(this,_),p(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return o(_,null,[{key:"formats",value:function(E){return this.tagName.indexOf(E.tagName)+1}}]),_}(a.default);f.blotName="header",f.tagName=["H1","H2","H3","H4","H5","H6"],r.default=f},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var o=function(){function y(I,C){for(var S=0;S<C.length;S++){var T=C[S];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(I,T.key,T)}}return function(I,C,S){return C&&y(I.prototype,C),S&&y(I,S),I}}(),s=function y(I,C,S){I===null&&(I=Function.prototype);var T=Object.getOwnPropertyDescriptor(I,C);if(T===void 0){var P=Object.getPrototypeOf(I);return P===null?void 0:y(P,C,S)}else{if("value"in T)return T.value;var b=T.get;return b===void 0?void 0:b.call(S)}},a=i(0),l=d(a),c=i(4),p=d(c),h=i(25),f=d(h);function d(y){return y&&y.__esModule?y:{default:y}}function _(y,I,C){return I in y?Object.defineProperty(y,I,{value:C,enumerable:!0,configurable:!0,writable:!0}):y[I]=C,y}function v(y,I){if(!(y instanceof I))throw new TypeError("Cannot call a class as a function")}function E(y,I){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:y}function m(y,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);y.prototype=Object.create(I&&I.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(y,I):y.__proto__=I)}var g=function(y){m(I,y);function I(){return v(this,I),E(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return o(I,[{key:"format",value:function(S,T){S===w.blotName&&!T?this.replaceWith(l.default.create(this.statics.scope)):s(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"format",this).call(this,S,T)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():s(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(S,T){return this.parent.isolate(this.offset(this.parent),this.length()),S===this.parent.statics.blotName?(this.parent.replaceWith(S,T),this):(this.parent.unwrap(),s(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"replaceWith",this).call(this,S,T))}}],[{key:"formats",value:function(S){return S.tagName===this.tagName?void 0:s(I.__proto__||Object.getPrototypeOf(I),"formats",this).call(this,S)}}]),I}(p.default);g.blotName="list-item",g.tagName="LI";var w=function(y){m(I,y),o(I,null,[{key:"create",value:function(S){var T=S==="ordered"?"OL":"UL",P=s(I.__proto__||Object.getPrototypeOf(I),"create",this).call(this,T);return(S==="checked"||S==="unchecked")&&P.setAttribute("data-checked",S==="checked"),P}},{key:"formats",value:function(S){if(S.tagName==="OL")return"ordered";if(S.tagName==="UL")return S.hasAttribute("data-checked")?S.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function I(C){v(this,I);var S=E(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,C)),T=function(b){if(b.target.parentNode===C){var k=S.statics.formats(C),x=l.default.find(b.target);k==="checked"?x.format("list","unchecked"):k==="unchecked"&&x.format("list","checked")}};return C.addEventListener("touchstart",T),C.addEventListener("mousedown",T),S}return o(I,[{key:"format",value:function(S,T){this.children.length>0&&this.children.tail.format(S,T)}},{key:"formats",value:function(){return _({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(S,T){if(S instanceof g)s(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"insertBefore",this).call(this,S,T);else{var P=T==null?this.length():T.offset(this),b=this.split(P);b.parent.insertBefore(S,b)}}},{key:"optimize",value:function(S){s(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"optimize",this).call(this,S);var T=this.next;T!=null&&T.prev===this&&T.statics.blotName===this.statics.blotName&&T.domNode.tagName===this.domNode.tagName&&T.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(T.moveChildren(this),T.remove())}},{key:"replace",value:function(S){if(S.statics.blotName!==this.statics.blotName){var T=l.default.create(this.statics.defaultChild);S.moveChildren(T),this.appendChild(T)}s(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"replace",this).call(this,S)}}]),I}(f.default);w.blotName="list",w.scope=l.default.Scope.BLOCK_BLOT,w.tagName=["OL","UL"],w.defaultChild="list-item",w.allowedChildren=[g],r.ListItem=g,r.default=w},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(56),s=a(o);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function c(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function p(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var h=function(f){p(d,f);function d(){return l(this,d),c(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(s.default);h.blotName="italic",h.tagName=["EM","I"],r.default=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function _(v,E){for(var m=0;m<E.length;m++){var g=E[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,g.key,g)}}return function(v,E,m){return E&&_(v.prototype,E),m&&_(v,m),v}}(),s=function _(v,E,m){v===null&&(v=Function.prototype);var g=Object.getOwnPropertyDescriptor(v,E);if(g===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:_(w,E,m)}else{if("value"in g)return g.value;var y=g.get;return y===void 0?void 0:y.call(m)}},a=i(6),l=c(a);function c(_){return _&&_.__esModule?_:{default:_}}function p(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function h(_,v){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:_}function f(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(_,v):_.__proto__=v)}var d=function(_){f(v,_);function v(){return p(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return o(v,null,[{key:"create",value:function(m){return m==="super"?document.createElement("sup"):m==="sub"?document.createElement("sub"):s(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,m)}},{key:"formats",value:function(m){if(m.tagName==="SUB")return"sub";if(m.tagName==="SUP")return"super"}}]),v}(l.default);d.blotName="script",d.tagName=["SUB","SUP"],r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(6),s=a(o);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function c(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function p(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var h=function(f){p(d,f);function d(){return l(this,d),c(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(s.default);h.blotName="strike",h.tagName="S",r.default=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(6),s=a(o);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function c(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function p(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var h=function(f){p(d,f);function d(){return l(this,d),c(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(s.default);h.blotName="underline",h.tagName="U",r.default=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function E(m,g){for(var w=0;w<g.length;w++){var y=g[w];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(m,y.key,y)}}return function(m,g,w){return g&&E(m.prototype,g),w&&E(m,w),m}}(),s=function E(m,g,w){m===null&&(m=Function.prototype);var y=Object.getOwnPropertyDescriptor(m,g);if(y===void 0){var I=Object.getPrototypeOf(m);return I===null?void 0:E(I,g,w)}else{if("value"in y)return y.value;var C=y.get;return C===void 0?void 0:C.call(w)}},a=i(0),l=p(a),c=i(27);function p(E){return E&&E.__esModule?E:{default:E}}function h(E,m){if(!(E instanceof m))throw new TypeError("Cannot call a class as a function")}function f(E,m){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:E}function d(E,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);E.prototype=Object.create(m&&m.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(E,m):E.__proto__=m)}var _=["alt","height","width"],v=function(E){d(m,E);function m(){return h(this,m),f(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,[{key:"format",value:function(w,y){_.indexOf(w)>-1?y?this.domNode.setAttribute(w,y):this.domNode.removeAttribute(w):s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,w,y)}}],[{key:"create",value:function(w){var y=s(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,w);return typeof w=="string"&&y.setAttribute("src",this.sanitize(w)),y}},{key:"formats",value:function(w){return _.reduce(function(y,I){return w.hasAttribute(I)&&(y[I]=w.getAttribute(I)),y},{})}},{key:"match",value:function(w){return/\.(jpe?g|gif|png)$/.test(w)||/^data:image\/.+;base64/.test(w)}},{key:"sanitize",value:function(w){return(0,c.sanitize)(w,["http","https","data"])?w:"//:0"}},{key:"value",value:function(w){return w.getAttribute("src")}}]),m}(l.default.Embed);v.blotName="image",v.tagName="IMG",r.default=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function E(m,g){for(var w=0;w<g.length;w++){var y=g[w];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(m,y.key,y)}}return function(m,g,w){return g&&E(m.prototype,g),w&&E(m,w),m}}(),s=function E(m,g,w){m===null&&(m=Function.prototype);var y=Object.getOwnPropertyDescriptor(m,g);if(y===void 0){var I=Object.getPrototypeOf(m);return I===null?void 0:E(I,g,w)}else{if("value"in y)return y.value;var C=y.get;return C===void 0?void 0:C.call(w)}},a=i(4),l=i(27),c=p(l);function p(E){return E&&E.__esModule?E:{default:E}}function h(E,m){if(!(E instanceof m))throw new TypeError("Cannot call a class as a function")}function f(E,m){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:E}function d(E,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);E.prototype=Object.create(m&&m.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(E,m):E.__proto__=m)}var _=["height","width"],v=function(E){d(m,E);function m(){return h(this,m),f(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,[{key:"format",value:function(w,y){_.indexOf(w)>-1?y?this.domNode.setAttribute(w,y):this.domNode.removeAttribute(w):s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,w,y)}}],[{key:"create",value:function(w){var y=s(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,w);return y.setAttribute("frameborder","0"),y.setAttribute("allowfullscreen",!0),y.setAttribute("src",this.sanitize(w)),y}},{key:"formats",value:function(w){return _.reduce(function(y,I){return w.hasAttribute(I)&&(y[I]=w.getAttribute(I)),y},{})}},{key:"sanitize",value:function(w){return c.default.sanitize(w)}},{key:"value",value:function(w){return w.getAttribute("src")}}]),m}(a.BlockEmbed);v.blotName="video",v.className="ql-video",v.tagName="IFRAME",r.default=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var o=function(){function w(y,I){for(var C=0;C<I.length;C++){var S=I[C];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(y,S.key,S)}}return function(y,I,C){return I&&w(y.prototype,I),C&&w(y,C),y}}(),s=function w(y,I,C){y===null&&(y=Function.prototype);var S=Object.getOwnPropertyDescriptor(y,I);if(S===void 0){var T=Object.getPrototypeOf(y);return T===null?void 0:w(T,I,C)}else{if("value"in S)return S.value;var P=S.get;return P===void 0?void 0:P.call(C)}},a=i(35),l=d(a),c=i(5),p=d(c),h=i(9),f=d(h);function d(w){return w&&w.__esModule?w:{default:w}}function _(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function v(w,y){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:w}function E(w,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);w.prototype=Object.create(y&&y.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(w,y):w.__proto__=y)}var m=function(w){E(y,w);function y(){return _(this,y),v(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return o(y,null,[{key:"create",value:function(C){var S=s(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,C);return typeof C=="string"&&(window.katex.render(C,S,{throwOnError:!1,errorColor:"#f00"}),S.setAttribute("data-value",C)),S}},{key:"value",value:function(C){return C.getAttribute("data-value")}}]),y}(l.default);m.blotName="formula",m.className="ql-formula",m.tagName="SPAN";var g=function(w){E(y,w),o(y,null,[{key:"register",value:function(){p.default.register(m,!0)}}]);function y(){_(this,y);var I=v(this,(y.__proto__||Object.getPrototypeOf(y)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return I}return y}(f.default);r.FormulaBlot=m,r.default=g},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var o=function(){function C(S,T){for(var P=0;P<T.length;P++){var b=T[P];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(S,b.key,b)}}return function(S,T,P){return T&&C(S.prototype,T),P&&C(S,P),S}}(),s=function C(S,T,P){S===null&&(S=Function.prototype);var b=Object.getOwnPropertyDescriptor(S,T);if(b===void 0){var k=Object.getPrototypeOf(S);return k===null?void 0:C(k,T,P)}else{if("value"in b)return b.value;var x=b.get;return x===void 0?void 0:x.call(P)}},a=i(0),l=v(a),c=i(5),p=v(c),h=i(9),f=v(h),d=i(13),_=v(d);function v(C){return C&&C.__esModule?C:{default:C}}function E(C,S){if(!(C instanceof S))throw new TypeError("Cannot call a class as a function")}function m(C,S){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:C}function g(C,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);C.prototype=Object.create(S&&S.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(C,S):C.__proto__=S)}var w=function(C){g(S,C);function S(){return E(this,S),m(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return o(S,[{key:"replaceWith",value:function(P){this.domNode.textContent=this.domNode.textContent,this.attach(),s(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replaceWith",this).call(this,P)}},{key:"highlight",value:function(P){var b=this.domNode.textContent;this.cachedText!==b&&((b.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=P(b),this.domNode.normalize(),this.attach()),this.cachedText=b)}}]),S}(_.default);w.className="ql-syntax";var y=new l.default.Attributor.Class("token","hljs",{scope:l.default.Scope.INLINE}),I=function(C){g(S,C),o(S,null,[{key:"register",value:function(){p.default.register(y,!0),p.default.register(w,!0)}}]);function S(T,P){E(this,S);var b=m(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,T,P));if(typeof b.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var k=null;return b.quill.on(p.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(k),k=setTimeout(function(){b.highlight(),k=null},b.options.interval)}),b.highlight(),b}return o(S,[{key:"highlight",value:function(){var P=this;if(!this.quill.selection.composing){this.quill.update(p.default.sources.USER);var b=this.quill.getSelection();this.quill.scroll.descendants(w).forEach(function(k){k.highlight(P.options.highlight)}),this.quill.update(p.default.sources.SILENT),b!=null&&this.quill.setSelection(b,p.default.sources.SILENT)}}}]),S}(f.default);I.DEFAULTS={highlight:function(){return window.hljs==null?null:function(C){var S=window.hljs.highlightAuto(C);return S.value}}(),interval:1e3},r.CodeBlock=w,r.CodeToken=y,r.default=I},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var o=function S(T,P,b){T===null&&(T=Function.prototype);var k=Object.getOwnPropertyDescriptor(T,P);if(k===void 0){var x=Object.getPrototypeOf(T);return x===null?void 0:S(x,P,b)}else{if("value"in k)return k.value;var O=k.get;return O===void 0?void 0:O.call(b)}},s=function(){function S(T,P){for(var b=0;b<P.length;b++){var k=P[b];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(T,k.key,k)}}return function(T,P,b){return P&&S(T.prototype,P),b&&S(T,b),T}}(),a=i(3),l=E(a),c=i(8),p=E(c),h=i(43),f=E(h),d=i(15),_=i(41),v=E(_);function E(S){return S&&S.__esModule?S:{default:S}}function m(S,T){if(!(S instanceof T))throw new TypeError("Cannot call a class as a function")}function g(S,T){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:S}function w(S,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);S.prototype=Object.create(T&&T.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(S,T):S.__proto__=T)}var y=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],I=function(S){w(T,S);function T(P,b){m(this,T),b.modules.toolbar!=null&&b.modules.toolbar.container==null&&(b.modules.toolbar.container=y);var k=g(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,P,b));return k.quill.container.classList.add("ql-bubble"),k}return s(T,[{key:"extendToolbar",value:function(b){this.tooltip=new C(this.quill,this.options.bounds),this.tooltip.root.appendChild(b.container),this.buildButtons([].slice.call(b.container.querySelectorAll("button")),v.default),this.buildPickers([].slice.call(b.container.querySelectorAll("select")),v.default)}}]),T}(f.default);I.DEFAULTS=(0,l.default)(!0,{},f.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(T){T?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var C=function(S){w(T,S);function T(P,b){m(this,T);var k=g(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,P,b));return k.quill.on(p.default.events.EDITOR_CHANGE,function(x,O,M,U){if(x===p.default.events.SELECTION_CHANGE)if(O!=null&&O.length>0&&U===p.default.sources.USER){k.show(),k.root.style.left="0px",k.root.style.width="",k.root.style.width=k.root.offsetWidth+"px";var K=k.quill.getLines(O.index,O.length);if(K.length===1)k.position(k.quill.getBounds(O));else{var G=K[K.length-1],H=k.quill.getIndex(G),q=Math.min(G.length()-1,O.index+O.length-H),F=k.quill.getBounds(new d.Range(H,q));k.position(F)}}else document.activeElement!==k.textbox&&k.quill.hasFocus()&&k.hide()}),k}return s(T,[{key:"listen",value:function(){var b=this;o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){b.root.classList.remove("ql-editing")}),this.quill.on(p.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!b.root.classList.contains("ql-hidden")){var k=b.quill.getSelection();k!=null&&b.position(b.quill.getBounds(k))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(b){var k=o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"position",this).call(this,b),x=this.root.querySelector(".ql-tooltip-arrow");if(x.style.marginLeft="",k===0)return k;x.style.marginLeft=-1*k-x.offsetWidth/2+"px"}}]),T}(h.BaseTooltip);C.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=C,r.default=I},function(n,r,i){n.exports=i(63)}]).default})})(eT);var B3=eT.exports,q3=Gt&&Gt.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),yu=Gt&&Gt.__assign||function(){return yu=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},yu.apply(this,arguments)},$3=Gt&&Gt.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},uc=Gt&&Gt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},In=uc(le),z3=uc(r1),us=uc(U3),Lv=uc(B3),H3=function(t){q3(e,t);function e(n){var r=t.call(this,n)||this;r.dirtyProps=["modules","formats","bounds","theme","children"],r.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],r.state={generation:0},r.selection=null,r.onEditorChange=function(o,s,a,l){var c,p,h,f;o==="text-change"?(p=(c=r).onEditorChangeText)===null||p===void 0||p.call(c,r.editor.root.innerHTML,s,l,r.unprivilegedEditor):o==="selection-change"&&((f=(h=r).onEditorChangeSelection)===null||f===void 0||f.call(h,s,l,r.unprivilegedEditor))};var i=r.isControlled()?n.value:n.defaultValue;return r.value=i??"",r}return e.prototype.validateProps=function(n){var r;if(In.default.Children.count(n.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(In.default.Children.count(n.children)){var i=In.default.Children.only(n.children);if(((r=i)===null||r===void 0?void 0:r.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&n.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},e.prototype.shouldComponentUpdate=function(n,r){var i=this,o;if(this.validateProps(n),!this.editor||this.state.generation!==r.generation)return!0;if("value"in n){var s=this.getEditorContents(),a=(o=n.value,o??"");this.isEqualValue(a,s)||this.setEditorContents(this.editor,a)}return n.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,n.readOnly),$3(this.cleanProps,this.dirtyProps).some(function(l){return!us.default(n[l],i.props[l])})},e.prototype.shouldComponentRegenerate=function(n){var r=this;return this.dirtyProps.some(function(i){return!us.default(n[i],r.props[i])})},e.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},e.prototype.componentWillUnmount=function(){this.destroyEditor()},e.prototype.componentDidUpdate=function(n,r){var i=this;if(this.editor&&this.shouldComponentRegenerate(n)){var o=this.editor.getContents(),s=this.editor.getSelection();this.regenerationSnapshot={delta:o,selection:s},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==r.generation){var a=this.regenerationSnapshot,o=a.delta,l=a.selection;delete this.regenerationSnapshot,this.instantiateEditor();var c=this.editor;c.setContents(o),Mv(function(){return i.setEditorSelection(c,l)})}},e.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},e.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},e.prototype.isControlled=function(){return"value"in this.props},e.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},e.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},e.prototype.createEditor=function(n,r){var i=new Lv.default(n,r);return r.tabIndex!=null&&this.setEditorTabIndex(i,r.tabIndex),this.hookEditor(i),i},e.prototype.hookEditor=function(n){this.unprivilegedEditor=this.makeUnprivilegedEditor(n),n.on("editor-change",this.onEditorChange)},e.prototype.unhookEditor=function(n){n.off("editor-change",this.onEditorChange)},e.prototype.getEditorContents=function(){return this.value},e.prototype.getEditorSelection=function(){return this.selection},e.prototype.isDelta=function(n){return n&&n.ops},e.prototype.isEqualValue=function(n,r){return this.isDelta(n)&&this.isDelta(r)?us.default(n.ops,r.ops):us.default(n,r)},e.prototype.setEditorContents=function(n,r){var i=this;this.value=r;var o=this.getEditorSelection();typeof r=="string"?n.setContents(n.clipboard.convert(r)):n.setContents(r),Mv(function(){return i.setEditorSelection(n,o)})},e.prototype.setEditorSelection=function(n,r){if(this.selection=r,r){var i=n.getLength();r.index=Math.max(0,Math.min(r.index,i-1)),r.length=Math.max(0,Math.min(r.length,i-1-r.index)),n.setSelection(r)}},e.prototype.setEditorTabIndex=function(n,r){var i,o;!((o=(i=n)===null||i===void 0?void 0:i.scroll)===null||o===void 0)&&o.domNode&&(n.scroll.domNode.tabIndex=r)},e.prototype.setEditorReadOnly=function(n,r){r?n.disable():n.enable()},e.prototype.makeUnprivilegedEditor=function(n){var r=n;return{getHTML:function(){return r.root.innerHTML},getLength:r.getLength.bind(r),getText:r.getText.bind(r),getContents:r.getContents.bind(r),getSelection:r.getSelection.bind(r),getBounds:r.getBounds.bind(r)}},e.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var n=z3.default.findDOMNode(this.editingArea);if(!n)throw new Error("Cannot find element for editing area");if(n.nodeType===3)throw new Error("Editing area cannot be a text node");return n},e.prototype.renderEditingArea=function(){var n=this,r=this.props,i=r.children,o=r.preserveWhitespace,s=this.state.generation,a={key:s,ref:function(l){n.editingArea=l}};return In.default.Children.count(i)?In.default.cloneElement(In.default.Children.only(i),a):o?In.default.createElement("pre",yu({},a)):In.default.createElement("div",yu({},a))},e.prototype.render=function(){var n;return In.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(n=this.props.className,n??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},e.prototype.onEditorChangeText=function(n,r,i,o){var s,a;if(this.editor){var l=this.isDelta(this.value)?o.getContents():o.getHTML();l!==this.getEditorContents()&&(this.lastDeltaChangeSet=r,this.value=l,(a=(s=this.props).onChange)===null||a===void 0||a.call(s,n,r,i,o))}},e.prototype.onEditorChangeSelection=function(n,r,i){var o,s,a,l,c,p;if(this.editor){var h=this.getEditorSelection(),f=!h&&n,d=h&&!n;us.default(n,h)||(this.selection=n,(s=(o=this.props).onChangeSelection)===null||s===void 0||s.call(o,n,r,i),f?(l=(a=this.props).onFocus)===null||l===void 0||l.call(a,n,r,i):d&&((p=(c=this.props).onBlur)===null||p===void 0||p.call(c,h,r,i)))}},e.prototype.focus=function(){this.editor&&this.editor.focus()},e.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},e.displayName="React Quill",e.Quill=Lv.default,e.defaultProps={theme:"snow",modules:{},readOnly:!1},e}(In.default.Component);function Mv(t){Promise.resolve().then(t)}var W3=H3;const K3=zv(W3),tT="http://www.w3.org/2000/svg";class G3{constructor(e){this.seed=e}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}function dn(t,e,n,r,i){return{type:"path",ops:vu(t,e,n,r,i)}}function nT(t,e,n){const r=(t||[]).length;if(r>2){const i=[];for(let o=0;o<r-1;o++)i.push(...vu(t[o][0],t[o][1],t[o+1][0],t[o+1][1],n));return e&&i.push(...vu(t[r-1][0],t[r-1][1],t[0][0],t[0][1],n)),{type:"path",ops:i}}return r===2?dn(t[0][0],t[0][1],t[1][0],t[1][1],n):{type:"path",ops:[]}}function Q3(t,e,n,r,i){return function(o,s){return nT(o,!0,s)}([[t,e],[t+n,e],[t+n,e+r],[t,e+r]],i)}function jv(t,e,n,r,i){return function(o,s,a,l){const[c,p]=Uv(l.increment,o,s,l.rx,l.ry,1,l.increment*Fh(.1,Fh(.4,1,a),a),a);let h=Fv(c,null,a);if(!a.disableMultiStroke){const[f]=Uv(l.increment,o,s,l.rx,l.ry,1.5,0,a),d=Fv(f,null,a);h=h.concat(d)}return{estimatedPoints:p,opset:{type:"path",ops:h}}}(t,e,i,function(o,s,a){const l=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(o/2,2)+Math.pow(s/2,2))/2)),c=Math.max(a.curveStepCount,a.curveStepCount/Math.sqrt(200)*l),p=2*Math.PI/c;let h=Math.abs(o/2),f=Math.abs(s/2);const d=1-a.curveFitting;return h+=st(h*d,a),f+=st(f*d,a),{increment:p,rx:h,ry:f}}(n,r,i)).opset}function rT(t){return t.randomizer||(t.randomizer=new G3(t.seed||0)),t.randomizer.next()}function Fh(t,e,n,r=1){return n.roughness*r*(rT(n)*(e-t)+t)}function st(t,e,n=1){return Fh(-t,t,e,n)}function vu(t,e,n,r,i,o=!1){const s=o?i.disableMultiStrokeFill:i.disableMultiStroke,a=Vv(t,e,n,r,i,!0,!1);if(s)return a;const l=Vv(t,e,n,r,i,!0,!0);return a.concat(l)}function Vv(t,e,n,r,i,o,s){const a=Math.pow(t-n,2)+Math.pow(e-r,2),l=Math.sqrt(a);let c=1;c=l<200?1:l>500?.4:-.0016668*l+1.233334;let p=i.maxRandomnessOffset||0;p*p*100>a&&(p=l/10);const h=p/2,f=.2+.2*rT(i);let d=i.bowing*i.maxRandomnessOffset*(r-e)/200,_=i.bowing*i.maxRandomnessOffset*(t-n)/200;d=st(d,i,c),_=st(_,i,c);const v=[],E=()=>st(h,i,c),m=()=>st(p,i,c);return s?v.push({op:"move",data:[t+E(),e+E()]}):v.push({op:"move",data:[t+st(p,i,c),e+st(p,i,c)]}),s?v.push({op:"bcurveTo",data:[d+t+(n-t)*f+E(),_+e+(r-e)*f+E(),d+t+2*(n-t)*f+E(),_+e+2*(r-e)*f+E(),n+E(),r+E()]}):v.push({op:"bcurveTo",data:[d+t+(n-t)*f+m(),_+e+(r-e)*f+m(),d+t+2*(n-t)*f+m(),_+e+2*(r-e)*f+m(),n+m(),r+m()]}),v}function Fv(t,e,n){const r=t.length,i=[];if(r>3){const o=[],s=1-n.curveTightness;i.push({op:"move",data:[t[1][0],t[1][1]]});for(let a=1;a+2<r;a++){const l=t[a];o[0]=[l[0],l[1]],o[1]=[l[0]+(s*t[a+1][0]-s*t[a-1][0])/6,l[1]+(s*t[a+1][1]-s*t[a-1][1])/6],o[2]=[t[a+1][0]+(s*t[a][0]-s*t[a+2][0])/6,t[a+1][1]+(s*t[a][1]-s*t[a+2][1])/6],o[3]=[t[a+1][0],t[a+1][1]],i.push({op:"bcurveTo",data:[o[1][0],o[1][1],o[2][0],o[2][1],o[3][0],o[3][1]]})}}else r===3?(i.push({op:"move",data:[t[1][0],t[1][1]]}),i.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):r===2&&i.push(...vu(t[0][0],t[0][1],t[1][0],t[1][1],n));return i}function Uv(t,e,n,r,i,o,s,a){const l=[],c=[],p=st(.5,a)-Math.PI/2;c.push([st(o,a)+e+.9*r*Math.cos(p-t),st(o,a)+n+.9*i*Math.sin(p-t)]);for(let h=p;h<2*Math.PI+p-.01;h+=t){const f=[st(o,a)+e+r*Math.cos(h),st(o,a)+n+i*Math.sin(h)];l.push(f),c.push(f)}return c.push([st(o,a)+e+r*Math.cos(p+2*Math.PI+.5*s),st(o,a)+n+i*Math.sin(p+2*Math.PI+.5*s)]),c.push([st(o,a)+e+.98*r*Math.cos(p+s),st(o,a)+n+.98*i*Math.sin(p+s)]),c.push([st(o,a)+e+.9*r*Math.cos(p+.5*s),st(o,a)+n+.9*i*Math.sin(p+.5*s)]),[c,l]}function yf(t,e){return{maxRandomnessOffset:2,roughness:t==="highlight"?3:1.5,bowing:1,stroke:"#000",strokeWidth:1.5,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,combineNestedSvgPaths:!1,disableMultiStroke:t!=="double",disableMultiStrokeFill:!1,seed:e}}function Y3(t,e,n,r,i,o){const s=[];let a=n.strokeWidth||2;const l=function(d){const _=d.padding;if(_||_===0){if(typeof _=="number")return[_,_,_,_];if(Array.isArray(_)){const v=_;if(v.length)switch(v.length){case 4:return[...v];case 1:return[v[0],v[0],v[0],v[0]];case 2:return[...v,...v];case 3:return[...v,v[1]];default:return[v[0],v[1],v[2],v[3]]}}}return[5,5,5,5]}(n),c=n.animate===void 0||!!n.animate,p=n.iterations||2,h=n.rtl?1:0,f=yf("single",o);switch(n.type){case"underline":{const d=e.y+e.h+l[2];for(let _=h;_<p+h;_++)_%2?s.push(dn(e.x+e.w,d,e.x,d,f)):s.push(dn(e.x,d,e.x+e.w,d,f));break}case"strike-through":{const d=e.y+e.h/2;for(let _=h;_<p+h;_++)_%2?s.push(dn(e.x+e.w,d,e.x,d,f)):s.push(dn(e.x,d,e.x+e.w,d,f));break}case"box":{const d=e.x-l[3],_=e.y-l[0],v=e.w+(l[1]+l[3]),E=e.h+(l[0]+l[2]);for(let m=0;m<p;m++)s.push(Q3(d,_,v,E,f));break}case"bracket":{const d=Array.isArray(n.brackets)?n.brackets:n.brackets?[n.brackets]:["right"],_=e.x-2*l[3],v=e.x+e.w+2*l[1],E=e.y-2*l[0],m=e.y+e.h+2*l[2];for(const g of d){let w;switch(g){case"bottom":w=[[_,e.y+e.h],[_,m],[v,m],[v,e.y+e.h]];break;case"top":w=[[_,e.y],[_,E],[v,E],[v,e.y]];break;case"left":w=[[e.x,E],[_,E],[_,m],[e.x,m]];break;case"right":w=[[e.x+e.w,E],[v,E],[v,m],[e.x+e.w,m]]}w&&s.push(nT(w,!1,f))}break}case"crossed-off":{const d=e.x,_=e.y,v=d+e.w,E=_+e.h;for(let m=h;m<p+h;m++)m%2?s.push(dn(v,E,d,_,f)):s.push(dn(d,_,v,E,f));for(let m=h;m<p+h;m++)m%2?s.push(dn(d,E,v,_,f)):s.push(dn(v,_,d,E,f));break}case"circle":{const d=yf("double",o),_=e.w+(l[1]+l[3]),v=e.h+(l[0]+l[2]),E=e.x-l[3]+_/2,m=e.y-l[0]+v/2,g=Math.floor(p/2),w=p-2*g;for(let y=0;y<g;y++)s.push(jv(E,m,_,v,d));for(let y=0;y<w;y++)s.push(jv(E,m,_,v,f));break}case"highlight":{const d=yf("highlight",o);a=.95*e.h;const _=e.y+e.h/2;for(let v=h;v<p+h;v++)v%2?s.push(dn(e.x+e.w,_,e.x,_,d)):s.push(dn(e.x,_,e.x+e.w,_,d));break}}if(s.length){const d=function(g){const w=[];for(const y of g){let I="";for(const C of y.ops){const S=C.data;switch(C.op){case"move":I.trim()&&w.push(I.trim()),I=`M${S[0]} ${S[1]} `;break;case"bcurveTo":I+=`C${S[0]} ${S[1]}, ${S[2]} ${S[3]}, ${S[4]} ${S[5]} `;break;case"lineTo":I+=`L${S[0]} ${S[1]} `}}I.trim()&&w.push(I.trim())}return w}(s),_=[],v=[];let E=0;const m=(g,w,y)=>g.setAttribute(w,y);for(const g of d){const w=document.createElementNS(tT,"path");if(m(w,"d",g),m(w,"fill","none"),m(w,"stroke",n.color||"currentColor"),m(w,"stroke-width",""+a),c){const y=w.getTotalLength();_.push(y),E+=y}t.appendChild(w),v.push(w)}if(c){let g=0;for(let w=0;w<v.length;w++){const y=v[w],I=_[w],C=E?i*(I/E):0,S=r+g,T=y.style;T.strokeDashoffset=""+I,T.strokeDasharray=""+I,T.animation=`rough-notation-dash ${C}ms ease-out ${S}ms forwards`,g+=C}}}}class X3{constructor(e,n){this._state="unattached",this._resizing=!1,this._seed=Math.floor(Math.random()*2**31),this._lastSizes=[],this._animationDelay=0,this._resizeListener=()=>{this._resizing||(this._resizing=!0,setTimeout(()=>{this._resizing=!1,this._state==="showing"&&this.haveRectsChanged()&&this.show()},400))},this._e=e,this._config=JSON.parse(JSON.stringify(n)),this.attach()}get animate(){return this._config.animate}set animate(e){this._config.animate=e}get animationDuration(){return this._config.animationDuration}set animationDuration(e){this._config.animationDuration=e}get iterations(){return this._config.iterations}set iterations(e){this._config.iterations=e}get color(){return this._config.color}set color(e){this._config.color!==e&&(this._config.color=e,this.refresh())}get strokeWidth(){return this._config.strokeWidth}set strokeWidth(e){this._config.strokeWidth!==e&&(this._config.strokeWidth=e,this.refresh())}get padding(){return this._config.padding}set padding(e){this._config.padding!==e&&(this._config.padding=e,this.refresh())}attach(){if(this._state==="unattached"&&this._e.parentElement){(function(){if(!window.__rno_kf_s){const i=window.__rno_kf_s=document.createElement("style");i.textContent="@keyframes rough-notation-dash { to { stroke-dashoffset: 0; } }",document.head.appendChild(i)}})();const e=this._svg=document.createElementNS(tT,"svg");e.setAttribute("class","rough-annotation");const n=e.style;n.position="absolute",n.top="0",n.left="0",n.overflow="visible",n.pointerEvents="none",n.width="100px",n.height="100px";const r=this._config.type==="highlight";if(this._e.insertAdjacentElement(r?"beforebegin":"afterend",e),this._state="not-showing",r){const i=window.getComputedStyle(this._e).position;(!i||i==="static")&&(this._e.style.position="relative")}this.attachListeners()}}detachListeners(){window.removeEventListener("resize",this._resizeListener),this._ro&&this._ro.unobserve(this._e)}attachListeners(){this.detachListeners(),window.addEventListener("resize",this._resizeListener,{passive:!0}),!this._ro&&"ResizeObserver"in window&&(this._ro=new window.ResizeObserver(e=>{for(const n of e)n.contentRect&&this._resizeListener()})),this._ro&&this._ro.observe(this._e)}haveRectsChanged(){if(this._lastSizes.length){const e=this.rects();if(e.length!==this._lastSizes.length)return!0;for(let n=0;n<e.length;n++)if(!this.isSameRect(e[n],this._lastSizes[n]))return!0}return!1}isSameRect(e,n){const r=(i,o)=>Math.round(i)===Math.round(o);return r(e.x,n.x)&&r(e.y,n.y)&&r(e.w,n.w)&&r(e.h,n.h)}isShowing(){return this._state!=="not-showing"}refresh(){this.isShowing()&&!this.pendingRefresh&&(this.pendingRefresh=Promise.resolve().then(()=>{this.isShowing()&&this.show(),delete this.pendingRefresh}))}show(){switch(this._state){case"unattached":break;case"showing":this.hide(),this._svg&&this.render(this._svg,!0);break;case"not-showing":this.attach(),this._svg&&this.render(this._svg,!1)}}hide(){if(this._svg)for(;this._svg.lastChild;)this._svg.removeChild(this._svg.lastChild);this._state="not-showing"}remove(){this._svg&&this._svg.parentElement&&this._svg.parentElement.removeChild(this._svg),this._svg=void 0,this._state="unattached",this.detachListeners()}render(e,n){let r=this._config;n&&(r=JSON.parse(JSON.stringify(this._config)),r.animate=!1);const i=this.rects();let o=0;i.forEach(l=>o+=l.w);const s=r.animationDuration||800;let a=0;for(let l=0;l<i.length;l++){const c=s*(i[l].w/o);Y3(e,i[l],r,a+this._animationDelay,c,this._seed),a+=c}this._lastSizes=i,this._state="showing"}rects(){const e=[];if(this._svg)if(this._config.multiline){const n=this._e.getClientRects();for(let r=0;r<n.length;r++)e.push(this.svgRect(this._svg,n[r]))}else e.push(this.svgRect(this._svg,this._e.getBoundingClientRect()));return e}svgRect(e,n){const r=e.getBoundingClientRect(),i=n;return{x:(i.x||i.left)-(r.x||r.left),y:(i.y||i.top)-(r.y||r.top),w:i.width,h:i.height}}}function J3(t,e){return new X3(t,e)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Uh=function(){return Uh=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Uh.apply(this,arguments)};function Z3(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}var ej=le.createContext(null),tj=le.createContext(null),nj=function(t,e){var n=le.useContext(ej),r=le.useContext(tj),i=le.useRef({annotation:t,context:n,dispatch:r,order:e});le.useEffect(function(){var o=i.current,s=o.annotation,a=o.context,l=o.dispatch,c=o.order;if(a&&l)return l({type:"ADD",payload:{annotation:s,order:c}})},[])},Bv=function(t){var e=t.animate,n=e===void 0?!0:e,r=t.animationDelay,i=r===void 0?0:r,o=t.animationDuration,s=o===void 0?800:o,a=t.brackets,l=t.children,c=t.color,p=t.customElement,h=p===void 0?"span":p,f=t.getAnnotationObject,d=t.iterations,_=d===void 0?2:d,v=t.multiline,E=v===void 0?!1:v,m=t.order,g=t.padding,w=g===void 0?5:g,y=t.show,I=y===void 0?!1:y,C=t.strokeWidth,S=C===void 0?1:C,T=t.type,P=T===void 0?"underline":T,b=Z3(t,["animate","animationDelay","animationDuration","brackets","children","color","customElement","getAnnotationObject","iterations","multiline","order","padding","show","strokeWidth","type"]),k=le.useRef(null),x=le.useRef(),O=le.useRef({playing:!1,timeout:null}),M=le.useRef({animate:n,animationDuration:s,brackets:a,color:c,getAnnotationObject:f,iterations:_,multiline:E,padding:w,strokeWidth:S,type:P}),U=le.useCallback(function(){O.current.timeout||(O.current.timeout=window.setTimeout(function(){var H,q;O.current.playing=!0,(q=(H=x.current)===null||H===void 0?void 0:H.show)===null||q===void 0||q.call(H),window.setTimeout(function(){O.current.playing=!1,O.current.timeout=null},s)},i))},[i,s]),K=le.useCallback(function(){var H,q;(q=(H=x.current)===null||H===void 0?void 0:H.hide)===null||q===void 0||q.call(H),O.current.playing=!1,O.current.timeout&&(clearTimeout(O.current.timeout),O.current.timeout=null)},[]),G=le.useCallback(function(){return x.current},[x]);return nj({getAnnotation:G,show:U,hide:K},typeof m=="string"?parseInt(m):m),le.useEffect(function(){var H=M.current,q=H.getAnnotationObject;return x.current=J3(k.current,H),q&&q(x.current),function(){var F,N;(N=(F=x.current)===null||F===void 0?void 0:F.remove)===null||N===void 0||N.call(F)}},[]),le.useEffect(function(){I?U():K()},[x,I,i,O,s,U,K]),le.useEffect(function(){x.current&&(x.current.animate=n,x.current.animationDuration=s,x.current.color=c,x.current.strokeWidth=S,x.current.padding=w)},[x,n,s,c,S,w]),zn.createElement(h,Uh({ref:k},b),l)};const rj=t=>t||new Date().toISOString().slice(0,10),qv=[{label:"😊 Happy",value:"happy",emoji:"😊"},{label:"😐 Neutral",value:"neutral",emoji:"😐"},{label:"😔 Sad",value:"sad",emoji:"😔"},{label:"😠 Angry",value:"angry",emoji:"😠"},{label:"😴 Tired",value:"tired",emoji:"😴"},{label:"😇 Grateful",value:"grateful",emoji:"😇"}],$v=["What are you grateful for today?","Describe a challenge you overcame.","What made you smile today?","What is one thing you want to improve tomorrow?","Write about a small win you had today.","How did you take care of yourself today?","What is something you learned today?"],ij={backgroundImage:"repeating-linear-gradient(0deg, var(--journal-bg, #fdf6e3) 0px, var(--journal-bg, #fdf6e3) 31px, var(--journal-line, #e0d7c3) 32px, var(--journal-bg, #fdf6e3) 33px)",backgroundColor:"var(--journal-bg, #fdf6e3)"},oj={border:"3px solid #222",borderRadius:"32px",boxShadow:"0 6px 32px 0 rgba(60,40,10,0.10), 0 0 0 6px #f5e9c6"},sj=({appDate:t})=>{const{user:e}=Co(),[n,r]=le.useState(rj(t)),[i,o]=le.useState(""),[s,a]=le.useState(""),[l,c]=le.useState(""),[p,h]=le.useState(!1),[f,d]=le.useState(!1),[_,v]=le.useState(!1),[E,m]=le.useState([]),[g,w]=le.useState(""),[y,I]=le.useState(!1);le.useEffect(()=>{c($v[new Date(n).getDate()%$v.length])},[n]),le.useEffect(()=>{if(!e)return;h(!0),d(!1),(async()=>{const P=ht(Ke,"users",e.uid,"journal",n),b=await mE(P);b.exists()?(o(b.data().text||""),a(b.data().mood||"")):(o(""),a("")),h(!1)})()},[e,n]),le.useEffect(()=>{!e||!y||dN(async()=>{const{collection:T,getDocs:P}=await Promise.resolve().then(()=>NP);return{collection:T,getDocs:P}},void 0).then(({collection:T,getDocs:P})=>{(async()=>{const k=T(Ke,"users",e.uid,"journal");P(k).then(x=>{const O=[];x.forEach(M=>{O.push({date:M.id,mood:M.data().mood||"",text:M.data().text||""})}),m(O)})})()})},[e,y]);const C=async()=>{e&&(v(!0),await vn(ht(Ke,"users",e.uid,"journal",n),{text:i,mood:s}),v(!1),d(!0),setTimeout(()=>d(!1),1500))},S=E.filter(T=>T.text.toLowerCase().includes(g.toLowerCase())||T.date.includes(g)||T.mood.toLowerCase().includes(g.toLowerCase()));return B.jsxs("div",{className:"relative max-w-3xl mx-auto mt-8 p-6 md:p-10 overflow-hidden",style:{...ij,...oj,fontFamily:"Patrick Hand, Caveat, Gloria Hallelujah, cursive",position:"relative"},children:[B.jsx("style",{children:`
        :root {
          --journal-bg: #fdf6e3;
          --journal-line: #e0d7c3;
          --journal-hole-bg: #e0d7c3;
          --journal-hole-border: #b7a77a;
        }
        .dark :root, .dark body {
          --journal-bg: #23272e;
          --journal-line: #3b4252;
          --journal-hole-bg: #3b4252;
          --journal-hole-border: #6b7280;
        }
      `}),B.jsx("div",{className:"absolute left-0 top-8 flex flex-col gap-8 h-[90%] z-10",children:[...Array(6)].map((T,P)=>B.jsx("span",{className:"w-4 h-4 rounded-full shadow-inner block ml-[-28px]",style:{background:"var(--journal-hole-bg, #e0d7c3)",border:"2px solid var(--journal-hole-border, #b7a77a)"}},P))}),B.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[B.jsx("span",{className:"text-3xl md:text-4xl font-extrabold text-sky-700 dark:text-sky-300 tracking-tight drop-shadow-xl uppercase select-none flex items-center gap-2 font-hand",children:B.jsx(Bv,{type:"underline",show:!0,color:"#f59e42",animationDuration:1200,padding:6,strokeWidth:3,children:B.jsx("span",{children:"📘 Daily Journal"})})}),B.jsx("span",{className:"text-2xl md:text-3xl select-none",children:"✏️"})]}),B.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mb-6 items-center justify-between",children:[B.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[B.jsx("label",{className:"text-lg font-bold text-gray-700 dark:text-gray-200 font-hand",children:"Date:"}),B.jsx("input",{type:"date",value:n,onChange:T=>r(T.target.value),className:"rounded-xl px-4 py-2 border-2 border-dashed border-sky-400 bg-[#fdf6e3] text-gray-900 font-hand focus:outline-none focus:ring-2 focus:ring-sky-400 transition w-full md:w-auto shadow-md font-semibold",style:{boxShadow:"2px 2px 0 #e0d7c3"}}),B.jsx("span",{className:"ml-2 text-xl select-none",children:"☀️"})]}),B.jsxs("button",{className:"px-4 py-2 rounded-xl border-2 border-dashed border-sky-400 bg-[#fffbe6] hover:bg-[#fdf6e3] text-sky-700 font-bold shadow-lg transition w-full md:w-auto tracking-wide font-hand flex items-center gap-2",onClick:()=>I(T=>!T),type:"button",children:[y?"Hide History":"Show History"," ",B.jsx("span",{children:"📖"})]})]}),B.jsxs("div",{className:"mb-6 flex flex-wrap gap-3 items-center justify-center",children:[B.jsx("span",{className:"text-lg font-bold text-gray-700 dark:text-gray-200 font-hand",children:"Mood:"}),qv.map(T=>B.jsx("button",{className:`px-4 py-2 rounded-full text-2xl border-2 border-dashed shadow-lg transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-sky-400 font-hand ${T.value===s?"bg-sky-200 text-sky-900 border-sky-700 scale-110 ring-2 ring-sky-400":"bg-[#fffbe6] text-gray-900 border-sky-300 hover:bg-sky-100"}`,onClick:()=>a(T.value),type:"button","aria-label":T.label,style:{boxShadow:"2px 2px 0 #e0d7c3"},children:T.emoji},T.value))]}),B.jsx("div",{className:"mb-6 text-center text-sky-700 dark:text-sky-300 italic text-xl font-medium tracking-wide animate-fade-in font-hand",children:B.jsx(Bv,{type:"box",show:!0,color:"#f59e42",animationDuration:900,padding:8,strokeWidth:2,children:l})}),B.jsx("div",{className:"mb-6 rounded-2xl overflow-hidden border-2 border-dashed border-sky-300 shadow-lg bg-[#fffbe6] font-hand",style:{boxShadow:"2px 2px 0 #e0d7c3"},children:B.jsx(K3,{value:i,onChange:o,theme:"snow",className:"rounded-2xl min-h-[180px] bg-[#fffbe6] border-none focus:outline-none text-lg font-hand",readOnly:_,placeholder:"Write your thoughts, reflections, or gratitude for today..."})}),B.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between mb-4",children:[B.jsxs("button",{className:"px-8 py-3 rounded-xl border-2 border-dashed border-sky-400 bg-gradient-to-r from-[#ffe6b3] to-[#fdf6e3] hover:from-[#fdf6e3] hover:to-[#ffe6b3] text-sky-800 font-extrabold shadow-xl transition w-full md:w-auto text-lg tracking-wider uppercase font-hand flex items-center gap-2",onClick:C,disabled:_,type:"button",children:[B.jsx("span",{children:"💾"})," ",_?"Saving...":"Save"]}),f&&B.jsx("span",{className:"text-green-500 font-bold text-lg animate-pulse font-hand",children:"Saved!"})]}),y&&B.jsxs("div",{className:"mt-8 bg-[#fffbe6]/90 rounded-2xl p-6 border-2 border-dashed border-sky-200 shadow-2xl max-h-[400px] overflow-y-auto transition-all font-hand",style:{boxShadow:"2px 2px 0 #e0d7c3"},children:[B.jsxs("div",{className:"mb-4 flex flex-col md:flex-row gap-3 items-center justify-between",children:[B.jsx("input",{type:"text",value:g,onChange:T=>w(T.target.value),placeholder:"Search journal entries...",className:"rounded-xl px-4 py-2 border-2 border-dashed border-sky-400 bg-[#fffbe6] text-gray-900 font-hand focus:outline-none focus:ring-2 focus:ring-sky-400 transition w-full md:w-auto shadow-md font-semibold",style:{boxShadow:"2px 2px 0 #e0d7c3"}}),B.jsx("span",{className:"text-xl select-none",children:"🔍"})]}),B.jsxs("div",{children:[S.length===0&&B.jsx("div",{className:"text-center text-gray-500",children:"No entries found."}),S.map(T=>{var P;return B.jsxs("div",{className:"mb-6 p-4 rounded-2xl border-2 border-dashed border-sky-100 bg-gradient-to-br from-[#fffbe6] to-[#fdf6e3] shadow-lg font-hand",style:{boxShadow:"2px 2px 0 #e0d7c3"},children:[B.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[B.jsx("span",{className:"text-2xl",children:((P=qv.find(b=>b.value===T.mood))==null?void 0:P.emoji)||"📝"}),B.jsx("span",{className:"text-xs text-gray-500 font-mono",children:T.date})]}),B.jsx("div",{className:"prose prose-base max-w-none font-hand",dangerouslySetInnerHTML:{__html:T.text}})]},T.date)})]})]}),B.jsx("div",{className:"pointer-events-none absolute inset-0 z-0","aria-hidden":"true",children:[...Array(18)].map((T,P)=>B.jsx("div",{className:"w-full h-[1px]",style:{background:"var(--journal-line, #e0d7c3)",opacity:.6,position:"absolute",top:`${(P+1)*32}px`}},P))})]})},iT=le.createContext(void 0),aj=()=>{const t=le.useContext(iT);if(!t)throw new Error("useCheatMenu must be used within CheatMenuContext.Provider");return t};function lj(){const[t,e]=zn.useState("habits"),[n,r]=zn.useState(null),[i,o]=zn.useState([]),[s,a]=zn.useState([]),{user:l}=Co();zn.useEffect(()=>{if(!l)return;const m=To(Ke,"users",l.uid,"habits"),g=wi(m,I=>{o(I.docs.map(C=>{const S=C.data();return{id:typeof C.id=="string"?parseInt(C.id):C.id,name:S.name,doneToday:S.doneToday,streak:S.streak,lastCompleted:S.lastCompleted,history:S.history||[]}}))}),w=To(Ke,"users",l.uid,"reminders"),y=wi(w,I=>{a(I.docs.map(C=>{const S=C.data();return{id:typeof C.id=="string"?parseInt(C.id):C.id,hour:S.hour,minute:S.minute,message:S.message,sound:S.sound,vibrate:S.vibrate}}))});return()=>{g(),y()}},[l]);const c=i.length,p=s.length,h=async()=>{if(l)for(const m of i)await vn(ht(Ke,"users",l.uid,"habits",m.id.toString()),{...m,doneToday:!1,streak:0,lastCompleted:null,history:[]})},f=async()=>{if(!l)return;const m=n||new Date().toISOString().slice(0,10);for(const g of i)await vn(ht(Ke,"users",l.uid,"habits",g.id.toString()),{...g,doneToday:!0,streak:g.streak+1,lastCompleted:m,history:[...g.history,m]})},d=async()=>{if(l)for(const m of s)await so(ht(Ke,"users",l.uid,"reminders",m.id.toString()))},_=async()=>{if(!l)return;const m={id:Date.now(),name:"Test Habit "+Math.floor(Math.random()*1e3),doneToday:!1,streak:0,lastCompleted:null,history:[]};await vn(ht(Ke,"users",l.uid,"habits",m.id.toString()),m)},v=async()=>{if(!l)return;const m={id:Date.now()+Math.floor(Math.random()*1e4),hour:12,minute:0,message:"Test Reminder",sound:!0,vibrate:!0};await vn(ht(Ke,"users",l.uid,"reminders",m.id.toString()),m)},E=async()=>{if(!l||!window.confirm("Are you absolutely sure you want to delete ALL your data? This cannot be undone! Type DELETE in the next prompt to confirm."))return;if(window.prompt("Type DELETE to confirm you want to erase all your data. This action is irreversible.")!=="DELETE"){alert("Data deletion cancelled.");return}for(const w of i)await so(ht(Ke,"users",l.uid,"habits",w.id.toString()));for(const w of s)await so(ht(Ke,"users",l.uid,"reminders",w.id.toString()));alert("All your data has been deleted. The app is now reset.")};return B.jsx(iT.Provider,{value:{habits:i,reminders:s,habitsCount:c,remindersCount:p,onResetHabits:h,onMarkAllDone:f,onClearReminders:d,onAddTestHabit:_,onAddTestReminder:v,appDate:n,setAppDate:r},children:B.jsxs(rN,{children:[B.jsxs("div",{className:"w-full max-w-2xl mx-auto",children:[B.jsxs("div",{className:"flex justify-center gap-4 mb-6 mt-2",children:[B.jsx("button",{className:`px-4 py-2 rounded-t-lg font-semibold transition-colors focus:outline-none ${t==="habits"?"bg-sky-400 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100"}`,onClick:()=>e("habits"),children:"Habits"}),B.jsx("button",{className:`px-4 py-2 rounded-t-lg font-semibold transition-colors focus:outline-none ${t==="schedule"?"bg-sky-400 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100"}`,onClick:()=>e("schedule"),children:"Time-blocks"}),B.jsx("button",{className:`px-4 py-2 rounded-t-lg font-semibold transition-colors focus:outline-none ${t==="analytics"?"bg-sky-400 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100"}`,onClick:()=>e("analytics"),children:"Analytics"}),B.jsx("button",{className:`px-4 py-2 rounded-t-lg font-semibold transition-colors focus:outline-none ${t==="journal"?"bg-sky-400 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100"}`,onClick:()=>e("journal"),children:"Journal"})]}),t==="habits"&&B.jsx(iN,{appDate:n,setAppDate:r}),t==="schedule"&&B.jsx(lN,{}),t==="analytics"&&B.jsx(uN,{}),t==="journal"&&B.jsx(sj,{appDate:n})]}),B.jsx(cN,{habitsCount:c,remindersCount:p,onResetHabits:h,onMarkAllDone:f,onClearReminders:d,onAddTestHabit:_,onAddTestReminder:v,appDate:n,setAppDate:r,onDeleteAllData:E})]})})}function uj(){return B.jsx(eN,{children:B.jsx(lj,{})})}vf.createRoot(document.getElementById("root")).render(B.jsxs(zn.StrictMode,{children:[B.jsx(uj,{}),","]}));
